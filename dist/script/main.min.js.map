{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/elmer-common/lib/index.js","webpack:///./src/inject/injectable.ts","webpack:///./src/hooks/hookUtils.ts","webpack:///./src/init/globalUtil.ts","webpack:///./src/hooks/index.ts","webpack:///./src/component/Component.ts","webpack:///./node_modules/elmer-virtual-dom/lib/RenderingSyntax/ASyntax.js","webpack:///./src/inject/index.ts","webpack:///../elmer-redux/node_modules/elmer-common/lib/index.js","webpack:///../elmer-redux/lib/redux/ReduxGlobalStateKeys.js","webpack:///./node_modules/elmer-common/lib/BaseModule/StaticCommon.js","webpack:///./src/inject/createClassFactory.ts","webpack:///../elmer-redux/node_modules/elmer-common/lib/BaseModule/StaticCommon.js","webpack:///../elmer-redux/lib/redux/defineReduxProvider.js","webpack:///./src/component/declareComponent.ts","webpack:///./node_modules/elmer-virtual-dom/lib/index.js","webpack:///./node_modules/elmer-virtual-dom/lib/VirtualRender/VirtualRenderDiff.js","webpack:///./node_modules/elmer-worker/lib/StaticFunc.js","webpack:///./src/domEvent/ElmerDom.ts","webpack:///./src/animation/ElmerAnimationProperty.ts","webpack:///./node_modules/reflect-metadata/Reflect.js","webpack:///./src/middleware/RenderMiddleware.ts","webpack:///./src/middleware/ARenderMiddleware.ts","webpack:///./src/middleware/RenderMiddlewarePlugin.ts","webpack:///../elmer-redux/lib/index.js","webpack:///../elmer-redux/lib/redux/createReducer.js","webpack:///./src/propsValidation/index.ts","webpack:///./src/propsValidation/typeChecker.ts","webpack:///./src/propsValidation/validators/dataTypeValidators.ts","webpack:///./example/index.ts","webpack:///./src/render/ElmerUI.ts","webpack:///./node_modules/elmer-common/lib/BaseModule/Common.js","webpack:///./node_modules/elmer-common/lib/Canvas/Canvas.js","webpack:///./node_modules/elmer-common/lib/Animation/MathAnimationApi.js","webpack:///./node_modules/elmer-common/lib/BaseModule/QueueCallFun.js","webpack:///./node_modules/elmer-virtual-dom/lib/HtmlParse.js","webpack:///./node_modules/elmer-virtual-dom/lib/IVirtualElement.js","webpack:///./node_modules/elmer-virtual-dom/lib/VirtualRender/VirtualRender.js","webpack:///./node_modules/elmer-virtual-dom/lib/RenderingSyntax/index.js","webpack:///./node_modules/elmer-virtual-dom/lib/RenderingSyntax/SyntaxText.js","webpack:///./node_modules/elmer-virtual-dom/lib/RenderingSyntax/SyntaxEvent.js","webpack:///./node_modules/elmer-virtual-dom/lib/RenderingSyntax/SyntaxEM.js","webpack:///./node_modules/elmer-virtual-dom/lib/VirtualRender/VirtualNode.js","webpack:///./node_modules/elmer-worker/lib/index.js","webpack:///./node_modules/elmer-worker/lib/ElmerWorker.js","webpack:///./node_modules/elmer-worker/lib/ElmerWorkerCore.js","webpack:///./node_modules/elmer-worker/lib/EnumMessage.js","webpack:///./src/animation/ElmerAnimation.ts","webpack:///./src/animation/ElmerColorMapping.ts","webpack:///./src/events/EventNames.ts","webpack:////Users/moshujiang/.config/yarn/global/node_modules/process/browser.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/domEvent/ElmerDomEvent.ts","webpack:///./src/domEvent/ElmerDomQuery.ts","webpack:///./src/events/ElmerEvent.ts","webpack:///./src/events/EventInWorker.ts","webpack:///./src/middleware/PluginInjectModel.ts","webpack:///./src/middleware/PluginPropsChecking.ts","webpack:///./src/middleware/PluginRedux.ts","webpack:///../elmer-redux/lib/context/defineContext.js","webpack:///../elmer-redux/node_modules/elmer-common/lib/BaseModule/Common.js","webpack:///../elmer-redux/node_modules/elmer-common/lib/Canvas/Canvas.js","webpack:///../elmer-redux/node_modules/elmer-common/lib/Animation/MathAnimationApi.js","webpack:///../elmer-redux/node_modules/elmer-common/lib/BaseModule/QueueCallFun.js","webpack:///../elmer-redux/lib/context/getContext.js","webpack:///../elmer-redux/lib/redux/connect.js","webpack:///../elmer-redux/lib/redux/ReduxController.js","webpack:///./src/polyfill/index.ts","webpack:///./src/render/ElmerRender.ts","webpack:///./src/render/ElmerRenderAttrs.ts","webpack:///./src/render/RenderQueue.ts","webpack:///./example/DemoApp.ts","webpack:///./src/hooks/useEffect.ts","webpack:///./src/hooks/useState.ts","webpack:///./src/hooks/useCallback.ts","webpack:///./src/hooks/useComponent.ts","webpack:///./src/hooks/getNode.ts","webpack:///./src/propsValidation/paramChecker.ts","webpack:///./example/Button.ts","webpack:///./src/component/Loadable.ts","webpack:///./src/widget/redux/ReduxProvider.ts"],"names":["__export","m","p","exports","hasOwnProperty","Object","defineProperty","value","require","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","__","constructor","prototype","create","elmer_common_1","ASyntax","_super","apply","arguments","readVarString","str","myText","result","hasVar","test","char","String","fromCharCode","nstr","replace","strM","match","varStr","leftStr","substr","length","split","join","code","var","runLimitScript","component","optionData","_this","orChar","andChar","xOrChar","xAndChar","varCode","varArr","varArrSplitArr","logicChars","eq","gt","gteq","lt","lteq","neq","seq","sneq","missionId","guid","logicVar","logicCodeArr","index","mIndex","varBindFunc","xcode","varKey","tmpCode","push","parseInt","parseFloat","optionValue","getValue","undefined","map","tmpSplitArr","itemCode","isEmpty","runCode","runFunc","Function","Common","REDUX_REDUCER_DEFINE_STATE_KEY","REDUX_GLOBAL_STATE_KEY","REDUX_GLOBAL_LISTEN_KEY","StaticCommon","getType","val","toString","call","isString","isObject","isArray","isNumeric","isNaN","isDOM","isSVGDOM","isFunction","isNodeList","isRegExp","isPromise","isGlobalObj","isEqual","a","classNameA","classNameB","propsA","getOwnPropertyNames","propsB","i","propName","sleepCall","fn","timeout","obj","tim","sleep","setTimeout","data","key","defaultValue","keyValue","keyArr","isFind","keyStr","tmpData","nextKey","rResult","setValue","isUpdate","Error","keyLen","cKey","getRandomID","now","Date","year","getFullYear","month","getMonth","date","getDate","hour","getHours","minute","getMinutes","second","getSeconds","reSecond","getMilliseconds","randValue","Math","random","toHumpStr","firstUpperCase","vStr","vArr","toUpperCase","humpToStr","toLowerCase","rStr","$1","extend","desc","src","setReadOnly","ignoreKeys","assign","indexOf","defineReadOnlyProperty","merge","obj1","obj2","sKey","Boolean","propertyKey","propertyValue","paramObj","paramPropertyKey","paramPropertyValue","configurable","enumerable","writable","launchFullscreen","element","requestFullscreen","exitFullscreen","document","isFullScreen","S4","getUri","queryString","location","search","strArr","tmpItem","tmpM","getQuery","strLen","len","c","charCodeAt","defineReadonlyProperty","target","getEnvFromCommand","commandList","env","tmpCommand","tmpMatch","lMatch","getCommand","command","cmdKey","findKey","findValue","keyReg","keyValueReg","isCmdKey","cmd","keyMatchValue","ReduxGlobalStateKeys_1","defineReduxProvider","getGlobalState","defineGlobalState","dataID","listenerID","reduxState","listener","state","VirtualRenderDiff","diff","event","oldParentDom","matchDom","matchIndex","lastMatchIndex","children","diffIndex","tmpOld","isDiff","checkResult","sameNode","dom","status","hasChange","changeAttrs","updateProps","deleteAttrs","deleteProps","virtualID","tagAttrs","similar","s","t","toFixed","l","n","f","j","si","tj","cost","charAt","min","res","newDom","oldDom","similarPercent","tagName","props","smpercent","insm","compareChildrenStructure","attrsm","attrCode","max","innerHTML","newProps_1","oldProps_1","newPropsKeys_1","keys","oldPropsKeys","updateProps_1","tmpKey","strToFunc","funCode","funcToStr","func","onmessage","e","msgData","msgType","type","elmer","self","dataType","tmpFn","globalName","sendMsg","id","message","statusCode","objKey","callbackName","method","selfFunc","callResult","console","error","objectToWorkerData","funcData","objectToWorkerCode","className","innerObjKey","format","_loop_1","tmpValue","tmpType","regCode","tmpResult_1","JSON","stringify","classToWorkerCode","coreCode","defineName","name","funcKey","fCode","workerDataToObject","eventData","__spreadArrays","il","z","r","k","jl","Reflect","factory","root","global","exporter","makeExporter","previous","hasOwn","supportsSymbol","Symbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","iterator","supportsCreate","supportsProto","downLevel","HashMap","MakeDictionary","has","get","functionPrototype","getPrototypeOf","usePolyfill","process","_Map","Map","entries","CreateMapPolyfill","_Set","Set","CreateSetPolyfill","_WeakMap","WeakMap","CreateWeakMapPolyfill","Metadata","decorate","decorators","attributes","IsUndefined","IsArray","TypeError","IsObject","IsNull","ToPropertyKey","DecorateProperty","IsConstructor","DecorateConstructor","metadata","metadataKey","metadataValue","decorator","IsPropertyKey","OrdinaryDefineOwnMetadata","defineMetadata","hasMetadata","OrdinaryHasMetadata","hasOwnMetadata","OrdinaryHasOwnMetadata","getMetadata","OrdinaryGetMetadata","getOwnMetadata","OrdinaryGetOwnMetadata","getMetadataKeys","OrdinaryMetadataKeys","getOwnMetadataKeys","OrdinaryOwnMetadataKeys","deleteMetadata","metadataMap","GetOrCreateMetadataMap","delete","size","targetMetadata","decorated","descriptor","O","P","Create","set","MetadataKey","parent","OrdinaryGetPrototypeOf","ToBoolean","MetadataValue","ownKeys","parentKeys","_i","ownKeys_1","hasKey","add","_a","parentKeys_1","keysObj","GetIterator","next","IteratorStep","nextValue","IteratorValue","IteratorClose","Type","x","IsSymbol","ToPrimitive","input","PreferredType","hint","exoticToPrim","GetMethod","OrdinaryToPrimitive","toString_1","IsCallable","valueOf","toString_2","argument","ToString","V","iterResult","done","proto","prototypeProto","cacheSentinel","arraySentinel","MapIterator","values","selector","_index","_keys","_values","_selector","throw","return","_cacheKey","_cacheIndex","_find","clear","getKey","getEntry","insert","_","_map","UUID_SIZE","rootKey","CreateUniqueKey","_key","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","GenRandomBytes","Uint8Array","crypto","getRandomValues","msCrypto","offset","byte","createReducer","nodeKey","reducer","defineReducerObject","attachReducerToController","controller","reducerObj","reducers","defineStateOperateAction","defineReducer","StaticCommon_1","Canvas","doRemoveAnimationList","requestAnimationFrame","window","callback","currTime","getTime","timeToCall","lastTime","cancelAnimationFrame","clearTimeout","startAnimation","callBack","targetObj","handler","animation","splice","stopAnimation","MathAnimationApi","Linear","currentTime","beginValue","changeValue","duration","Quad","easeIn","pow","easeOut","easeInOut","Cubic","Quart","Quint","Sine","cos","PI","sin","Expo","Circle","sqrt","Elastic","abs","asin","Back","Bounce","__awaiter","thisArg","_arguments","generator","adopt","resolve","Promise","reject","fulfilled","step","rejected","then","__generator","body","label","sent","trys","ops","y","g","verb","v","op","pop","callYieldFunc","callbackObj","mLen","lastKey","_b","_c","queueCallRaceAll","paramList","option","allStatus_1","allResult_1","checkAllStatus_1","hasError","item","taskID","param","taskId","callbackResult","lastResult","params","resp","catch","exception","statusText","queueCallFunc","doActionData","Result","yieldResult","doNext","yResult","goNext","err","throwException","excpetion","tParam","options","lKey","lstResult","lstKey","paramValue","owner","operateCallback","_option","unshift","HtmlParse","autoCloseTagList","rootNodes","mergeArray","array1","array2","resultData","parse","htmlCode","events","path","nodeId","parseNode","getNodeByPath","rootNode","checkNode","checkIndex","checkIndexValue","parentNode","rootNodeKey","componentName","checkCode","commentNode","parseComment","leftCode","parseNextNode","lStart","txt","leftHtmlCode","isClose","endTagIndex","commentCode","tagReg","tagNoAttrReg","tagMatch","autoIndex","closeIndex","mLeftCode","attrsResult","readAttrs","isAutoClose","checkAutoClose","newNode","attrs","noAttrMatch","endTagReg","endTagMatch","checkEndTag","parentNodePath","nextParentNode","leftIndex","innerHTML_1","attrHtml","attrArr","attrValue","readAttrValue","valChar","startsWith","splitIndex","charIndex","exResult","attrKeyReg","extAttrKeyReg","onlyAttrKeyReg","attrMatch","attrKey","attrValueResult","extAttrMatch","onlyAttrKeyMatch","reg","VirtualElementOperate","APPEND","DELETE","MOVE","MOVEUPDATE","NORMAL","UPDATE","__assign","RenderingSyntax_1","VirtualRenderDiff_1","VirtualRender","virtualDom","plugin","SyntaxText","SyntaxEvent","SyntaxEM","virtualDiff","bind","sessionId","evtId","unBind","eventId","setVirtualElement","render","domData","oldDomData","renderDom","beforeEventName","eventObjKey","eventObj","eventCallback","event_1","cancelBubble","vdom","rootPath","replaceContent","forEach","doDiff","optionsData","isUserComponent","checkItem","contextWrapperReg","uItem","isContextKey","renderKeyReg","renderKeyMatch","contextRegKey","isContent","init","replaceAt","contextMatch","contextKey","zLen","optionalData","deleteElements","hasForEach","hasRenderChange","hasRenderInnerHTML","forLen","kIndex","forDoms","repeatRender","forEachDoms","forEachRender","renderAttribute","diffResult","domIndex","help","isLastNode","myEvent","updateParentPath","myResult","curAttrHtmlCode","tmpDom","dataSet","newAttrKey","isEvent","renderEvent","break","renderResult","toCodeAttrValue","eventName","repeatFormula","forReg","forMatch","resultDoms","itemKey","dataKey","repeatData","forKey","clone","newItemData","indexKey","childrenLen_1","repeateDom_1","checkDom","ASyntax_1","callbackReg_1","defaultReg_1","lambdaReg_1","logicReg_1","cTxt_1","keyMatch","codeText_1","hasChange_1","isLogicChecking","bindKey","bindValue","callbackMatch","callbackId","action","callbackParams_1","pV","df","dVData","dV","lbdM","condition","lamdbValue","runScript","logicV","emValue","VirtualNode","nodes","vId","getNode","append","insertChild","pIndex","updatePath","appendAt","insertVE","myIndex","insertIndex","replaceChild","replaceList","newChildren_1","updateInnerHTML","remove","removeChild","rmIndex","removeAt","findDom","getElementByPath","tmpPoistion","getPrev","session","refDom","parent_1","tmpChild","getNext","parent_2","cloneData","cloneProps","newItem","changeStatus","subItem","code_1","vItem","targetElement","parentPath","position","newPath","StaticFunc_1","objectToWorkerCodeFn","objectToWorkerDataFn","workerDataToObjectFn","ElmerWorkerCore_1","ElmerWorker","promiseData","createWorker","bindEvent","callMethod","methodName","callObjMethod","addFunc","addObject","dispose","worker","terminate","on","getInitPropsCode","source","myBlob","Blob","initBlobCode","Worker","URL","createObjectURL","addEventListener","cancel","srcEvent","methodResponse","callMethodResponse","initResponse","msg","postMessage","strToFuncCode","ElmerWorkerCore","staticCode","default","module","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","queue","draining","currentQueue","queueIndex","cleanUpNextTick","concat","drainQueue","run","nextTick","args","Item","array","title","browser","argv","version","versions","noop","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","defineContext","cOptions","saveAttrKey","contextData","oldData","defineData","getContext","defineRules","contextResult","dRule","dData","rule","defineReduxProvider_1","connect","reduxController","Component","mapStateToPropsFn","mapDispatchToPropsFn","stateID","stateData","checkSelector","gState","stateWatchs","mapDispatchToProps","mapStateToProps","createReducer_1","ReduxController","reducersData","initComponents","autoSave","saveDataKey","setNotifyCallback","callbackNames","notifyCallbackNames","checkInitStateData","getStateByConnectSelector","getStates","listenData","getWatches","listen","getDispatchByConnectSelector","watches","dispatch","checkInitComponents","targetComponent","nodeData","keysData","keysData_1","removeComponent","pushState","doDispatch","saveStore","setItem","stack","allowKeys","reducerKeys","tmpReducerKey","this_1","oldStateData","checkReducer","newState","updateState_1","stateKey","defineStateKey","defineStateValue","checkChangeComponent","reducerKeys_1","state_1","stateValue","propsKey","propsValue","watchesData","watchKeys","watchKeys_1","wKey","tmpWatch","mapState","checkChangeForComponent","tmpSelector","tmpComponents","_loop_2","tmpComponent","checkProps","hasChanged","mapKey"],"mappings":";QAAA;QACA;QACA;QACA;;;QAGA;QACA;QACA;QACA,QAAQ,oBAAoB;QAC5B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;;QAEA;;;QAGA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;;;QAIA;QACA;QACA,gDAAgD,iCAAiC;QACjF;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;;;QAGA;;QAEA;QACA,iCAAiC;;QAEjC;QACA;QACA;QACA,KAAK;QACL;QACA;QACA;QACA,MAAM;QACN;;QAEA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,wBAAwB,kCAAkC;QAC1D,MAAM;QACN;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;QAEA;QACA,0CAA0C,oBAAoB,WAAW;;QAEzE;QACA;QACA;QACA;QACA,gBAAgB,uBAAuB;QACvC;;;QAGA;QACA;;;;;;;;ACrMa;;AACb,SAASA,QAAT,CAAkBC,CAAlB,EAAqB;AACjB,SAAK,IAAIC,CAAT,IAAcD,CAAd;AAAiB,YAAI,CAACE,QAAQC,cAAR,CAAuBF,CAAvB,CAAL,EAAgCC,QAAQD,CAAR,IAAaD,EAAEC,CAAF,CAAb;AAAjD;AACH;AACDG,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACAP,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACA,iC;;;;;;;;;;;;;QCIgB,U,GAAA,U;QA6BA,S,GAAA,S;;;;AA1ChB;;AACA;;AACA;AAEO,IAAM,0DAAyB,SAAzB,sBAAyB,CAAC,MAAD,EAAa,WAAb,EAAkC,aAAlC,EAAoD;AACtF,WAAO,cAAP,CAAsB,MAAtB,EAA8B,WAA9B,EAA2C;AACvC,sBAAc,KADyB;AAEvC,oBAAY,IAF2B;AAGvC,eAAO,aAHgC;AAIvC,kBAAU;AAJ6B,KAA3C;AAMH,CAPM;AASD,SAAU,UAAV,CAAqB,SAArB,EAAsC;AACxC,QAAG,cAAc,SAAd,IAA2B,cAAc,IAAzC,IAAiD,UAAU,MAAV,IAAkB,CAAtE,EAAyE;AACrE,cAAM,IAAI,KAAJ,CAAU,uBAAV,CAAN;AACH;AACA;AACD,WAAO,UAAC,YAAD,EAAsB;AACzB,YAAM,aAAyB,QAAQ,WAAR,CAAoB,mBAApB,EAAwC,YAAxC,CAA/B;AACA;AACA;AACA,wCAAe,SAAf,EAA0B,YAA1B,EAAwC;AACpC,gBAAG,UAAH,EAAe;AACX,qBAAkB,qCAAlB,EAAkB,wBAAlB,EAAkB,IAAlB,EAA8B;AAAzB,wBAAM,MAAG,gBAAT;AACD;AACA,wBAAI,QAAQ,YAAZ,EAA0B;AACtB,8BAAM,IAAI,KAAJ,CAAU,QAAV,CAAN;AACH,qBAFD,MAEO,IAAI,UAAU,SAAV,CAAoB,OAApB,CAA4B,GAA5B,MAAqC,CAAC,CAA1C,EAA6C;AAChD,8BAAM,IAAI,KAAJ,CAAU,iBAAK,SAAL,GAAc,6BAAd,GAA6B,GAA7B,GAAgC,gCAA1C,CAAN;AACH;AACJ;AACJ;AACJ,SAXD;AAYH,KAhBD;AAiBH;AAED;;;;;AAKM,SAAU,SAAV,CAAuB,YAAvB,EAA4D,SAA5D,EAA8E;AAAE;SAAA,U,EAAA,qB,EAAA,I,EAAa;AAAb;;AAClF,WAAO,UAAC,MAAD,EAAc,WAAd,EAAiC;AAClC,eAAO,WAAP,IAAsB,4CAAmB,YAAnB,EAAiC;AACnD,kBAAI,IAD+C;AAEnD,uBAAS;AAF0C,SAAjC,CAAtB;AAIL,KALD;AAMH,C;;;;;;;;;;;;;;;;ACxCM,IAAM,gCAAiB,EAAvB;AAEA,IAAM,sCAAe,SAAf,YAAe,CAAI,GAAJ,EAAe;AACvC,QAAM,YAAY,UAAU,WAAV,CAAlB;AACA,QAAM,aAAa,UAAU,SAAV,CAAnB;AACA,WAAO,aAAa,WAAW,GAAX,CAAb,GAA+B,IAAtC;AACH,CAJM;AAMA,IAAM,sCAAe,SAAf,YAAe,CAAC,GAAD,EAAc,KAAd,EAAuB;AAC/C,QAAM,YAAY,UAAU,WAAV,CAAlB;AACA,QAAI,aAAa,UAAU,SAAV,CAAjB;AACA,QAAG,CAAC,UAAJ,EAAgB;AACZ,qBAAa,EAAb;AACA,kBAAU,SAAV,IAAuB,UAAvB;AACH;AACD,8BAAM,QAAN,CAAe,UAAf,EAA2B,GAA3B,EAAgC,KAAhC;AACH,CARM;AAUA,IAAM,oDAAsB,SAAtB,mBAAsB;AAC/B,WAAO,UAAU,WAAV,CAAP;AACH,CAFM,C;;;;;;;;;;;;AC5BP,IAAM,+BAA+B,aAArC;AAEO,IAAM,gCAAY,SAAZ,SAAY;AACrB,QAAG,CAAC,WAAW,4BAAX,CAAJ,EAA8C;AAC1C,mBAAW,4BAAX,IAA2C;AACvC,uBAAW,EAD4B;AAEvC,wBAAY,EAF2B;AAGvC,wBAAY,EAH2B;AAIvC,qBAAS;AAJ8B,SAA3C;AAMH;AACD,WAAO,WAAW,4BAAX,CAAP;AACH,CAVM;AAWP;;;;;;AAMO,IAAM,gDAAoB,SAApB,iBAAoB,CAAC,QAAD,EAAmB,UAAnB,EAAoC,WAApC,EAAyD;AACtF,QAAM,cAAc,WAApB;AACA,QAAG,aAAa,SAAb,IAA0B,aAAa,IAAvC,IAA+C,SAAS,MAAT,GAAgB,CAAlE,EAAqE;AACjE,eAAO,cAAP,CAAsB,YAAY,UAAlC,EAA8C,QAA9C,EAAwD;AACpD,0BAAc,KADsC;AAEpD,wBAAY,IAFwC;AAGpD,mBAAO,UAH6C;AAIpD,sBAAU;AAJ0C,SAAxD;AAMH,KAPD,MAOO;AACH,YAAG,CAAC,WAAJ,EAAiB;AACb,kBAAM,IAAI,KAAJ,CAAU,wBAAV,CAAN;AACH;AACJ;AACJ,CAdM;AAgBA,IAAM,0CAAiB,SAAjB,cAAiB,CAAC,QAAD,EAAmB,UAAnB,EAAoC,WAApC,EAAyD;AACnF,sBAAkB,QAAlB,EAA4B,UAA5B,EAAwC,WAAxC;AACH,CAFM;AAIA,IAAM,0CAAiB,SAAjB,cAAiB,CAAC,QAAD,EAAiB;AAC3C,WAAO,YAAY,UAAZ,CAAuB,QAAvB,CAAP;AACH,CAFM;AAGP;;;;;AAKO,IAAM,4CAAkB,SAAlB,eAAkB,CAAC,MAAD,EAAgB,QAAhB,EAA6B;AACxD,QAAG,WAAW,SAAX,IAAwB,WAAW,IAAnC,IAA2C,OAAO,MAAP,GAAc,CAA5D,EAA+D;AAC3D,eAAO,cAAP,CAAsB,UAAtB,EAAkC,MAAlC,EAA0C;AACtC,0BAAc,KADwB;AAEtC,wBAAY,IAF0B;AAGtC,mBAAO,QAH+B;AAItC,sBAAU;AAJ4B,SAA1C;AAMH,KAPD,MAOO;AACH,cAAM,IAAI,KAAJ,CAAU,wBAAV,CAAN;AACH;AACJ,CAXM;AAaA,IAAM,sCAAe,SAAf,YAAe,CAAC,MAAD,EAAc;AACtC,WAAO,WAAW,MAAX,CAAP;AACH,CAFM;AAIA,IAAM,0CAAiB,SAAjB,cAAiB,CAAC,SAAD,EAAoB,OAApB,EAAuC,EAAvC,EAAmD;AAC7E,QAAG,OAAH,EAAY;AACR,YAAM,cAAY,WAAlB;AACA,YAAI,YAAY,KAAhB;AACA,gBAAQ,SAAR,CAAkB,SAAlB,GAA8B,SAA9B;AACA,aAAsB,6BAAU,SAAhC,EAAsB,cAAtB,EAAsB,IAAtB,EAA2C;AAAvC,gBAAM,WAAQ,MAAd;AACA,gBAAG,SAAS,SAAT,CAAmB,SAAnB,KAAiC,SAApC,EAA+C;AAC3C,4BAAY,IAAZ;AACA;AACH;AACJ;AACD,YAAG,CAAC,SAAJ,EAAe;AACX,mBAAO,EAAP,KAAc,UAAd,IAA4B,IAA5B;AACA,wBAAU,SAAV,CAAoB,IAApB,CAAyB,OAAzB;AACH;AACJ;AACJ,CAhBM;AAiBP;AACO,IAAM,gCAAa;AACtB,QAAM,iBAAiB,CAAC,UAAD,EAAa,UAAb,EAAyB,OAAzB,EAAiC,SAAjC,EAA2C,MAA3C,EAAmD,SAAnD,EAA6D,SAA7D,EAAuE,UAAvE,EAAmF,QAAnF,CAAvB,CADsB,CAC+F;AACrH,QAAM,gBAAgB,OAAO,cAAP,IACjB,EAAE,WAAW,EAAb,cAA6B,KAA7B,IAAsC,UAAU,CAAV,EAAa,CAAb,EAAc;AAAI,UAAE,SAAF,GAAc,CAAd;AAAkB,KADzD,IAElB,UAAU,CAAV,EAAa,CAAb,EAAc;AACV,aAAK,IAAI,CAAT,IAAc,CAAd,EAAiB;AACb,gBAAI,EAAE,cAAF,CAAiB,CAAjB,KAAuB,eAAe,OAAf,CAAuB,CAAvB,IAA0B,CAArD,EAAuD;AACnD,kBAAE,CAAF,IAAO,EAAE,CAAF,CAAP;AACH;AACJ;AACJ,KARL;AASA,WAAO,UAAU,CAAV,EAAkB,CAAlB,EAAwB;AAC3B,sBAAc,CAAd,EAAiB,CAAjB;AACA,iBAAS,EAAT,GAAW;AAAK,iBAAK,WAAL,GAAmB,CAAnB;AAAuB;AACvC,UAAE,SAAF,GAAc,MAAM,IAAN,GAAa,OAAO,MAAP,CAAc,CAAd,CAAb,IAAiC,GAAG,SAAH,GAAe,EAAE,SAAjB,EAA4B,IAAI,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAhBwB,EAAlB;AAiBP,gB;;;;;;;;;;;;;;;ACnGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;;;;;;;;;;;ACLA;;;;;;;;;;;;;;;;;;;;;AAOO,IAAM,kEAA6B,4CAAnC;AAEP;AAA0D;AAkBtD,uBAAY,KAAZ,EAAsB,OAAtB,EAAiC;AAAjC,oBACI,qBAAO,IADX;AAEI,cAAK,KAAL,GAAa,KAAb;AACA,cAAK,OAAL,GAAe,OAAf;;AACH;AAgBD;;;;;;AAMA,4CAAW,IAAX,EAAuB;AAAE;aAAA,U,EAAA,qB,EAAA,I,EAAa;AAAb;;AACrB,cAAM,IAAI,KAAJ,CAAU,yBAAV,CAAN;AACH,KAFD;AAGA;;;;;;AAMA,6CAAY,IAAZ,EAA8C;AAAE;aAAA,U,EAAA,qB,EAAA,I,EAAa;AAAb;;AAC5C,cAAM,IAAI,KAAJ,CAAU,yBAAV,CAAN;AACH,KAFD;AApDO,qBAAc,0BAAd;AAuDX;AAAC,CAxDD,CAA0D,mBAA1D;QAAsB,S,GAAA,S;;;;;;;ACTT;;AACb,IAAIC,YAAa,aAAQ,UAAKA,SAAd,IAA6B,YAAY;AACrD,QAAIC,iBAAgB,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,yBAAgBL,OAAOQ,cAAP,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUJ,CAAV,EAAaC,CAAb,EAAgB;AAAED,cAAEG,SAAF,GAAcF,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,iBAAK,IAAIV,CAAT,IAAcU,CAAd;AAAiB,oBAAIA,EAAER,cAAF,CAAiBF,CAAjB,CAAJ,EAAyBS,EAAET,CAAF,IAAOU,EAAEV,CAAF,CAAP;AAA1C;AAAwD,SAF9E;AAGA,eAAOQ,eAAcC,CAAd,EAAiBC,CAAjB,CAAP;AACH,KALD;AAMA,WAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,uBAAcC,CAAd,EAAiBC,CAAjB;AACA,iBAASI,EAAT,GAAc;AAAE,iBAAKC,WAAL,GAAmBN,CAAnB;AAAuB;AACvCA,UAAEO,SAAF,GAAcN,MAAM,IAAN,GAAaP,OAAOc,MAAP,CAAcP,CAAd,CAAb,IAAiCI,GAAGE,SAAH,GAAeN,EAAEM,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAZ2C,EAA5C;AAaAX,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIa,iBAAiBZ,mBAAOA,CAAC,CAAR,CAArB;AACA,IAAIa,UAAU,aAAe,UAAUC,MAAV,EAAkB;AAC3Cb,cAAUY,OAAV,EAAmBC,MAAnB;AACA,aAASD,OAAT,GAAmB;AACf,eAAOC,WAAW,IAAX,IAAmBA,OAAOC,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAA3D;AACH;AACDH,YAAQH,SAAR,CAAkBO,aAAlB,GAAkC,UAAUC,GAAV,EAAe;AAC7C,YAAIC,SAASD,GAAb;AACA,YAAIE,SAAS,EAAb;AACA,YAAIC,SAAS,KAAb;AACA,YAAI,QAAQC,IAAR,CAAaJ,GAAb,CAAJ,EAAuB;AACnB,gBAAIK,OAAOC,OAAOC,YAAP,CAAoB,GAApB,CAAX;AACA,gBAAIC,OAAOR,IAAIS,OAAJ,CAAY,MAAZ,EAAoBJ,IAApB,CAAX;AACA,gBAAIK,OAAOF,KAAKG,KAAL,CAAW,oBAAX,CAAX;AACA,gBAAID,IAAJ,EAAU;AACN,oBAAIE,SAASF,KAAK,CAAL,CAAb;AACA,oBAAIG,UAAUb,IAAIc,MAAJ,CAAWJ,KAAK,CAAL,EAAQK,MAAnB,CAAd;AACAb,yBAASU,OAAOI,KAAP,CAAaX,IAAb,EAAmBY,IAAnB,CAAwB,IAAxB,CAAT;AACAhB,yBAASY,QAAQG,KAAR,CAAcX,IAAd,EAAoBY,IAApB,CAAyB,IAAzB,CAAT;AACAd,yBAAS,IAAT;AACH;AACJ,SAXD,MAYK,IAAI,QAAQC,IAAR,CAAaJ,GAAb,CAAJ,EAAuB;AACxB,gBAAIK,OAAOC,OAAOC,YAAP,CAAoB,GAApB,CAAX;AACA,gBAAIC,OAAOR,IAAIS,OAAJ,CAAY,MAAZ,EAAoBJ,IAApB,CAAX;AACA,gBAAIK,OAAOF,KAAKG,KAAL,CAAW,oBAAX,CAAX;AACA,gBAAID,IAAJ,EAAU;AACN,oBAAIE,SAASF,KAAK,CAAL,CAAb;AACA,oBAAIG,UAAUb,IAAIc,MAAJ,CAAWJ,KAAK,CAAL,EAAQK,MAAnB,CAAd;AACAb,yBAASU,OAAOI,KAAP,CAAaX,IAAb,EAAmBY,IAAnB,CAAwB,IAAxB,CAAT;AACAhB,yBAASY,QAAQG,KAAR,CAAcX,IAAd,EAAoBY,IAApB,CAAyB,IAAzB,CAAT;AACAd,yBAAS,IAAT;AACH;AACJ;AACD,eAAO;AACHe,kBAAMjB,MADH;AAEHE,oBAAQA,MAFL;AAGHgB,iBAAKjB;AAHF,SAAP;AAKH,KAjCD;AAkCA;;;;;;AAMAP,YAAQH,SAAR,CAAkB4B,cAAlB,GAAmC,UAAUF,IAAV,EAAgBG,SAAhB,EAA2BC,UAA3B,EAAuC;AACtE,YAAIC,QAAQ,IAAZ;AACA,YAAIC,SAASlB,OAAOC,YAAP,CAAoB,GAApB,CAAb,CAFsE,CAE/B;AACvC,YAAIkB,UAAUnB,OAAOC,YAAP,CAAoB,GAApB,CAAd,CAHsE,CAG9B;AACxC,YAAImB,UAAUpB,OAAOC,YAAP,CAAoB,GAApB,CAAd,CAJsE,CAI9B;AACxC,YAAIoB,WAAWrB,OAAOC,YAAP,CAAoB,GAApB,CAAf,CALsE,CAK7B;AACzC,YAAIqB,UAAU,CAACV,QAAQ,EAAT,EAAaT,OAAb,CAAqB,MAArB,EAA6B,EAA7B,EAAiCA,OAAjC,CAAyC,MAAzC,EAAiD,EAAjD,EAAqDA,OAArD,CAA6D,OAA7D,EAAsEe,MAAtE,EAA8Ef,OAA9E,CAAsF,OAAtF,EAA+FgB,OAA/F,EAAwGhB,OAAxG,CAAgH,IAAhH,EAAsHiB,OAAtH,EAA+HjB,OAA/H,CAAuI,IAAvI,EAA6IkB,QAA7I,CAAd;AACA,YAAIE,SAASD,QAAQZ,KAAR,CAAc,gBAAd,CAAb;AACA,YAAIc,iBAAiBF,QAAQjB,KAAR,CAAc,mBAAd,CAArB;AACA,YAAIoB,aAAa;AACbC,gBAAI,IADS;AAEbC,gBAAI,GAFS;AAGbC,kBAAM,IAHO;AAIbC,gBAAI,GAJS;AAKbC,kBAAM,IALO;AAMbC,iBAAK,IANQ;AAObC,iBAAK,KAPQ;AAQbC,kBAAM;AARO,SAAjB;AAUA,YAAIC,YAAY,KAAKC,IAAL,EAAhB;AACA,YAAIC,WAAW,EAAf;AACA,YAAIC,eAAe,EAAnB;AACA,YAAIC,QAAQ,CAAZ;AACA,YAAIC,SAAS,CAAb;AACA,YAAIC,cAAc,SAAdA,WAAc,CAAUC,KAAV,EAAiB;AAC/B,gBAAIC,SAASR,YAAY,GAAZ,GAAkBI,KAA/B;AACA,gBAAIK,UAAUF,MAAM/B,KAAN,CAAYQ,MAAZ,EAAoBP,IAApB,CAAyB,IAAzB,EAA+BD,KAA/B,CAAqCS,OAArC,EAA8CR,IAA9C,CAAmD,IAAnD,EAAyDD,KAAzD,CAA+DU,OAA/D,EAAwET,IAAxE,CAA6E,GAA7E,EAAkFD,KAAlF,CAAwFW,QAAxF,EAAkGV,IAAlG,CAAuG,GAAvG,CAAd;AACA,gBAAIgC,YAAY,IAAZ,IAAoBA,YAAY,IAAhC,IAAwCA,YAAY,GAApD,IAA2DA,YAAY,GAA3E,EAAgF;AAC5EN,6BAAaO,IAAb,CAAkBD,OAAlB;AACH,aAFD,MAGK;AACD,oBAAI,KAAK7C,IAAL,CAAU6C,OAAV,KAAsB,KAAK7C,IAAL,CAAU6C,OAAV,CAA1B,EAA8C;AAC1CP,6BAASM,MAAT,IAAmBC,QAAQxC,OAAR,CAAgB,IAAhB,EAAsB,EAAtB,EAA0BA,OAA1B,CAAkC,IAAlC,EAAwC,EAAxC,CAAnB;AACAkC,iCAAaO,IAAb,CAAkB,WAAWF,MAAX,GAAoB,KAAtC;AACH,iBAHD,MAIK,IAAI,KAAK5C,IAAL,CAAU6C,OAAV,KAAsB,KAAK7C,IAAL,CAAU6C,OAAV,CAA1B,EAA8C;AAC/CP,6BAASM,MAAT,IAAmBC,QAAQxC,OAAR,CAAgB,IAAhB,EAAsB,EAAtB,EAA0BA,OAA1B,CAAkC,IAAlC,EAAwC,EAAxC,CAAnB;AACAkC,iCAAaO,IAAb,CAAkB,WAAWF,MAAX,GAAoB,KAAtC;AACH,iBAHI,MAIA,IAAIjB,WAAWkB,OAAX,CAAJ,EAAyB;AAC1BN,iCAAaO,IAAb,CAAkBnB,WAAWkB,OAAX,CAAlB;AACH,iBAFI,MAGA,IAAI,QAAQ7C,IAAR,CAAa6C,OAAb,KAAyB,SAAS7C,IAAT,CAAc6C,OAAd,CAA7B,EAAqD;AACtDN,iCAAaO,IAAb,CAAkBD,OAAlB;AACH,iBAFI,MAGA,IAAI,cAAc7C,IAAd,CAAmB6C,OAAnB,CAAJ,EAAiC;AAClCN,iCAAaO,IAAb,CAAkBC,SAASF,OAAT,EAAkB,EAAlB,CAAlB;AACH,iBAFI,MAGA,IAAI,yBAAyB7C,IAAzB,CAA8B6C,OAA9B,CAAJ,EAA4C;AAC7CN,iCAAaO,IAAb,CAAkBE,WAAWH,OAAX,CAAlB;AACH,iBAFI,MAGA;AACD,wBAAIA,YAAY,GAAhB,EAAqB;AACjB,4BAAII,cAAc/B,aAAaC,MAAM+B,QAAN,CAAehC,UAAf,EAA2B2B,OAA3B,CAAb,GAAmDM,SAArE;AACAb,iCAASM,MAAT,IAAmBO,cAAcF,WAAd,GAA4B9B,MAAM+B,QAAN,CAAejC,SAAf,EAA0B4B,OAA1B,CAA5B,GAAiEI,WAApF;AACAV,qCAAaO,IAAb,CAAkB,WAAWF,MAAX,GAAoB,KAAtC;AACH;AACJ;AACJ;AACDJ,qBAAS,CAAT;AACH,SApCD;AAqCAf,eAAO2B,GAAP,CAAW,UAAUT,KAAV,EAAiB;AACxB,gBAAIE,UAAUF,MAAMtC,OAAN,CAAc,SAAd,EAAyB,EAAzB,EAA6BA,OAA7B,CAAqC,SAArC,EAAgD,EAAhD,CAAd;AACA,gBAAIgD,cAAcR,QAAQjC,KAAR,CAAc,GAAd,CAAlB;AACA,gBAAIyC,eAAeA,YAAY1C,MAAZ,GAAqB,CAAxC,EAA2C;AACvC0C,4BAAYD,GAAZ,CAAgB,UAAUE,QAAV,EAAoB;AAChCZ,gCAAYY,QAAZ;AACH,iBAFD;AAGH,aAJD,MAKK;AACDZ,4BAAYG,OAAZ;AACH;AACD,gBAAInB,kBAAkB,CAACP,MAAMoC,OAAN,CAAc7B,eAAee,MAAf,CAAd,CAAnB,IAA4Df,eAAee,MAAf,MAA2B,GAA3F,EAAgG;AAC5FF,6BAAaO,IAAb,CAAkBpB,eAAee,MAAf,CAAlB,EAD4F,CACjD;AAC9C;AACDA,sBAAU,CAAV;AACH,SAfD;AAgBA,YAAIe,UAAUjB,aAAa1B,IAAb,CAAkB,GAAlB,CAAd;AACA,YAAI4C,UAAU,IAAIC,QAAJ,CAAa,KAAb,EAAoB,YAAYF,OAAZ,GAAsB,GAA1C,CAAd;AACA,eAAOC,QAAQnB,QAAR,CAAP;AACH,KAhFD;AAiFA,WAAO/C,OAAP;AACH,CA/H4B,CA+H3BD,eAAeqE,MA/HY,CAA7B;AAgIAtF,QAAQkB,OAAR,GAAkBA,OAAlB;AACA,mC;;;;;;;;;;;;;;;;AChJA;;AAEO,IAAM,gCAAY,qBAAlB;AACP;;;;AAIO,IAAM,kCAAa,sBAAnB;AACP;AACO,IAAM,8BAAW,4BAAjB;kBAEQ;AACX,SAAO,YADI;AAEX,WAAS;AAFE,C;;;;;;;ACZF;;AACb,SAASrB,QAAT,CAAkBC,CAAlB,EAAqB;AACjB,SAAK,IAAIC,CAAT,IAAcD,CAAd;AAAiB,YAAI,CAACE,QAAQC,cAAR,CAAuBF,CAAvB,CAAL,EAAgCC,QAAQD,CAAR,IAAaD,EAAEC,CAAF,CAAb;AAAjD;AACH;AACDG,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACAP,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACA,iC;;;;;;;ACVa;;AACbH,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACAJ,QAAQuF,8BAAR,GAAyC,qBAAzC;AACAvF,QAAQwF,sBAAR,GAAiC,gBAAjC;AACAxF,QAAQyF,uBAAR,GAAkC,oBAAlC,C;;;;;;;ACJa;;AACbvF,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIsF,eAAe,aAAe,YAAY;AAC1C,aAASA,YAAT,GAAwB,CACvB;AACDA,iBAAaC,OAAb,GAAuB,UAAUC,GAAV,EAAe;AAClC,eAAO1F,OAAOa,SAAP,CAAiB8E,QAAjB,CAA0BC,IAA1B,CAA+BF,GAA/B,CAAP;AACH,KAFD;AAGAF,iBAAaK,QAAb,GAAwB,UAAUH,GAAV,EAAe;AACnC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,iBAArC;AACH,KAFD;AAGAF,iBAAaM,QAAb,GAAwB,UAAUJ,GAAV,EAAe;AACnC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,iBAArC;AACH,KAFD;AAGAF,iBAAaO,OAAb,GAAuB,UAAUL,GAAV,EAAe;AAClC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,gBAArC;AACH,KAFD;AAGAF,iBAAaQ,SAAb,GAAyB,UAAUN,GAAV,EAAe;AACpC,eAAO,CAACO,MAAMP,GAAN,CAAR;AACH,KAFD;AAGAF,iBAAaU,KAAb,GAAqB,UAAUR,GAAV,EAAe;AAChC,eAAO,6CAA4CjE,IAA5C,CAAiD+D,aAAaC,OAAb,CAAqBC,GAArB,CAAjD;AAAP;AACH,KAFD;AAGAF,iBAAaW,QAAb,GAAwB,UAAUT,GAAV,EAAe;AACnC,eAAO,uCAAsCjE,IAAtC,CAA2C+D,aAAaC,OAAb,CAAqBC,GAArB,CAA3C;AAAP;AACH,KAFD;AAGAF,iBAAaY,UAAb,GAA0B,UAAUV,GAAV,EAAe;AACrC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,mBAArC;AACH,KAFD;AAGAF,iBAAaa,UAAb,GAA0B,UAAUX,GAAV,EAAe;AACrC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,mBAArC;AACH,KAFD;AAGAF,iBAAac,QAAb,GAAwB,UAAUZ,GAAV,EAAe;AACnC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,iBAArC;AACH,KAFD;AAGAF,iBAAaR,OAAb,GAAuB,UAAUU,GAAV,EAAe;AAClC,eAAOA,QAAQd,SAAR,IAAqBc,QAAQ,IAA7B,IAAsCF,aAAaK,QAAb,CAAsBH,GAAtB,KAA8BA,IAAItD,MAAJ,IAAc,CAAzF;AACH,KAFD;AAGAoD,iBAAae,SAAb,GAAyB,UAAUb,GAAV,EAAe;AACpC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,kBAArC;AACH,KAFD;AAGAF,iBAAagB,WAAb,GAA2B,UAAUd,GAAV,EAAe;AACtC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,iBAA7B;AACH,KAFD;AAGA;AACAF,iBAAaiB,OAAb,GAAuB,UAAUC,CAAV,EAAanG,CAAb,EAAgB;AACnC,YAAImG,MAAMnG,CAAV,EAAa;AACT,mBAAOmG,MAAM,CAAN,IAAW,IAAIA,CAAJ,KAAU,IAAInG,CAAhC;AACH;AACD,YAAImG,KAAK,IAAL,IAAanG,KAAK,IAAtB,EAA4B;AACxB,mBAAOmG,MAAMnG,CAAb;AACH;AACD,YAAIoG,aAAanB,aAAaC,OAAb,CAAqBiB,CAArB,CAAjB;AAAA,YAA0CE,aAAapB,aAAaC,OAAb,CAAqBlF,CAArB,CAAvD;AACA,YAAIoG,eAAeC,UAAnB,EAA+B;AAC3B,mBAAO,KAAP;AACH,SAFD,MAGK;AACD,oBAAQD,UAAR;AACI,qBAAK,iBAAL;AACA,qBAAK,iBAAL;AACI,2BAAO,KAAKD,CAAL,KAAW,KAAKnG,CAAvB;AACJ,qBAAK,iBAAL;AACI,wBAAI,CAACmG,CAAD,KAAO,CAACA,CAAZ,EAAe;AACX,+BAAO,CAACnG,CAAD,KAAO,CAACA,CAAf;AACH;AACD,2BAAO,CAACmG,CAAD,KAAO,CAAP,GAAW,IAAI,CAACA,CAAL,KAAW,IAAInG,CAA1B,GAA8B,CAACmG,CAAD,KAAO,CAACnG,CAA7C;AACJ,qBAAK,eAAL;AACA,qBAAK,kBAAL;AACI,2BAAO,CAACmG,CAAD,KAAO,CAACnG,CAAf;AAXR;AAaA,gBAAIoG,eAAe,iBAAnB,EAAsC;AAClC,oBAAIE,SAAS7G,OAAO8G,mBAAP,CAA2BJ,CAA3B,CAAb;AAAA,oBAA4CK,SAAS/G,OAAO8G,mBAAP,CAA2BvG,CAA3B,CAArD;AACA,oBAAIsG,OAAOzE,MAAP,KAAkB2E,OAAO3E,MAA7B,EAAqC;AACjC,2BAAO,KAAP;AACH,iBAFD,MAGK;AACD,yBAAK,IAAI4E,IAAI,CAAb,EAAgBA,IAAIH,OAAOzE,MAA3B,EAAmC4E,GAAnC,EAAwC;AACpC,4BAAIC,WAAWJ,OAAOG,CAAP,CAAf;AACA,4BAAIN,EAAEO,QAAF,MAAgB1G,EAAE0G,QAAF,CAApB,EAAiC;AAC7B,mCAAO,KAAP;AACH;AACJ;AACD,2BAAO,IAAP;AACH;AACJ;AACD,gBAAIN,eAAe,gBAAnB,EAAqC;AACjC,uBAAOD,EAAEf,QAAF,OAAiBpF,EAAEoF,QAAF,EAAxB;AACH;AACJ;AACJ,KA5CD;AA6CAH,iBAAa0B,SAAb,GAAyB,UAAUC,EAAV,EAAcC,OAAd,EAAuBC,GAAvB,EAA4B;AACjD,YAAI,OAAOF,EAAP,KAAc,UAAlB,EAA8B;AAC1B;AACA,gBAAIG,MAAMF,WAAW,GAArB;AACA,gBAAIG,QAAQ,SAARA,KAAQ,GAAY;AACpB,oBAAIF,GAAJ,EAAS;AACLF,uBAAGvB,IAAH,CAAQyB,GAAR;AACH,iBAFD,MAGK;AACDF;AACH;AACD;AACH,aARD;AASAK,uBAAWD,KAAX,EAAkBD,GAAlB;AACH;AACJ,KAfD;AAgBA9B,iBAAab,QAAb,GAAwB,UAAU8C,IAAV,EAAgBC,GAAhB,EAAqBC,YAArB,EAAmC;AACvD,YAAIC,WAAWF,QAAQ9C,SAAR,IAAqB8C,QAAQ,IAA7B,GAAoCA,GAApC,GAA0C,EAAzD;AACA,YAAI,KAAKjG,IAAL,CAAUmG,QAAV,CAAJ,EAAyB;AACrB,gBAAIC,SAASD,SAASvF,KAAT,CAAe,GAAf,CAAb;AACA,gBAAIyF,SAAS,KAAb;AACA,gBAAI7D,QAAQ,CAAZ;AACA,gBAAI8D,SAAS,EAAb;AACA,gBAAIC,UAAUP,IAAd;AACA,mBAAOxD,SAAS4D,OAAOzF,MAAP,GAAgB,CAAhC,EAAmC;AAC/B2F,yBAASF,OAAO5D,KAAP,CAAT;AACA6D,yBAAS7D,UAAU4D,OAAOzF,MAAP,GAAgB,CAAnC;AACA,oBAAIoD,aAAaO,OAAb,CAAqBiC,OAArB,KAAiCxC,aAAaQ,SAAb,CAAuB+B,MAAvB,CAArC,EAAqE;AACjEA,6BAASvD,SAASuD,MAAT,EAAiB,EAAjB,CAAT;AACH;AACD,oBAAI,CAACD,MAAL,EAAa;AACT,wBAAIG,UAAUJ,OAAOA,OAAOzF,MAAP,GAAgB,CAAvB,CAAd;AACA,wBAAIoD,aAAaO,OAAb,CAAqBiC,OAArB,KAAiCxC,aAAaM,QAAb,CAAsBkC,OAAtB,CAAjC,IAAmExC,aAAagB,WAAb,CAAyBwB,OAAzB,CAAvE,EAA0G;AACtG;AACAA,kCAAUA,QAAQD,MAAR,CAAV;AACH;AACD,wBAAIC,WAAW/D,UAAU4D,OAAOzF,MAAP,GAAgB,CAAzC,EAA4C;AACxC,4BAAI6F,YAAY,KAAhB,EAAuB;AACnBD,sCAAUA,QAAQN,GAAlB;AACAI,qCAAS,IAAT;AACH,yBAHD,MAIK,IAAIG,YAAY,QAAhB,EAA0B;AAC3BD,sCAAUA,QAAQ5F,MAAlB;AACA0F,qCAAS,IAAT;AACH;AACJ;AACJ,iBAhBD,MAiBK;AACDE,8BAAUA,UAAUA,QAAQD,MAAR,CAAV,GAA4BnD,SAAtC;AACH;AACD,oBAAIkD,MAAJ,EAAY;AACR;AACH;AACD7D;AACH;AACD,mBAAO6D,SAAUlD,cAAcoD,OAAd,GAAwBA,OAAxB,GAAkCL,YAA5C,GAA4DA,YAAnE;AACH,SAtCD,MAuCK;AACD,gBAAIO,UAAUT,OAAOA,KAAKG,QAAL,CAAP,GAAwBhD,SAAtC;AACA,mBAAO6C,OAAQ7C,cAAcsD,OAAd,GAAwBA,OAAxB,GAAkCP,YAA1C,GAA0DA,YAAjE;AACH;AACJ,KA7CD;AA8CA;;;;;;;AAOAnC,iBAAa2C,QAAb,GAAwB,UAAUV,IAAV,EAAgBC,GAAhB,EAAqBxH,KAArB,EAA4BiH,EAA5B,EAAgC;AACpD,YAAIiB,WAAW,KAAf;AACA,YAAI,CAAC5C,aAAaM,QAAb,CAAsB2B,IAAtB,CAAL,EAAkC;AAC9B,kBAAM,IAAIY,KAAJ,CAAU,uCAAV,CAAN;AACH;AACD,YAAI7C,aAAaR,OAAb,CAAqB0C,GAArB,CAAJ,EAA+B;AAC3B,kBAAM,IAAIW,KAAJ,CAAU,oCAAV,CAAN;AACH;AACD,YAAI,CAAC7C,aAAaR,OAAb,CAAqB9E,KAArB,CAAL,EAAkC;AAC9B,gBAAI2H,SAASH,IAAIrF,KAAJ,CAAU,GAAV,CAAb;AACA,gBAAIiG,SAAST,OAAOzF,MAApB;AACA,gBAAI6B,QAAQ,CAAZ;AACA,gBAAI+D,UAAUP,IAAd;AACA,mBAAOxD,QAAQqE,MAAf,EAAuB;AACnB,oBAAIC,OAAOV,OAAO5D,KAAP,CAAX;AACA,oBAAIA,QAAQqE,SAAS,CAArB,EAAwB;AACpB;AACA,wBAAI,CAAC9C,aAAaR,OAAb,CAAqBgD,QAAQO,IAAR,CAArB,CAAL,EAA0C;AACtC,4BAAI/C,aAAaM,QAAb,CAAsBkC,QAAQO,IAAR,CAAtB,CAAJ,EAA0C;AACtCP,sCAAUA,QAAQO,IAAR,CAAV;AACH,yBAFD,MAGK;AACD,kCAAM,IAAIF,KAAJ,CAAU,uCAAuCE,IAAjD,CAAN;AACH;AACJ,qBAPD,MAQK;AACDP,gCAAQO,IAAR,IAAgB,EAAhB;AACAP,kCAAUA,QAAQO,IAAR,CAAV;AACH;AACJ,iBAdD,MAeK;AACD;AACA,wBAAI,OAAOpB,EAAP,KAAc,UAAlB,EAA8B;AAC1BA,2BAAGa,OAAH,EAAYO,IAAZ,EAAkBrI,KAAlB;AACH,qBAFD,MAGK;AACD8H,gCAAQO,IAAR,IAAgBrI,KAAhB;AACH;AACDkI,+BAAW,IAAX;AACH;AACDnE;AACH;AACJ;AACD,eAAOmE,QAAP;AACH,KA5CD;AA6CA;;;AAGA5C,iBAAagD,WAAb,GAA2B,YAAY;AACnC,YAAIC,MAAM,IAAIC,IAAJ,EAAV;AACA,YAAIC,OAAOF,IAAIG,WAAJ,GAAkBjD,QAAlB,EAAX;AAAA,YAAyCkD,QAAQJ,IAAIK,QAAJ,KAAiB,CAAjB,GAAqB,EAArB,GAA0B,MAAM,CAACL,IAAIK,QAAJ,KAAiB,CAAlB,EAAqBnD,QAArB,EAAhC,GAAkE,CAAC8C,IAAIK,QAAJ,KAAiB,CAAlB,EAAqBnD,QAArB,EAAnH;AAAA,YAAoJoD,OAAON,IAAIO,OAAJ,KAAgB,EAAhB,GAAqB,MAAMP,IAAIO,OAAJ,GAAcrD,QAAd,EAA3B,GAAsD8C,IAAIO,OAAJ,GAAcrD,QAAd,EAAjN;AAAA,YAA2OsD,OAAOR,IAAIS,QAAJ,KAAiB,EAAjB,GAAsB,CAAC,GAAD,EAAMT,IAAIS,QAAJ,EAAN,EAAsB5G,IAAtB,CAA2B,EAA3B,CAAtB,GAAuDmG,IAAIS,QAAJ,GAAevD,QAAf,EAAzS;AAAA,YAAoUwD,SAASV,IAAIW,UAAJ,KAAmB,EAAnB,GAAwB,CAAC,GAAD,EAAMX,IAAIW,UAAJ,EAAN,EAAwB9G,IAAxB,CAA6B,EAA7B,CAAxB,GAA2DmG,IAAIW,UAAJ,GAAiBzD,QAAjB,EAAxY;AAAA,YAAqa0D,SAASZ,IAAIa,UAAJ,KAAmB,EAAnB,GAAwB,CAAC,GAAD,EAAMb,IAAIa,UAAJ,EAAN,EAAwBhH,IAAxB,CAA6B,EAA7B,CAAxB,GAA2DmG,IAAIa,UAAJ,GAAiB3D,QAAjB,EAAze;AAAA,YAAsgB4D,WAAWd,IAAIe,eAAJ,EAAjhB;AACA,YAAIC,YAAYjF,SAAS,CAACkF,KAAKC,MAAL,KAAgB,IAAhB,GAAuB,IAAxB,EAA8BhE,QAA9B,EAAT,EAAmD,EAAnD,CAAhB;AACA,eAAO,CAACgD,IAAD,EAAOE,KAAP,EAAcE,IAAd,EAAoBE,IAApB,EAA0BE,MAA1B,EAAkCE,MAAlC,EAA0CE,QAA1C,EAAoDE,SAApD,EAA+DnH,IAA/D,CAAoE,EAApE,CAAP;AACH,KALD;AAMA;;;;;AAKAkD,iBAAaoE,SAAb,GAAyB,UAAUlE,GAAV,EAAemE,cAAf,EAA+B;AACpD,YAAI,CAAC,KAAK7E,OAAL,CAAaU,GAAb,CAAL,EAAwB;AACpB,gBAAIoE,OAAOpE,IAAI5D,OAAJ,CAAY,aAAZ,EAA2B,EAA3B,CAAX;AACA,gBAAIiI,OAAOD,KAAKzH,KAAL,CAAW,GAAX,CAAX;AACA,iBAAK,IAAI2E,IAAI,CAAb,EAAgBA,IAAI+C,KAAK3H,MAAzB,EAAiC4E,GAAjC,EAAsC;AAClC,oBAAKA,MAAM,CAAN,IAAW6C,cAAZ,IAA+B7C,IAAI,CAAvC,EAA0C;AACtC+C,yBAAK/C,CAAL,IAAU+C,KAAK/C,CAAL,EAAQ7E,MAAR,CAAe,CAAf,EAAkB,CAAlB,EAAqB6H,WAArB,KAAqCD,KAAK/C,CAAL,EAAQ7E,MAAR,CAAe,CAAf,CAA/C;AACH;AACJ;AACD,mBAAO4H,KAAKzH,IAAL,CAAU,EAAV,CAAP;AACH,SATD,MAUK;AACD,mBAAOoD,GAAP;AACH;AACJ,KAdD;AAeAF,iBAAayE,SAAb,GAAyB,UAAUvE,GAAV,EAAe;AACpC,YAAI,CAAC,KAAKV,OAAL,CAAaU,GAAb,CAAL,EAAwB;AACpB,gBAAIoE,OAAOpE,IAAIvD,MAAJ,CAAW,CAAX,EAAc,CAAd,EAAiB+H,WAAjB,KAAiCxE,IAAIvD,MAAJ,CAAW,CAAX,CAA5C;AACA,gBAAIgI,OAAOL,KAAKhI,OAAL,CAAa,UAAb,EAAyB,UAAUsI,EAAV,EAAc;AAC9C,uBAAO,MAAMA,GAAGF,WAAH,EAAb;AACH,aAFU,CAAX;AAGA,mBAAOC,IAAP;AACH;AACD,eAAOzE,GAAP;AACH,KATD;AAUAF,iBAAa6E,MAAb,GAAsB,UAAUC,IAAV,EAAgBC,GAAhB,EAAqBC,WAArB,EAAkCC,UAAlC,EAA8C;AAChE,YAAI,CAACD,WAAL,EAAkB;AACd,gBAAI,KAAK1E,QAAL,CAAcwE,IAAd,KAAuB,KAAKxE,QAAL,CAAcyE,GAAd,CAA3B,EAA+C;AAC3C,oBAAIvK,OAAO0K,MAAX,EAAmB;AACf1K,2BAAO0K,MAAP,CAAcJ,IAAd,EAAoBC,GAApB;AACH,iBAFD,MAGK;AACD;AACA,yBAAK,IAAI7C,GAAT,IAAgB6C,GAAhB,EAAqB;AACjB,4BAAI,CAACE,UAAD,IAAeA,WAAWE,OAAX,CAAmBjD,GAAnB,IAA0B,CAA7C,EAAgD;AAC5C4C,iCAAK5C,GAAL,IAAY6C,IAAI7C,GAAJ,CAAZ;AACH;AACJ;AACJ;AACJ;AACJ,SAdD,MAeK;AACD,gBAAI,KAAK5B,QAAL,CAAcwE,IAAd,KAAuB,KAAKxE,QAAL,CAAcyE,GAAd,CAA3B,EAA+C;AAC3C;AACA,qBAAK,IAAI7C,GAAT,IAAgB6C,GAAhB,EAAqB;AACjB,wBAAI,CAACE,UAAD,IAAeA,WAAWE,OAAX,CAAmBjD,GAAnB,IAA0B,CAA7C,EAAgD;AAC5C;AACA,4BAAI4C,KAAKvK,cAAL,CAAoB2H,GAApB,CAAJ,EAA8B;AAC1B,mCAAO4C,KAAK5C,GAAL,CAAP;AACH;AACD,6BAAKkD,sBAAL,CAA4BN,IAA5B,EAAkC5C,GAAlC,EAAuC6C,IAAI7C,GAAJ,CAAvC;AACH;AACJ;AACJ;AACJ;AACD,eAAO4C,IAAP;AACH,KA/BD;AAgCA9E,iBAAaqF,KAAb,GAAqB,UAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AACvC,YAAIxJ,SAAS,EAAb;AACA,YAAIuJ,QAAQ,CAACC,IAAb,EAAmB;AACfxJ,qBAASuJ,IAAT;AACH,SAFD,MAGK,IAAI,CAACA,IAAD,IAASC,IAAb,EAAmB;AACpBxJ,qBAASwJ,IAAT;AACH,SAFI,MAGA,IAAID,QAAQC,IAAZ,EAAkB;AACnB,gBAAI,KAAKjF,QAAL,CAAcgF,IAAd,CAAJ,EAAyB;AACrB;AACA,qBAAK,IAAIpD,GAAT,IAAgBoD,IAAhB,EAAsB;AAClBvJ,2BAAOmG,GAAP,IAAcoD,KAAKpD,GAAL,CAAd;AACH;AACJ;AACD,gBAAI,KAAK5B,QAAL,CAAciF,IAAd,CAAJ,EAAyB;AACrB,qBAAK,IAAIC,IAAT,IAAiBD,IAAjB,EAAuB;AACnB,wBAAI,CAACxJ,OAAOxB,cAAP,CAAsBiL,IAAtB,CAAL,EAAkC;AAC9BzJ,+BAAOyJ,IAAP,IAAeD,KAAKC,IAAL,CAAf;AACH;AACJ;AACJ;AACJ;AACD,eAAOzJ,MAAP;AACH,KAxBD;AAyBA;;;;AAIAiE,iBAAaE,GAAb,GAAmB,UAAU+B,IAAV,EAAgB;AAC/B,YAAI,KAAK5B,QAAL,CAAc4B,IAAd,CAAJ,EAAyB;AACrB,gBAAI,CAACxB,MAAMwB,IAAN,CAAL,EAAkB;AACd,uBAAQA,KAAKkD,OAAL,CAAa,GAAb,KAAqB,CAArB,GAAyBlG,WAAWgD,IAAX,CAAzB,GAA4CjD,SAASiD,IAAT,EAAe,EAAf,CAApD;AACH,aAFD,MAGK;AACD,uBAAQ,kBAAiBhG,IAAjB,CAAsBgG,IAAtB,IAA8BwD,QAAQxD,IAAR,CAA9B,GAA8CA;AAAtD;AACH;AACJ,SAPD,MAQK;AACD,mBAAOA,IAAP;AACH;AACJ,KAZD;AAaAjC,iBAAaoF,sBAAb,GAAsC,UAAUvD,GAAV,EAAe6D,WAAf,EAA4BC,aAA5B,EAA2C;AAC7E,SAAC,UAAUC,QAAV,EAAoBC,gBAApB,EAAsCC,kBAAtC,EAA0D;AACvDF,wBAAYpL,OAAOC,cAAP,CAAsBmL,QAAtB,EAAgCC,gBAAhC,EAAkD;AAC1DE,8BAAc,IAD4C;AAE1DC,4BAAY,IAF8C;AAG1DtL,uBAAOoL,kBAHmD;AAI1DG,0BAAU;AAJgD,aAAlD,CAAZ;AAMH,SAPD,EAOGpE,GAPH,EAOQ6D,WAPR,EAOqBC,aAPrB;AAQH,KATD;AAUA3F,iBAAakG,gBAAb,GAAgC,UAAUC,OAAV,EAAmB;AAC/C,YAAIA,QAAQC,iBAAZ,EAA+B;AAC3B;AACAD,oBAAQC,iBAAR;AACH,SAHD,MAIK,IAAID,QAAQ,sBAAR,CAAJ,EAAqC;AACtCA,oBAAQ,sBAAR;AACH,SAFI,MAGA,IAAIA,QAAQ,yBAAR,CAAJ,EAAwC;AACzCA,oBAAQ,yBAAR;AACH,SAFI,MAGA,IAAIA,QAAQ,qBAAR,CAAJ,EAAoC;AACrCA,oBAAQ,qBAAR;AACH;AACJ,KAdD;AAeAnG,iBAAaqG,cAAb,GAA8B,YAAY;AACtC,YAAIC,SAASD,cAAb,EAA6B;AACzB;AACAC,qBAASD,cAAT;AACH,SAHD,MAIK,IAAIC,SAAS,qBAAT,CAAJ,EAAqC;AACtCA,qBAAS,qBAAT;AACH,SAFI,MAGA,IAAIA,SAAS,sBAAT,CAAJ,EAAsC;AACvCA,qBAAS,sBAAT;AACH;AACJ,KAXD;AAYAtG,iBAAauG,YAAb,GAA4B,YAAY;AACpC,eAAOD,SAAS,cAAT,KAA4BA,SAAS,iBAAT,CAA5B,IAA2DA,SAAS,oBAAT,CAAlE;AACH,KAFD;AAGAtG,iBAAa1B,IAAb,GAAoB,YAAY;AAC5B,YAAIkI,KAAK,SAALA,EAAK,GAAY;AACjB;AACA,mBAAO,CAAE,CAAC,IAAItC,KAAKC,MAAL,EAAL,IAAsB,OAAvB,GAAkC,CAAnC,EAAsChE,QAAtC,CAA+C,EAA/C,EAAmDxD,MAAnD,CAA0D,CAA1D,CAAP;AACH,SAHD;AAIA,eAAQ6J,OAAOA,IAAP,GAAc,GAAd,GAAoBA,IAApB,GAA2B,GAA3B,GAAiCA,IAAjC,GAAwC,GAAxC,GAA8CA,IAA9C,GAAqD,GAArD,GAA2DA,IAA3D,GAAkEA,IAA1E;AACH,KAND;AAOAxG,iBAAayG,MAAb,GAAsB,UAAUC,WAAV,EAAuB;AACzC,YAAI7K,MAAM,CAACmE,aAAaR,OAAb,CAAqBkH,WAArB,CAAD,GAAqCA,WAArC,GAAoDC,SAASC,MAAT,IAAmB,EAAjF;AACA,YAAIC,SAAS,EAAb;AACA,YAAI9K,SAAS,EAAb;AACAF,cAAMA,IAAIS,OAAJ,CAAY,KAAZ,EAAmB,EAAnB,EAAuBA,OAAvB,CAA+B,YAA/B,EAA6C,EAA7C,CAAN;AACAuK,iBAAShL,IAAIgB,KAAJ,CAAU,GAAV,CAAT;AACA;AACA,aAAK,IAAIqF,GAAT,IAAgB2E,MAAhB,EAAwB;AACpB,gBAAIC,UAAUD,OAAO3E,GAAP,KAAe,EAA7B;AACA,gBAAI6E,OAAOD,QAAQtK,KAAR,CAAc,4BAAd,CAAX;AACA,gBAAIuK,IAAJ,EAAU;AACNhL,uBAAOgL,KAAK,CAAL,CAAP,IAAkBA,KAAK,CAAL,CAAlB;AACH;AACJ;AACD,eAAOhL,MAAP;AACH,KAfD;AAgBAiE,iBAAagH,QAAb,GAAwB,UAAU9E,GAAV,EAAewE,WAAf,EAA4B;AAChD,eAAO1G,aAAayG,MAAb,CAAoBC,WAApB,EAAiCxE,GAAjC,CAAP;AACH,KAFD;AAGA;;;;AAIAlC,iBAAaiH,MAAb,GAAsB,UAAU/G,GAAV,EAAe;AACjC,YAAIrE,MAAMqE,IAAIC,QAAJ,EAAV;AACA,YAAI+G,MAAM,CAAV;AACA,aAAK,IAAI1F,IAAI,CAAb,EAAgBA,IAAI3F,IAAIe,MAAxB,EAAgC4E,GAAhC,EAAqC;AACjC,gBAAI2F,IAAItL,IAAIuL,UAAJ,CAAe5F,CAAf,CAAR;AACA,gBAAI2F,IAAI,GAAR,EAAa;AACTD,uBAAO,CAAP;AACH,aAFD,MAGK;AACDA,uBAAO,CAAP;AACH;AACJ;AACD,eAAOA,GAAP;AACH,KAbD;AAcA,WAAOlH,YAAP;AACH,CAhZiC,EAAlC;AAiZA1F,QAAQ0F,YAAR,GAAuBA,YAAvB;AACA1F,QAAQ+M,sBAAR,GAAiC,UAAUC,MAAV,EAAkB5B,WAAlB,EAA+BC,aAA/B,EAA8C;AAC3EnL,WAAOC,cAAP,CAAsB6M,MAAtB,EAA8B5B,WAA9B,EAA2C;AACvCK,sBAAc,KADyB;AAEvCC,oBAAY,IAF2B;AAGvCtL,eAAOiL,aAHgC;AAIvCM,kBAAU;AAJ6B,KAA3C;AAMH,CAPD;AAQA3L,QAAQiN,iBAAR,GAA4B,UAAUC,WAAV,EAAuB;AAC/C,QAAIC,MAAM,MAAV;AACA,QAAID,eAAeA,YAAY5K,MAAZ,GAAqB,CAAxC,EAA2C;AACvC,aAAK,IAAI4E,IAAI,CAAb,EAAgBA,IAAIgG,YAAY5K,MAAhC,EAAwC4E,GAAxC,EAA6C;AACzC,gBAAIkG,aAAaF,YAAYhG,CAAZ,CAAjB;AACA,gBAAImG,WAAWD,WAAWlL,KAAX,CAAiB,4BAAjB,CAAf;AACA,gBAAImL,QAAJ,EAAc;AACVF,sBAAME,SAAS,CAAT,CAAN;AACH,aAFD,MAGK;AACD,oBAAIC,SAASF,WAAWlL,KAAX,CAAiB,0BAAjB,CAAb;AACA,oBAAIoL,MAAJ,EAAY;AACRH,0BAAMG,OAAO,CAAP,CAAN;AACH;AACJ;AACJ;AACJ;AACD,WAAOH,GAAP;AACH,CAlBD;AAmBAnN,QAAQuN,UAAR,GAAqB,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,QAAIhM,MAAJ;AACA,QAAIiM,UAAU,KAAd;AACA,QAAIC,YAAY,KAAhB;AACA,QAAIC,SAAS,WAAb;AACA,QAAIC,cAAc,oBAAlB;AACA,QAAIC,WAAW,YAAYnM,IAAZ,CAAiB8L,MAAjB,CAAf;AACA,QAAID,WAAWA,QAAQlL,MAAR,GAAiB,CAAhC,EAAmC;AAC/B,aAAK,IAAI4E,IAAI,CAAb,EAAgBA,IAAIsG,QAAQlL,MAA5B,EAAoC4E,GAApC,EAAyC;AACrC,gBAAI6G,MAAMP,QAAQtG,CAAR,CAAV;AACA,gBAAI4G,QAAJ,EAAc;AACV,oBAAIC,QAAQN,MAAZ,EAAoB;AAChB,wBAAI,CAACG,OAAOjM,IAAP,CAAY6L,QAAQtG,IAAI,CAAZ,CAAZ,CAAL,EAAkC;AAC9BzF,iCAAS+L,QAAQtG,IAAI,CAAZ,MAAmBpC,SAAnB,GAA+B,IAA/B,GAAsC0I,QAAQtG,IAAI,CAAZ,CAA/C;AACAyG,oCAAYzG,IAAI,CAAJ,GAAQsG,QAAQlL,MAA5B;AACA;AACH;AACJ;AACJ,aARD,MASK;AACD,oBAAI,CAACsL,OAAOjM,IAAP,CAAYoM,GAAZ,CAAL,EAAuB;AACnB,wBAAIC,gBAAgBD,IAAI7L,KAAJ,CAAU2L,WAAV,CAApB;AACA,wBAAIG,iBAAiBA,cAAc,CAAd,MAAqBP,MAA1C,EAAkD;AAC9ChM,iCAASsM,IAAI/L,OAAJ,CAAY6L,WAAZ,EAAyB,EAAzB,CAAT;AACAF,oCAAY,IAAZ;AACA;AACH,qBAJD,MAKK;AACD,4BAAII,QAAQN,MAAR,IAAkB,CAACG,OAAOjM,IAAP,CAAY6L,QAAQtG,IAAI,CAAZ,CAAZ,CAAvB,EAAoD;AAChDwG,sCAAU,IAAV;AACH;AACJ;AACJ;AACJ;AACJ;AACJ;AACD,WAAOC,YAAYlM,MAAZ,GAAsBiM,UAAU,IAAV,GAAiBjM,MAA9C;AACH,CArCD;AAsCA,wC;;;;;;;;;;;;;QC3cgB,kB,GAAA,kB;;AAVhB;;AACA;;AACA;;;;;;;;;;;;AAMA;AACA;AACM,SAAU,kBAAV,CAAgC,YAAhC,EAAsE,OAAtE,EAA6G;AAC/G,QAAM,YAAY,4BAAlB;AACA,QAAI,YAAY,aAAa,SAAb,CAAuB,SAAvB,IAAqC,aAAqB,SAA1E;AAEA,QAAM,aAAwB,QAAQ,WAAR,CAAoB,mBAApB,EAAwC,YAAxC,CAA9B;AACA,QAAI,OAAc,EAAlB;AACA,QAAI,aAAJ;AACA,QAAG,0BAAa,OAAb,CAAqB,SAArB,CAAH,EAAoC;AAChC,YAAG,CAAC,0BAAa,OAAb,CAAqB,OAArB,CAAJ,EAAmC;AAC/B,gBAAG,0BAAa,QAAb,CAAsB,OAAtB,CAAH,EAAmC;AAC/B,4BAAY,OAAZ;AACA,gCAAgB,OAAhB;AACH,aAHD,MAGO;AACH,4BAAY,QAAQ,SAApB;AACA,gCAAgB,QAAQ,SAAxB;AACH;AACJ;AACJ;AACD,QAAG,CAAC,0BAAa,OAAb,CAAqB,OAArB,CAAD,IAAkC,0BAAa,QAAb,CAAsB,OAAtB,CAArC,EAAqE;AACjE,eAAO,QAAQ,IAAR,IAAgB,EAAvB;AACH;AACD,QAAG,CAAC,0BAAa,OAAb,CAAqB,aAArB,CAAJ,EAAyC;AACrC,YAAG,CAAC,UAAU,SAAV,CAAoB,aAApB,CAAJ,EAAwC;AACpC,sBAAU,SAAV,CAAoB,aAApB,IAAqC,YAArC;AACH;AACJ;AACD,QAAG,0BAAa,OAAb,CAAqB,SAArB,CAAH,EAAoC;AAChC,oBAAY,aAAa,WAAb,CAAZ;AACH;AACD,QAAG,CAAC,UAAU,OAAV,CAAkB,SAAlB,CAAJ,EAAkC;AAC9B;AACA,YAAM,gBAAgB,OAAO,SAAP,CAAiB,QAAjB,CAA0B,IAA1B,CAA+B,UAA/B,MAA+C,gBAA/C,GAAkE,WAAW,GAAX,CAAe,UAAC,GAAD,EAAa;AAChH;AACA,gBAAG,UAAU,SAAV,CAAoB,OAApB,CAA4B,GAA5B,MAAqC,CAAC,CAAzC,EAA4C;AACxC,sBAAM,IAAI,KAAJ,CAAa,MAAG,iCAAH,GAAY,SAAZ,GAAqB,GAAlC,CAAN;AACH,aAFD,MAEO;AACH,uBAAO,mBAAmB,GAAnB,CAAP;AACH;AACJ,SAPuF,CAAlE,GAOjB,EAPL;AAQA,YAAM,MAAG,KAAO,aAAY,IAAZ,CAAY,KAAZ,eAAY,yBAAI,aAAJ,EAAsB,IAAtB,CAAZ,CAAP,GAAT;AACA,kBAAU,OAAV,CAAkB,SAAlB,IAA+B,GAA/B;AACA,eAAO,GAAP;AACH,KAbD,MAaO;AACH,eAAO,UAAU,OAAV,CAAkB,SAAlB,CAAP;AACH;AACJ;AAEM,IAAM,8BAAW,kBAAjB,C;;;;;;;ACzDM;;AACbvB,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIsF,eAAe,aAAe,YAAY;AAC1C,aAASA,YAAT,GAAwB,CACvB;AACDA,iBAAaC,OAAb,GAAuB,UAAUC,GAAV,EAAe;AAClC,eAAO1F,OAAOa,SAAP,CAAiB8E,QAAjB,CAA0BC,IAA1B,CAA+BF,GAA/B,CAAP;AACH,KAFD;AAGAF,iBAAaK,QAAb,GAAwB,UAAUH,GAAV,EAAe;AACnC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,iBAArC;AACH,KAFD;AAGAF,iBAAaM,QAAb,GAAwB,UAAUJ,GAAV,EAAe;AACnC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,iBAArC;AACH,KAFD;AAGAF,iBAAaO,OAAb,GAAuB,UAAUL,GAAV,EAAe;AAClC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,gBAArC;AACH,KAFD;AAGAF,iBAAaQ,SAAb,GAAyB,UAAUN,GAAV,EAAe;AACpC,eAAO,CAACO,MAAMP,GAAN,CAAR;AACH,KAFD;AAGAF,iBAAaU,KAAb,GAAqB,UAAUR,GAAV,EAAe;AAChC,eAAO,6CAA4CjE,IAA5C,CAAiD+D,aAAaC,OAAb,CAAqBC,GAArB,CAAjD;AAAP;AACH,KAFD;AAGAF,iBAAaW,QAAb,GAAwB,UAAUT,GAAV,EAAe;AACnC,eAAO,uCAAsCjE,IAAtC,CAA2C+D,aAAaC,OAAb,CAAqBC,GAArB,CAA3C;AAAP;AACH,KAFD;AAGAF,iBAAaY,UAAb,GAA0B,UAAUV,GAAV,EAAe;AACrC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,mBAArC;AACH,KAFD;AAGAF,iBAAaa,UAAb,GAA0B,UAAUX,GAAV,EAAe;AACrC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,mBAArC;AACH,KAFD;AAGAF,iBAAac,QAAb,GAAwB,UAAUZ,GAAV,EAAe;AACnC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,iBAArC;AACH,KAFD;AAGAF,iBAAaR,OAAb,GAAuB,UAAUU,GAAV,EAAe;AAClC,eAAOA,QAAQd,SAAR,IAAqBc,QAAQ,IAA7B,IAAsCF,aAAaK,QAAb,CAAsBH,GAAtB,KAA8BA,IAAItD,MAAJ,IAAc,CAAzF;AACH,KAFD;AAGAoD,iBAAae,SAAb,GAAyB,UAAUb,GAAV,EAAe;AACpC,eAAOF,aAAaC,OAAb,CAAqBC,GAArB,MAA8B,kBAArC;AACH,KAFD;AAGAF,iBAAagB,WAAb,GAA2B,UAAUd,GAAV,EAAe;AACtC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,iBAA7B;AACH,KAFD;AAGA;AACAF,iBAAaiB,OAAb,GAAuB,UAAUC,CAAV,EAAanG,CAAb,EAAgB;AACnC,YAAImG,MAAMnG,CAAV,EAAa;AACT,mBAAOmG,MAAM,CAAN,IAAW,IAAIA,CAAJ,KAAU,IAAInG,CAAhC;AACH;AACD,YAAImG,KAAK,IAAL,IAAanG,KAAK,IAAtB,EAA4B;AACxB,mBAAOmG,MAAMnG,CAAb;AACH;AACD,YAAIoG,aAAanB,aAAaC,OAAb,CAAqBiB,CAArB,CAAjB;AAAA,YAA0CE,aAAapB,aAAaC,OAAb,CAAqBlF,CAArB,CAAvD;AACA,YAAIoG,eAAeC,UAAnB,EAA+B;AAC3B,mBAAO,KAAP;AACH,SAFD,MAGK;AACD,oBAAQD,UAAR;AACI,qBAAK,iBAAL;AACA,qBAAK,iBAAL;AACI,2BAAO,KAAKD,CAAL,KAAW,KAAKnG,CAAvB;AACJ,qBAAK,iBAAL;AACI,wBAAI,CAACmG,CAAD,KAAO,CAACA,CAAZ,EAAe;AACX,+BAAO,CAACnG,CAAD,KAAO,CAACA,CAAf;AACH;AACD,2BAAO,CAACmG,CAAD,KAAO,CAAP,GAAW,IAAI,CAACA,CAAL,KAAW,IAAInG,CAA1B,GAA8B,CAACmG,CAAD,KAAO,CAACnG,CAA7C;AACJ,qBAAK,eAAL;AACA,qBAAK,kBAAL;AACI,2BAAO,CAACmG,CAAD,KAAO,CAACnG,CAAf;AAXR;AAaA,gBAAIoG,eAAe,iBAAnB,EAAsC;AAClC,oBAAIE,SAAS7G,OAAO8G,mBAAP,CAA2BJ,CAA3B,CAAb;AAAA,oBAA4CK,SAAS/G,OAAO8G,mBAAP,CAA2BvG,CAA3B,CAArD;AACA,oBAAIsG,OAAOzE,MAAP,KAAkB2E,OAAO3E,MAA7B,EAAqC;AACjC,2BAAO,KAAP;AACH,iBAFD,MAGK;AACD,yBAAK,IAAI4E,IAAI,CAAb,EAAgBA,IAAIH,OAAOzE,MAA3B,EAAmC4E,GAAnC,EAAwC;AACpC,4BAAIC,WAAWJ,OAAOG,CAAP,CAAf;AACA,4BAAIN,EAAEO,QAAF,MAAgB1G,EAAE0G,QAAF,CAApB,EAAiC;AAC7B,mCAAO,KAAP;AACH;AACJ;AACD,2BAAO,IAAP;AACH;AACJ;AACD,gBAAIN,eAAe,gBAAnB,EAAqC;AACjC,uBAAOD,EAAEf,QAAF,OAAiBpF,EAAEoF,QAAF,EAAxB;AACH;AACJ;AACJ,KA5CD;AA6CAH,iBAAa0B,SAAb,GAAyB,UAAUC,EAAV,EAAcC,OAAd,EAAuBC,GAAvB,EAA4B;AACjD,YAAI,OAAOF,EAAP,KAAc,UAAlB,EAA8B;AAC1B;AACA,gBAAIG,MAAMF,WAAW,GAArB;AACA,gBAAIG,QAAQ,SAARA,KAAQ,GAAY;AACpB,oBAAIF,GAAJ,EAAS;AACLF,uBAAGvB,IAAH,CAAQyB,GAAR;AACH,iBAFD,MAGK;AACDF;AACH;AACD;AACH,aARD;AASAK,uBAAWD,KAAX,EAAkBD,GAAlB;AACH;AACJ,KAfD;AAgBA9B,iBAAab,QAAb,GAAwB,UAAU8C,IAAV,EAAgBC,GAAhB,EAAqBC,YAArB,EAAmC;AACvD,YAAIC,WAAWF,QAAQ9C,SAAR,IAAqB8C,QAAQ,IAA7B,GAAoCA,GAApC,GAA0C,EAAzD;AACA,YAAI,KAAKjG,IAAL,CAAUmG,QAAV,CAAJ,EAAyB;AACrB,gBAAIC,SAASD,SAASvF,KAAT,CAAe,GAAf,CAAb;AACA,gBAAIyF,SAAS,KAAb;AACA,gBAAI7D,QAAQ,CAAZ;AACA,gBAAI8D,SAAS,EAAb;AACA,gBAAIC,UAAUP,IAAd;AACA,mBAAOxD,SAAS4D,OAAOzF,MAAP,GAAgB,CAAhC,EAAmC;AAC/B2F,yBAASF,OAAO5D,KAAP,CAAT;AACA6D,yBAAS7D,UAAU4D,OAAOzF,MAAP,GAAgB,CAAnC;AACA,oBAAIoD,aAAaO,OAAb,CAAqBiC,OAArB,KAAiCxC,aAAaQ,SAAb,CAAuB+B,MAAvB,CAArC,EAAqE;AACjEA,6BAASvD,SAASuD,MAAT,EAAiB,EAAjB,CAAT;AACH;AACD,oBAAI,CAACD,MAAL,EAAa;AACT,wBAAIG,UAAUJ,OAAOA,OAAOzF,MAAP,GAAgB,CAAvB,CAAd;AACA,wBAAIoD,aAAaO,OAAb,CAAqBiC,OAArB,KAAiCxC,aAAaM,QAAb,CAAsBkC,OAAtB,CAAjC,IAAmExC,aAAagB,WAAb,CAAyBwB,OAAzB,CAAvE,EAA0G;AACtG;AACAA,kCAAUA,QAAQD,MAAR,CAAV;AACH;AACD,wBAAIC,WAAW/D,UAAU4D,OAAOzF,MAAP,GAAgB,CAAzC,EAA4C;AACxC,4BAAI6F,YAAY,KAAhB,EAAuB;AACnBD,sCAAUA,QAAQN,GAAlB;AACAI,qCAAS,IAAT;AACH,yBAHD,MAIK,IAAIG,YAAY,QAAhB,EAA0B;AAC3BD,sCAAUA,QAAQ5F,MAAlB;AACA0F,qCAAS,IAAT;AACH;AACJ;AACJ,iBAhBD,MAiBK;AACDE,8BAAUA,UAAUA,QAAQD,MAAR,CAAV,GAA4BnD,SAAtC;AACH;AACD,oBAAIkD,MAAJ,EAAY;AACR;AACH;AACD7D;AACH;AACD,mBAAO6D,SAAUlD,cAAcoD,OAAd,GAAwBA,OAAxB,GAAkCL,YAA5C,GAA4DA,YAAnE;AACH,SAtCD,MAuCK;AACD,gBAAIO,UAAUT,OAAOA,KAAKG,QAAL,CAAP,GAAwBhD,SAAtC;AACA,mBAAO6C,OAAQ7C,cAAcsD,OAAd,GAAwBA,OAAxB,GAAkCP,YAA1C,GAA0DA,YAAjE;AACH;AACJ,KA7CD;AA8CA;;;;;;;AAOAnC,iBAAa2C,QAAb,GAAwB,UAAUV,IAAV,EAAgBC,GAAhB,EAAqBxH,KAArB,EAA4BiH,EAA5B,EAAgC;AACpD,YAAIiB,WAAW,KAAf;AACA,YAAI,CAAC5C,aAAaM,QAAb,CAAsB2B,IAAtB,CAAL,EAAkC;AAC9B,kBAAM,IAAIY,KAAJ,CAAU,uCAAV,CAAN;AACH;AACD,YAAI7C,aAAaR,OAAb,CAAqB0C,GAArB,CAAJ,EAA+B;AAC3B,kBAAM,IAAIW,KAAJ,CAAU,oCAAV,CAAN;AACH;AACD,YAAI,CAAC7C,aAAaR,OAAb,CAAqB9E,KAArB,CAAL,EAAkC;AAC9B,gBAAI2H,SAASH,IAAIrF,KAAJ,CAAU,GAAV,CAAb;AACA,gBAAIiG,SAAST,OAAOzF,MAApB;AACA,gBAAI6B,QAAQ,CAAZ;AACA,gBAAI+D,UAAUP,IAAd;AACA,mBAAOxD,QAAQqE,MAAf,EAAuB;AACnB,oBAAIC,OAAOV,OAAO5D,KAAP,CAAX;AACA,oBAAIA,QAAQqE,SAAS,CAArB,EAAwB;AACpB;AACA,wBAAI,CAAC9C,aAAaR,OAAb,CAAqBgD,QAAQO,IAAR,CAArB,CAAL,EAA0C;AACtC,4BAAI/C,aAAaM,QAAb,CAAsBkC,QAAQO,IAAR,CAAtB,CAAJ,EAA0C;AACtCP,sCAAUA,QAAQO,IAAR,CAAV;AACH,yBAFD,MAGK;AACD,kCAAM,IAAIF,KAAJ,CAAU,uCAAuCE,IAAjD,CAAN;AACH;AACJ,qBAPD,MAQK;AACDP,gCAAQO,IAAR,IAAgB,EAAhB;AACAP,kCAAUA,QAAQO,IAAR,CAAV;AACH;AACJ,iBAdD,MAeK;AACD;AACA,wBAAI,OAAOpB,EAAP,KAAc,UAAlB,EAA8B;AAC1BA,2BAAGa,OAAH,EAAYO,IAAZ,EAAkBrI,KAAlB;AACH,qBAFD,MAGK;AACD8H,gCAAQO,IAAR,IAAgBrI,KAAhB;AACH;AACDkI,+BAAW,IAAX;AACH;AACDnE;AACH;AACJ;AACD,eAAOmE,QAAP;AACH,KA5CD;AA6CA;;;AAGA5C,iBAAagD,WAAb,GAA2B,YAAY;AACnC,YAAIC,MAAM,IAAIC,IAAJ,EAAV;AACA,YAAIC,OAAOF,IAAIG,WAAJ,GAAkBjD,QAAlB,EAAX;AAAA,YAAyCkD,QAAQJ,IAAIK,QAAJ,KAAiB,CAAjB,GAAqB,EAArB,GAA0B,MAAM,CAACL,IAAIK,QAAJ,KAAiB,CAAlB,EAAqBnD,QAArB,EAAhC,GAAkE,CAAC8C,IAAIK,QAAJ,KAAiB,CAAlB,EAAqBnD,QAArB,EAAnH;AAAA,YAAoJoD,OAAON,IAAIO,OAAJ,KAAgB,EAAhB,GAAqB,MAAMP,IAAIO,OAAJ,GAAcrD,QAAd,EAA3B,GAAsD8C,IAAIO,OAAJ,GAAcrD,QAAd,EAAjN;AAAA,YAA2OsD,OAAOR,IAAIS,QAAJ,KAAiB,EAAjB,GAAsB,CAAC,GAAD,EAAMT,IAAIS,QAAJ,EAAN,EAAsB5G,IAAtB,CAA2B,EAA3B,CAAtB,GAAuDmG,IAAIS,QAAJ,GAAevD,QAAf,EAAzS;AAAA,YAAoUwD,SAASV,IAAIW,UAAJ,KAAmB,EAAnB,GAAwB,CAAC,GAAD,EAAMX,IAAIW,UAAJ,EAAN,EAAwB9G,IAAxB,CAA6B,EAA7B,CAAxB,GAA2DmG,IAAIW,UAAJ,GAAiBzD,QAAjB,EAAxY;AAAA,YAAqa0D,SAASZ,IAAIa,UAAJ,KAAmB,EAAnB,GAAwB,CAAC,GAAD,EAAMb,IAAIa,UAAJ,EAAN,EAAwBhH,IAAxB,CAA6B,EAA7B,CAAxB,GAA2DmG,IAAIa,UAAJ,GAAiB3D,QAAjB,EAAze;AAAA,YAAsgB4D,WAAWd,IAAIe,eAAJ,EAAjhB;AACA,YAAIC,YAAYjF,SAAS,CAACkF,KAAKC,MAAL,KAAgB,IAAhB,GAAuB,IAAxB,EAA8BhE,QAA9B,EAAT,EAAmD,EAAnD,CAAhB;AACA,eAAO,CAACgD,IAAD,EAAOE,KAAP,EAAcE,IAAd,EAAoBE,IAApB,EAA0BE,MAA1B,EAAkCE,MAAlC,EAA0CE,QAA1C,EAAoDE,SAApD,EAA+DnH,IAA/D,CAAoE,EAApE,CAAP;AACH,KALD;AAMA;;;;;AAKAkD,iBAAaoE,SAAb,GAAyB,UAAUlE,GAAV,EAAemE,cAAf,EAA+B;AACpD,YAAI,CAAC,KAAK7E,OAAL,CAAaU,GAAb,CAAL,EAAwB;AACpB,gBAAIoE,OAAOpE,IAAI5D,OAAJ,CAAY,aAAZ,EAA2B,EAA3B,CAAX;AACA,gBAAIiI,OAAOD,KAAKzH,KAAL,CAAW,GAAX,CAAX;AACA,iBAAK,IAAI2E,IAAI,CAAb,EAAgBA,IAAI+C,KAAK3H,MAAzB,EAAiC4E,GAAjC,EAAsC;AAClC,oBAAKA,MAAM,CAAN,IAAW6C,cAAZ,IAA+B7C,IAAI,CAAvC,EAA0C;AACtC+C,yBAAK/C,CAAL,IAAU+C,KAAK/C,CAAL,EAAQ7E,MAAR,CAAe,CAAf,EAAkB,CAAlB,EAAqB6H,WAArB,KAAqCD,KAAK/C,CAAL,EAAQ7E,MAAR,CAAe,CAAf,CAA/C;AACH;AACJ;AACD,mBAAO4H,KAAKzH,IAAL,CAAU,EAAV,CAAP;AACH,SATD,MAUK;AACD,mBAAOoD,GAAP;AACH;AACJ,KAdD;AAeAF,iBAAayE,SAAb,GAAyB,UAAUvE,GAAV,EAAe;AACpC,YAAI,CAAC,KAAKV,OAAL,CAAaU,GAAb,CAAL,EAAwB;AACpB,gBAAIoE,OAAOpE,IAAIvD,MAAJ,CAAW,CAAX,EAAc,CAAd,EAAiB+H,WAAjB,KAAiCxE,IAAIvD,MAAJ,CAAW,CAAX,CAA5C;AACA,gBAAIgI,OAAOL,KAAKhI,OAAL,CAAa,UAAb,EAAyB,UAAUsI,EAAV,EAAc;AAC9C,uBAAO,MAAMA,GAAGF,WAAH,EAAb;AACH,aAFU,CAAX;AAGA,mBAAOC,IAAP;AACH;AACD,eAAOzE,GAAP;AACH,KATD;AAUAF,iBAAa6E,MAAb,GAAsB,UAAUC,IAAV,EAAgBC,GAAhB,EAAqBC,WAArB,EAAkCC,UAAlC,EAA8C;AAChE,YAAI,CAACD,WAAL,EAAkB;AACd,gBAAI,KAAK1E,QAAL,CAAcwE,IAAd,KAAuB,KAAKxE,QAAL,CAAcyE,GAAd,CAA3B,EAA+C;AAC3C,oBAAIvK,OAAO0K,MAAX,EAAmB;AACf1K,2BAAO0K,MAAP,CAAcJ,IAAd,EAAoBC,GAApB;AACH,iBAFD,MAGK;AACD;AACA,yBAAK,IAAI7C,GAAT,IAAgB6C,GAAhB,EAAqB;AACjB,4BAAI,CAACE,UAAD,IAAeA,WAAWE,OAAX,CAAmBjD,GAAnB,IAA0B,CAA7C,EAAgD;AAC5C4C,iCAAK5C,GAAL,IAAY6C,IAAI7C,GAAJ,CAAZ;AACH;AACJ;AACJ;AACJ;AACJ,SAdD,MAeK;AACD,gBAAI,KAAK5B,QAAL,CAAcwE,IAAd,KAAuB,KAAKxE,QAAL,CAAcyE,GAAd,CAA3B,EAA+C;AAC3C;AACA,qBAAK,IAAI7C,GAAT,IAAgB6C,GAAhB,EAAqB;AACjB,wBAAI,CAACE,UAAD,IAAeA,WAAWE,OAAX,CAAmBjD,GAAnB,IAA0B,CAA7C,EAAgD;AAC5C;AACA,4BAAI4C,KAAKvK,cAAL,CAAoB2H,GAApB,CAAJ,EAA8B;AAC1B,mCAAO4C,KAAK5C,GAAL,CAAP;AACH;AACD,6BAAKkD,sBAAL,CAA4BN,IAA5B,EAAkC5C,GAAlC,EAAuC6C,IAAI7C,GAAJ,CAAvC;AACH;AACJ;AACJ;AACJ;AACD,eAAO4C,IAAP;AACH,KA/BD;AAgCA9E,iBAAaqF,KAAb,GAAqB,UAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AACvC,YAAIxJ,SAAS,EAAb;AACA,YAAIuJ,QAAQ,CAACC,IAAb,EAAmB;AACfxJ,qBAASuJ,IAAT;AACH,SAFD,MAGK,IAAI,CAACA,IAAD,IAASC,IAAb,EAAmB;AACpBxJ,qBAASwJ,IAAT;AACH,SAFI,MAGA,IAAID,QAAQC,IAAZ,EAAkB;AACnB,gBAAI,KAAKjF,QAAL,CAAcgF,IAAd,CAAJ,EAAyB;AACrB;AACA,qBAAK,IAAIpD,GAAT,IAAgBoD,IAAhB,EAAsB;AAClBvJ,2BAAOmG,GAAP,IAAcoD,KAAKpD,GAAL,CAAd;AACH;AACJ;AACD,gBAAI,KAAK5B,QAAL,CAAciF,IAAd,CAAJ,EAAyB;AACrB,qBAAK,IAAIC,IAAT,IAAiBD,IAAjB,EAAuB;AACnB,wBAAI,CAACxJ,OAAOxB,cAAP,CAAsBiL,IAAtB,CAAL,EAAkC;AAC9BzJ,+BAAOyJ,IAAP,IAAeD,KAAKC,IAAL,CAAf;AACH;AACJ;AACJ;AACJ;AACD,eAAOzJ,MAAP;AACH,KAxBD;AAyBA;;;;AAIAiE,iBAAaE,GAAb,GAAmB,UAAU+B,IAAV,EAAgB;AAC/B,YAAI,KAAK5B,QAAL,CAAc4B,IAAd,CAAJ,EAAyB;AACrB,gBAAI,CAACxB,MAAMwB,IAAN,CAAL,EAAkB;AACd,uBAAQA,KAAKkD,OAAL,CAAa,GAAb,KAAqB,CAArB,GAAyBlG,WAAWgD,IAAX,CAAzB,GAA4CjD,SAASiD,IAAT,EAAe,EAAf,CAApD;AACH,aAFD,MAGK;AACD,uBAAQ,kBAAiBhG,IAAjB,CAAsBgG,IAAtB,IAA8BwD,QAAQxD,IAAR,CAA9B,GAA8CA;AAAtD;AACH;AACJ,SAPD,MAQK;AACD,mBAAOA,IAAP;AACH;AACJ,KAZD;AAaAjC,iBAAaoF,sBAAb,GAAsC,UAAUvD,GAAV,EAAe6D,WAAf,EAA4BC,aAA5B,EAA2C;AAC7E,SAAC,UAAUC,QAAV,EAAoBC,gBAApB,EAAsCC,kBAAtC,EAA0D;AACvDF,wBAAYpL,OAAOC,cAAP,CAAsBmL,QAAtB,EAAgCC,gBAAhC,EAAkD;AAC1DE,8BAAc,IAD4C;AAE1DC,4BAAY,IAF8C;AAG1DtL,uBAAOoL,kBAHmD;AAI1DG,0BAAU;AAJgD,aAAlD,CAAZ;AAMH,SAPD,EAOGpE,GAPH,EAOQ6D,WAPR,EAOqBC,aAPrB;AAQH,KATD;AAUA3F,iBAAakG,gBAAb,GAAgC,UAAUC,OAAV,EAAmB;AAC/C,YAAIA,QAAQC,iBAAZ,EAA+B;AAC3B;AACAD,oBAAQC,iBAAR;AACH,SAHD,MAIK,IAAID,QAAQ,sBAAR,CAAJ,EAAqC;AACtCA,oBAAQ,sBAAR;AACH,SAFI,MAGA,IAAIA,QAAQ,yBAAR,CAAJ,EAAwC;AACzCA,oBAAQ,yBAAR;AACH,SAFI,MAGA,IAAIA,QAAQ,qBAAR,CAAJ,EAAoC;AACrCA,oBAAQ,qBAAR;AACH;AACJ,KAdD;AAeAnG,iBAAaqG,cAAb,GAA8B,YAAY;AACtC,YAAIC,SAASD,cAAb,EAA6B;AACzB;AACAC,qBAASD,cAAT;AACH,SAHD,MAIK,IAAIC,SAAS,qBAAT,CAAJ,EAAqC;AACtCA,qBAAS,qBAAT;AACH,SAFI,MAGA,IAAIA,SAAS,sBAAT,CAAJ,EAAsC;AACvCA,qBAAS,sBAAT;AACH;AACJ,KAXD;AAYAtG,iBAAauG,YAAb,GAA4B,YAAY;AACpC,eAAOD,SAAS,cAAT,KAA4BA,SAAS,iBAAT,CAA5B,IAA2DA,SAAS,oBAAT,CAAlE;AACH,KAFD;AAGAtG,iBAAa1B,IAAb,GAAoB,YAAY;AAC5B,YAAIkI,KAAK,SAALA,EAAK,GAAY;AACjB;AACA,mBAAO,CAAE,CAAC,IAAItC,KAAKC,MAAL,EAAL,IAAsB,OAAvB,GAAkC,CAAnC,EAAsChE,QAAtC,CAA+C,EAA/C,EAAmDxD,MAAnD,CAA0D,CAA1D,CAAP;AACH,SAHD;AAIA,eAAQ6J,OAAOA,IAAP,GAAc,GAAd,GAAoBA,IAApB,GAA2B,GAA3B,GAAiCA,IAAjC,GAAwC,GAAxC,GAA8CA,IAA9C,GAAqD,GAArD,GAA2DA,IAA3D,GAAkEA,IAA1E;AACH,KAND;AAOAxG,iBAAayG,MAAb,GAAsB,UAAUC,WAAV,EAAuB;AACzC,YAAI7K,MAAM,CAACmE,aAAaR,OAAb,CAAqBkH,WAArB,CAAD,GAAqCA,WAArC,GAAoDC,SAASC,MAAT,IAAmB,EAAjF;AACA,YAAIC,SAAS,EAAb;AACA,YAAI9K,SAAS,EAAb;AACAF,cAAMA,IAAIS,OAAJ,CAAY,KAAZ,EAAmB,EAAnB,EAAuBA,OAAvB,CAA+B,YAA/B,EAA6C,EAA7C,CAAN;AACAuK,iBAAShL,IAAIgB,KAAJ,CAAU,GAAV,CAAT;AACA;AACA,aAAK,IAAIqF,GAAT,IAAgB2E,MAAhB,EAAwB;AACpB,gBAAIC,UAAUD,OAAO3E,GAAP,KAAe,EAA7B;AACA,gBAAI6E,OAAOD,QAAQtK,KAAR,CAAc,4BAAd,CAAX;AACA,gBAAIuK,IAAJ,EAAU;AACNhL,uBAAOgL,KAAK,CAAL,CAAP,IAAkBA,KAAK,CAAL,CAAlB;AACH;AACJ;AACD,eAAOhL,MAAP;AACH,KAfD;AAgBAiE,iBAAagH,QAAb,GAAwB,UAAU9E,GAAV,EAAewE,WAAf,EAA4B;AAChD,eAAO1G,aAAayG,MAAb,CAAoBC,WAApB,EAAiCxE,GAAjC,CAAP;AACH,KAFD;AAGA;;;;AAIAlC,iBAAaiH,MAAb,GAAsB,UAAU/G,GAAV,EAAe;AACjC,YAAIrE,MAAMqE,IAAIC,QAAJ,EAAV;AACA,YAAI+G,MAAM,CAAV;AACA,aAAK,IAAI1F,IAAI,CAAb,EAAgBA,IAAI3F,IAAIe,MAAxB,EAAgC4E,GAAhC,EAAqC;AACjC,gBAAI2F,IAAItL,IAAIuL,UAAJ,CAAe5F,CAAf,CAAR;AACA,gBAAI2F,IAAI,GAAR,EAAa;AACTD,uBAAO,CAAP;AACH,aAFD,MAGK;AACDA,uBAAO,CAAP;AACH;AACJ;AACD,eAAOA,GAAP;AACH,KAbD;AAcA,WAAOlH,YAAP;AACH,CAhZiC,EAAlC;AAiZA1F,QAAQ0F,YAAR,GAAuBA,YAAvB;AACA1F,QAAQ+M,sBAAR,GAAiC,UAAUC,MAAV,EAAkB5B,WAAlB,EAA+BC,aAA/B,EAA8C;AAC3EnL,WAAOC,cAAP,CAAsB6M,MAAtB,EAA8B5B,WAA9B,EAA2C;AACvCK,sBAAc,KADyB;AAEvCC,oBAAY,IAF2B;AAGvCtL,eAAOiL,aAHgC;AAIvCM,kBAAU;AAJ6B,KAA3C;AAMH,CAPD;AAQA3L,QAAQiN,iBAAR,GAA4B,UAAUC,WAAV,EAAuB;AAC/C,QAAIC,MAAM,MAAV;AACA,QAAID,eAAeA,YAAY5K,MAAZ,GAAqB,CAAxC,EAA2C;AACvC,aAAK,IAAI4E,IAAI,CAAb,EAAgBA,IAAIgG,YAAY5K,MAAhC,EAAwC4E,GAAxC,EAA6C;AACzC,gBAAIkG,aAAaF,YAAYhG,CAAZ,CAAjB;AACA,gBAAImG,WAAWD,WAAWlL,KAAX,CAAiB,4BAAjB,CAAf;AACA,gBAAImL,QAAJ,EAAc;AACVF,sBAAME,SAAS,CAAT,CAAN;AACH,aAFD,MAGK;AACD,oBAAIC,SAASF,WAAWlL,KAAX,CAAiB,0BAAjB,CAAb;AACA,oBAAIoL,MAAJ,EAAY;AACRH,0BAAMG,OAAO,CAAP,CAAN;AACH;AACJ;AACJ;AACJ;AACD,WAAOH,GAAP;AACH,CAlBD;AAmBAnN,QAAQuN,UAAR,GAAqB,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,QAAIhM,MAAJ;AACA,QAAIiM,UAAU,KAAd;AACA,QAAIC,YAAY,KAAhB;AACA,QAAIC,SAAS,WAAb;AACA,QAAIC,cAAc,oBAAlB;AACA,QAAIC,WAAW,YAAYnM,IAAZ,CAAiB8L,MAAjB,CAAf;AACA,QAAID,WAAWA,QAAQlL,MAAR,GAAiB,CAAhC,EAAmC;AAC/B,aAAK,IAAI4E,IAAI,CAAb,EAAgBA,IAAIsG,QAAQlL,MAA5B,EAAoC4E,GAApC,EAAyC;AACrC,gBAAI6G,MAAMP,QAAQtG,CAAR,CAAV;AACA,gBAAI4G,QAAJ,EAAc;AACV,oBAAIC,QAAQN,MAAZ,EAAoB;AAChB,wBAAI,CAACG,OAAOjM,IAAP,CAAY6L,QAAQtG,IAAI,CAAZ,CAAZ,CAAL,EAAkC;AAC9BzF,iCAAS+L,QAAQtG,IAAI,CAAZ,MAAmBpC,SAAnB,GAA+B,IAA/B,GAAsC0I,QAAQtG,IAAI,CAAZ,CAA/C;AACAyG,oCAAYzG,IAAI,CAAJ,GAAQsG,QAAQlL,MAA5B;AACA;AACH;AACJ;AACJ,aARD,MASK;AACD,oBAAI,CAACsL,OAAOjM,IAAP,CAAYoM,GAAZ,CAAL,EAAuB;AACnB,wBAAIC,gBAAgBD,IAAI7L,KAAJ,CAAU2L,WAAV,CAApB;AACA,wBAAIG,iBAAiBA,cAAc,CAAd,MAAqBP,MAA1C,EAAkD;AAC9ChM,iCAASsM,IAAI/L,OAAJ,CAAY6L,WAAZ,EAAyB,EAAzB,CAAT;AACAF,oCAAY,IAAZ;AACA;AACH,qBAJD,MAKK;AACD,4BAAII,QAAQN,MAAR,IAAkB,CAACG,OAAOjM,IAAP,CAAY6L,QAAQtG,IAAI,CAAZ,CAAZ,CAAvB,EAAoD;AAChDwG,sCAAU,IAAV;AACH;AACJ;AACJ;AACJ;AACJ;AACJ;AACD,WAAOC,YAAYlM,MAAZ,GAAsBiM,UAAU,IAAV,GAAiBjM,MAA9C;AACH,CArCD;AAsCA,wC;;;;;;;ACrda;;AACbvB,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAI6N,yBAAyB5N,mBAAOA,CAAC,CAAR,CAA7B;AACA;;;;;AAKAL,QAAQkO,mBAAR,GAA8B,UAAUC,cAAV,EAA0BC,iBAA1B,EAA6C;AACvE,QAAIC,SAASJ,uBAAuBzI,sBAApC;AACA,QAAI8I,aAAaL,uBAAuBxI,uBAAxC;AACA,QAAI8I,aAAa;AACbC,kBAAU,IADG;AAEbC,eAAO;AAFM,KAAjB;AAIA,QAAI,CAACN,eAAeE,MAAf,CAAL,EAA6B;AACzBE,mBAAWC,QAAX,GAAsB,EAAtB;AACAD,mBAAWE,KAAX,GAAmB,EAAnB;AACAL,0BAAkBC,MAAlB,EAA0BE,WAAWE,KAArC,EAHyB,CAGoB;AAC7CL,0BAAkBE,UAAlB,EAA8BC,WAAWC,QAAzC,EAJyB,CAI2B;AACpDH,iBAAS,IAAT;AACAC,qBAAa,IAAb;AACH,KAPD,MAQK;AACDC,mBAAWE,KAAX,GAAmBN,eAAeE,MAAf,CAAnB;AACAE,mBAAWC,QAAX,GAAsBL,eAAeG,UAAf,CAAtB;AACH;AACD,WAAOC,UAAP;AACH,CApBD,C;;;;;;;;;;;;;;;;;;ACLA,IAAM,iBAAiB,SAAjB,cAAiB,CAAC,YAAD,EAAqB;AACxC,QAAI,QAAQ,aAAa,OAAb,CAAqB,UAArB,EAAiC,KAAjC,EAAwC,OAAxC,CAAgD,WAAhD,EAA6D,KAA7D,EAAoE,WAApE,EAAZ;AACA,YAAQ,MAAM,IAAN,CAAW,KAAX,IAAoB,KAApB,GAA4B,MAAM,KAA1C;AACA,YAAQ,QAAQ,KAAhB;AACA,WAAO,KAAP;AACH,CALD;AAOA,IAAM,oBAAoB,SAApB,iBAAoB,CAAC,OAAD,EAA6B,OAA7B,EAA6C;AACnE,QAAM,WAAW,SAAX,QAAW,CAAC,aAAD,EAA0B,YAA1B,EAA+C;AAC5D;AACA,YAAM,UAAU,cAAc,QAAd,EAAhB;AACA,YAAM,SAAS,QAAQ,KAAR,CAAc,kCAAd,CAAf;AACA,YAAM,YAAY,4BAAlB;AACA,YAAI,MAAJ,EAAY;AACR,gBAAI,QAAQ,OAAO,CAAP,CAAZ;AACA,oBAAQ,gBAAgB,aAAa,MAAb,GAAoB,CAApC,GAAwC,YAAxC,GAAwD,KAAhE;AACA,oBAAQ,eAAe,KAAf,CAAR;AACA,gBAAM,WAAW,UAAU,UAAV,IAAwB,EAAzC;AACA,gBAAI,CAAC,SAAS,KAAT,CAAL,EAAsB;AAClB,uBAAO,cAAP,CAAsB,aAAtB,EAAqC,UAArC,EAAiD;AAC7C,kCAAc,KAD+B;AAE7C,gCAAY,IAFiC;AAG7C,2BAAO,KAHsC;AAI7C,8BAAU;AAJmC,iBAAjD;AAMA,uBAAO,cAAP,CAAsB,UAAU,UAAhC,EAA4C,KAA5C,EAAmD;AAC/C,kCAAc,KADiC;AAE/C,gCAAY,IAFmC;AAG/C,2BAAO,aAHwC;AAI/C,8BAAU;AAJqC,iBAAnD;AAMH;AACJ,SAnBD,MAmBO;AACH,kBAAM,IAAI,KAAJ,CAAU,UAAV,CAAN;AACH;AACJ,KA3BD;AA4BA,QAAI,QAAO,OAAP,yCAAO,OAAP,OAAmB,QAAvB,EAAiC;AAC7B,eAAO,IAAP,CAAY,OAAZ,EAAqB,GAArB,CAAyB,UAAC,IAAD,EAAK;AAC1B,gBAAM,UAAgB,QAAS,IAAT,CAAtB;AACA,gBAAI,OAAO,OAAP,KAAmB,UAAvB,EAAmC;AAC/B,yBAAS,OAAT,EAAkB,IAAlB;AACH,aAFD,MAEO;AACH,sBAAM,IAAI,KAAJ,CAAU,4BAA0B,IAA1B,GAA8B,qBAAxC,CAAN;AACH;AACJ,SAPD;AAQH,KATD,MASO,IAAI,OAAO,OAAP,KAAmB,UAAvB,EAAmC;AACtC,iBAAS,OAAT,EAAkB,OAAlB;AACH,KAFM,MAEA;AACH,cAAM,IAAI,KAAJ,CAAU,6DAAV,CAAN;AACH;AACJ,CA3CD;AA6CA,IAAM,yBAAyB,SAAzB,sBAAyB,CAAC,MAAD,EAAa,WAAb,EAAkC,aAAlC,EAAoD;AAC/E,WAAO,cAAP,CAAsB,MAAtB,EAA8B,WAA9B,EAA2C;AACvC,sBAAc,KADyB;AAEvC,oBAAY,IAF2B;AAGvC,eAAO,aAHgC;AAIvC,kBAAU;AAJ6B,KAA3C;AAMH,CAPD;AAQA;;;;;AAKO,IAAM,8CAAmB,SAAnB,gBAAmB,CAAC,OAAD,EAAkC;AAC9D;AACA;AACA,qBAAC,YAAD,EAAuB;;AACnB,qBAAa,SAAb,CAAuB,QAAvB,GAAkC,eAAe,QAAQ,QAAR,IAAoB,EAAnC,CAAlC;AACA;AACA,+BAAuB,aAAa,SAApC,EAA+C,aAA/C,EAA8D,QAAQ,KAAtE;AACA,+BAAuB,aAAa,SAApC,EAA+C,eAA/C,EAAgE,QAAQ,OAAxE;AACA,+BAAuB,aAAa,SAApC,EAA+C,SAA/C,EAA0D,QAAQ,OAAlE;AACA,+BAAuB,aAAa,SAApC,EAA+C,YAA/C,EAA6D,QAAQ,IAArE;AACA,+BAAuB,aAAa,SAApC,EAA+C,UAA/C,EAA2D,QAAQ,QAAnE;AACA,gBAAQ,UAAR,IAAsB,uBAAuB,aAAa,SAApC,EAA+C,YAA/C,EAA6D,QAAQ,UAArE,CAAtB;AACA,kBAAI,QAAQ,QAAZ,MAAoB,IAApB,IAAoB,aAApB,GAAoB,MAApB,GAAoB,GAAE,UAAtB,EAAkC;AAC9B,mCAAuB,aAAa,SAApC,EAA+C,QAA/C,EAA0D;AACtD,uBAAO,KAAK,QAAZ;AACH,aAFwD,CAEtD,IAFsD,CAEjD,EAAE,UAAU,QAAQ,QAAR,CAAiB,QAA7B,EAFiD,CAAzD;AAGH;AACD,0BAAkB,YAAlB,EAAgC,QAAQ,QAAxC;AACH,KAfD;AAeC,CAlBE,C;;;;;;;;ACpEM;;AACb,SAAS1O,QAAT,CAAkBC,CAAlB,EAAqB;AACjB,SAAK,IAAIC,CAAT,IAAcD,CAAd;AAAiB,YAAI,CAACE,QAAQC,cAAR,CAAuBF,CAAvB,CAAL,EAAgCC,QAAQD,CAAR,IAAaD,EAAEC,CAAF,CAAb;AAAjD;AACH;AACDG,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACAP,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACA,iC;;;;;;;ACVa;;AACb,IAAIC,YAAa,aAAQ,UAAKA,SAAd,IAA6B,YAAY;AACrD,QAAIC,iBAAgB,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,yBAAgBL,OAAOQ,cAAP,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUJ,CAAV,EAAaC,CAAb,EAAgB;AAAED,cAAEG,SAAF,GAAcF,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,iBAAK,IAAIV,CAAT,IAAcU,CAAd;AAAiB,oBAAIA,EAAER,cAAF,CAAiBF,CAAjB,CAAJ,EAAyBS,EAAET,CAAF,IAAOU,EAAEV,CAAF,CAAP;AAA1C;AAAwD,SAF9E;AAGA,eAAOQ,eAAcC,CAAd,EAAiBC,CAAjB,CAAP;AACH,KALD;AAMA,WAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,uBAAcC,CAAd,EAAiBC,CAAjB;AACA,iBAASI,EAAT,GAAc;AAAE,iBAAKC,WAAL,GAAmBN,CAAnB;AAAuB;AACvCA,UAAEO,SAAF,GAAcN,MAAM,IAAN,GAAaP,OAAOc,MAAP,CAAcP,CAAd,CAAb,IAAiCI,GAAGE,SAAH,GAAeN,EAAEM,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAZ2C,EAA5C;AAaAX,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIa,iBAAiBZ,mBAAOA,CAAC,CAAR,CAArB;AACA,IAAIqO,oBAAoB,aAAe,UAAUvN,MAAV,EAAkB;AACrDb,cAAUoO,iBAAV,EAA6BvN,MAA7B;AACA,aAASuN,iBAAT,GAA6B;AACzB,eAAOvN,WAAW,IAAX,IAAmBA,OAAOC,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAA3D;AACH;AACD;;;;;AAKAqN,sBAAkB3N,SAAlB,CAA4B4N,IAA5B,GAAmC,UAAUC,KAAV,EAAiB;AAChD,YAAIC,eAAeD,MAAMC,YAAzB;AACA,YAAIpN,SAAS;AACTqN,sBAAU,IADD;AAETC,wBAAYH,MAAMI;AAFT,SAAb;AAIA;AACA;AACA,YAAIH,gBAAgBA,aAAaI,QAA7B,IAAyCJ,aAAaI,QAAb,CAAsB3M,MAAtB,GAA+B,CAA5E,EAA+E;AAC3E,iBAAK,IAAI4M,YAAY,CAArB,EAAwBA,YAAYL,aAAaI,QAAb,CAAsB3M,MAA1D,EAAkE4M,WAAlE,EAA+E;AAC3E,oBAAIC,SAASN,aAAaI,QAAb,CAAsBC,SAAtB,CAAb;AACA,oBAAI,CAACC,OAAOC,MAAZ,EAAoB;AAChB,wBAAIC,cAAc,KAAKC,QAAL,CAAcV,MAAMW,GAApB,EAAyBJ,MAAzB,CAAlB;AACA,wBAAIE,YAAYC,QAAhB,EAA0B;AACtB,4BAAIV,MAAMW,GAAN,CAAUC,MAAV,KAAqB,QAAzB,EAAmC;AAC/B,gCAAIZ,MAAMI,cAAN,GAAuBE,SAA3B,EAAsC;AAClC,oCAAIC,OAAOK,MAAP,KAAkB,QAAtB,EAAgC;AAC5BZ,0CAAMW,GAAN,CAAUC,MAAV,GAAmBH,YAAYI,SAAZ,GAAwB,YAAxB,GAAuC,MAA1D;AACH,iCAFD,MAGK;AACDb,0CAAMW,GAAN,CAAUC,MAAV,GAAmB,QAAnB;AACH;AACJ,6BAPD,MAQK;AACD;AACA;AACAZ,sCAAMW,GAAN,CAAUC,MAAV,GAAmBL,OAAOK,MAAP,KAAkB,QAAlB,GAA6BH,YAAYI,SAAZ,GAAwB,QAAxB,GAAmC,QAAhE,GAA2E,QAA9F;AACH;AACD,gCAAIJ,YAAYI,SAAhB,EAA2B;AACvBb,sCAAMW,GAAN,CAAUG,WAAV,GAAwBL,YAAYM,WAApC;AACAf,sCAAMW,GAAN,CAAUK,WAAV,GAAwBP,YAAYQ,WAApC;AACH;AACJ;AACDpO,+BAAOqN,QAAP,GAAkBK,MAAlB;AACA1N,+BAAOsN,UAAP,GAAoBG,SAApB;AACAN,8BAAMW,GAAN,CAAUA,GAAV,GAAgBJ,OAAOI,GAAvB;AACAX,8BAAMW,GAAN,CAAUO,SAAV,GAAsBX,OAAOW,SAA7B,CAvBsB,CAuBkB;AACxClB,8BAAMW,GAAN,CAAUQ,QAAV,GAAqBZ,OAAOY,QAA5B;AACAZ,+BAAOC,MAAP,GAAgB,IAAhB;AACA;AACA;AACH;AACJ;AACJ;AACJ;AACD,eAAO3N,MAAP;AACH,KA9CD;AA+CA;;;;;;AAMAiN,sBAAkB3N,SAAlB,CAA4BiP,OAA5B,GAAsC,UAAUC,CAAV,EAAaC,CAAb,EAAgBC,OAAhB,EAAyB;AAC3D,YAAI,KAAKpK,QAAL,CAAckK,CAAd,KAAoB,KAAKlK,QAAL,CAAcmK,CAAd,CAApB,IAAwCD,EAAE3N,MAAF,KAAa,CAArD,IAA0D4N,EAAE5N,MAAF,KAAa,CAA3E,EAA8E;AAC1E,mBAAO,CAAP;AACH;AACD,YAAI,CAAC2N,CAAD,IAAM,CAACC,CAAX,EAAc;AACV,mBAAO,CAAP;AACH;AACD,YAAIE,IAAIH,EAAE3N,MAAF,GAAW4N,EAAE5N,MAAb,GAAsB2N,EAAE3N,MAAxB,GAAiC4N,EAAE5N,MAA3C;AACA,YAAI+N,IAAIJ,EAAE3N,MAAV;AACA,YAAIxC,IAAIoQ,EAAE5N,MAAV;AACA,YAAI9B,IAAI,EAAR;AACA,YAAI8P,IAAIH,WAAW,CAAnB;AACA,YAAIjJ,CAAJ,EAAOqJ,CAAP,EAAUC,EAAV,EAAcC,EAAd,EAAkBC,IAAlB;AACA;AACA,YAAIL,MAAM,CAAV,EACI,OAAOvQ,CAAP;AACJ;AACA,YAAIA,MAAM,CAAV,EACI,OAAOuQ,CAAP;AACJ,aAAKnJ,IAAI,CAAT,EAAYA,KAAKmJ,CAAjB,EAAoBnJ,GAApB,EAAyB;AACrB1G,cAAE0G,CAAF,IAAO,EAAP;AACA1G,cAAE0G,CAAF,EAAK,CAAL,IAAUA,CAAV;AACH;AACD,aAAKqJ,IAAI,CAAT,EAAYA,KAAKzQ,CAAjB,EAAoByQ,GAApB,EAAyB;AACrB/P,cAAE,CAAF,EAAK+P,CAAL,IAAUA,CAAV;AACH;AACD,aAAKrJ,IAAI,CAAT,EAAYA,KAAKmJ,CAAjB,EAAoBnJ,GAApB,EAAyB;AACrBsJ,iBAAKP,EAAEU,MAAF,CAASzJ,IAAI,CAAb,CAAL;AACA,iBAAKqJ,IAAI,CAAT,EAAYA,KAAKzQ,CAAjB,EAAoByQ,GAApB,EAAyB;AACrBE,qBAAKP,EAAES,MAAF,CAASJ,IAAI,CAAb,CAAL;AACA,oBAAIC,OAAOC,EAAX,EAAe;AACXC,2BAAO,CAAP;AACH,iBAFD,MAGK;AACDA,2BAAO,CAAP;AACH;AACDlQ,kBAAE0G,CAAF,EAAKqJ,CAAL,IAAU,KAAKK,GAAL,CAASpQ,EAAE0G,IAAI,CAAN,EAASqJ,CAAT,IAAc,CAAvB,EAA0B/P,EAAE0G,CAAF,EAAKqJ,IAAI,CAAT,IAAc,CAAxC,EAA2C/P,EAAE0G,IAAI,CAAN,EAASqJ,IAAI,CAAb,IAAkBG,IAA7D,CAAV;AACH;AACJ;AACD,YAAIG,MAAO,IAAIrQ,EAAE6P,CAAF,EAAKvQ,CAAL,IAAUsQ,CAAzB;AACA,eAAOzL,WAAWkM,IAAIV,OAAJ,CAAYG,CAAZ,CAAX,CAAP;AACH,KAzCD;AA0CA5B,sBAAkB3N,SAAlB,CAA4B6P,GAA5B,GAAkC,UAAUhK,CAAV,EAAanG,CAAb,EAAgBoM,CAAhB,EAAmB;AACjD,eAAOjG,IAAInG,CAAJ,GAASmG,IAAIiG,CAAJ,GAAQjG,CAAR,GAAYiG,CAArB,GAA2BpM,IAAIoM,CAAJ,GAAQpM,CAAR,GAAYoM,CAA9C;AACH,KAFD;AAGA6B,sBAAkB3N,SAAlB,CAA4BuO,QAA5B,GAAuC,UAAUwB,MAAV,EAAkBC,MAAlB,EAA0B;AAC7D,YAAIjO,QAAQ,IAAZ;AACA,YAAIrB,SAAS;AACToO,yBAAa,EADJ;AAETJ,uBAAW,KAFF;AAGTH,sBAAU,KAHD;AAIT0B,4BAAgB,CAJP;AAKTrB,yBAAa;AALJ,SAAb;AAOA,YAAImB,OAAOG,OAAP,KAAmBF,OAAOE,OAA9B,EAAuC;AACnC,gBAAI,CAAC,KAAK/L,OAAL,CAAa4L,OAAOI,KAAP,CAAatJ,GAA1B,CAAD,IAAmC,CAAC,KAAK1C,OAAL,CAAa6L,OAAOG,KAAP,CAAatJ,GAA1B,CAAxC,EAAwE;AACpE;AACA,oBAAIkJ,OAAOI,KAAP,CAAatJ,GAAb,KAAqBmJ,OAAOG,KAAP,CAAatJ,GAAtC,EAA2C;AACvCnG,2BAAO6N,QAAP,GAAkB,IAAlB;AACA7N,2BAAOuP,cAAP,GAAwB,CAAxB;AACH;AACJ,aAND,MAOK,IAAI,KAAK9L,OAAL,CAAa4L,OAAOI,KAAP,CAAatJ,GAA1B,KAAkC,KAAK1C,OAAL,CAAa6L,OAAOG,KAAP,CAAatJ,GAA1B,CAAtC,EAAsE;AACvE;AACA;AACA,oBAAIuJ,YAAY,CAAhB;AACA,oBAAI,CAAC,UAAUxP,IAAV,CAAemP,OAAOG,OAAtB,CAAL,EAAqC;AACjC;AACA,wBAAIH,OAAO7B,QAAP,CAAgB3M,MAAhB,KAA2ByO,OAAO9B,QAAP,CAAgB3M,MAA/C,EAAuD;AACnD;AACA;AACA,4BAAI8O,OAAO,KAAKC,wBAAL,CAA8BP,MAA9B,EAAsCC,MAAtC,CAAX;AACA,4BAAIO,SAAS,KAAKtB,OAAL,CAAac,OAAOS,QAApB,EAA8BR,OAAOQ,QAArC,CAAb;AACA;AACA;AACA;AACA,4BAAI,CAAC,KAAKrM,OAAL,CAAa4L,OAAOS,QAApB,CAAL,EAAoC;AAChCJ,wCAAYvH,KAAK4H,GAAL,CAASJ,IAAT,EAAeE,MAAf,CAAZ;AACH,yBAFD,MAGK;AACDH,wCAAYC,IAAZ;AACH;AACJ,qBAdD,MAeK;AACD;AACAD,oCAAY,KAAKnB,OAAL,CAAac,OAAOS,QAApB,EAA8BR,OAAOQ,QAArC,CAAZ;AACH;AACJ,iBArBD,MAsBK;AACD;AACAJ,gCAAYL,OAAOW,SAAP,KAAqBV,OAAOU,SAA5B,GAAwC,CAAxC,GAA4C,GAAxD;AACH;AACD;AACA;AACAhQ,uBAAO6N,QAAP,GAAkB6B,aAAa,IAA/B;AACA1P,uBAAOuP,cAAP,GAAwBG,SAAxB;AACH;AACD,gBAAI1P,OAAO6N,QAAX,EAAqB;AAAE;AACnB,oBAAIwB,OAAOG,OAAP,KAAmB,MAAvB,EAA+B;AAC3B,wBAAIS,aAAcZ,OAAOI,KAAP,IAAgB,EAAlC;AACA,wBAAIS,aAAcZ,OAAOG,KAAP,IAAgB,EAAlC;AACA,wBAAIU,iBAAiB1R,OAAO2R,IAAP,CAAYH,UAAZ,CAArB;AACA,wBAAII,eAAe5R,OAAO2R,IAAP,CAAYF,UAAZ,CAAnB;AACA,wBAAII,gBAAgB,EAApB;AACAD,iCAAa/M,GAAb,CAAiB,UAAUiN,MAAV,EAAkB;AAC/B,4BAAIJ,eAAe/G,OAAf,CAAuBmH,MAAvB,KAAkC,CAAtC,EAAyC;AACrC;AACA;AACA,gCAAIlP,MAAMkD,QAAN,CAAe0L,WAAWM,MAAX,CAAf,KAAsClP,MAAMkD,QAAN,CAAe0L,WAAWM,MAAX,CAAf,CAA1C,EAA8E;AAC1E;AACA,oCAAI,CAAClP,MAAM6D,OAAN,CAAc+K,WAAWM,MAAX,CAAd,EAAkCL,WAAWK,MAAX,CAAlC,CAAL,EAA4D;AACxD;AACAvQ,2CAAOgO,SAAP,GAAmB,IAAnB;AACAsC,kDAAcC,MAAd,IAAwBN,WAAWM,MAAX,CAAxB;AACH;AACJ,6BAPD,MAQK,IAAI,CAAClP,MAAMkD,QAAN,CAAe0L,WAAWM,MAAX,CAAf,CAAD,IAAuC,CAAClP,MAAMkD,QAAN,CAAe0L,WAAWM,MAAX,CAAf,CAA5C,EAAgF;AACjF;AACA,oCAAIN,WAAWM,MAAX,MAAuBL,WAAWK,MAAX,CAA3B,EAA+C;AAC3C;AACAvQ,2CAAOgO,SAAP,GAAmB,IAAnB;AACAsC,kDAAcC,MAAd,IAAwBN,WAAWM,MAAX,CAAxB;AACH;AACJ;AACJ,yBAnBD,MAoBK;AACD;AACAvQ,mCAAOgO,SAAP,GAAmB,IAAnB;AACAhO,mCAAOoO,WAAP,CAAmBpL,IAAnB,CAAwBuN,MAAxB;AACH;AACJ,qBA1BD;AA2BAvQ,2BAAOkO,WAAP,GAAqBoC,aAArB;AACH,iBAlCD,MAmCK;AACD,wBAAItQ,OAAOuP,cAAP,KAA0B,CAA9B,EAAiC;AAC7BvP,+BAAOgO,SAAP,GAAmB,IAAnB;AACH;AACJ;AACJ;AACJ;AACD,eAAOhO,MAAP;AACH,KAhGD;AAiGA;;;;AAIAiN,sBAAkB3N,SAAlB,CAA4BsQ,wBAA5B,GAAuD,UAAUP,MAAV,EAAkBC,MAAlB,EAA0B;AAC7E,YAAID,OAAO7B,QAAP,CAAgB3M,MAAhB,KAA2ByO,OAAO9B,QAAP,CAAgB3M,MAA/C,EAAuD;AACnD,gBAAIwO,OAAO7B,QAAP,CAAgB3M,MAAhB,GAAyB,CAA7B,EAAgC;AAC5B,qBAAK,IAAI4E,IAAI,CAAb,EAAgBA,IAAI4J,OAAO7B,QAAP,CAAgB3M,MAApC,EAA4C4E,GAA5C,EAAiD;AAC7C,wBAAI4J,OAAO7B,QAAP,CAAgB/H,CAAhB,EAAmB+J,OAAnB,KAA+BF,OAAO9B,QAAP,CAAgB/H,CAAhB,EAAmB+J,OAAtD,EAA+D;AAC3D,+BAAO,CAAP;AACH;AACJ;AACD,uBAAO,CAAP;AACH,aAPD,MAQK;AACD;AACA,uBAAO,CAAP;AACH;AACJ,SAbD,MAcK;AACD,mBAAO,CAAP;AACH;AACJ,KAlBD;AAmBA,WAAOvC,iBAAP;AACH,CArOsC,CAqOrCzN,eAAeqE,MArOsB,CAAvC;AAsOAtF,QAAQ0O,iBAAR,GAA4BA,iBAA5B;AACA,6C;;;;;;;ACvPa;;;;AACbxO,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACAJ,QAAQiS,SAAR,GAAoB,UAAUC,OAAV,EAAmB;AACnC,WAAQ,IAAI7M,QAAJ,CAAa,YAAY6M,OAAzB,CAAD,EAAP;AACH,CAFD;AAGAlS,QAAQmS,SAAR,GAAoB,UAAUC,IAAV,EAAgB;AAChC,WAAO,OAAOA,IAAP,KAAgB,UAAhB,GAA6BA,KAAKvM,QAAL,EAA7B,GAA+C,EAAtD;AACH,CAFD;AAGA7F,QAAQqS,SAAR,GAAoB,UAAUC,CAAV,EAAa;AAC7B,QAAIC,UAAUD,EAAE3K,IAAhB;AACA,QAAI6K,UAAUD,QAAQE,IAAtB;AACA,QAAIC,QAAQC,KAAK,OAAL,CAAZ;AACA,QAAIC,WAAW1S,OAAOa,SAAP,CAAiB8E,QAAjB,CAA0BC,IAA1B,CAA+ByM,QAAQ5K,IAAvC,CAAf;AACA,QAAIkL,KAAJ;AACA,QAAI;AACA,YAAIL,YAAY,YAAhB,EAA8B;AAC1BG,iBAAKJ,QAAQO,UAAb,IAA2BH,KAAK,oBAAL,EAA2BJ,QAAQ5K,IAAnC,CAA3B;AACA+K,kBAAMK,OAAN,CAAc;AACVC,oBAAIT,QAAQS,EADF;AAEVC,yBAAS,SAFC;AAGVC,4BAAY,GAHF;AAIVT,sBAAMD;AAJI,aAAd;AAMA;AACH,SATD,MAUK,IAAIA,YAAY,cAAhB,EAAgC;AACjCG,iBAAKJ,QAAQO,UAAb,IAA2BH,KAAK,WAAL,EAAkBJ,QAAQ5K,IAA1B,CAA3B;AACA+K,kBAAMK,OAAN,CAAc;AACVC,oBAAIT,QAAQS,EADF;AAEVC,yBAAS,SAFC;AAGVC,4BAAY,GAHF;AAIVT,sBAAMD;AAJI,aAAd;AAMA;AACH,SATI,MAUA,IAAIA,YAAY,eAAZ,IAA+BA,YAAY,YAA/C,EAA6D;AAC9D,gBAAIW,SAASZ,QAAQhL,GAArB;AACA,gBAAI6L,eAAeb,QAAQc,MAA3B;AACA,gBAAIC,WAAW,KAAK,CAApB;AACA,gBAAId,YAAY,eAAhB,EAAiC;AAC7B,oBAAIrN,UAAU,cAAcgO,MAAd,GAAuB,GAAvB,GAA6BC,YAA7B,GAA4C,OAA1D;AACA,oBAAIR,aAAa,gBAAjB,EAAmC;AAC/BzN,+BAAW,qBAAqBgO,MAArB,GAA8B,cAAzC;AACH,iBAFD,MAGK;AACDhO,+BAAW,sBAAX;AACH;AACDmO,2BAAW,IAAIjO,QAAJ,CAAa,MAAb,EAAqBF,OAArB,CAAX;AACH,aATD,MAUK;AACD,oBAAIyN,aAAa,gBAAjB,EAAmC;AAC/BU,+BAAW,IAAIjO,QAAJ,CAAa,MAAb,EAAqB,YAAY+N,YAAZ,GAA2B,qBAAhD,CAAX;AACH,iBAFD,MAGK;AACDE,+BAAW,IAAIjO,QAAJ,CAAa,MAAb,EAAqB,YAAY+N,YAAZ,GAA2B,SAAhD,CAAX;AACH;AACJ;AACD,gBAAI,OAAOE,QAAP,KAAoB,UAAxB,EAAoC;AAChC,oBAAIC,aAAaD,SAASf,QAAQ5K,IAAjB,CAAjB;AACA+K,sBAAMK,OAAN,CAAc;AACVpL,0BAAM4L,UADI;AAEVP,wBAAIT,QAAQS,EAFF;AAGVC,6BAAS,EAHC;AAIVC,gCAAY,GAJF;AAKVT,0BAAMD;AALI,iBAAd;AAOH,aATD,MAUK;AACDE,sBAAMK,OAAN,CAAc;AACVC,wBAAIT,QAAQS,EADF;AAEVC,6BAASJ,UAAU/N,SAAV,GAAsB,mCAAtB,GAA4D,wCAF3D;AAGV2N,0BAAM;AAHI,iBAAd;AAKH;AACD;AACH;AACJ,KA9DD,CA+DA,OAAOH,CAAP,EAAU;AACNkB,gBAAQC,KAAR,CAAcnB,CAAd;AACAI,cAAMK,OAAN,CAAc;AACVpL,kBAAM7C,SADI;AAEV2O,mBAAOnB,CAFG;AAGVU,gBAAIT,QAAQS,EAHF;AAIVC,qBAASX,EAAEW,OAJD;AAKVC,wBAAY,GALF;AAMVT,kBAAMD;AANI,SAAd;AAQH;AACJ,CAhFD;AAiFAxS,QAAQ0T,kBAAR,GAA6B,UAAUnM,GAAV,EAAe;AACxC,QAAI9F,SAAS;AACTkG,cAAM,EADG;AAETgM,kBAAU;AAFD,KAAb;AAIA,QAAI,QAAOpM,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6B;AACzB,aAAK,IAAIK,GAAT,IAAgBL,GAAhB,EAAqB;AACjB,gBAAI,OAAOA,IAAIK,GAAJ,CAAP,KAAoB,UAAxB,EAAoC;AAChCnG,uBAAOkS,QAAP,CAAgB/L,GAAhB,IAAuBL,IAAIK,GAAJ,EAAS/B,QAAT,EAAvB;AACH,aAFD,MAGK;AACDpE,uBAAOkG,IAAP,CAAYC,GAAZ,IAAmBL,IAAIK,GAAJ,CAAnB;AACH;AACJ;AACJ;AACD,WAAOnG,MAAP;AACH,CAhBD;AAiBAzB,QAAQ4T,kBAAR,GAA6B,UAAUrM,GAAV,EAAesM,SAAf,EAA0B;AACnD,QAAIC,cAAcD,YAAa,IAAIjL,IAAJ,EAAD,CAAamL,MAAb,CAAoB,eAApB,CAA9B;AACA,QAAItS,SAAS,kBAAb;AACAA,cAAU,kBAAkBoS,SAAlB,GAA8B,WAAxC;AACA,QAAI,QAAOtM,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6B;AACzB,YAAIyM,UAAU,SAAVA,OAAU,CAAUpM,GAAV,EAAe;AACzB,gBAAIqM,WAAW1M,IAAIK,GAAJ,CAAf;AACA,gBAAIsM,UAAUhU,OAAOa,SAAP,CAAiB8E,QAAjB,CAA0BC,IAA1B,CAA+BmO,QAA/B,CAAd;AACA,gBAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAChC,oBAAIxR,OAAOwR,SAASpO,QAAT,EAAX;AACApE,0BAAU,SAASoS,SAAT,GAAqB,aAArB,GAAqCjM,GAArC,GAA2C,KAA3C,GAAmDnF,IAAnD,GAA0D,OAApE;AACH,aAHD,MAIK,IAAIyR,YAAY,iBAAhB,EAAmC;AACpC,oBAAIC,UAAUF,SAASpO,QAAT,EAAd;AACApE,0BAAU,SAASoS,SAAT,GAAqB,aAArB,GAAqCjM,GAArC,GAA2C,KAA3C,GAAmDuM,OAAnD,GAA6D,OAAvE;AACH,aAHI,MAIA,IAAID,YAAY,gBAAhB,EAAkC;AACnC,oBAAIE,cAAc,EAAlB;AACAH,yBAASlP,GAAT,CAAa,UAAUyH,OAAV,EAAmB;AAC5B,wBAAItM,OAAOa,SAAP,CAAiB8E,QAAjB,CAA0BC,IAA1B,CAA+B0G,OAA/B,MAA4C,iBAAhD,EAAmE;AAC/D4H,oCAAY3P,IAAZ,CAAiB+H,QAAQ3G,QAAR,EAAjB;AACH,qBAFD,MAGK;AACDuO,oCAAY3P,IAAZ,CAAiB4P,KAAKC,SAAL,CAAe9H,OAAf,CAAjB;AACH;AACJ,iBAPD;AAQA/K,0BAAU,SAASoS,SAAT,GAAqB,aAArB,GAAqCjM,GAArC,GAA2C,MAA3C,GAAoDwM,YAAY5R,IAAZ,CAAiB,GAAjB,CAApD,GAA4E,QAAtF;AACH,aAXI,MAYA;AACDf,0BAAU,SAASoS,SAAT,GAAqB,aAArB,GAAqCjM,GAArC,GAA2C,KAA3C,GAAmDyM,KAAKC,SAAL,CAAe/M,IAAIK,GAAJ,CAAf,CAAnD,GAA8E,OAAxF;AACH;AACJ,SA1BD;AA2BA,aAAK,IAAIA,GAAT,IAAgBL,GAAhB,EAAqB;AACjByM,oBAAQpM,GAAR;AACH;AACJ;AACDnG,cAAU,aAAaqS,WAAb,GAA2B,SAA3B,GAAuCD,SAAvC,GAAmD,SAA7D;AACApS,cAAU,gBAAgBqS,WAAhB,GAA8B,OAAxC;AACArS,cAAU,WAAV;AACAA,aAASA,OAAOO,OAAP,CAAe,WAAf,EAA4B,CAAC,GAAD,EAAM8R,WAAN,EAAmB,GAAnB,EAAwBtR,IAAxB,CAA6B,EAA7B,CAA5B,EACJR,OADI,CACI,WADJ,EACiB,CAAC,GAAD,EAAM8R,WAAN,EAAmB,GAAnB,EAAwBtR,IAAxB,CAA6B,EAA7B,CADjB,EAEJR,OAFI,CAEI,uBAFJ,EAE6B,CAAC,IAAD,EAAO8R,WAAP,EAAoB,GAApB,EAAyBtR,IAAzB,CAA8B,EAA9B,CAF7B,CAAT;AAGA,WAAOf,MAAP;AACH,CA3CD;AA4CAzB,QAAQuU,iBAAR,GAA4B,UAAUnC,IAAV,EAAgB;AACxC,QAAIoC,WAAWpC,KAAKvM,QAAL,GAAgB7D,OAAhB,CAAwB,iCAAxB,EAA2D,EAA3D,CAAf;AACA,QAAIyS,aAAarC,KAAKsC,IAAtB;AACA,QAAIjS,OAAO,kBAAX;AACAA,YAAQ,kBAAkBgS,UAAlB,GAA+B,GAA/B,GAAqCD,QAArC,GAAgD,OAAxD;AACAtU,WAAO2R,IAAP,CAAYO,IAAZ,EAAkBrN,GAAlB,CAAsB,UAAU4P,OAAV,EAAmB;AACrC,YAAIC,QAAQxC,KAAKuC,OAAL,CAAZ;AACA,YAAI,QAAOC,KAAP,yCAAOA,KAAP,OAAiB,QAArB,EAA+B;AAC3BA,oBAAQP,KAAKC,SAAL,CAAeM,KAAf,EAAsB,IAAtB,EAA4B,CAA5B,CAAR;AACH,SAFD,MAGK,IAAI,OAAOA,KAAP,KAAiB,UAArB,EAAiC;AAClCA,oBAAQA,MAAM/O,QAAN,EAAR;AACH;AACDpD,gBAAQ,SAASgS,UAAT,GAAsB,GAAtB,GAA4BE,OAA5B,GAAsC,KAAtC,GAA8CC,KAA9C,GAAsD,OAA9D;AACH,KATD;AAUAnS,YAAQ,gBAAgBgS,UAAhB,GAA6B,OAArC;AACAhS,YAAQ,OAAR;AACA,WAAOA,IAAP;AACH,CAlBD;AAmBAzC,QAAQ6U,kBAAR,GAA6B,UAAUC,SAAV,EAAqB;AAC9C,QAAIrT,SAAS,EAAb;AACA,QAAIqT,SAAJ,EAAe;AACX,YAAIA,UAAUnN,IAAd,EAAoB;AAChB,iBAAK,IAAIC,GAAT,IAAgBkN,UAAUnN,IAA1B,EAAgC;AAC5BlG,uBAAOmG,GAAP,IAAckN,UAAUnN,IAAV,CAAeC,GAAf,CAAd;AACH;AACJ;AACD,YAAIkN,UAAUnB,QAAd,EAAwB;AACpB,iBAAK,IAAI/L,GAAT,IAAgBkN,UAAUnB,QAA1B,EAAoC;AAChClS,uBAAOmG,GAAP,IAAc+K,KAAK,WAAL,EAAkBmC,UAAUnB,QAAV,CAAmB/L,GAAnB,CAAlB,CAAd;AACH;AACJ;AACJ;AACD,WAAOnG,MAAP;AACH,CAfD;AAgBAzB,QAAQ+U,cAAR,GAAyB,YAAY;AACjC,QAAIC,KAAK3T,UAAUiB,MAAnB;AACA,QAAI2N,IAAI,CAAR;AACA,SAAK,IAAIgF,IAAI,CAAb,EAAgBA,IAAID,EAApB,EAAwBC,GAAxB,EAA6B;AACzBhF,aAAK5O,UAAU4T,CAAV,EAAa3S,MAAlB;AACH;AACD,QAAI4S,IAAItU,MAAMqP,CAAN,CAAR;AACA,SAAK,IAAIkF,IAAI,CAAR,EAAWjO,IAAI,CAApB,EAAuBA,IAAI8N,EAA3B,EAA+B9N,GAA/B,EAAoC;AAChC,aAAK,IAAIN,IAAIvF,UAAU6F,CAAV,CAAR,EAAsBqJ,IAAI,CAA1B,EAA6B6E,KAAKxO,EAAEtE,MAAzC,EAAiDiO,IAAI6E,EAArD,EAAyD7E,KAAK4E,GAA9D,EAAmE;AAC/DD,cAAEC,CAAF,IAAOvO,EAAE2J,CAAF,CAAP;AACH;AACJ;AACD,WAAO2E,CAAP;AACH,CAbD,C;;;;;;;;;;;;;;;;ACzLA;;AACA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AAA8B;AAQ1B;AAAA,oBACI,qBAAO,IADX;AAPA,2BAAsB,sBAAtB;AACA,4BAAuB,KAAvB;AAEA,yBAAkB,EAAlB;AAMI,cAAK,WAAL,GAAkB,MAAK,OAAL,CAAa,WAAb,CAAlB;AACA,cAAK,QAAL,GAAgB,SAAS,eAAT,KAA6B,IAA7B,IAAqC,SAAS,eAAT,CAAyB,QAA9D,GAChB,UAAC,MAAD,EAAa,IAAb,EAAqB;AACjB,mBAAO,WAAW,IAAX,IAAmB,OAAO,QAAP,CAAgB,IAAhB,CAA1B;AACH,SAHe,GAIhB,UAAC,MAAD,EAAa,SAAb,EAA2B;AACvB,gBAAI,OAAO,SAAX;AACA,mBAAM,QAAQ,KAAK,UAAnB,EAA+B;AAC3B,oBAAG,SAAS,MAAZ,EAAoB;AAChB,2BAAO,IAAP;AACH,iBAFD,MAEO;AACH,2BAAO,KAAK,UAAZ;AACH;AACJ;AACD,mBAAO,KAAP;AACH,SAdD;;AAeH;AAED;;;;AAIA,2CAAQ,GAAR,EAAkB;AACd,YAAM,SAAS,CAAC,QAAD,EAAU,KAAV,EAAgB,IAAhB,EAAqB,GAArB,CAAf;AACA,YAAG,CAAC,KAAK,OAAL,CAAa,GAAb,CAAJ,EAAuB;AACnB,gBAAM,iBAAiB,IAAI,MAAJ,CAAW,CAAX,EAAa,CAAb,EAAgB,WAAhB,KAAgC,IAAI,MAAJ,CAAW,CAAX,CAAvD;AACA,iBAAI,IAAI,IAAE,CAAV,EAAY,IAAE,OAAO,MAArB,EAA4B,GAA5B,EAAiC;AAC7B,oBAAM,QAAQ,OAAO,CAAP,IAAY,cAA1B;AACA,oBAAG,SAAS,IAAT,IAAuB,SAAS,IAAT,CAAc,KAAd,CAAqB,KAArB,MAAgC,SAA1D,EAAqE;AACjE,2BAAO,IAAP;AACH;AACJ;AACD,mBAAO,SAAS,IAAT,IAAuB,SAAS,IAAT,CAAc,KAAd,CAAqB,GAArB,MAA8B,SAA5D;AACH,SATD,MASO;AACH,mBAAO,KAAP;AACH;AACJ,KAdD;AAeA,wCAAK,EAAL,EAAgB,GAAhB,EAA8C;AAC1C,YAAG,KAAK,KAAL,CAAW,GAAX,KAAmB,QAAQ,SAA3B,IAAwC,QAAQ,IAAnD,EAAyD;AACrD,mBAAO,IAAI,aAAJ,CAAkB,MAAI,EAAtB,CAAP;AACH,SAFD,MAEO;AACH,mBAAO,SAAS,cAAT,CAAwB,EAAxB,CAAP;AACH;AACJ,KAND;AAOA,yCAAM,WAAN,EAA2B,GAA3B,EAAmD;AAC/C,YAAG,KAAK,KAAL,CAAW,GAAX,KAAmB,QAAQ,SAA3B,IAAwC,QAAQ,IAAnD,EAA0D;AACtD,mBAAO,IAAI,gBAAJ,CAAqB,WAArB,KAAqC,IAAI,QAAJ,EAA5C;AACH,SAFD,MAEO;AACH,mBAAO,SAAS,gBAAT,CAA0B,WAA1B,KAA0C,IAAI,QAAJ,EAAjD;AACH;AACJ,KAND;AAOA,yCAAM,GAAN,EAAsB;AAClB,eAAO,KAAK,KAAL,CAAW,GAAX,IAAkB,IAAI,WAAtB,GAAoC,CAA3C;AACH,KAFD;AAGA,0CAAO,GAAP,EAAuB;AACnB,eAAO,KAAK,KAAL,CAAW,GAAX,IAAkB,IAAI,YAAtB,GAAqC,CAA5C;AACH,KAFD;AAGA,uCAAI,GAAJ,EAA6C,GAA7C,EAAuD,KAAvD,EAA4E;AAA5E;AACI,YAAG,KAAK,KAAL,CAAW,GAAX,CAAH,EAAoB;AAChB,iBAAK,MAAL,CAAY,GAAZ,EAAiB,GAAjB,EAAsB,KAAtB;AACH,SAFD,MAEO,IAAG,KAAK,OAAL,CAAa,GAAb,MAAsB,mBAAtB,IAA6C,KAAK,OAAL,CAAa,GAAb,MAAsB,gBAAtE,EAAwF;AAChF,gBAAK,OAAL,CAAa,UAAC,MAAD,EAAmB;AACvC,sBAAK,MAAL,CAAY,MAAZ,EAAoB,GAApB,EAAwB,KAAxB;AACH,aAFU;AAGd;AACJ,KARD;AASA,0CAAO,GAAP,EAAwB,GAAxB,EAAkC,KAAlC,EAAuD;AACnD,YAAG,GAAH,EAAQ;AACJ,gBAAG,KAAK,QAAL,CAAc,GAAd,CAAH,EAAuB;AACnB,oBAAS,IAAK,OAAL,EAAc,GAAd,MAAuB,SAAhC,EAA2C;AACvC,wBAAM,WAA4B,KAAK,SAAL,CAAe,KAAf,KAAyB,QAAQ,SAAjC,GAA6C,QAAQ,IAArD,GAA4D,KAA9F;AACA,wBAAI,KAAJ,CAAU,WAAV,CAAsB,GAAtB,EAA2B,QAA3B;AACH;AACJ,aALD,MAKO,IAAG,KAAK,QAAL,CAAc,GAAd,CAAH,EAAuB;AAC1B,qBAAI,IAAM,MAAV,IAAoB,GAApB,EAAyB;AACrB,wBAAG,CAAC,KAAK,OAAL,CAAa,IAAI,MAAJ,CAAb,CAAJ,EAA+B;AAC3B,4BAAM,iBAAiB,CAAC,MAAD,EAAS,KAAT,EAAgB,OAAhB,EAAyB,QAAzB,EAAmC,OAAnC,EAA4C,QAA5C,EAAsD,UAAtD,EACnB,aADmB,EACL,iBADK,EACa,gBADb,EAC+B,kBAD/B,EACkD,mBADlD,EAEnB,YAFmB,EAEL,WAFK,EAEQ,aAFR,EAEuB,cAFvB,EAEuC,aAFvC,EAEsD,YAFtD,EAEoE,cAFpE,EAEoF,eAFpF,CAAvB;AAGA,4BAAM,cAA+B,KAAK,SAAL,CAAe,IAAI,MAAJ,CAAf,KAA+B,eAAe,OAAf,CAAuB,MAAvB,KAAkC,CAAjE,GAAqE,IAAI,MAAJ,IAAc,IAAnF,GAA0F,IAAI,MAAJ,CAA/H;AACA,4BAAI,KAAJ,CAAU,WAAV,CAAsB,KAAK,SAAL,CAAe,MAAf,CAAtB,EAA8C,WAA9C;AACH,qBAND,MAMO;AACH,4BAAI,KAAJ,CAAU,WAAV,CAAsB,KAAK,SAAL,CAAe,MAAf,CAAtB,EAA8C,IAA9C;AACH;AACJ;AACJ;AACJ;AACJ,KArBD;AAsBA,2CAAQ,GAAR,EAAyB,GAAzB,EAAsC,KAAtC,EAA0D;AACtD,YAAG,CAAC,KAAK,OAAL,CAAa,GAAb,CAAJ,EAAuB;AACnB,gBAAM,aAAa,IAAI,MAAJ,CAAW,CAAX,EAAa,CAAb,EAAgB,WAAhB,KAAgC,IAAI,MAAJ,CAAW,CAAX,CAAnD;AACA,iBAAK,MAAL,CAAY,GAAZ,EAAiB,GAAjB,EAAsB,KAAtB;AACA,iBAAK,MAAL,CAAY,GAAZ,EAAiB,WAAW,UAA5B,EAAwC,KAAxC;AACA,iBAAK,MAAL,CAAY,GAAZ,EAAiB,QAAQ,UAAzB,EAAqC,KAArC;AACA,iBAAK,MAAL,CAAY,GAAZ,EAAiB,OAAO,UAAxB,EAAoC,KAApC;AACA,iBAAK,MAAL,CAAY,GAAZ,EAAiB,MAAM,UAAvB,EAAmC,KAAnC;AACH;AACJ,KATD;AAUA,2CAAQ,GAAR,EAAoB,KAApB,EAAiC;AAC7B,YAAM,UAAU,UAAhB;AACA,YAAM,gBAAgB,CAAC,QAAD,EAAU,KAAV,EAAgB,IAAhB,EAAqB,GAArB,CAAtB;AACA,YAAI,SAAS,EAAb;AACA,YAAG,QAAQ,IAAR,CAAa,KAAb,CAAH,EAAwB;AACpB,0BAAc,GAAd,CAAkB,UAAC,SAAD,EAAkB;AAChC,0BAAa,MAAG,IAAH,GAAQ,SAAR,GAAiB,GAAjB,GAAqB,KAArB,GAA0B,GAAvC;AACH,aAFD;AAGA,sBAAa,MAAG,GAAH,GAAO,KAApB;AACH,SALD,MAKO;AACH,0BAAc,GAAd,CAAkB,UAAC,SAAD,EAAkB;AAChC,0BAAU,MAAI,SAAJ,GAAa,GAAb,GAAiB,GAAjB,GAAoB,GAApB,GAAwB,KAAxB,GAA6B,GAAvC;AACH,aAFD;AAGA,sBAAa,MAAG,GAAH,GAAO,KAAP,GAAY,GAAzB;AACH;AACD,eAAO,MAAP;AACH,KAhBD;AAiBA,4CAAS,GAAT,EAA0B,SAA1B,EAA2C;AACvC,YAAG,KAAK,KAAL,CAAW,GAAX,CAAH,EAAoB;AAChB,gBAAG,IAAI,SAAJ,IAAiB,IAAI,SAAJ,CAAc,QAAlC,EAA4C;AACxC,uBAAO,IAAI,SAAJ,CAAc,QAAd,CAAuB,SAAvB,CAAP;AACH,aAFD,MAEO;AACH,oBAAM,eAAe,CAAC,IAAI,SAAJ,IAAiB,EAAlB,EAAsB,OAAtB,CAA8B,OAA9B,EAAsC,GAAtC,CAArB;AACA,oBAAM,cAAc,aAAa,KAAb,CAAmB,GAAnB,CAApB;AACA,uBAAO,YAAY,OAAZ,CAAoB,SAApB,KAAiC,CAAxC;AACH;AACJ;AACJ,KAVD;AAWA,wCAAK,GAAL,EAAoC,QAApC,EAAmD,SAAnD,EAAkE;AAC9D,YAAG,KAAK,KAAL,CAAW,GAAX,CAAH,EAAoB;AAChB,gBAAG,cAAc,SAAjB,EAA4B;AACxB,oBAAI,YAAJ,CAAiB,QAAjB,EAA2B,SAA3B;AACH,aAFD,MAEO;AACH,oBAAG,CAAC,KAAK,QAAL,CAAc,QAAd,CAAJ,EAA6B;AACzB,wBAAM,IAAgB,IAAI,YAAJ,CAAiB,QAAjB,CAAtB;AACA,2BAAO,KAAK,SAAL,CAAe,CAAf,KAAqB,MAAK,IAA1B,GAAkC,EAAE,OAAF,CAAU,GAAV,IAAe,CAAf,GAAmB,SAAS,CAAT,EAAY,EAAZ,CAAnB,GAAqC,WAAW,CAAX,CAAvE,GAAwF,CAA/F;AACH,iBAHD,MAGO;AACH,2BAAO,IAAP,CAAY,QAAZ,EAAsB,GAAtB,CAA0B,UAAC,WAAD,EAAoB;AAC1C,4BAAI,YAAJ,CAAiB,WAAjB,EAA8B,SAAS,WAAT,CAA9B;AACH,qBAFD;AAGH;AACJ;AACJ;AACJ,KAfD;AAgBA,4CAAS,GAAT,EAAiD,SAAjD,EAAkE;AAAlE;AACI,YAAG,KAAK,KAAL,CAAW,GAAX,KAAmB,CAAC,KAAK,OAAL,CAAa,SAAb,CAAvB,EAAgD;AAC5C,iBAAK,kBAAL,CAAwB,GAAxB,EAA6B,SAA7B,EAAwC,IAAxC;AACH,SAFD,MAEO,IAAG,KAAK,OAAL,CAAa,GAAb,MAAsB,mBAAtB,IAA6C,KAAK,OAAL,CAAa,GAAb,MAAsB,gBAAtE,EAAwF;AAC3F,gBAAM,UAA8B,GAApC;AACA,oBAAQ,OAAR,CAAgB,UAAC,IAAD,EAAU;AACtB,sBAAK,kBAAL,CAAqC,IAArC,EAA2C,SAA3C,EAAsD,IAAtD;AACH,aAFD;AAGH;AACJ,KATD;AAUA,+CAAY,GAAZ,EAAqD,SAArD,EAAqE;AAArE;AACI,YAAG,KAAK,OAAL,CAAa,GAAb,MAAsB,mBAAtB,IAA6C,KAAK,OAAL,CAAa,GAAb,MAAsB,gBAAtE,EAAwF;AACzE,gBAAK,OAAL,CAAa,UAAC,IAAD,EAAW;AAC/B,sBAAK,kBAAL,CAAqC,IAArC,EAA2C,SAA3C,EAAsD,KAAtD;AACH,aAFU;AAGd,SAJD,MAIO;AACH,iBAAK,kBAAL,CAAqC,GAArC,EAA0C,SAA1C,EAAqD,KAArD;AACH;AACJ,KARD;AASA,sCAAG,GAAH,EAA0B,SAA1B,EAA4C,QAA5C,EAA+D,OAA/D,EAAgG;AAC5F,aAAK,QAAL,CAAc,GAAd,EAAmB,SAAnB,EAA8B,QAA9B,EAAwC,OAAxC;AACH,KAFD;AAGA,4CAAS,GAAT,EAAiC,SAAjC,EAAoD,QAApD,EAAwE,OAAxE,EAAyG;AACrG,YAAG,KAAK,KAAL,CAAW,GAAX,KAAmB,KAAK,OAAL,CAAa,GAAb,MAAsB,iBAA5C,EAA+D;AAC3D,gBAAM,gBAAuC,IAAK,cAAL,IAAuB,EAApE;AACA,gBAAM,mBAAmB,OAAO,SAAhC;AACA,gBAAM,YAA2B;AAC7B,2BAAS,SADoB;AAE7B,yBAAS;AAFoB,aAAjC;AAIA,gBAAG,KAAK,UAAL,CAAgB,OAAhB,CAAwB,SAAxB,KAAoC,CAAvC,EAA0C;AACtC;AACA,oBAAG,IAAI,gBAAP,EAAyB;AACrB,wBAAG,OAAH,EAAY;AACF,4BAAK,gBAAL,CAAsB,SAAtB,EAAiC,QAAjC,EAA2C,OAA3C;AACT,qBAFD,MAEO;AACG,4BAAK,gBAAL,CAAsB,SAAtB,EAAiC,QAAjC;AACT;AACJ,iBAND,MAMO;AACH,wBAAG,OAAH,EAAY;AACF,4BAAK,WAAL,CAAiB,gBAAjB,EAAmC,QAAnC,EAA6C,OAA7C;AACT,qBAFD,MAEO;AACG,4BAAK,WAAL,CAAiB,gBAAjB,EAAmC,QAAnC;AACT;AACJ;AACJ,aAfD,MAeO;AACH;AACA,oBAAG,IAAI,SAAJ,CAAH,EAAmB;AACf,wBAAI,SAAJ,IAAiB,QAAjB;AACH,iBAFD,MAEO;AACJ,wBAAI,gBAAJ,IAAwB,QAAxB;AACF;AACJ;AACD,0BAAc,IAAd,CAAmB,SAAnB;AACM,gBAAK,cAAL,GAAsB,aAAtB;AACT;AACJ,KAlCD;AAmCA,+CAAY,GAAZ,EAAmC,SAAnC,EAAqD,QAArD,EAAyE,OAAzE,EAAsF;AAAtF;AACI,YAAG,KAAK,KAAL,CAAW,GAAX,CAAH,EAAoB;AAChB,gBAAM,mBAAwC,IAAK,cAAL,IAAuB,EAArE;AACA,gBAAG,oBAAkB,iBAAe,MAAf,GAAsB,CAA3C,EAA8C;AAC1C,iCAAe,GAAf,CAAmB,UAAC,WAAD,EAA4B,KAA5B,EAAyC;AACxD,wBAAG,YAAY,SAAZ,KAA0B,SAA1B,IAAuC,aAAa,YAAY,OAAnE,EAA6E;AACzE,4BAAG,MAAK,UAAL,CAAgB,OAAhB,CAAwB,YAAY,SAApC,KAAgD,CAAnD,EAAsD;AAClD,gCAAG,IAAI,mBAAP,EAA4B;AAClB,oCAAK,mBAAL,CAAyB,YAAY,SAArC,EAA+C,YAAY,OAA3D;AACT,6BAFD,MAEO;AACH,oCAAS,IAAK,WAAd,EAA2B;AACjB,wCAAK,WAAL,CAAiB,OAAO,YAAY,SAApC,EAA+C,YAAY,OAA3D;AACT;AACJ;AACJ,yBARD,MAQO;AACG,gCAAK,YAAY,SAAjB,IAA8B,IAA9B;AACT;AACD,+BAAO,iBAAe,KAAf,CAAP;AACH;AACJ,iBAfD;AAgBM,oBAAK,cAAL,GAAsB,gBAAtB;AACT,aAlBD,MAkBO;AACH,oBAAG,IAAI,mBAAP,EAA4B;AACxB,wBAAI,mBAAJ,CAAwB,SAAxB,EAAwC,QAAxC,EAAkD,OAAlD;AACH,iBAFD,MAEO,IAAS,IAAK,WAAd,EAA2B;AACxB,wBAAK,WAAL,CAAiB,OAAO,SAAxB,EAAmC,QAAnC,EAA6C,OAA7C;AACT;AACJ;AACJ;AACJ,KA7BD;AA8BA,0CAAO,GAAP,EAAuB;AAAvB;AACI,YAAG,KAAK,KAAL,CAAW,GAAX,CAAH,EAAoB;AAChB,gBAAM,mBAAwC,IAAK,cAAL,IAAuB,EAArE;AACA,6BAAe,GAAf,CAAmB,UAAC,WAAD,EAA4B,KAA5B,EAAyC;AACxD,oBAAG,MAAK,UAAL,CAAgB,OAAhB,CAAwB,YAAY,SAApC,KAAgD,CAAnD,EAAsD;AAClD,wBAAG,IAAI,mBAAP,EAA4B;AAClB,4BAAK,mBAAL,CAAyB,YAAY,SAArC,EAA+C,YAAY,OAA3D;AACT,qBAFD,MAEO;AACH,4BAAS,IAAK,WAAd,EAA2B;AACjB,gCAAK,WAAL,CAAiB,OAAO,YAAY,SAApC,EAA+C,YAAY,OAA3D;AACT;AACJ;AACJ;AACD,uBAAO,iBAAe,KAAf,CAAP;AACH,aAXD;AAYM,gBAAK,cAAL,GAAsB,IAAtB;AACT;AACJ,KAjBD;AAkBA,+CAAY,OAAZ,EAA0C;AACtC,YAAI,WAAW,CAAf;AACA,YAAG,OAAH,EAAY;AACR,gBAAG,KAAK,UAAL,CAAgB,OAAhB,CAAH,EAA6B;AACzB,wBAAQ,OAAR,CAAgB,UAAC,MAAD,EAAmB;AAC/B,wBAAI,WAAW,OAAO,WAAtB;AACA,wBAAG,WAAS,QAAZ,EAAsB;AAClB,mCAAW,QAAX;AACH;AACD,+BAAW,IAAX;AACH,iBAND;AAOH,aARD,MAQO;AACH,wBAAQ,GAAR,CAAY,UAAC,MAAD,EAAmB;AAC3B,wBAAI,WAAW,OAAO,WAAtB;AACA,wBAAG,WAAS,QAAZ,EAAsB;AAClB,mCAAW,QAAX;AACH;AACD,+BAAW,IAAX;AACH,iBAND;AAOH;AACJ;AACD,eAAO,QAAP;AACH,KAtBD;AAuBA,wCAAK,GAAL,EAAsB,QAAtB,EAAsC;AAAtC;AACI,YAAM,OAA2B,KAAK,YAAL,CAAkB,QAAlB,KAA+B,EAAhE;AACA,YAAM,SAAuB,EAA7B;AACA,aAAK,GAAL,CAAS,UAAC,WAAD,EAA8B;AACnC,gBAAM,UAAU,MAAK,UAAL,CAAgB,GAAhB,EAAqB,WAArB,CAAhB;AACA,gBAAG,QAAQ,MAAR,GAAe,CAAlB,EAAqB;AACjB,uBAAO,IAAP,CAAW,KAAX,SAAe,OAAf;AACH;AACJ,SALD;AAMA,eAAO,MAAP;AACH,KAVD;AAWA,6CAAU,OAAV,EAAqC;AACjC,YAAG,KAAK,KAAL,CAAW,QAAQ,GAAnB,CAAH,EAA4B;AACxB,mBAAO,IAAI,8BAAJ,CAAmB;AACtB,2BAAW,QAAQ,SADG;AAEtB,sBAAM,CAAC;AACH,+BAAW,QAAQ,SADhB;AAEH,yBAAK,QAAQ,GAFV;AAGH,8BAAU,QAAQ,QAHf;AAIH,0BAAM,QAAQ,IAJX;AAKH,8BAAU,QAAQ,QALf;AAMH,6BAAS,QAAQ,OANd;AAOH,wBAAI,QAAQ,EAPT;AAQH,0BAAM,QAAQ,IAAR,IAAgB;AARnB,iBAAD,CAFgB;AAYtB,0BAAU,QAAQ,QAZI;AAatB,0BAAU,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B;AAbY,aAAnB,CAAP;AAeH,SAhBD,MAgBO;AACH,kBAAM,IAAI,KAAJ,CAAU,sCAAV,CAAN;AACH;AACJ,KApBD;AAqBA,8CAAW,aAAX,EAA8C;AAC1C,eAAO,IAAI,8BAAJ,CAAmB;AACtB,uBAAW,cAAc,SADH;AAEtB,kBAAM,cAAc,OAFE;AAGtB,sBAAU,cAAc,QAHF;AAItB,qBAAS,cAAc,OAJD;AAKtB,sBAAU,KAAK,iBAAL,CAAuB,IAAvB,CAA4B,IAA5B,CALY;AAMtB,mBAAO,cAAc;AANC,SAAnB,CAAP;AAQH,KATD;AAUA,wCAAK,GAAL,EAAsB,OAAtB,EAAkD;AAAlD;AACI,YAAM,YAAY,UAAU,QAAQ,QAAR,IAAoB,GAA9B,GAAoC,GAAtD;AACA,aAAK,GAAL,CAAS,GAAT,EAAc;AACV,qBAAS,EADC;AAEV,qBAAS;AAFC,SAAd;AAIA,aAAK,SAAL,CAAe;AACX,iBAAG,GADQ;AAEX,sBAAU,SAFC;AAGX,kBAAM;AACF,yBAAS;AADP,aAHK;AAMX,gBAAI;AACA,yBAAS;AADT,aANO;AASX,kBAAM,WAAW,CAAC,KAAK,OAAL,CAAa,QAAQ,IAArB,CAAZ,GAAyC,QAAQ,IAAjD,GAAwD,QATnD;AAUX;AACA,qBAAS,UAAU,QAAQ,OAAlB,GAA4B,IAX1B;AAYX,sBAAU;AACN,sBAAK,GAAL,CAAS,GAAT,EAAc;AACV,6BAAS,EADC;AAEV,6BAAS;AAFC,iBAAd;AAIA,2BAAW,OAAO,QAAQ,QAAf,KAA4B,UAAvC,IAAqD,QAAQ,QAAR,EAArD;AACH;AAlBU,SAAf;AAoBH,KA1BD;AA2BA,wCAAK,GAAL,EAAsB,OAAtB,EAAkD;AAAlD;AACI,YAAM,YAAY,UAAU,QAAQ,QAAR,IAAoB,GAA9B,GAAoC,GAAtD;AACA,aAAK,GAAL,CAAS,GAAT,EAAc;AACV,qBAAS,EADC;AAEV,qBAAS;AAFC,SAAd;AAIA;AACA,aAAK,SAAL,CAAe;AACX,iBAAG,GADQ;AAEX,sBAAU,SAFC;AAGX,kBAAM;AACF,yBAAS;AADP,aAHK;AAMX,gBAAI;AACA,yBAAS;AADT,aANO;AASX,kBAAM,WAAW,CAAC,KAAK,OAAL,CAAa,QAAQ,IAArB,CAAZ,GAAyC,QAAQ,IAAjD,GAAwD,QATnD;AAUX,qBAAS,UAAU,QAAQ,OAAlB,GAA4B,IAV1B;AAWX,sBAAU;AACN,sBAAK,GAAL,CAAS,GAAT,EAAc;AACV,6BAAS,MADC;AAEV,6BAAS;AAFC,iBAAd;AAIA,2BAAW,OAAO,QAAQ,QAAf,KAA4B,UAAvC,IAAqD,QAAQ,QAAR,EAArD;AACH;AAjBU,SAAf;AAmBA;AACH,KA3BD;AA4BA,2CAAQ,GAAR,EAAyB,OAAzB,EAAyD;AAAzD;AACI,YAAI,aAAa,KAAK,IAAL,CAAU,GAAV,EAAe,uBAAf,KAA2C,EAA5D;AAA+D,qBAAa,WAAW,OAAX,CAAmB,UAAnB,EAA+B,EAA/B,EAAmC,OAAnC,CAA2C,KAA3C,EAAiD,EAAjD,CAAb;AAC/D,YAAI,kBAAkB,gBAAgB,IAAhB,CAAqB,UAArB,IAAmC,UAAnC,GAAgD,CAAtE;AACA,YAAI,YAAmB,kBAAkB,CAAlB,GAAsB,eAAtB,GAAwC,IAAI,YAAnE;AACA,YAAI,OAA6B;AAC7B,oBAAQ,CADqB;AAE7B,qBAAS;AAFoB,SAAjC;AAIA,YAAI,KAA2B;AAC3B,oBAAQ,SADmB;AAE3B,qBAAS;AAFkB,SAA/B;AAIA,YAAI,SAAS,iCAAgB,uBAAhB,CAAwC,iCAAgB,4BAAhB,CAA6C,GAA7C,EAAkD,IAAlD,EAAwD,EAAxD,CAAxC,CAAb;AACA,aAAK,GAAL,CAAS,GAAT,EAAc;AACV,qBAAS,WAAW,CAAC,KAAK,OAAL,CAAa,QAAQ,OAArB,CAAZ,GAA4C,QAAQ,OAApD,GAA8D,EAD7D;AAEV,qBAAS;AAFC,SAAd;AAIA,YAAG,GAAG,MAAH,KAAc,CAAjB,EAAoB;AAChB,eAAG,MAAH,GAAY,IAAI,YAAhB;AACH;AACD,aAAK,GAAL,CAAS,GAAT,EAAc,QAAd,EAAwB,CAAxB;AACA,aAAK,SAAL,CAAe;AACX,iBAAG,GADQ;AAEX,sBAAU,UAAW,QAAQ,QAAR,IAAoB,GAA/B,GAAsC,GAFrC;AAGX,kBAAI,IAHO;AAIX,gBAAE,EAJS;AAKX,kBAAM,UAAU,QAAQ,IAAlB,GAAyB,QALpB;AAMX;AACA,sBAAU;AACN,sBAAK,GAAL,CAAS,GAAT,EAAc;AACV,4BAAQ,OAAO,MADL;AAEV,6BAAS;AAFC,iBAAd;AAIA,2BAAW,OAAO,QAAQ,QAAf,KAA4B,UAAvC,IAAqD,QAAQ,QAAR,EAArD;AACH;AAbU,SAAf;AAeA,iBAAS,IAAT;AACA,aAAK,IAAL;AACA,eAAO,IAAP;AACA,oBAAY,IAAZ;AACA,0BAAkB,IAAlB;AACH,KAzCD;AA0CA,4CAAS,GAAT,EAA0B,OAA1B,EAA0D;AAA1D;AACI,YAAM,YAAmB,IAAI,YAA7B;AACA,YAAM,OAA6B;AAC/B,oBAAQ,SADuB;AAE/B,qBAAS;AAFsB,SAAnC;AAIA,YAAM,KAA2B;AAC7B,oBAAQ,CADqB;AAE7B,qBAAS;AAFoB,SAAjC;AAIA,YAAM,SAAS,iCAAgB,uBAAhB,CAAwC,iCAAgB,4BAAhB,CAA6C,GAA7C,EAAkD,IAAlD,EAAwD,EAAxD,CAAxC,CAAf;AACA,aAAK,SAAL,CAAe;AACX,iBAAG,GADQ;AAEX,sBAAU,UAAW,QAAQ,QAAR,IAAoB,GAA/B,GAAsC,GAFrC;AAGX,kBAAI,IAHO;AAIX,gBAAE,EAJS;AAKX,kBAAM,UAAU,QAAQ,IAAlB,GAAyB,QALpB;AAMX;AACA,sBAAU;AACN,sBAAK,GAAL,CAAS,GAAT,EAAc;AACV,6BAAS,MADC;AAEV,6BAAS,CAFC;AAGV;AACA,4BAAQ,OAAO;AAJL,iBAAd;AAMA,sBAAK,IAAL,CAAU,GAAV,EAAe,uBAAf,EAAwC,OAAO,MAA/C;AACA,2BAAW,OAAO,QAAQ,QAAf,KAA4B,UAAvC,IAAqD,QAAQ,QAAR,EAArD;AACH;AAhBU,SAAf;AAkBH,KA7BD;AA8BQ,2CAAR,UAA0B,GAA1B,EAAsD;AAClD;AACA,aAAK,GAAL,CAAS,IAAI,GAAb,EAAkB,IAAI,KAAtB;AACH,KAHO;AAIA,oCAAR,UAAmB,GAAnB,EAAoC,QAApC,EAA8D;AAA9D;AACI,YAAI,aAA2B,EAA/B;AACA,YAAG,SAAS,IAAT,KAAkB,GAArB,EAA0B;AACtB;AACA,gBAAI,UAAJ,CAAe,OAAf,CAAuB,UAAC,YAAD,EAAoB,KAApB,EAAgC;AACnD,oBAAG,MAAK,cAAL,CAAiC,YAAjC,EAA+C,SAAS,IAAxD,EAA8D,SAAS,KAAvE,EAA8E,KAA9E,CAAH,EAAyF;AACrF,wBAAG,SAAS,KAAZ,EAAmB;AACf,4BAAI,eAA6B,MAAK,UAAL,CAA6B,YAA7B,EAA2C,SAAS,KAApD,CAAjC;AACA,4BAAG,gBAAgB,aAAa,MAAb,GAAoB,CAAvC,EAA0C;AACtC,uCAAW,IAAX,CAAe,KAAf,aAAmB,YAAnB;AACH;AACD,uCAAe,IAAf;AACH,qBAND,MAMO;AACH,mCAAW,IAAX,CAA6B,YAA7B;AACH;AACJ;AACJ,aAZD;AAaH,SAfD,MAeO,IAAG,SAAS,IAAT,KAAkB,GAArB,EAA0B;AAC7B;AACA,gBAAI,cAAc,KAAK,qBAAL,CAA2B,GAA3B,EAA+B,SAAS,IAAxC,EAA8C,SAAS,KAAvD,CAAlB;AACA,gBAAG,WAAH,EAAgB;AACZ,oBAAG,SAAS,KAAZ,EAAmB;AACf,iCAAa,KAAK,UAAL,CAAgB,WAAhB,EAA6B,SAAS,KAAtC,CAAb;AACH,iBAFD,MAEO;AACH,iCAAa,CAAC,WAAD,CAAb;AACH;AACD,8BAAc,IAAd;AACH;AACJ,SAXM,MAWA,IAAG,KAAK,OAAL,CAAa,SAAS,IAAtB,CAAH,EAAgC;AACnC,gBAAI,cAA4B,IAAhC;AACA,gBAAI,YAAY,KAAK,wBAAL,CAA8B,GAA9B,EAAmC,SAAS,IAA5C,EAAkD,SAAS,KAA3D,CAAhB;AACA,gBAAI,eAAY,UAAU,UAA1B;AACA,gBAAI,WAAY,UAAU,MAA1B;AACA,0BAAc,UAAU,QAAxB;AACA,gBAAG,eAAe,YAAY,MAAZ,GAAmB,CAArC,EAAwC;AACpC,4BAAY,OAAZ,CAAoB,UAAC,UAAD,EAAwB;AACxC,wBAAG,iBAAe,GAAlB,EAAuB;AACnB,4BAAG,MAAK,QAAL,CAAc,UAAd,EAA0B,QAA1B,CAAH,EAAsC;AAClC,gCAAG,SAAS,KAAZ,EAAmB;AACf,2CAAW,IAAX,CAAe,KAAf,aAAmB,MAAK,UAAL,CAAgB,UAAhB,EAA4B,SAAS,KAArC,CAAnB;AACH,6BAFD,MAEO;AACH,2CAAW,IAAX,CAAgB,UAAhB;AACH;AACJ;AACJ,qBARD,MAQO,IAAG,iBAAe,GAAlB,EAAuB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,qBATM,MASA,IAAG,MAAK,OAAL,CAAa,YAAb,CAAH,EAA6B;AAChC,4BAAG,SAAS,KAAZ,EAAmB;AACf,uCAAW,IAAX,CAAe,KAAf,aAAmB,MAAK,UAAL,CAAgB,UAAhB,EAA4B,SAAS,KAArC,CAAnB;AACH,yBAFD,MAEO;AACH,uCAAW,IAAX,CAAgB,UAAhB;AACH;AACJ;AACJ,iBAzBD;AA0BH;AACD,wBAAY,IAAZ;AACA,0BAAc,IAAd;AACA,uBAAS,IAAT;AACA,2BAAa,IAAb;AACH;AACD,eAAO,UAAP;AACH,KApEO;AAqEA,kDAAR,UAAiC,MAAjC,EAAqD,YAArD,EAA2E,aAA3E,EAAgG;AAAhG;AACI,YAAI,UAAU,cAAc,OAAd,CAAsB,iBAAtB,EAAwC,EAAxC,CAAd;AACA,YAAI,SAAU,kBAAkB,IAAlB,CAAuB,aAAvB,IAAwC,cAAc,OAAd,CAAsB,iBAAtB,EAAwC,EAAxC,CAAxC,GAAsF,EAApG;AACA,YAAI,aAAa,cAAc,MAAd,CAAqB,QAAQ,MAA7B,EAAqC,cAAc,MAAd,GAAqB,QAAQ,MAA7B,GAAoC,OAAO,MAAhF,CAAjB;AACA,YAAM,SAAuB,EAA7B;AACA,YAAG,KAAK,OAAL,CAAa,YAAb,CAAH,EAA+B;AAC3B,mBAAO,gBAAP,CAAwB,OAAxB,EAAiC,OAAjC,CAAyC,UAAC,UAAD,EAAW;AAChD,uBAAO,IAAP,CAAyB,UAAzB;AACH,aAFD;AAGH,SAJD,MAIO,IAAG,iBAAiB,GAAjB,IAAwB,iBAAiB,GAA5C,EAAiD;AACpD,mBAAO,gBAAP,CAAwB,GAAxB,EAA6B,OAA7B,CAAqC,UAAC,UAAD,EAAuB;AACxD,oBAAG,iBAAiB,GAApB,EAAyB;AACrB,wBAAG,MAAK,QAAL,CAAc,UAAd,EAA0B,OAA1B,CAAH,EAAuC;AACnC,+BAAO,IAAP,CAAY,UAAZ;AACH;AACJ,iBAJD,MAIO,IAAG,iBAAiB,GAApB,EAAyB;AAC5B,wBAAG,WAAW,EAAX,KAAkB,OAArB,EAA8B;AAC1B,+BAAO,IAAP,CAAY,UAAZ;AACH;AACJ;AACJ,aAVD;AAWH;AACD,kBAAU,IAAV;AACA,iBAAS,IAAT;AACA,qBAAa,IAAb;AACA,eAAO;AACH,sBAAY,UAAU,EADnB;AAEH,oBAAM,MAFH;AAGH,wBAAU;AAHP,SAAP;AAKH,KA9BO;AA+BA,+CAAR,UAA8B,GAA9B,EAA+C,SAA/C,EAAiE,aAAjE,EAAsF;AAClF,YAAM,cAAc,IAAI,kBAAxB;AACA,YAAG,WAAH,EAAgB;AACZ,gBAAG,KAAK,cAAL,CAAiC,WAAjC,EAA8C,SAA9C,EAAyD,aAAzD,EAAwE,CAAxE,CAAH,EAA+E;AAC3E,uBAAoB,WAApB;AACH,aAFD,MAEO;AACH,uBAAO,KAAK,qBAAL,CAAwC,WAAxC,EAAoD,SAApD,EAA+D,aAA/D,CAAP;AACH;AACJ;AACD,eAAO,IAAP;AACH,KAVO;AAWA,wCAAR,UAAuB,GAAvB,EAAwC,SAAxC,EAA2D,aAA3D,EAAkF,KAAlF,EAAmG;AAAjB;AAAA;AAAiB;AAC/F,YAAM,SAAS,yBAAf;AACA,YAAM,WAAW,cAAc,KAAd,CAAoB,MAApB,CAAjB;AACA,YAAG,QAAH,EAAa;AACT,gBAAM,aAAa,SAAS,CAAT,CAAnB;AACA,gBAAG,KAAK,OAAL,CAAa,SAAb,CAAH,EAA4B;AACxB,uBAAO,IAAI,OAAJ,CAAY,WAAZ,OAA8B,WAAW,WAAX,EAArC;AACH,aAFD,MAEO,IAAG,cAAc,GAAjB,EAAsB;AACzB,uBAAO,KAAK,QAAL,CAAc,GAAd,EAAmB,UAAnB,CAAP;AACH,aAFM,MAEA,IAAG,cAAc,GAAjB,EAAsB;AACzB,uBAAO,IAAI,EAAJ,KAAW,UAAlB;AACH;AACJ;AACD,eAAO,KAAP;AACH,KAdO;AAeR;;;;;;AAMQ,4CAAR,UAA2B,GAA3B,EAA4C,SAA5C,EAA+D,KAA/D,EAA6E;AACzE,YAAG,KAAK,KAAL,CAAW,GAAX,KAAmB,CAAC,KAAK,OAAL,CAAa,SAAb,CAAvB,EAAgD;AAC5C,gBAAG,IAAI,SAAP,EAAkB;AACd,oBAAG,KAAH,EAAU;AACN,qBAAC,IAAI,SAAJ,CAAc,QAAd,CAAuB,SAAvB,CAAD,IAAsC,IAAI,SAAJ,CAAc,GAAd,CAAkB,SAAlB,CAAtC;AACH,iBAFD,MAEO;AACH,wBAAI,SAAJ,CAAc,QAAd,CAAuB,SAAvB,KAAqC,IAAI,SAAJ,CAAc,MAAd,CAAqB,SAArB,CAArC;AACH;AACJ,aAND,MAMO;AACH,oBAAM,eAAe,CAAC,IAAI,SAAJ,IAAiB,EAAlB,EAAsB,OAAtB,CAA8B,OAA9B,EAAuC,GAAvC,CAArB;AACA,oBAAI,cAAc,aAAa,KAAb,CAAmB,GAAnB,CAAlB;AACA,oBAAI,aAAa,KAAjB;AACA,oBAAM,gBAAgB,YAAY,OAAZ,CAAoB,SAApB,CAAtB;AACA,oBAAG,KAAH,EAAU;AACN,wBAAG,gBAAc,CAAjB,EAAoB;AAChB,oCAAY,IAAZ,CAAiB,SAAjB;AACA,qCAAa,IAAb;AACH;AACJ,iBALD,MAKO;AACH,wBAAG,gBAAc,CAAjB,EAAoB;AAChB,4BAAM,cAAc,EAApB;AACA,6BAAI,IAAI,IAAE,CAAV,EAAY,IAAE,YAAY,MAA1B,EAAiC,GAAjC,EAAsC;AAClC,gCAAG,YAAY,CAAZ,MAAmB,SAAnB,IAAgC,CAAC,KAAK,OAAL,CAAa,YAAY,CAAZ,CAAb,CAApC,EAAkE;AAC9D,4CAAY,IAAZ,CAAiB,YAAY,CAAZ,CAAjB;AACH,6BAFD,MAEO;AACH,6CAAa,IAAb;AACH;AACJ;AACD,sCAAc,WAAd;AACH;AACJ;AACD,oBAAG,UAAH,EAAe;AACX,wBAAI,SAAJ,GAAgB,YAAY,IAAZ,CAAiB,GAAjB,CAAhB;AACH;AACJ;AACJ;AACJ,KApCO;AAlkBR,gBADC,2BAAU,4BAAV,CACD,E,0BAAkB,4B,CAAlB,G,kBAAA,E,UAAA,E,KAAgC,CAAhC;AAPS,eAAQ,YADpB,uBAAW,UAAX,CACoB,E,mCAAA,GAAR,QAAQ,CAAR;AA8mBb;AAAC,CA9mBD,CAA8B,4BAA9B;QAAa,Q,GAAA,Q;;;;;;;;;;;;;;AC3Db;;AACA;;;;;;;;;;;;;;;;AAgFA,IAAM,WAAW,SAAX,QAAW,CAAC,CAAD,EAAW,CAAX,EAAqB,CAArB,EAA6B;AAC1C;AACA,QAAM,MAAM,CAAE,KAAG,EAAJ,GAAW,KAAG,CAAd,GAAmB,CAApB,EAAuB,QAAvB,CAAgC,EAAhC,CAAZ;AACA,WAAO,MAAM,IAAI,KAAJ,CAAU,KAAK,GAAL,CAAS,IAAI,MAAJ,GAAW,CAApB,CAAV,EAAkC,IAAlC,CAAuC,GAAvC,CAAN,GAAoD,GAA3D;AACH,CAJD;AAMA,IAAM,WAAW,SAAX,QAAW,CAAC,GAAD,EAAY;AACzB,QAAM,MAAgB,EAAtB;AACA,QAAI,SAAS,OAAO,MAApB;AACA,QAAI,OAAO,EAAX;AACA,QAAG,OAAO,MAAP,IAAe,CAAlB,EAAqB;AACjB,eAAO,OAAO,MAAP,CAAc,CAAd,EAAgB,CAAhB,CAAP;AACH;AACD,QAAG,OAAO,MAAP,GAAc,CAAjB,EAAoB;AAChB,iBAAS,MAAO,OAAO,OAAP,CAAe,IAAf,EAAoB,EAApB,CAAD,CAA0B,MAA1B,CAAiC,CAAjC,CAAf;AACA,iBAAS,OAAO,MAAP,CAAc,CAAd,EAAiB,CAAjB,CAAT;AACH;AACD,SAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,CAApB,EAAuB,KAAK,CAA5B,EAA+B;AAC3B,YAAM,QAAQ,OAAO,KAAP,CAAa,CAAb,EAAgB,IAAI,CAApB,CAAd;AACA,YAAI,IAAJ,CAAS,SAAS,KAAT,EAAgB,EAAhB,CAAT;AACH;AACD,QAAG,CAAC,0BAAa,OAAb,CAAqB,IAArB,CAAJ,EAAgC;AAC5B,YAAI,IAAJ,CAAS,SAAS,IAAT,EAAe,EAAf,CAAT;AACH;AACD,WAAO,GAAP;AACH,CAnBD;AAoBA,IAAM,WAAW,SAAX,QAAW,CAAC,UAAD,EAAoB,QAApB,EAAqC,IAArC,EAAyC;AACtD;AACA,QAAM,SAAS,SAAS,UAAT,CAAf;AAAA,QACI,SAAS,SAAS,QAAT,CADb;AAGA;AACA,QAAM,QAAQ,CAAC,OAAO,CAAP,IAAY,OAAO,CAAP,CAAb,IAA0B,IAAxC;AAAA,QACA,QAAQ,CAAC,OAAO,CAAP,IAAY,OAAO,CAAP,CAAb,IAA0B,IADlC;AAAA,QAEA,QAAQ,CAAC,OAAO,CAAP,IAAY,OAAO,CAAP,CAAb,IAA0B,IAFlC;AAIA,QAAM,mBAAmB,EAAzB;AACA,SAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAApB,EAA0B,GAA1B,EAA+B;AAC3B;AACA,yBAAiB,IAAjB,CAAsB,SAAS,SAAS,CAAC,QAAQ,CAAR,GAAY,OAAO,CAAP,CAAb,EAAwB,QAAxB,EAAT,EAA6C,EAA7C,CAAT,EAA2D,SAAS,CAAC,QAAQ,CAAR,GAAY,OAAO,CAAP,CAAb,EAAwB,QAAxB,EAAT,EAA6C,EAA7C,CAA3D,EAA6G,SAAS,CAAC,QAAQ,CAAR,GAAY,OAAO,CAAP,CAAb,EAAwB,QAAxB,EAAT,EAA6C,EAA7C,CAA7G,CAAtB;AACH;AACD,WAAO,gBAAP;AACH,CAhBD;AAkBA,IAAM,YAAY,SAAZ,SAAY,CAAC,MAAD,EAAe;AAC7B,QAAM,WAAW,OAAO,KAAP,CAAa,2DAAb,CAAjB;AACA,QAAM,YAAY,OAAO,KAAP,CAAa,4EAAb,CAAlB;AACA,QAAM,SAAkB,EAAxB;AACA,QAAG,SAAH,EAAc;AACV,eAAO,IAAP,CAAY,SAAS,UAAU,CAAV,CAAT,EAAuB,EAAvB,CAAZ;AACA,eAAO,IAAP,CAAY,SAAS,UAAU,CAAV,CAAT,EAAuB,EAAvB,CAAZ;AACA,eAAO,IAAP,CAAY,SAAS,UAAU,CAAV,CAAT,EAAuB,EAAvB,CAAZ;AACA,eAAO,IAAP,CAAY,SAAS,UAAU,CAAV,CAAT,EAAuB,EAAvB,CAAZ;AACH,KALD,MAKO;AACH,YAAG,QAAH,EAAa;AACT,mBAAO,IAAP,CAAY,SAAS,SAAS,CAAT,CAAT,EAAsB,EAAtB,CAAZ;AACA,mBAAO,IAAP,CAAY,SAAS,SAAS,CAAT,CAAT,EAAsB,EAAtB,CAAZ;AACA,mBAAO,IAAP,CAAY,SAAS,SAAS,CAAT,CAAT,EAAsB,EAAtB,CAAZ;AACH;AACJ;AACD,WAAO,MAAP;AACH,CAjBD;AAkBA,IAAM,oBAAoB,SAApB,iBAAoB,CAAC,GAAD,EAAgB;AACtC,QAAI,SAAS,EAAb;AACA,QAAG,GAAH,EAAQ;AACJ,iBAAS,IAAI,KAAJ,CAAU,SAAV,IAAuB,IAAI,KAAJ,CAAU,eAAjC,IAAoD,IAAI,KAAJ,CAAU,aAAV,CAApD,IAAgF,IAAI,KAAJ,CAAU,cAAV,CAAhF,IAA6G,IAAI,KAAJ,CAAU,YAAV,CAA7G,IAAwI,EAAjJ;AACH;AACD,WAAO,MAAP;AACH,CAND;AAOO,IAAM,kCAAa,SAAb,UAAa,CAAC,QAAD,EAAa;AACnC,WAAO,aAAa,SAAb,IAA0B,aAAa,IAA9C;AACH,CAFM;AAGA,IAAM,8CAAmB,SAAnB,gBAAmB,CAAC,UAAD,EAAkB,GAAlB,EAAuB,KAAvB,EAA6C;AACzE,QAAM,UAA+B;AACjC,gBAAQ,GADyB;AAEjC,cAAM;AAF2B,KAArC;AAIA,QAAG,UAAU,IAAV,CAAe,GAAf,CAAH,EAAwB;AACpB,gBAAQ,IAAR,GAAe,EAAf;AACA,YAAG,CAAC,0BAAa,OAAb,CAAqB,KAArB,CAAD,IAAgC,0BAAa,QAAb,CAAsB,KAAtB,CAAnC,EAAiE;AAC7D,gBAAM,WAAW,MAAM,OAAN,CAAc,MAAd,EAAsB,EAAtB,EAA0B,OAA1B,CAAkC,MAAlC,EAA0C,EAA1C,EAA8C,OAA9C,CAAsD,QAAtD,EAA+D,GAA/D,CAAjB;AACA,gBAAM,UAAU,SAAS,KAAT,CAAe,GAAf,CAAhB;AACA,gBAAG,QAAQ,MAAR,GAAe,CAAlB,EAAqB;AACjB,oBAAG,CAAC,WAAW,4BAAU,QAAQ,CAAR,CAAV,CAAX,CAAJ,EAAuC;AACnC,4BAAQ,CAAR,IAAa,4BAAU,QAAQ,CAAR,CAAV,CAAb;AACH;AACD,wBAAQ,MAAR,GAAiB,KAAK,IAAL,CAAU,QAAQ,CAAR,CAAV,IAAwB,SAAS,QAAQ,CAAR,CAAT,CAAxB,GAA+C,UAAU,QAAQ,CAAR,CAAV,CAAhE;AACA,oBAAG,QAAQ,MAAR,GAAe,CAAlB,EAAqB;AACjB,wBAAG,CAAC,WAAW,4BAAU,QAAQ,CAAR,CAAV,CAAX,CAAJ,EAAuC;AACnC,gCAAQ,CAAR,IAAa,4BAAU,QAAQ,CAAR,CAAV,CAAb;AACH;AACD,4BAAQ,MAAR,GAAiB,KAAK,IAAL,CAAU,QAAQ,CAAR,CAAV,IAAwB,SAAS,QAAQ,CAAR,CAAT,CAAxB,GAA+C,UAAU,QAAQ,CAAR,CAAV,CAAhE;AACA,wBAAG,QAAQ,MAAR,GAAe,CAAlB,EAAqB;AACjB,4BAAG,CAAC,WAAW,4BAAU,QAAQ,CAAR,CAAV,CAAX,CAAJ,EAAuC;AACnC,oCAAQ,CAAR,IAAa,4BAAU,QAAQ,CAAR,CAAV,CAAb;AACH;AACD,gCAAQ,MAAR,GAAiB,KAAK,IAAL,CAAU,QAAQ,CAAR,CAAV,IAAwB,SAAS,QAAQ,CAAR,CAAT,CAAxB,GAA+C,UAAU,QAAQ,CAAR,CAAV,CAAhE;AACA,4BAAG,QAAQ,MAAR,GAAe,CAAlB,EAAqB;AACjB,gCAAG,CAAC,WAAW,4BAAU,QAAQ,CAAR,CAAV,CAAX,CAAJ,EAAuC;AACnC,wCAAQ,CAAR,IAAa,4BAAU,QAAQ,CAAR,CAAV,CAAb;AACH;AACD,oCAAQ,MAAR,GAAiB,KAAK,IAAL,CAAU,QAAQ,CAAR,CAAV,IAAwB,SAAS,QAAQ,CAAR,CAAT,CAAxB,GAA+C,UAAU,QAAQ,CAAR,CAAV,CAAhE;AACH;AACJ;AACJ;AACJ;AACJ;AACJ,KA9BD,MA8BO;AACH,YAAG,0BAAa,QAAb,CAAsB,KAAtB,CAAH,EAAiC;AAC7B;AACA,gBAAG,QAAQ,SAAX,EAAsB;AAClB,oBAAM,WAAW,MAAM,OAAN,CAAc,MAAd,EAAsB,EAAtB,EAA0B,OAA1B,CAAkC,MAAlC,EAA0C,EAA1C,EAA8C,OAA9C,CAAsD,QAAtD,EAA+D,GAA/D,CAAjB;AACA,oBAAM,UAAU,cAAc,IAAd,CAAmB,GAAnB,IAA0B,SAAS,KAAT,CAAe,GAAf,CAA1B,GAAgD,SAAS,KAAT,CAAe,GAAf,CAAhE;AACA,qBAAI,IAAI,IAAE,CAAV,EAAY,IAAE,QAAQ,MAAtB,EAA6B,GAA7B,EAAkC;AAC9B,wBAAI,WAAW,QAAQ,CAAR,CAAf;AACA,wBAAI,QAAQ,IAAI,CAAhB;AACA,wBAAG,CAAC,WAAW,QAAX,CAAJ,EAA0B;AACtB,4BAAG,sBAAsB,IAAtB,CAA2B,QAA3B,CAAH,EAAyC;AACrC,oCAAQ,UAAQ,KAAhB,IAA2B,0BAAa,SAAb,CAAuB,QAAvB,KAAoC,0BAAa,QAAb,CAAsB,QAAtB,CAApC,GAAsE,WAAW,QAAX,CAAtE,GAA6F,QAAxH;AACA,oCAAQ,UAAQ,KAAR,GAAa,MAArB,IAA+B,EAA/B;AACH,yBAHD,MAGO,IAAI,sCAAsC,IAAtC,CAA2C,QAA3C,CAAJ,EAA0D;AAC7D,gCAAM,WAAW,SAAS,KAAT,CAAe,qCAAf,CAAjB;AACA,gCAAG,QAAH,EAAa;AACT,wCAAQ,UAAQ,KAAhB,IAA2B,0BAAa,SAAb,CAAuB,SAAS,CAAT,CAAvB,KAAuC,0BAAa,QAAb,CAAsB,SAAS,CAAT,CAAtB,CAAvC,GAA4E,WAAW,SAAS,CAAT,CAAX,CAA5E,GAAsG,SAAS,CAAT,CAAjI;AACA,wCAAQ,UAAQ,KAAR,GAAa,MAArB,IAA+B,SAAS,CAAT,CAA/B;AACH;AACJ;AACJ,qBAXD,MAWO;AACH,4BAAG,QAAQ,SAAX,EAAsB;AAClB,oCAAQ,UAAQ,KAAhB,IAA2B,CAA3B;AACA,oCAAQ,UAAQ,KAAR,GAAa,MAArB,IAA+B,EAA/B;AACH;AACJ;AACD,+BAAW,IAAX;AACA,4BAAQ,IAAR;AACH;AACJ,aA1BD,MA0BO;AACH,oBAAG,gBAAgB,IAAhB,CAAqB,KAArB,CAAH,EAAgC;AAC5B,4BAAQ,MAAR,GAAiB,WAAW,KAAX,CAAjB;AACH,iBAFD,MAEO;AACH,4BAAQ,MAAR,GAAiB,CAAjB;AACH;AACJ;AACJ,SAnCD,MAmCO;AACH,oBAAQ,MAAR,GAAiB,KAAjB;AACH;AACJ;AACD,eAAW,GAAX,IAAkB,OAAlB;AACH,CA5EM;AA8EA,IAAM,0DAAyB,SAAzB,sBAAyB,CAAC,UAAD,EAAkC;AACpE,QAAM,SAAS,EAAf;AACA,QAAG,UAAH,EAAe;AACX;AACA,aAAI,IAAM,GAAV,IAAiB,UAAjB,EAA6B;AACzB,gBAAM,WAAW,WAAW,GAAX,CAAjB;AACA,6BAAiB,MAAjB,EAAyB,GAAzB,EAA8B,QAA9B;AACH;AACJ;AACD,WAAO,MAAP;AACH,CAVM;AAYA,IAAM,sEAA+B,SAA/B,4BAA+B,CAAC,GAAD,EAAkB,IAAlB,EAA8C,EAA9C,EAAsE;AAC9G,QAAM,aAAa,EAAnB;AACA,QAAM,UAAU,QAAQ,EAAxB;AACA,QAAM,QAAQ,MAAM,EAApB;AACA,QAAG,GAAH,EAAQ;AACJ,YAAI,UAAO,eAAO,OAAO,IAAP,CAAY,OAAZ,CAAP,EAA+B,OAAO,IAAP,CAAY,KAAZ,CAA/B,CAAX;AACA,YAAI,gBAAJ;AACA,gBAAQ,GAAR,CAAY,UAAC,KAAD,EAAa;AACrB,gBAAG,cAAc,IAAd,CAAmB,KAAnB,CAAH,EAA8B;AAC1B,oBAAI,WAAW,MAAM,OAAN,CAAc,aAAd,EAA6B,EAA7B,CAAf;AACA,2BAAW,SAAS,MAAT,CAAgB,CAAhB,EAAkB,CAAlB,EAAqB,WAArB,KAAqC,SAAS,MAAT,CAAgB,CAAhB,CAAhD;AACA,oBAAG,qBAAmB,SAAnB,IAAgC,qBAAmB,IAAtD,EAA4D;AACxD,uCAAiB,kBAAkB,GAAlB,CAAjB;AACH;AACD,oBAAG,CAAC,0BAAa,OAAb,CAAqB,gBAArB,CAAJ,EAA0C;AACtC,wBAAM,WAAW,IAAI,MAAJ,CAAc,WAAQ,0BAAtB,EAAqD,GAArD,CAAjB;AACA,wBAAM,aAAa,iBAAe,KAAf,CAAqB,QAArB,CAAnB;AACA,wBAAG,UAAH,EAAe;AACX,yCAAiB,UAAjB,EAA6B,KAA7B,EAAoC,WAAW,CAAX,CAApC;AACH,qBAFD,MAEO;AACH,mCAAW,KAAX,IAAoB;AAChB,kCAAM,EADU;AAEhB,oCAAQ;AAFQ,yBAApB;AAIH;AACJ;AACJ,aAlBD,MAkBO;AACH,oBAAI,QAAQ,IAAI,KAAJ,CAAU,gBAAV,CAA2B,KAA3B,CAAZ;AACA,oBAAG,UAAU,OAAb,EAAsB;AAClB,wBAAG,IAAI,WAAJ,GAAkB,CAArB,EAAwB;AACpB,gCAAQ,IAAI,WAAJ,CAAgB,QAAhB,EAAR;AACH;AACJ,iBAJD,MAIO,IAAG,UAAU,QAAb,EAAuB;AAC1B,wBAAG,IAAI,YAAJ,GAAiB,CAApB,EAAuB;AACnB,gCAAQ,IAAI,YAAJ,CAAiB,QAAjB,EAAR;AACH;AACJ;AACD,iCAAiB,UAAjB,EAA6B,KAA7B,EAAoC,KAApC;AACH;AACJ,SAhCD;AAiCA,kBAAU,IAAV;AACH;AACD,WAAO,UAAP;AACH,CA3CM;AA6CP,IAAM,cAAc,SAAd,WAAc,CAAC,MAAD,EAAiB,KAAjB,EAA8B,WAA9B,EAAoD,SAApD,EAAsE;AACtF,QAAG,CAAC,WAAW,KAAX,CAAJ,EAAuB;AACnB,YAAG,CAAC,UAAU,IAAV,CAAe,MAAf,CAAJ,EAA4B;AACxB,gBAAG,WAAW,SAAX,CAAH,EAA0B;AACtB,oBAAG,CAAC,WAAW,WAAX,CAAJ,EAA6B;AACzB,2BAAO,MAAM,QAAN,KAAmB,WAA1B;AACH,iBAFD,MAEO;AACH,2BAAO,MAAM,QAAN,EAAP;AACH;AACJ,aAND,MAMO;AACH,uBAAO,MAAM,QAAN,KAAmB,SAA1B;AACH;AACJ,SAVD,MAUO;AACH,gBAAG,0BAAa,OAAb,CAAqB,KAArB,CAAH,EAAgC;AAC5B,oBAAG,MAAM,MAAN,KAAiB,CAApB,EAAuB;AACnB,2BAAO,SAAS,MAAM,CAAN,CAAT,EAAmB,MAAM,CAAN,CAAnB,EAA6B,MAAM,CAAN,CAA7B,CAAP;AACH,iBAFD,MAEO,IAAG,MAAM,MAAN,KAAiB,CAApB,EAAuB;AAC1B,2BAAO,UAAQ,MAAM,IAAN,CAAW,GAAX,CAAR,GAAuB,GAA9B;AACH,iBAFM,MAEA;AACH,2BAAO,MAAM,IAAN,CAAW,GAAX,CAAP;AACH;AACJ,aARD,MAQO;AACH,uBAAO,KAAP;AACH;AACJ;AACJ,KAxBD,MAwBO;AACH,eAAO,KAAP;AACH;AACJ,CA5BD;AA8BO,IAAM,gFAAoC,SAApC,iCAAoC,CAAC,aAAD,EAAyC;AACtF,QAAM,YAAgB,EAAtB;AACA,QAAG,aAAH,EAAkB;AACd,YAAM,kBAAkB,EAAxB;AACA;AACA,aAAI,IAAM,MAAV,IAAoB,aAApB,EAAmC;AAC/B,gBAAM,UAAgC,cAAc,MAAd,CAAtC;AACA,gBAAM,WAAW,EAAjB;AACA,gBAAM,YAAY,YAAY,MAAZ,EAAoB,QAAQ,MAA5B,EAAoC,QAAQ,IAA5C,EAAkD,QAAQ,UAA1D,CAAlB;AACA,gBAAM,YAAY,YAAY,MAAZ,EAAoB,QAAQ,MAA5B,EAAoC,QAAQ,IAA5C,EAAkD,QAAQ,UAA1D,CAAlB;AACA,gBAAM,YAAY,YAAY,MAAZ,EAAoB,QAAQ,MAA5B,EAAoC,QAAQ,IAA5C,EAAkD,QAAQ,UAA1D,CAAlB;AACA,gBAAM,YAAY,YAAY,MAAZ,EAAoB,QAAQ,MAA5B,EAAoC,QAAQ,IAA5C,EAAkD,QAAQ,UAA1D,CAAlB;AACA,aAAC,WAAW,SAAX,CAAD,IAA0B,SAAS,IAAT,CAAc,SAAd,CAA1B;AACA,aAAC,WAAW,SAAX,CAAD,IAA0B,SAAS,IAAT,CAAc,SAAd,CAA1B;AACA,aAAC,WAAW,SAAX,CAAD,IAA0B,SAAS,IAAT,CAAc,SAAd,CAA1B;AACA,aAAC,WAAW,SAAX,CAAD,IAA0B,SAAS,IAAT,CAAc,SAAd,CAA1B;AACA,gBAAG,CAAC,cAAc,IAAd,CAAmB,MAAnB,CAAJ,EAAgC;AAC5B,0BAAU,MAAV,IAAoB,SAAS,IAAT,CAAc,GAAd,CAApB;AACA,oBAAG,WAAW,SAAX,IAAwB,gBAAgB,IAAhB,CAAqB,UAAU,MAAV,CAArB,CAA3B,EAAoE;AAChE;AACA,8BAAU,MAAV,IAAoB,UAAU,MAAV,IAAoB,IAAxC;AACH;AACJ,aAND,MAMO,IAAG,cAAc,IAAd,CAAmB,MAAnB,CAAH,EAA+B;AAClC,oBAAI,cAAc,OAAO,OAAP,CAAe,aAAf,EAA8B,EAA9B,CAAlB;AACA,8BAAc,YAAY,MAAZ,CAAmB,CAAnB,EAAqB,CAArB,EAAwB,WAAxB,KAAwC,YAAY,MAAZ,CAAmB,CAAnB,CAAtD;AACA,gCAAgB,IAAhB,CAAwB,cAAW,GAAX,GAAe,SAAS,IAAT,CAAc,GAAd,CAAf,GAAiC,GAAzD;AACH;AACJ;AACD,YAAG,gBAAgB,MAAhB,GAAuB,CAA1B,EAA6B;AACzB,sBAAU,WAAV,IAAyB,gBAAgB,IAAhB,CAAqB,GAArB,CAAzB;AACA,sBAAU,iBAAV,IAA+B,gBAAgB,IAAhB,CAAqB,GAArB,CAA/B;AACA,sBAAU,cAAV,IAA4B,gBAAgB,IAAhB,CAAqB,GAArB,CAA5B;AACA,sBAAU,aAAV,IAA2B,gBAAgB,IAAhB,CAAqB,GAArB,CAA3B;AACA,sBAAU,YAAV,IAA0B,gBAAgB,IAAhB,CAAqB,GAArB,CAA1B;AACH;AACJ;AACD,WAAO,SAAP;AACH,CArCM;kBAuCQ;AACX,6BAAyB,iCADd;AAEX,kBAAc,sBAFH;AAGX,cAAQ,QAHG;AAIX,cAAQ,QAJG;AAKX,kCAA4B,4BALjB;AAMX,cAAQ;AANG,C;;;;;;;;;;;ACrWf;;;;;;;;;;;;;;AAcA,IAAIG,OAAJ;AACA,CAAC,UAAUA,OAAV,EAAmB;AAChB;AACA;AACA,KAAC,UAAUC,OAAV,EAAmB;AAChB,YAAIC,OAAO,QAAOC,MAAP,yCAAOA,MAAP,OAAkB,QAAlB,GAA6BA,MAA7B,GACP,QAAO7C,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,GAA2BA,IAA3B,GACI,QAAO,IAAP,MAAgB,QAAhB,GAA2B,IAA3B,GACItN,SAAS,cAAT,GAHZ;AAIA,YAAIoQ,WAAWC,aAAaL,OAAb,CAAf;AACA,YAAI,OAAOE,KAAKF,OAAZ,KAAwB,WAA5B,EAAyC;AACrCE,iBAAKF,OAAL,GAAeA,OAAf;AACH,SAFD,MAGK;AACDI,uBAAWC,aAAaH,KAAKF,OAAlB,EAA2BI,QAA3B,CAAX;AACH;AACDH,gBAAQG,QAAR;AACA,iBAASC,YAAT,CAAsB1I,MAAtB,EAA8B2I,QAA9B,EAAwC;AACpC,mBAAO,UAAU/N,GAAV,EAAexH,KAAf,EAAsB;AACzB,oBAAI,OAAO4M,OAAOpF,GAAP,CAAP,KAAuB,UAA3B,EAAuC;AACnC1H,2BAAOC,cAAP,CAAsB6M,MAAtB,EAA8BpF,GAA9B,EAAmC,EAAE6D,cAAc,IAAhB,EAAsBE,UAAU,IAAhC,EAAsCvL,OAAOA,KAA7C,EAAnC;AACH;AACD,oBAAIuV,QAAJ,EACIA,SAAS/N,GAAT,EAAcxH,KAAd;AACP,aAND;AAOH;AACJ,KAtBD,EAsBG,UAAUqV,QAAV,EAAoB;AACnB,YAAIG,SAAS1V,OAAOa,SAAP,CAAiBd,cAA9B;AACA;AACA,YAAI4V,iBAAiB,OAAOC,MAAP,KAAkB,UAAvC;AACA,YAAIC,oBAAoBF,kBAAkB,OAAOC,OAAOE,WAAd,KAA8B,WAAhD,GAA8DF,OAAOE,WAArE,GAAmF,eAA3G;AACA,YAAIC,iBAAiBJ,kBAAkB,OAAOC,OAAOI,QAAd,KAA2B,WAA7C,GAA2DJ,OAAOI,QAAlE,GAA6E,YAAlG;AACA,YAAIC,iBAAiB,OAAOjW,OAAOc,MAAd,KAAyB,UAA9C,CANmB,CAMuC;AAC1D,YAAIoV,gBAAgB,EAAEzV,WAAW,EAAb,cAA6BC,KAAjD,CAPmB,CAOqC;AACxD,YAAIyV,YAAY,CAACF,cAAD,IAAmB,CAACC,aAApC;AACA,YAAIE,UAAU;AACV;AACAtV,oBAAQmV,iBACF,YAAY;AAAE,uBAAOI,eAAerW,OAAOc,MAAP,CAAc,IAAd,CAAf,CAAP;AAA6C,aADzD,GAEFoV,gBACI,YAAY;AAAE,uBAAOG,eAAe,EAAE5V,WAAW,IAAb,EAAf,CAAP;AAA6C,aAD/D,GAEI,YAAY;AAAE,uBAAO4V,eAAe,EAAf,CAAP;AAA4B,aAN1C;AAOVC,iBAAKH,YACC,UAAUtR,GAAV,EAAe6C,GAAf,EAAoB;AAAE,uBAAOgO,OAAO9P,IAAP,CAAYf,GAAZ,EAAiB6C,GAAjB,CAAP;AAA+B,aADtD,GAEC,UAAU7C,GAAV,EAAe6C,GAAf,EAAoB;AAAE,uBAAOA,OAAO7C,GAAd;AAAoB,aATtC;AAUV0R,iBAAKJ,YACC,UAAUtR,GAAV,EAAe6C,GAAf,EAAoB;AAAE,uBAAOgO,OAAO9P,IAAP,CAAYf,GAAZ,EAAiB6C,GAAjB,IAAwB7C,IAAI6C,GAAJ,CAAxB,GAAmC9C,SAA1C;AAAsD,aAD7E,GAEC,UAAUC,GAAV,EAAe6C,GAAf,EAAoB;AAAE,uBAAO7C,IAAI6C,GAAJ,CAAP;AAAkB;AAZpC,SAAd;AAcA;AACA,YAAI8O,oBAAoBxW,OAAOyW,cAAP,CAAsBtR,QAAtB,CAAxB;AACA,YAAIuR,cAAc,QAAOC,OAAP,yCAAOA,OAAP,OAAmB,QAAnB,IAA+BA,QAAQ1J,GAAvC,IAA8C0J,QAAQ1J,GAAR,CAAY,mCAAZ,MAAqD,MAArH;AACA,YAAI2J,OAAO,CAACF,WAAD,IAAgB,OAAOG,GAAP,KAAe,UAA/B,IAA6C,OAAOA,IAAIhW,SAAJ,CAAciW,OAArB,KAAiC,UAA9E,GAA2FD,GAA3F,GAAiGE,mBAA5G;AACA,YAAIC,OAAO,CAACN,WAAD,IAAgB,OAAOO,GAAP,KAAe,UAA/B,IAA6C,OAAOA,IAAIpW,SAAJ,CAAciW,OAArB,KAAiC,UAA9E,GAA2FG,GAA3F,GAAiGC,mBAA5G;AACA,YAAIC,WAAW,CAACT,WAAD,IAAgB,OAAOU,OAAP,KAAmB,UAAnC,GAAgDA,OAAhD,GAA0DC,uBAAzE;AACA;AACA;AACA,YAAIC,WAAW,IAAIH,QAAJ,EAAf;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,iBAASI,QAAT,CAAkBC,UAAlB,EAA8B1K,MAA9B,EAAsC5B,WAAtC,EAAmDuM,UAAnD,EAA+D;AAC3D,gBAAI,CAACC,YAAYxM,WAAZ,CAAL,EAA+B;AAC3B,oBAAI,CAACyM,QAAQH,UAAR,CAAL,EACI,MAAM,IAAII,SAAJ,EAAN;AACJ,oBAAI,CAACC,SAAS/K,MAAT,CAAL,EACI,MAAM,IAAI8K,SAAJ,EAAN;AACJ,oBAAI,CAACC,SAASJ,UAAT,CAAD,IAAyB,CAACC,YAAYD,UAAZ,CAA1B,IAAqD,CAACK,OAAOL,UAAP,CAA1D,EACI,MAAM,IAAIG,SAAJ,EAAN;AACJ,oBAAIE,OAAOL,UAAP,CAAJ,EACIA,aAAa7S,SAAb;AACJsG,8BAAc6M,cAAc7M,WAAd,CAAd;AACA,uBAAO8M,iBAAiBR,UAAjB,EAA6B1K,MAA7B,EAAqC5B,WAArC,EAAkDuM,UAAlD,CAAP;AACH,aAXD,MAYK;AACD,oBAAI,CAACE,QAAQH,UAAR,CAAL,EACI,MAAM,IAAII,SAAJ,EAAN;AACJ,oBAAI,CAACK,cAAcnL,MAAd,CAAL,EACI,MAAM,IAAI8K,SAAJ,EAAN;AACJ,uBAAOM,oBAAoBV,UAApB,EAAgC1K,MAAhC,CAAP;AACH;AACJ;AACDyI,iBAAS,UAAT,EAAqBgC,QAArB;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,iBAASY,QAAT,CAAkBC,WAAlB,EAA+BC,aAA/B,EAA8C;AAC1C,qBAASC,SAAT,CAAmBxL,MAAnB,EAA2B5B,WAA3B,EAAwC;AACpC,oBAAI,CAAC2M,SAAS/K,MAAT,CAAL,EACI,MAAM,IAAI8K,SAAJ,EAAN;AACJ,oBAAI,CAACF,YAAYxM,WAAZ,CAAD,IAA6B,CAACqN,cAAcrN,WAAd,CAAlC,EACI,MAAM,IAAI0M,SAAJ,EAAN;AACJY,0CAA0BJ,WAA1B,EAAuCC,aAAvC,EAAsDvL,MAAtD,EAA8D5B,WAA9D;AACH;AACD,mBAAOoN,SAAP;AACH;AACD/C,iBAAS,UAAT,EAAqB4C,QAArB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA,iBAASM,cAAT,CAAwBL,WAAxB,EAAqCC,aAArC,EAAoDvL,MAApD,EAA4D5B,WAA5D,EAAyE;AACrE,gBAAI,CAAC2M,SAAS/K,MAAT,CAAL,EACI,MAAM,IAAI8K,SAAJ,EAAN;AACJ,gBAAI,CAACF,YAAYxM,WAAZ,CAAL,EACIA,cAAc6M,cAAc7M,WAAd,CAAd;AACJ,mBAAOsN,0BAA0BJ,WAA1B,EAAuCC,aAAvC,EAAsDvL,MAAtD,EAA8D5B,WAA9D,CAAP;AACH;AACDqK,iBAAS,gBAAT,EAA2BkD,cAA3B;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,iBAASC,WAAT,CAAqBN,WAArB,EAAkCtL,MAAlC,EAA0C5B,WAA1C,EAAuD;AACnD,gBAAI,CAAC2M,SAAS/K,MAAT,CAAL,EACI,MAAM,IAAI8K,SAAJ,EAAN;AACJ,gBAAI,CAACF,YAAYxM,WAAZ,CAAL,EACIA,cAAc6M,cAAc7M,WAAd,CAAd;AACJ,mBAAOyN,oBAAoBP,WAApB,EAAiCtL,MAAjC,EAAyC5B,WAAzC,CAAP;AACH;AACDqK,iBAAS,aAAT,EAAwBmD,WAAxB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,iBAASE,cAAT,CAAwBR,WAAxB,EAAqCtL,MAArC,EAA6C5B,WAA7C,EAA0D;AACtD,gBAAI,CAAC2M,SAAS/K,MAAT,CAAL,EACI,MAAM,IAAI8K,SAAJ,EAAN;AACJ,gBAAI,CAACF,YAAYxM,WAAZ,CAAL,EACIA,cAAc6M,cAAc7M,WAAd,CAAd;AACJ,mBAAO2N,uBAAuBT,WAAvB,EAAoCtL,MAApC,EAA4C5B,WAA5C,CAAP;AACH;AACDqK,iBAAS,gBAAT,EAA2BqD,cAA3B;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,iBAASE,WAAT,CAAqBV,WAArB,EAAkCtL,MAAlC,EAA0C5B,WAA1C,EAAuD;AACnD,gBAAI,CAAC2M,SAAS/K,MAAT,CAAL,EACI,MAAM,IAAI8K,SAAJ,EAAN;AACJ,gBAAI,CAACF,YAAYxM,WAAZ,CAAL,EACIA,cAAc6M,cAAc7M,WAAd,CAAd;AACJ,mBAAO6N,oBAAoBX,WAApB,EAAiCtL,MAAjC,EAAyC5B,WAAzC,CAAP;AACH;AACDqK,iBAAS,aAAT,EAAwBuD,WAAxB;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,iBAASE,cAAT,CAAwBZ,WAAxB,EAAqCtL,MAArC,EAA6C5B,WAA7C,EAA0D;AACtD,gBAAI,CAAC2M,SAAS/K,MAAT,CAAL,EACI,MAAM,IAAI8K,SAAJ,EAAN;AACJ,gBAAI,CAACF,YAAYxM,WAAZ,CAAL,EACIA,cAAc6M,cAAc7M,WAAd,CAAd;AACJ,mBAAO+N,uBAAuBb,WAAvB,EAAoCtL,MAApC,EAA4C5B,WAA5C,CAAP;AACH;AACDqK,iBAAS,gBAAT,EAA2ByD,cAA3B;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,iBAASE,eAAT,CAAyBpM,MAAzB,EAAiC5B,WAAjC,EAA8C;AAC1C,gBAAI,CAAC2M,SAAS/K,MAAT,CAAL,EACI,MAAM,IAAI8K,SAAJ,EAAN;AACJ,gBAAI,CAACF,YAAYxM,WAAZ,CAAL,EACIA,cAAc6M,cAAc7M,WAAd,CAAd;AACJ,mBAAOiO,qBAAqBrM,MAArB,EAA6B5B,WAA7B,CAAP;AACH;AACDqK,iBAAS,iBAAT,EAA4B2D,eAA5B;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA,iBAASE,kBAAT,CAA4BtM,MAA5B,EAAoC5B,WAApC,EAAiD;AAC7C,gBAAI,CAAC2M,SAAS/K,MAAT,CAAL,EACI,MAAM,IAAI8K,SAAJ,EAAN;AACJ,gBAAI,CAACF,YAAYxM,WAAZ,CAAL,EACIA,cAAc6M,cAAc7M,WAAd,CAAd;AACJ,mBAAOmO,wBAAwBvM,MAAxB,EAAgC5B,WAAhC,CAAP;AACH;AACDqK,iBAAS,oBAAT,EAA+B6D,kBAA/B;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkCA,iBAASE,cAAT,CAAwBlB,WAAxB,EAAqCtL,MAArC,EAA6C5B,WAA7C,EAA0D;AACtD,gBAAI,CAAC2M,SAAS/K,MAAT,CAAL,EACI,MAAM,IAAI8K,SAAJ,EAAN;AACJ,gBAAI,CAACF,YAAYxM,WAAZ,CAAL,EACIA,cAAc6M,cAAc7M,WAAd,CAAd;AACJ,gBAAIqO,cAAcC,uBAAuB1M,MAAvB,EAA+B5B,WAA/B,EAA4C,UAAW,KAAvD,CAAlB;AACA,gBAAIwM,YAAY6B,WAAZ,CAAJ,EACI,OAAO,KAAP;AACJ,gBAAI,CAACA,YAAYE,MAAZ,CAAmBrB,WAAnB,CAAL,EACI,OAAO,KAAP;AACJ,gBAAImB,YAAYG,IAAZ,GAAmB,CAAvB,EACI,OAAO,IAAP;AACJ,gBAAIC,iBAAiBrC,SAASf,GAAT,CAAazJ,MAAb,CAArB;AACA6M,2BAAeF,MAAf,CAAsBvO,WAAtB;AACA,gBAAIyO,eAAeD,IAAf,GAAsB,CAA1B,EACI,OAAO,IAAP;AACJpC,qBAASmC,MAAT,CAAgB3M,MAAhB;AACA,mBAAO,IAAP;AACH;AACDyI,iBAAS,gBAAT,EAA2B+D,cAA3B;AACA,iBAASpB,mBAAT,CAA6BV,UAA7B,EAAyC1K,MAAzC,EAAiD;AAC7C,iBAAK,IAAI9F,IAAIwQ,WAAWpV,MAAX,GAAoB,CAAjC,EAAoC4E,KAAK,CAAzC,EAA4C,EAAEA,CAA9C,EAAiD;AAC7C,oBAAIsR,YAAYd,WAAWxQ,CAAX,CAAhB;AACA,oBAAI4S,YAAYtB,UAAUxL,MAAV,CAAhB;AACA,oBAAI,CAAC4K,YAAYkC,SAAZ,CAAD,IAA2B,CAAC9B,OAAO8B,SAAP,CAAhC,EAAmD;AAC/C,wBAAI,CAAC3B,cAAc2B,SAAd,CAAL,EACI,MAAM,IAAIhC,SAAJ,EAAN;AACJ9K,6BAAS8M,SAAT;AACH;AACJ;AACD,mBAAO9M,MAAP;AACH;AACD,iBAASkL,gBAAT,CAA0BR,UAA1B,EAAsC1K,MAAtC,EAA8C5B,WAA9C,EAA2D2O,UAA3D,EAAuE;AACnE,iBAAK,IAAI7S,IAAIwQ,WAAWpV,MAAX,GAAoB,CAAjC,EAAoC4E,KAAK,CAAzC,EAA4C,EAAEA,CAA9C,EAAiD;AAC7C,oBAAIsR,YAAYd,WAAWxQ,CAAX,CAAhB;AACA,oBAAI4S,YAAYtB,UAAUxL,MAAV,EAAkB5B,WAAlB,EAA+B2O,UAA/B,CAAhB;AACA,oBAAI,CAACnC,YAAYkC,SAAZ,CAAD,IAA2B,CAAC9B,OAAO8B,SAAP,CAAhC,EAAmD;AAC/C,wBAAI,CAAC/B,SAAS+B,SAAT,CAAL,EACI,MAAM,IAAIhC,SAAJ,EAAN;AACJiC,iCAAaD,SAAb;AACH;AACJ;AACD,mBAAOC,UAAP;AACH;AACD,iBAASL,sBAAT,CAAgCM,CAAhC,EAAmCC,CAAnC,EAAsCC,MAAtC,EAA8C;AAC1C,gBAAIL,iBAAiBrC,SAASf,GAAT,CAAauD,CAAb,CAArB;AACA,gBAAIpC,YAAYiC,cAAZ,CAAJ,EAAiC;AAC7B,oBAAI,CAACK,MAAL,EACI,OAAOpV,SAAP;AACJ+U,iCAAiB,IAAI/C,IAAJ,EAAjB;AACAU,yBAAS2C,GAAT,CAAaH,CAAb,EAAgBH,cAAhB;AACH;AACD,gBAAIJ,cAAcI,eAAepD,GAAf,CAAmBwD,CAAnB,CAAlB;AACA,gBAAIrC,YAAY6B,WAAZ,CAAJ,EAA8B;AAC1B,oBAAI,CAACS,MAAL,EACI,OAAOpV,SAAP;AACJ2U,8BAAc,IAAI3C,IAAJ,EAAd;AACA+C,+BAAeM,GAAf,CAAmBF,CAAnB,EAAsBR,WAAtB;AACH;AACD,mBAAOA,WAAP;AACH;AACD;AACA;AACA,iBAASZ,mBAAT,CAA6BuB,WAA7B,EAA0CJ,CAA1C,EAA6CC,CAA7C,EAAgD;AAC5C,gBAAIrE,SAASmD,uBAAuBqB,WAAvB,EAAoCJ,CAApC,EAAuCC,CAAvC,CAAb;AACA,gBAAIrE,MAAJ,EACI,OAAO,IAAP;AACJ,gBAAIyE,SAASC,uBAAuBN,CAAvB,CAAb;AACA,gBAAI,CAAChC,OAAOqC,MAAP,CAAL,EACI,OAAOxB,oBAAoBuB,WAApB,EAAiCC,MAAjC,EAAyCJ,CAAzC,CAAP;AACJ,mBAAO,KAAP;AACH;AACD;AACA;AACA,iBAASlB,sBAAT,CAAgCqB,WAAhC,EAA6CJ,CAA7C,EAAgDC,CAAhD,EAAmD;AAC/C,gBAAIR,cAAcC,uBAAuBM,CAAvB,EAA0BC,CAA1B,EAA6B,UAAW,KAAxC,CAAlB;AACA,gBAAIrC,YAAY6B,WAAZ,CAAJ,EACI,OAAO,KAAP;AACJ,mBAAOc,UAAUd,YAAYjD,GAAZ,CAAgB4D,WAAhB,CAAV,CAAP;AACH;AACD;AACA;AACA,iBAASnB,mBAAT,CAA6BmB,WAA7B,EAA0CJ,CAA1C,EAA6CC,CAA7C,EAAgD;AAC5C,gBAAIrE,SAASmD,uBAAuBqB,WAAvB,EAAoCJ,CAApC,EAAuCC,CAAvC,CAAb;AACA,gBAAIrE,MAAJ,EACI,OAAOuD,uBAAuBiB,WAAvB,EAAoCJ,CAApC,EAAuCC,CAAvC,CAAP;AACJ,gBAAII,SAASC,uBAAuBN,CAAvB,CAAb;AACA,gBAAI,CAAChC,OAAOqC,MAAP,CAAL,EACI,OAAOpB,oBAAoBmB,WAApB,EAAiCC,MAAjC,EAAyCJ,CAAzC,CAAP;AACJ,mBAAOnV,SAAP;AACH;AACD;AACA;AACA,iBAASqU,sBAAT,CAAgCiB,WAAhC,EAA6CJ,CAA7C,EAAgDC,CAAhD,EAAmD;AAC/C,gBAAIR,cAAcC,uBAAuBM,CAAvB,EAA0BC,CAA1B,EAA6B,UAAW,KAAxC,CAAlB;AACA,gBAAIrC,YAAY6B,WAAZ,CAAJ,EACI,OAAO3U,SAAP;AACJ,mBAAO2U,YAAYhD,GAAZ,CAAgB2D,WAAhB,CAAP;AACH;AACD;AACA;AACA,iBAAS1B,yBAAT,CAAmC0B,WAAnC,EAAgDI,aAAhD,EAA+DR,CAA/D,EAAkEC,CAAlE,EAAqE;AACjE,gBAAIR,cAAcC,uBAAuBM,CAAvB,EAA0BC,CAA1B,EAA6B,UAAW,IAAxC,CAAlB;AACAR,wBAAYU,GAAZ,CAAgBC,WAAhB,EAA6BI,aAA7B;AACH;AACD;AACA;AACA,iBAASnB,oBAAT,CAA8BW,CAA9B,EAAiCC,CAAjC,EAAoC;AAChC,gBAAIQ,UAAUlB,wBAAwBS,CAAxB,EAA2BC,CAA3B,CAAd;AACA,gBAAII,SAASC,uBAAuBN,CAAvB,CAAb;AACA,gBAAIK,WAAW,IAAf,EACI,OAAOI,OAAP;AACJ,gBAAIC,aAAarB,qBAAqBgB,MAArB,EAA6BJ,CAA7B,CAAjB;AACA,gBAAIS,WAAWpY,MAAX,IAAqB,CAAzB,EACI,OAAOmY,OAAP;AACJ,gBAAIA,QAAQnY,MAAR,IAAkB,CAAtB,EACI,OAAOoY,UAAP;AACJ,gBAAIP,MAAM,IAAIjD,IAAJ,EAAV;AACA,gBAAIrF,OAAO,EAAX;AACA,iBAAK,IAAI8I,KAAK,CAAT,EAAYC,YAAYH,OAA7B,EAAsCE,KAAKC,UAAUtY,MAArD,EAA6DqY,IAA7D,EAAmE;AAC/D,oBAAI/S,MAAMgT,UAAUD,EAAV,CAAV;AACA,oBAAIE,SAASV,IAAI3D,GAAJ,CAAQ5O,GAAR,CAAb;AACA,oBAAI,CAACiT,MAAL,EAAa;AACTV,wBAAIW,GAAJ,CAAQlT,GAAR;AACAiK,yBAAKpN,IAAL,CAAUmD,GAAV;AACH;AACJ;AACD,iBAAK,IAAImT,KAAK,CAAT,EAAYC,eAAeN,UAAhC,EAA4CK,KAAKC,aAAa1Y,MAA9D,EAAsEyY,IAAtE,EAA4E;AACxE,oBAAInT,MAAMoT,aAAaD,EAAb,CAAV;AACA,oBAAIF,SAASV,IAAI3D,GAAJ,CAAQ5O,GAAR,CAAb;AACA,oBAAI,CAACiT,MAAL,EAAa;AACTV,wBAAIW,GAAJ,CAAQlT,GAAR;AACAiK,yBAAKpN,IAAL,CAAUmD,GAAV;AACH;AACJ;AACD,mBAAOiK,IAAP;AACH;AACD;AACA;AACA,iBAAS0H,uBAAT,CAAiCS,CAAjC,EAAoCC,CAApC,EAAuC;AACnC,gBAAIpI,OAAO,EAAX;AACA,gBAAI4H,cAAcC,uBAAuBM,CAAvB,EAA0BC,CAA1B,EAA6B,UAAW,KAAxC,CAAlB;AACA,gBAAIrC,YAAY6B,WAAZ,CAAJ,EACI,OAAO5H,IAAP;AACJ,gBAAIoJ,UAAUxB,YAAY5H,IAAZ,EAAd;AACA,gBAAIqE,WAAWgF,YAAYD,OAAZ,CAAf;AACA,gBAAI9F,IAAI,CAAR;AACA,mBAAO,IAAP,EAAa;AACT,oBAAIgG,OAAOC,aAAalF,QAAb,CAAX;AACA,oBAAI,CAACiF,IAAL,EAAW;AACPtJ,yBAAKvP,MAAL,GAAc6S,CAAd;AACA,2BAAOtD,IAAP;AACH;AACD,oBAAIwJ,YAAYC,cAAcH,IAAd,CAAhB;AACA,oBAAI;AACAtJ,yBAAKsD,CAAL,IAAUkG,SAAV;AACH,iBAFD,CAGA,OAAO/I,CAAP,EAAU;AACN,wBAAI;AACAiJ,sCAAcrF,QAAd;AACH,qBAFD,SAGQ;AACJ,8BAAM5D,CAAN;AACH;AACJ;AACD6C;AACH;AACJ;AACD;AACA;AACA,iBAASqG,IAAT,CAAcC,CAAd,EAAiB;AACb,gBAAIA,MAAM,IAAV,EACI,OAAO,CAAP,CAAS,UAAT;AACJ,2BAAeA,CAAf,yCAAeA,CAAf;AACI,qBAAK,WAAL;AAAkB,2BAAO,CAAP,CAAS,eAAT;AAClB,qBAAK,SAAL;AAAgB,2BAAO,CAAP,CAAS,aAAT;AAChB,qBAAK,QAAL;AAAe,2BAAO,CAAP,CAAS,YAAT;AACf,qBAAK,QAAL;AAAe,2BAAO,CAAP,CAAS,YAAT;AACf,qBAAK,QAAL;AAAe,2BAAO,CAAP,CAAS,YAAT;AACf,qBAAK,QAAL;AAAe,2BAAOA,MAAM,IAAN,GAAa,CAAb,CAAe,UAAf,GAA4B,CAAnC,CAAqC,YAArC;AACf;AAAS,2BAAO,CAAP,CAAS,YAAT;AAPb;AASH;AACD;AACA;AACA,iBAAS7D,WAAT,CAAqB6D,CAArB,EAAwB;AACpB,mBAAOA,MAAM3W,SAAb;AACH;AACD;AACA;AACA,iBAASkT,MAAT,CAAgByD,CAAhB,EAAmB;AACf,mBAAOA,MAAM,IAAb;AACH;AACD;AACA;AACA,iBAASC,QAAT,CAAkBD,CAAlB,EAAqB;AACjB,mBAAO,QAAOA,CAAP,yCAAOA,CAAP,OAAa,QAApB;AACH;AACD;AACA;AACA,iBAAS1D,QAAT,CAAkB0D,CAAlB,EAAqB;AACjB,mBAAO,QAAOA,CAAP,yCAAOA,CAAP,OAAa,QAAb,GAAwBA,MAAM,IAA9B,GAAqC,OAAOA,CAAP,KAAa,UAAzD;AACH;AACD;AACA;AACA;AACA;AACA,iBAASE,WAAT,CAAqBC,KAArB,EAA4BC,aAA5B,EAA2C;AACvC,oBAAQL,KAAKI,KAAL,CAAR;AACI,qBAAK,CAAL,CAAO,eAAP;AAAwB,2BAAOA,KAAP;AACxB,qBAAK,CAAL,CAAO,UAAP;AAAmB,2BAAOA,KAAP;AACnB,qBAAK,CAAL,CAAO,aAAP;AAAsB,2BAAOA,KAAP;AACtB,qBAAK,CAAL,CAAO,YAAP;AAAqB,2BAAOA,KAAP;AACrB,qBAAK,CAAL,CAAO,YAAP;AAAqB,2BAAOA,KAAP;AACrB,qBAAK,CAAL,CAAO,YAAP;AAAqB,2BAAOA,KAAP;AANzB;AAQA,gBAAIE,OAAOD,kBAAkB,CAAlB,CAAoB,YAApB,GAAmC,QAAnC,GAA8CA,kBAAkB,CAAlB,CAAoB,YAApB,GAAmC,QAAnC,GAA8C,SAAvG;AACA,gBAAIE,eAAeC,UAAUJ,KAAV,EAAiB7F,iBAAjB,CAAnB;AACA,gBAAIgG,iBAAiBjX,SAArB,EAAgC;AAC5B,oBAAIrD,SAASsa,aAAajW,IAAb,CAAkB8V,KAAlB,EAAyBE,IAAzB,CAAb;AACA,oBAAI/D,SAAStW,MAAT,CAAJ,EACI,MAAM,IAAIqW,SAAJ,EAAN;AACJ,uBAAOrW,MAAP;AACH;AACD,mBAAOwa,oBAAoBL,KAApB,EAA2BE,SAAS,SAAT,GAAqB,QAArB,GAAgCA,IAA3D,CAAP;AACH;AACD;AACA;AACA,iBAASG,mBAAT,CAA6BjC,CAA7B,EAAgC8B,IAAhC,EAAsC;AAClC,gBAAIA,SAAS,QAAb,EAAuB;AACnB,oBAAII,aAAalC,EAAEnU,QAAnB;AACA,oBAAIsW,WAAWD,UAAX,CAAJ,EAA4B;AACxB,wBAAIza,SAASya,WAAWpW,IAAX,CAAgBkU,CAAhB,CAAb;AACA,wBAAI,CAACjC,SAAStW,MAAT,CAAL,EACI,OAAOA,MAAP;AACP;AACD,oBAAI2a,UAAUpC,EAAEoC,OAAhB;AACA,oBAAID,WAAWC,OAAX,CAAJ,EAAyB;AACrB,wBAAI3a,SAAS2a,QAAQtW,IAAR,CAAakU,CAAb,CAAb;AACA,wBAAI,CAACjC,SAAStW,MAAT,CAAL,EACI,OAAOA,MAAP;AACP;AACJ,aAbD,MAcK;AACD,oBAAI2a,UAAUpC,EAAEoC,OAAhB;AACA,oBAAID,WAAWC,OAAX,CAAJ,EAAyB;AACrB,wBAAI3a,SAAS2a,QAAQtW,IAAR,CAAakU,CAAb,CAAb;AACA,wBAAI,CAACjC,SAAStW,MAAT,CAAL,EACI,OAAOA,MAAP;AACP;AACD,oBAAI4a,aAAarC,EAAEnU,QAAnB;AACA,oBAAIsW,WAAWE,UAAX,CAAJ,EAA4B;AACxB,wBAAI5a,SAAS4a,WAAWvW,IAAX,CAAgBkU,CAAhB,CAAb;AACA,wBAAI,CAACjC,SAAStW,MAAT,CAAL,EACI,OAAOA,MAAP;AACP;AACJ;AACD,kBAAM,IAAIqW,SAAJ,EAAN;AACH;AACD;AACA;AACA,iBAASyC,SAAT,CAAmB+B,QAAnB,EAA6B;AACzB,mBAAO,CAAC,CAACA,QAAT;AACH;AACD;AACA;AACA,iBAASC,QAAT,CAAkBD,QAAlB,EAA4B;AACxB,mBAAO,KAAKA,QAAZ;AACH;AACD;AACA;AACA,iBAASrE,aAAT,CAAuBqE,QAAvB,EAAiC;AAC7B,gBAAI1U,MAAM+T,YAAYW,QAAZ,EAAsB,CAAtB,CAAwB,YAAxB,CAAV;AACA,gBAAIZ,SAAS9T,GAAT,CAAJ,EACI,OAAOA,GAAP;AACJ,mBAAO2U,SAAS3U,GAAT,CAAP;AACH;AACD;AACA;AACA;AACA;AACA,iBAASiQ,OAAT,CAAiByE,QAAjB,EAA2B;AACvB,mBAAO1b,MAAMqF,OAAN,GACDrF,MAAMqF,OAAN,CAAcqW,QAAd,CADC,GAEDA,oBAAoBpc,MAApB,GACIoc,oBAAoB1b,KADxB,GAEIV,OAAOa,SAAP,CAAiB8E,QAAjB,CAA0BC,IAA1B,CAA+BwW,QAA/B,MAA6C,gBAJvD;AAKH;AACD;AACA;AACA,iBAASH,UAAT,CAAoBG,QAApB,EAA8B;AAC1B;AACA,mBAAO,OAAOA,QAAP,KAAoB,UAA3B;AACH;AACD;AACA;AACA,iBAASnE,aAAT,CAAuBmE,QAAvB,EAAiC;AAC7B;AACA,mBAAO,OAAOA,QAAP,KAAoB,UAA3B;AACH;AACD;AACA;AACA,iBAAS7D,aAAT,CAAuB6D,QAAvB,EAAiC;AAC7B,oBAAQd,KAAKc,QAAL,CAAR;AACI,qBAAK,CAAL,CAAO,YAAP;AAAqB,2BAAO,IAAP;AACrB,qBAAK,CAAL,CAAO,YAAP;AAAqB,2BAAO,IAAP;AACrB;AAAS,2BAAO,KAAP;AAHb;AAKH;AACD;AACA;AACA;AACA;AACA,iBAASN,SAAT,CAAmBQ,CAAnB,EAAsBvC,CAAtB,EAAyB;AACrB,gBAAI7H,OAAOoK,EAAEvC,CAAF,CAAX;AACA,gBAAI7H,SAAStN,SAAT,IAAsBsN,SAAS,IAAnC,EACI,OAAOtN,SAAP;AACJ,gBAAI,CAACqX,WAAW/J,IAAX,CAAL,EACI,MAAM,IAAI0F,SAAJ,EAAN;AACJ,mBAAO1F,IAAP;AACH;AACD;AACA;AACA,iBAAS8I,WAAT,CAAqB3T,GAArB,EAA0B;AACtB,gBAAI8L,SAAS2I,UAAUzU,GAAV,EAAe0O,cAAf,CAAb;AACA,gBAAI,CAACkG,WAAW9I,MAAX,CAAL,EACI,MAAM,IAAIyE,SAAJ,EAAN,CAHkB,CAGK;AAC3B,gBAAI5B,WAAW7C,OAAOvN,IAAP,CAAYyB,GAAZ,CAAf;AACA,gBAAI,CAACwQ,SAAS7B,QAAT,CAAL,EACI,MAAM,IAAI4B,SAAJ,EAAN;AACJ,mBAAO5B,QAAP;AACH;AACD;AACA;AACA,iBAASoF,aAAT,CAAuBmB,UAAvB,EAAmC;AAC/B,mBAAOA,WAAWrc,KAAlB;AACH;AACD;AACA;AACA,iBAASgb,YAAT,CAAsBlF,QAAtB,EAAgC;AAC5B,gBAAIzU,SAASyU,SAASiF,IAAT,EAAb;AACA,mBAAO1Z,OAAOib,IAAP,GAAc,KAAd,GAAsBjb,MAA7B;AACH;AACD;AACA;AACA,iBAAS8Z,aAAT,CAAuBrF,QAAvB,EAAiC;AAC7B,gBAAI5F,IAAI4F,SAAS,QAAT,CAAR;AACA,gBAAI5F,CAAJ,EACIA,EAAExK,IAAF,CAAOoQ,QAAP;AACP;AACD;AACA;AACA;AACA;AACA,iBAASoE,sBAAT,CAAgCN,CAAhC,EAAmC;AAC/B,gBAAI2C,QAAQzc,OAAOyW,cAAP,CAAsBqD,CAAtB,CAAZ;AACA,gBAAI,OAAOA,CAAP,KAAa,UAAb,IAA2BA,MAAMtD,iBAArC,EACI,OAAOiG,KAAP;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAIA,UAAUjG,iBAAd,EACI,OAAOiG,KAAP;AACJ;AACA,gBAAI5b,YAAYiZ,EAAEjZ,SAAlB;AACA,gBAAI6b,iBAAiB7b,aAAab,OAAOyW,cAAP,CAAsB5V,SAAtB,CAAlC;AACA,gBAAI6b,kBAAkB,IAAlB,IAA0BA,mBAAmB1c,OAAOa,SAAxD,EACI,OAAO4b,KAAP;AACJ;AACA,gBAAI7b,cAAc8b,eAAe9b,WAAjC;AACA,gBAAI,OAAOA,WAAP,KAAuB,UAA3B,EACI,OAAO6b,KAAP;AACJ;AACA,gBAAI7b,gBAAgBkZ,CAApB,EACI,OAAO2C,KAAP;AACJ;AACA,mBAAO7b,WAAP;AACH;AACD;AACA,iBAASmW,iBAAT,GAA6B;AACzB,gBAAI4F,gBAAgB,EAApB;AACA,gBAAIC,gBAAgB,EAApB;AACA,gBAAIC,cAAe,YAAY;AAC3B,yBAASA,WAAT,CAAqBlL,IAArB,EAA2BmL,MAA3B,EAAmCC,QAAnC,EAA6C;AACzC,yBAAKC,MAAL,GAAc,CAAd;AACA,yBAAKC,KAAL,GAAatL,IAAb;AACA,yBAAKuL,OAAL,GAAeJ,MAAf;AACA,yBAAKK,SAAL,GAAiBJ,QAAjB;AACH;AACDF,4BAAYhc,SAAZ,CAAsB,YAAtB,IAAsC,YAAY;AAAE,2BAAO,IAAP;AAAc,iBAAlE;AACAgc,4BAAYhc,SAAZ,CAAsBkV,cAAtB,IAAwC,YAAY;AAAE,2BAAO,IAAP;AAAc,iBAApE;AACA8G,4BAAYhc,SAAZ,CAAsBoa,IAAtB,GAA6B,YAAY;AACrC,wBAAIhX,QAAQ,KAAK+Y,MAAjB;AACA,wBAAI/Y,SAAS,CAAT,IAAcA,QAAQ,KAAKgZ,KAAL,CAAW7a,MAArC,EAA6C;AACzC,4BAAIb,SAAS,KAAK4b,SAAL,CAAe,KAAKF,KAAL,CAAWhZ,KAAX,CAAf,EAAkC,KAAKiZ,OAAL,CAAajZ,KAAb,CAAlC,CAAb;AACA,4BAAIA,QAAQ,CAAR,IAAa,KAAKgZ,KAAL,CAAW7a,MAA5B,EAAoC;AAChC,iCAAK4a,MAAL,GAAc,CAAC,CAAf;AACA,iCAAKC,KAAL,GAAaL,aAAb;AACA,iCAAKM,OAAL,GAAeN,aAAf;AACH,yBAJD,MAKK;AACD,iCAAKI,MAAL;AACH;AACD,+BAAO,EAAE9c,OAAOqB,MAAT,EAAiBib,MAAM,KAAvB,EAAP;AACH;AACD,2BAAO,EAAEtc,OAAO0E,SAAT,EAAoB4X,MAAM,IAA1B,EAAP;AACH,iBAfD;AAgBAK,4BAAYhc,SAAZ,CAAsBuc,KAAtB,GAA8B,UAAU7J,KAAV,EAAiB;AAC3C,wBAAI,KAAKyJ,MAAL,IAAe,CAAnB,EAAsB;AAClB,6BAAKA,MAAL,GAAc,CAAC,CAAf;AACA,6BAAKC,KAAL,GAAaL,aAAb;AACA,6BAAKM,OAAL,GAAeN,aAAf;AACH;AACD,0BAAMrJ,KAAN;AACH,iBAPD;AAQAsJ,4BAAYhc,SAAZ,CAAsBwc,MAAtB,GAA+B,UAAUnd,KAAV,EAAiB;AAC5C,wBAAI,KAAK8c,MAAL,IAAe,CAAnB,EAAsB;AAClB,6BAAKA,MAAL,GAAc,CAAC,CAAf;AACA,6BAAKC,KAAL,GAAaL,aAAb;AACA,6BAAKM,OAAL,GAAeN,aAAf;AACH;AACD,2BAAO,EAAE1c,OAAOA,KAAT,EAAgBsc,MAAM,IAAtB,EAAP;AACH,iBAPD;AAQA,uBAAOK,WAAP;AACH,aA1CkB,EAAnB;AA2CA,mBAAQ,YAAY;AAChB,yBAAShG,GAAT,GAAe;AACX,yBAAKoG,KAAL,GAAa,EAAb;AACA,yBAAKC,OAAL,GAAe,EAAf;AACA,yBAAKI,SAAL,GAAiBX,aAAjB;AACA,yBAAKY,WAAL,GAAmB,CAAC,CAApB;AACH;AACDvd,uBAAOC,cAAP,CAAsB4W,IAAIhW,SAA1B,EAAqC,MAArC,EAA6C;AACzC0V,yBAAK,eAAY;AAAE,+BAAO,KAAK0G,KAAL,CAAW7a,MAAlB;AAA2B,qBADL;AAEzCoJ,gCAAY,IAF6B;AAGzCD,kCAAc;AAH2B,iBAA7C;AAKAsL,oBAAIhW,SAAJ,CAAcyV,GAAd,GAAoB,UAAU5O,GAAV,EAAe;AAAE,2BAAO,KAAK8V,KAAL,CAAW9V,GAAX,EAAgB,UAAW,KAA3B,KAAqC,CAA5C;AAAgD,iBAArF;AACAmP,oBAAIhW,SAAJ,CAAc0V,GAAd,GAAoB,UAAU7O,GAAV,EAAe;AAC/B,wBAAIzD,QAAQ,KAAKuZ,KAAL,CAAW9V,GAAX,EAAgB,UAAW,KAA3B,CAAZ;AACA,2BAAOzD,SAAS,CAAT,GAAa,KAAKiZ,OAAL,CAAajZ,KAAb,CAAb,GAAmCW,SAA1C;AACH,iBAHD;AAIAiS,oBAAIhW,SAAJ,CAAcoZ,GAAd,GAAoB,UAAUvS,GAAV,EAAexH,KAAf,EAAsB;AACtC,wBAAI+D,QAAQ,KAAKuZ,KAAL,CAAW9V,GAAX,EAAgB,UAAW,IAA3B,CAAZ;AACA,yBAAKwV,OAAL,CAAajZ,KAAb,IAAsB/D,KAAtB;AACA,2BAAO,IAAP;AACH,iBAJD;AAKA2W,oBAAIhW,SAAJ,CAAc4Y,MAAd,GAAuB,UAAU/R,GAAV,EAAe;AAClC,wBAAIzD,QAAQ,KAAKuZ,KAAL,CAAW9V,GAAX,EAAgB,UAAW,KAA3B,CAAZ;AACA,wBAAIzD,SAAS,CAAb,EAAgB;AACZ,4BAAIyV,OAAO,KAAKuD,KAAL,CAAW7a,MAAtB;AACA,6BAAK,IAAI4E,IAAI/C,QAAQ,CAArB,EAAwB+C,IAAI0S,IAA5B,EAAkC1S,GAAlC,EAAuC;AACnC,iCAAKiW,KAAL,CAAWjW,IAAI,CAAf,IAAoB,KAAKiW,KAAL,CAAWjW,CAAX,CAApB;AACA,iCAAKkW,OAAL,CAAalW,IAAI,CAAjB,IAAsB,KAAKkW,OAAL,CAAalW,CAAb,CAAtB;AACH;AACD,6BAAKiW,KAAL,CAAW7a,MAAX;AACA,6BAAK8a,OAAL,CAAa9a,MAAb;AACA,4BAAIsF,QAAQ,KAAK4V,SAAjB,EAA4B;AACxB,iCAAKA,SAAL,GAAiBX,aAAjB;AACA,iCAAKY,WAAL,GAAmB,CAAC,CAApB;AACH;AACD,+BAAO,IAAP;AACH;AACD,2BAAO,KAAP;AACH,iBAjBD;AAkBA1G,oBAAIhW,SAAJ,CAAc4c,KAAd,GAAsB,YAAY;AAC9B,yBAAKR,KAAL,CAAW7a,MAAX,GAAoB,CAApB;AACA,yBAAK8a,OAAL,CAAa9a,MAAb,GAAsB,CAAtB;AACA,yBAAKkb,SAAL,GAAiBX,aAAjB;AACA,yBAAKY,WAAL,GAAmB,CAAC,CAApB;AACH,iBALD;AAMA1G,oBAAIhW,SAAJ,CAAc8Q,IAAd,GAAqB,YAAY;AAAE,2BAAO,IAAIkL,WAAJ,CAAgB,KAAKI,KAArB,EAA4B,KAAKC,OAAjC,EAA0CQ,MAA1C,CAAP;AAA2D,iBAA9F;AACA7G,oBAAIhW,SAAJ,CAAcic,MAAd,GAAuB,YAAY;AAAE,2BAAO,IAAID,WAAJ,CAAgB,KAAKI,KAArB,EAA4B,KAAKC,OAAjC,EAA0CvY,QAA1C,CAAP;AAA6D,iBAAlG;AACAkS,oBAAIhW,SAAJ,CAAciW,OAAd,GAAwB,YAAY;AAAE,2BAAO,IAAI+F,WAAJ,CAAgB,KAAKI,KAArB,EAA4B,KAAKC,OAAjC,EAA0CS,QAA1C,CAAP;AAA6D,iBAAnG;AACA9G,oBAAIhW,SAAJ,CAAc,YAAd,IAA8B,YAAY;AAAE,2BAAO,KAAKiW,OAAL,EAAP;AAAwB,iBAApE;AACAD,oBAAIhW,SAAJ,CAAckV,cAAd,IAAgC,YAAY;AAAE,2BAAO,KAAKe,OAAL,EAAP;AAAwB,iBAAtE;AACAD,oBAAIhW,SAAJ,CAAc2c,KAAd,GAAsB,UAAU9V,GAAV,EAAekW,MAAf,EAAuB;AACzC,wBAAI,KAAKN,SAAL,KAAmB5V,GAAvB,EAA4B;AACxB,6BAAK6V,WAAL,GAAmB,KAAKN,KAAL,CAAWtS,OAAX,CAAmB,KAAK2S,SAAL,GAAiB5V,GAApC,CAAnB;AACH;AACD,wBAAI,KAAK6V,WAAL,GAAmB,CAAnB,IAAwBK,MAA5B,EAAoC;AAChC,6BAAKL,WAAL,GAAmB,KAAKN,KAAL,CAAW7a,MAA9B;AACA,6BAAK6a,KAAL,CAAW1Y,IAAX,CAAgBmD,GAAhB;AACA,6BAAKwV,OAAL,CAAa3Y,IAAb,CAAkBK,SAAlB;AACH;AACD,2BAAO,KAAK2Y,WAAZ;AACH,iBAVD;AAWA,uBAAO1G,GAAP;AACH,aA/DO,EAAR;AAgEA,qBAAS6G,MAAT,CAAgBhW,GAAhB,EAAqBmW,CAArB,EAAwB;AACpB,uBAAOnW,GAAP;AACH;AACD,qBAAS/C,QAAT,CAAkBkZ,CAAlB,EAAqB3d,KAArB,EAA4B;AACxB,uBAAOA,KAAP;AACH;AACD,qBAASyd,QAAT,CAAkBjW,GAAlB,EAAuBxH,KAAvB,EAA8B;AAC1B,uBAAO,CAACwH,GAAD,EAAMxH,KAAN,CAAP;AACH;AACJ;AACD;AACA,iBAASgX,iBAAT,GAA6B;AACzB,mBAAQ,YAAY;AAChB,yBAASD,GAAT,GAAe;AACX,yBAAK6G,IAAL,GAAY,IAAIlH,IAAJ,EAAZ;AACH;AACD5W,uBAAOC,cAAP,CAAsBgX,IAAIpW,SAA1B,EAAqC,MAArC,EAA6C;AACzC0V,yBAAK,eAAY;AAAE,+BAAO,KAAKuH,IAAL,CAAUpE,IAAjB;AAAwB,qBADF;AAEzClO,gCAAY,IAF6B;AAGzCD,kCAAc;AAH2B,iBAA7C;AAKA0L,oBAAIpW,SAAJ,CAAcyV,GAAd,GAAoB,UAAUpW,KAAV,EAAiB;AAAE,2BAAO,KAAK4d,IAAL,CAAUxH,GAAV,CAAcpW,KAAd,CAAP;AAA8B,iBAArE;AACA+W,oBAAIpW,SAAJ,CAAc+Z,GAAd,GAAoB,UAAU1a,KAAV,EAAiB;AAAE,2BAAO,KAAK4d,IAAL,CAAU7D,GAAV,CAAc/Z,KAAd,EAAqBA,KAArB,GAA6B,IAApC;AAA2C,iBAAlF;AACA+W,oBAAIpW,SAAJ,CAAc4Y,MAAd,GAAuB,UAAUvZ,KAAV,EAAiB;AAAE,2BAAO,KAAK4d,IAAL,CAAUrE,MAAV,CAAiBvZ,KAAjB,CAAP;AAAiC,iBAA3E;AACA+W,oBAAIpW,SAAJ,CAAc4c,KAAd,GAAsB,YAAY;AAAE,yBAAKK,IAAL,CAAUL,KAAV;AAAoB,iBAAxD;AACAxG,oBAAIpW,SAAJ,CAAc8Q,IAAd,GAAqB,YAAY;AAAE,2BAAO,KAAKmM,IAAL,CAAUnM,IAAV,EAAP;AAA0B,iBAA7D;AACAsF,oBAAIpW,SAAJ,CAAcic,MAAd,GAAuB,YAAY;AAAE,2BAAO,KAAKgB,IAAL,CAAUhB,MAAV,EAAP;AAA4B,iBAAjE;AACA7F,oBAAIpW,SAAJ,CAAciW,OAAd,GAAwB,YAAY;AAAE,2BAAO,KAAKgH,IAAL,CAAUhH,OAAV,EAAP;AAA6B,iBAAnE;AACAG,oBAAIpW,SAAJ,CAAc,YAAd,IAA8B,YAAY;AAAE,2BAAO,KAAK8Q,IAAL,EAAP;AAAqB,iBAAjE;AACAsF,oBAAIpW,SAAJ,CAAckV,cAAd,IAAgC,YAAY;AAAE,2BAAO,KAAKpE,IAAL,EAAP;AAAqB,iBAAnE;AACA,uBAAOsF,GAAP;AACH,aAnBO,EAAR;AAoBH;AACD;AACA,iBAASI,qBAAT,GAAiC;AAC7B,gBAAI0G,YAAY,EAAhB;AACA,gBAAIpM,OAAOyE,QAAQtV,MAAR,EAAX;AACA,gBAAIkd,UAAUC,iBAAd;AACA,mBAAQ,YAAY;AAChB,yBAAS7G,OAAT,GAAmB;AACf,yBAAK8G,IAAL,GAAYD,iBAAZ;AACH;AACD7G,wBAAQvW,SAAR,CAAkByV,GAAlB,GAAwB,UAAUxJ,MAAV,EAAkB;AACtC,wBAAIqR,QAAQC,wBAAwBtR,MAAxB,EAAgC,UAAW,KAA3C,CAAZ;AACA,2BAAOqR,UAAUvZ,SAAV,GAAsBwR,QAAQE,GAAR,CAAY6H,KAAZ,EAAmB,KAAKD,IAAxB,CAAtB,GAAsD,KAA7D;AACH,iBAHD;AAIA9G,wBAAQvW,SAAR,CAAkB0V,GAAlB,GAAwB,UAAUzJ,MAAV,EAAkB;AACtC,wBAAIqR,QAAQC,wBAAwBtR,MAAxB,EAAgC,UAAW,KAA3C,CAAZ;AACA,2BAAOqR,UAAUvZ,SAAV,GAAsBwR,QAAQG,GAAR,CAAY4H,KAAZ,EAAmB,KAAKD,IAAxB,CAAtB,GAAsDtZ,SAA7D;AACH,iBAHD;AAIAwS,wBAAQvW,SAAR,CAAkBoZ,GAAlB,GAAwB,UAAUnN,MAAV,EAAkB5M,KAAlB,EAAyB;AAC7C,wBAAIie,QAAQC,wBAAwBtR,MAAxB,EAAgC,UAAW,IAA3C,CAAZ;AACAqR,0BAAM,KAAKD,IAAX,IAAmBhe,KAAnB;AACA,2BAAO,IAAP;AACH,iBAJD;AAKAkX,wBAAQvW,SAAR,CAAkB4Y,MAAlB,GAA2B,UAAU3M,MAAV,EAAkB;AACzC,wBAAIqR,QAAQC,wBAAwBtR,MAAxB,EAAgC,UAAW,KAA3C,CAAZ;AACA,2BAAOqR,UAAUvZ,SAAV,GAAsB,OAAOuZ,MAAM,KAAKD,IAAX,CAA7B,GAAgD,KAAvD;AACH,iBAHD;AAIA9G,wBAAQvW,SAAR,CAAkB4c,KAAlB,GAA0B,YAAY;AAClC;AACA,yBAAKS,IAAL,GAAYD,iBAAZ;AACH,iBAHD;AAIA,uBAAO7G,OAAP;AACH,aA1BO,EAAR;AA2BA,qBAAS6G,eAAT,GAA2B;AACvB,oBAAIvW,GAAJ;AACA;AACIA,0BAAM,gBAAgB2W,YAAtB;AADJ,yBAEOjI,QAAQE,GAAR,CAAY3E,IAAZ,EAAkBjK,GAAlB,CAFP;AAGAiK,qBAAKjK,GAAL,IAAY,IAAZ;AACA,uBAAOA,GAAP;AACH;AACD,qBAAS0W,uBAAT,CAAiCtR,MAAjC,EAAyChM,MAAzC,EAAiD;AAC7C,oBAAI,CAAC4U,OAAO9P,IAAP,CAAYkH,MAAZ,EAAoBkR,OAApB,CAAL,EAAmC;AAC/B,wBAAI,CAACld,MAAL,EACI,OAAO8D,SAAP;AACJ5E,2BAAOC,cAAP,CAAsB6M,MAAtB,EAA8BkR,OAA9B,EAAuC,EAAE9d,OAAOkW,QAAQtV,MAAR,EAAT,EAAvC;AACH;AACD,uBAAOgM,OAAOkR,OAAP,CAAP;AACH;AACD,qBAASM,eAAT,CAAyBC,MAAzB,EAAiC7E,IAAjC,EAAuC;AACnC,qBAAK,IAAI1S,IAAI,CAAb,EAAgBA,IAAI0S,IAApB,EAA0B,EAAE1S,CAA5B;AACIuX,2BAAOvX,CAAP,IAAY0C,KAAKC,MAAL,KAAgB,IAAhB,GAAuB,CAAnC;AADJ,iBAEA,OAAO4U,MAAP;AACH;AACD,qBAASC,cAAT,CAAwB9E,IAAxB,EAA8B;AAC1B,oBAAI,OAAO+E,UAAP,KAAsB,UAA1B,EAAsC;AAClC,wBAAI,OAAOC,MAAP,KAAkB,WAAtB,EACI,OAAOA,OAAOC,eAAP,CAAuB,IAAIF,UAAJ,CAAe/E,IAAf,CAAvB,CAAP;AACJ,wBAAI,OAAOkF,QAAP,KAAoB,WAAxB,EACI,OAAOA,SAASD,eAAT,CAAyB,IAAIF,UAAJ,CAAe/E,IAAf,CAAzB,CAAP;AACJ,2BAAO4E,gBAAgB,IAAIG,UAAJ,CAAe/E,IAAf,CAAhB,EAAsCA,IAAtC,CAAP;AACH;AACD,uBAAO4E,gBAAgB,IAAI5d,KAAJ,CAAUgZ,IAAV,CAAhB,EAAiCA,IAAjC,CAAP;AACH;AACD,qBAAS2E,UAAT,GAAsB;AAClB,oBAAI5W,OAAO+W,eAAeT,SAAf,CAAX;AACA;AACAtW,qBAAK,CAAL,IAAUA,KAAK,CAAL,IAAU,IAAV,GAAiB,IAA3B;AACAA,qBAAK,CAAL,IAAUA,KAAK,CAAL,IAAU,IAAV,GAAiB,IAA3B;AACA,oBAAIlG,SAAS,EAAb;AACA,qBAAK,IAAIsd,SAAS,CAAlB,EAAqBA,SAASd,SAA9B,EAAyC,EAAEc,MAA3C,EAAmD;AAC/C,wBAAIC,OAAOrX,KAAKoX,MAAL,CAAX;AACA,wBAAIA,WAAW,CAAX,IAAgBA,WAAW,CAA3B,IAAgCA,WAAW,CAA/C,EACItd,UAAU,GAAV;AACJ,wBAAIud,OAAO,EAAX,EACIvd,UAAU,GAAV;AACJA,8BAAUud,KAAKnZ,QAAL,CAAc,EAAd,EAAkBuE,WAAlB,EAAV;AACH;AACD,uBAAO3I,MAAP;AACH;AACJ;AACD;AACA,iBAAS8U,cAAT,CAAwBhP,GAAxB,EAA6B;AACzBA,gBAAI1G,EAAJ,GAASiE,SAAT;AACA,mBAAOyC,IAAI1G,EAAX;AACA,mBAAO0G,GAAP;AACH;AACJ,KAvlCD;AAwlCH,CA3lCD,EA2lCG8N,YAAYA,UAAU,EAAtB,CA3lCH;AA4lCA,mC;;;;;;;;;;;;;;;;;AC3mCA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AAAsC;AAGlC;AAAA,oBACI,qBAAO,IADX;AAFA,wBAA+B,EAA/B;AACQ,+BAA4B,EAA5B;AAGJ,cAAK,cAAL,GAAsB,CAClB,wCADkB,EAElB,wBAFkB,EAGlB,oCAHkB,CAAtB;AAKA,cAAK,WAAL;;AACH;AACD,sDAAW,OAAX,EAA6C;AACzC,aAAK,gBAAL,CAAsB,YAAtB,EAAoC,OAApC;AACH,KAFD;AAGA,gDAAK,OAAL,EAAuC;AACnC,aAAK,gBAAL,CAAsB,MAAtB,EAA8B,OAA9B;AACH,KAFD;AAGA,oDAAS,OAAT,EAA2C;AACvC,aAAK,gBAAL,CAAsB,UAAtB,EAAkC,OAAlC;AACH,KAFD;AAGA,wDAAa,OAAb,EAA+C;AAC3C,aAAK,gBAAL,CAAsB,cAAtB,EAAsC,OAAtC;AACH,KAFD;AAGA,uDAAY,OAAZ,EAA8C;AAC1C,aAAK,gBAAL,CAAsB,aAAtB,EAAqC,OAArC;AACH,KAFD;AAGA,wDAAa,OAAb,EAA+C;AAC3C,aAAK,gBAAL,CAAsB,cAAtB,EAAsC,OAAtC;AACH,KAFD;AAGA,uDAAY,OAAZ,EAA8C;AAC1C,aAAK,gBAAL,CAAsB,aAAtB,EAAqC,OAArC;AACH,KAFD;AAGA,mDAAQ,OAAR,EAA0C;AACtC,aAAK,gBAAL,CAAsB,SAAtB,EAAiC,OAAjC;AACH,KAFD;AAGA;AACI,aAAK,gBAAL,CAAsB,gBAAtB,EAAwC,IAAxC;AACH,KAFD;AAGA,4DAAkB,OAAlB,EAAoD;AAChD,aAAK,gBAAL,CAAsB,kBAAtB,EAA0C,OAA1C;AACH,KAFD;AAGQ,6CAAR;AAAA;AACI,aAAK,cAAL,CAAoB,GAApB,CAAwB,UAAC,MAAD,EAAO;AAC3B,kBAAK,OAAL,CAAa,IAAb,CAAkB,sBAAS,MAAT,CAAlB;AACH,SAFD;AAGH,KAJO;AAKA,kDAAR,UAAyB,UAAzB,EAA8D,OAA9D,EAAgG;;AAC5F,aAAK,OAAL,CAAa,GAAb,CAAiB,UAAC,MAAD,EAAO;AACpB,gBAAI;AACA,uBAAO,OAAO,UAAP,CAAP,KAA8B,UAA9B,IAA4C,OAAO,UAAP,EAAmB,OAAnB,CAA5C;AACH,aAFD,CAEE,OAAM,GAAN,EAAW;AACT;AACA,wBAAQ,KAAR,CAAc,GAAd;AACH;AACJ,SAPD;AAQA,YAAG,CAAC,MAAD,EAAS,QAAT,EAAmB,UAAnB,EAA+B,WAA/B,EAA4C,kBAA5C,EAAgE,SAAhE,EAA2E,OAA3E,CAAmF,UAAnF,KAAkG,CAArG,EAAwG;AACpG,gBAAG,QAAO,YAAO,IAAP,gBAAO,MAAP,GAAO,MAAP,WAAS,YAAT,CAAsB,YAAtB,CAAP,MAA+C,UAAlD,EAA8D;AAC1D,oBAAM,YAAY,YAAO,IAAP,gBAAO,MAAP,GAAO,MAAP,WAAS,YAAT,CAAsB,YAAtB,EAAoC,UAApC,EAAgD;AAC9D,2BAAO,YAAO,IAAP,gBAAO,MAAP,GAAO,MAAP,WAAS,KAD8C;AAE9D,2BAAK,MAAE,YAAO,IAAP,gBAAO,MAAP,GAAO,MAAP,WAAS,YAAX,MAAuB,IAAvB,IAAuB,aAAvB,GAAuB,MAAvB,GAAuB,GAAE;AAFgC,iBAAhD,CAAlB;AAIA,oBAAG,eAAe,SAAlB,EAA6B;AACzB,2BAAO,SAAP,KAAqB,UAArB,IAAmC,WAAnC;AACH;AACJ;AACJ;AACJ,KApBO;AA/CC,uBAAgB,YAD5B,wBAAW,kBAAX,CAC4B,E,mCAAA,GAAhB,gBAAgB,CAAhB;AAoEb;AAAC,CApED,CAAsC,oCAAtC;QAAa,gB,GAAA,gB;;;;;;;;;;;;ACGb;AAAA,kCA8CC;AAAD;AAAC,CA9CD;;;;;;;;;;;;;;;ACVA;;;;;;;;;;;;;;;;;;;;;;AACA;AACA;AAA4C;AAA5C;;AAcC;AAbG,4DAAY,OAAZ,EAA8C,CAAU,CAAxD;AACA,sDAAM,OAAN,EAAwC,CAAU,CAAlD;AACA,8DAAc,OAAd,EAAgD,CAAU,CAA1D;AACA,6DAAa,OAAb,EAA+C,CAAU,CAAzD;AACA,8DAAc,OAAd,EAAgD,CAAU,CAA1D;AACA,6DAAa,OAAb,EAA+C,CAAU,CAAzD;AACA,yDAAS,OAAT,EAA2C,CAAU,CAArD;AACA,0DAAU,OAAV,EAA4C,CAAU,CAAtD;AACA,kEAAkB,OAAlB,EAAoD,CAAU,CAA9D;AAKJ;AAAC,CAdD,CAA4C,oCAA5C;;AAeA,0B;;;;;;;ACjBa;;AACb,SAASxV,QAAT,CAAkBC,CAAlB,EAAqB;AACjB,SAAK,IAAIC,CAAT,IAAcD,CAAd;AAAiB,YAAI,CAACE,QAAQC,cAAR,CAAuBF,CAAvB,CAAL,EAAgCC,QAAQD,CAAR,IAAaD,EAAEC,CAAF,CAAb;AAAjD;AACH;AACDG,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACAP,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT,E;;;;;;;ACVa;;AACbH,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAI6N,yBAAyB5N,mBAAOA,CAAC,CAAR,CAA7B;AACAL,QAAQif,aAAR,GAAwB,UAAU9Q,cAAV,EAA0BC,iBAA1B,EAA6C8Q,OAA7C,EAAsDC,OAAtD,EAA+D;AACnF,QAAIC,sBAAsB,EAA1B;AACA,QAAI,CAACjR,eAAeF,uBAAuB1I,8BAAtC,CAAL,EAA4E;AACxE6I,0BAAkBH,uBAAuB1I,8BAAzC,EAAyE6Z,mBAAzE;AACH,KAFD,MAGK;AACDA,8BAAsBjR,eAAeF,uBAAuB1I,8BAAtC,CAAtB;AACH;AACD6Z,wBAAoBF,OAApB,IAA+BC,OAA/B;AACH,CATD;AAUA;;;;AAIAnf,QAAQqf,yBAAR,GAAoC,UAAUC,UAAV,EAAsB;AACtD,QAAIC,aAAaD,WAAWnR,cAAX,CAA0BF,uBAAuB1I,8BAAjD,KAAoF,EAArG;AACA,QAAIga,UAAJ,EAAgB;AACZrf,eAAO2R,IAAP,CAAY0N,UAAZ,EAAwBxa,GAAxB,CAA4B,UAAUma,OAAV,EAAmB;AAC3CI,uBAAWjX,QAAX,CAAoBiX,WAAWE,QAA/B,EAAyCN,OAAzC,EAAkDK,WAAWL,OAAX,CAAlD;AACH,SAFD;AAGH;AACD,WAAOK,UAAP;AACH,CARD;AASAvf,QAAQyf,wBAAR,GAAmC,UAAUH,UAAV,EAAsBnR,cAAtB,EAAsCC,iBAAtC,EAAyD;AACxF,QAAIkR,UAAJ,EAAgB;AACZA,mBAAWnR,cAAX,GAA4BA,cAA5B;AACAmR,mBAAWlR,iBAAX,GAA+BA,iBAA/B;AACH;AACJ,CALD;AAMApO,QAAQ0f,aAAR,GAAwB,UAAUJ,UAAV,EAAsBJ,OAAtB,EAA+BC,OAA/B,EAAwC;AAC5Dnf,YAAQif,aAAR,CAAsBK,WAAWnR,cAAjC,EAAiDmR,WAAWlR,iBAA5D,EAA+E8Q,OAA/E,EAAwFC,OAAxF;AACH,CAFD,C;;;;;;;;;;;;;;;;AC9BA;;AAUA;AAEA,IAAM,SAA4B,oCAAkB,8BAAiB,MAAnC,CAAlC;AACA,IAAM,SAA4B,oCAAkB,8BAAiB,MAAnC,CAAlC;AACA,IAAM,QAA4B,oCAAkB,8BAAiB,KAAnC,CAAlC;AACA,IAAM,UAA4B,oCAAkB,8BAAiB,OAAnC,CAAlC;AACA,IAAM,SAA4B,oCAAkB,8BAAiB,MAAnC,CAAlC;AACA,IAAM,OAA4B,oCAAkB,8BAAiB,IAAnC,CAAlC;AACA,IAAM,MAA4B,oCAAkB,8BAAiB,GAAnC,CAAlC;AACA,IAAM,OAA4B,oCAAkB,8BAAiB,IAAnC,CAAlC;AACA,IAAM,OAA4B,oCAAkB,8BAAiB,IAAnC,CAAlC;AAEA,IAAM,QAAQ,SAAR,KAAQ,CAAC,KAAD,EAAuC;AACjD,WAAO,sCAAmB,8BAAiB,KAApC,EAA2C,KAA3C,CAAP;AACH,CAFD;AAIA,IAAM,aAAa,SAAb,UAAa,CAAC,UAAD,EAAkB;AACjC,WAAO,sCAAmB,8BAAiB,UAApC,EAAgD,UAAhD,CAAP;AACH,CAFD;AAIA,IAAM,cAAc,SAAd,WAAc,CAAC,SAAD,EAAe;AAC/B,WAAO,sCAAmB,8BAAiB,cAApC,EAAoD,SAApD,CAAP;AACH,CAFD;AAIO,IAAM,gCAAY;AACrB,SAAG,GADkB;AAErB,WAAK,KAFgB;AAGrB,UAAI,IAHiB;AAIrB,aAAO,OAJc;AAKrB,UAAI,IALiB;AAMrB,iBAAW,WANU;AAOrB,UAAI,IAPiB;AAQrB,YAAM,MARe;AASrB,YAAM,MATe;AAUrB,WAAK,KAVgB;AAWrB,gBAAU,UAXW;AAYrB,YAAM;AAZe,CAAlB;AAcA,IAAM,gCAAY,SAAlB;AACP,8B;;;;;;;;;;;;;;;;ACxCA,IAAY,uDAAZ;AAAA,WAAY,gBAAZ,EAA4B;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CAbD,EAAY,mEAAgB,EAAhB,CAAZ;AAsBA,SAAS,qBAAT,CAA+B,IAA/B,EAA6C,QAA7C,EAA+D;AAC3D;AACA,QAAM,UAAU,SAAV,OAAU,CAAS,KAAT,EAAqB,OAArB,EAAoD;AAChE,eAAO,SAAS,KAAT,EAAgB,OAAhB,CAAP;AACH,KAFD;AAGM,YAAS,UAAT,GAAuB,UAAC,KAAD,EAAY,OAAZ,EAA2C;AACpE,YAAG,UAAU,SAAV,IAAuB,UAAU,IAApC,EAA0C;AACtC,gBAAM,SAAS,sBAAf;AACA,uBAAW,OAAO,QAAQ,KAAf,KAAyB,UAApC,IAAkD,QAAQ,KAAR,CAAc,MAAd,CAAlD;AACA,mBAAO,KAAP;AACH;AACD,eAAO,QAAQ,KAAR,EAAe,OAAf,CAAP;AACH,KAP2B,CAOzB,IAPyB,CAOpB,EAAC,SAAO,OAAR,EAPoB,CAAtB;AAQA,YAAS,IAAT,GAAgB,IAAhB;AACA,YAAS,UAAT,CAAoB,IAApB,GAA2B,IAA3B;AACN,WAAO,OAAP;AACH;AACD,SAAS,qBAAT,CAA+B,IAA/B,EAA0C;AACtC,aAAS,OAAT,CAAiB,GAAjB,EAA8B,EAA9B,EAA0C;AACtC,YAAG,MAAM,OAAO,EAAP,KAAc,UAAvB,EAAmC;AAC/B,eAAG,GAAH;AACH,SAFD,MAEO;AACH;AACA,oBAAQ,KAAR,CAAc,GAAd;AACH;AACJ;AACD,aAAS,eAAT,CAAyB,KAAzB,EAAqC,OAArC,EAAmE;AAC/D,YAAI,WAAqB,IAAzB;AACA,YAAM,YAA8B,KAAK,IAAzC;AACA,gBAAO,SAAP;AACI,iBAAK,iBAAiB,MAAtB;AAA8B;AAC1B,+BAAW,mCAAX;AACA;AACH;AACD,iBAAK,iBAAiB,MAAtB;AAA8B;AAC1B,+BAAW,mCAAX;AACA;AACH;AACD,iBAAK,iBAAiB,OAAtB;AAA+B;AAC3B,+BAAW,oCAAX;AACA;AACH;AACD,iBAAK,iBAAiB,IAAtB;AAA4B;AACxB,+BAAW,oCAAX;AACA;AACH;AACD,iBAAK,iBAAiB,KAAtB;AAA6B;AACzB,+BAAW,kCAAX;AACA;AACH;AACD,iBAAK,iBAAiB,MAAtB;AAA8B;AAC1B,+BAAW,mCAAX;AACA;AACH;AACD,iBAAK,iBAAiB,IAAtB;AAA4B;AACxB,+BAAW,iCAAX;AACA;AACH;AACD,iBAAK,iBAAiB,GAAtB;AAA2B;AACvB,+BAAW,gCAAX;AACA;AACH;AACD,iBAAK,iBAAiB,IAAtB;AAA4B;AACxB,+BAAW,iCAAX;AACA;AACH;AApCL;AAsCA,YAAG,OAAO,QAAP,KAAoB,UAAvB,EAAmC;AAC/B,gBAAG,CAAC,SAAS,KAAT,EAAgB,OAAhB,CAAD,IAA6B,UAAU,SAAvC,IAAoD,UAAU,IAAjE,EAAuE;AACnE,oBAAM,QAAQ,OAAO,SAAP,CAAiB,QAAjB,CAA0B,IAA1B,CAA+B,KAA/B,CAAd;AACA,iBAAC,QAAQ,OAAT,IAAoB,QAAQ,yEAAgB,SAAhB,GAAyB,uCAAzB,GAAmC,KAAnC,GAAwC,QAAxC,GAA8C,OAAtD,EAAgE,UAAU,QAAQ,KAAlB,GAA0B,IAA1F,CAApB;AACA,uBAAO,KAAP;AACH;AACJ,SAND,MAMO;AACH,aAAC,QAAQ,OAAT,IAAoB,QAAQ,YAAU,gBAAlB,EAAqC,UAAU,QAAQ,KAAlB,GAA0B,IAA/D,CAApB;AACA,mBAAO,KAAP;AACH;AACD,eAAO,IAAP;AACH;AACD,WAAO,sBAAsB,IAAtB,EAA4B,gBAAgB,IAAhB,CAAqB,EAAC,MAAI,IAAL,EAArB,CAA5B,CAAP;AACH;AAEM,IAAM,gDAA6B,qBAAnC,C;;;;;;;;;;;;ACjHP,IAAM,cAAc,SAAd,WAAc,CAAC,KAAD,EAAW;AAC3B,WAAO,OAAO,SAAP,CAAiB,QAAjB,CAA0B,IAA1B,CAA+B,KAA/B,CAAP;AACH,CAFD;AAGO,IAAM,sCAAe,SAAf,YAAe;AACxB,WAAO,IAAP;AACH,CAFM;AAIA,IAAM,4CAAkB,SAAlB,eAAkB,CAAC,KAAD,EAAa,OAAb,EAAyB;AACpD,WAAO,OAAO,KAAP,KAAiB,QAAxB;AACH,CAFM;AAIA,IAAM,0CAAiB,SAAjB,cAAiB,CAAC,KAAD,EAAW;AACrC,WAAO,YAAY,KAAZ,MAAuB,gBAA9B;AACH,CAFM;AAIA,IAAM,4CAAkB,SAAlB,eAAkB,CAAC,KAAD,EAAW;AACtC,WAAO,YAAY,KAAZ,MAAuB,iBAA9B;AACH,CAFM;AAIA,IAAM,8CAAmB,SAAnB,gBAAmB,CAAC,KAAD,EAAW;AACvC,WAAO,YAAY,KAAZ,MAAuB,kBAA9B;AACH,CAFM;AAIA,IAAM,4CAAkB,SAAlB,eAAkB,CAAC,KAAD,EAAW;AACtC,WAAO,YAAY,KAAZ,MAAuB,iBAA9B;AACH,CAFM;AAIA,IAAM,wCAAgB,SAAhB,aAAgB,CAAC,KAAD,EAAW;AACpC,WAAO,YAAY,KAAZ,MAAuB,mBAA9B;AACH,CAFM;AAIA,IAAM,wCAAgB,SAAhB,aAAgB,CAAC,KAAD,EAAW;AACpC,WAAO,YAAY,KAAZ,MAAuB,eAA9B;AACH,CAFM;AAIA,IAAM,0CAAiB,SAAjB,cAAiB,CAAC,KAAD,EAAa,YAAb,EAAuC,OAAvC,EAAqE;AAC/F,QAAG,YAAY,YAAZ,MAA8B,gBAAjC,EAAmD;AAC/C;AACA,aAAI,IAAI,SAAO,CAAf,EAAiB,SAAO,aAAa,MAArC,EAA4C,QAA5C,EAAsD;AAClD,gBAAM,aAAa,aAAa,MAAb,CAAnB;AACA,gBAAG,WAAW,KAAX,EAAkB,OAAlB,CAAH,EAA+B;AAC3B,uBAAO,IAAP;AACH;AACJ;AACJ;AACD,WAAO,KAAP;AACH,CAXM;AAaA,IAAM,oDAAsB,SAAtB,mBAAsB,CAAC,KAAD,EAAa,eAAb,EAAqC,OAArC,EAAmE;AAClG,WAAO,mBAAmB,gBAAgB,MAAhB,GAAuB,CAA1C,GAA8C,gBAAgB,OAAhB,CAAwB,KAAxB,KAAkC,CAAhF,GAAoF,KAA3F;AACH,CAFM;AAIA,IAAM,4DAA0B,SAA1B,uBAA0B,CAAC,KAAD,EAAa,YAAb,EAA8B;AACjE,QAAG,YAAY,YAAZ,MAA8B,iBAAjC,EAAoD;AAChD,aAAI,IAAM,GAAV,IAAiB,YAAjB,EAA+B;AAC3B,gBAAG,aAAa,GAAb,MAAsB,KAAzB,EAAgC;AAC5B,uBAAO,IAAP;AACH;AACJ;AACJ;AACD,WAAO,KAAP;AACH,CATM,C;;;;;;;;;;;;;ACpDP;;AACA;;AAEA,IAAM,KAAK,IAAI,gBAAJ,EAAX;AAEA,GAAG,OAAH,CAAW;AACP,QAAM,aAAa;AACf,eAAO,4BADQ;AAEf,iBAAS,UAFM;AAGf,eAAO;AACH,mBAAO,CADJ;AAEH,sBAAU,EAFP;AAGH,qBAAS;AAHN,SAHQ;AAQf,iBAAS,iBAAS,GAAT,EAAwB;AAC7B,gBAAI,YAAJ,GAAmB,IAAnB;AACA,iBAAK,QAAL,CAAc;AACV,uBAAO,KAAK,KAAL,CAAW,KAAX,GAAmB;AADhB,aAAd;AAGH,SAbc;AAcf,iBAAS,iBAAS,GAAT,EAAY;AACjB,oBAAQ,GAAR,CAAY,aAAZ,EAA2B,GAA3B;AACH,SAhBc;AAiBf,wBAAgB;AACZ,gBAAM,YAAY,CAAC,KAAK,KAAL,CAAW,OAA9B;AACA,iBAAK,QAAL,CAAc;AACV,yBAAS;AADC,aAAd;AAGH,SAtBc;AAuBf,iBAAS,iBAAS,GAAT,EAAY;AACjB,oBAAQ,GAAR,CAAY,GAAZ;AACH,SAzBc;AA0Bf,uBAAe;AACX,gBAAM,UAAU,KAAK,KAAL,CAAW,KAAK,SAAL,CAAe,WAAW,KAAX,CAAiB,QAAhC,CAAX,CAAhB;AACA,oBAAQ,IAAR,CAAa;AACT,uBAAO,SAAS,QAAQ,MADf;AAET,uBAAO,QAAQ;AAFN,aAAb;AAIA,iBAAK,QAAL,CAAc;AACV,0BAAU;AADA,aAAd;AAGH,SAnCc;AAoCf;AACA,gBAAO;AACH,mBAAO,2oFAAP;AACH;AAvCc,KAAnB;AAyCA,YAAQ,IAAR,CAAa,SAAb;AACA,YAAQ,OAAR,CAAgB,SAAhB,EAA2B,cAA3B;AACA,OAAG,MAAH,CAAU,SAAS,cAAT,CAAwB,KAAxB,CAAV,EAA0C,UAA1C;AACA,YAAQ,OAAR,CAAgB,SAAhB;AACH,CA9CD,E;;;;;;;;;;;;;;;;ACNA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAXA;;AAaA;AAA6B;AAiBzB;AAAA,oBACI,qBAAO,IADX;AAEI,cAAK,QAAL,GAAgB,IAAI,sBAAJ,CAAe,MAAK,MAApB,CAAhB;AACA,cAAK,SAAL,GAAiB,sBAAsB,MAAK,IAAL,EAAvC;;AACH;AAED,0CAAQ,EAAR,EAAmB;AACf,aAAK,CAAL,CAAO,QAAP,CAAgB,MAAhB,EAAwB,MAAxB,EAAgC,EAAhC;AACH,KAFD;AAGA,yCAAO,MAAP,EAA2B,OAA3B,EAAwC,OAAxC,EAAoE;AAApE;AACI;AACA,YAAM,iBAAiB,WAAW,EAAlC;AACA,YAAM,iBAAiB,CAAC,UAAD,EAAa,UAAb,EAAyB,OAAzB,EAAiC,SAAjC,EAA2C,MAA3C,EAAmD,SAAnD,EAA6D,SAA7D,EAAuE,UAAvE,EAAmF,QAAnF,EACnB,QADmB,EACT,iBADS,EACU,qBADV,EACiC,sBADjC,EACwD,OADxD,EAEnB,SAFmB,EAER,SAFQ,EAEG,SAFH,EAEc,UAFd,CAAvB;AAGA,YAAM,eAAe,eAAe,KAAf,IAAwB,EAA7C;AACA,YAAG,OAAO,eAAe,OAAtB,KAAkC,UAAlC,IAAgD,OAAO,eAAe,MAAtB,KAAiC,UAApF,EAAgG;AAC5F,2BAAe,OAAf,GAAyB;AACrB,uBAAO,UAAU,QAAQ,QAAlB,GAA6B,iEAApC;AACH,aAFD;AAGH;AACD,uBAAe,QAAf,GAA0B,UAA1B;AACA,aAAK,MAAL,CAAY,cAAZ,EAA4B,qBAAU,SAAtC,EAAiD,IAAjD,EAAuD,cAAvD;AACA,aAAK,sBAAL,CAA4B,cAA5B,EAA4C,OAA5C,EAAqD,YAArD;AACA,YAAM,YAAY,IAAI,wBAAJ,CAAgB;AAC9B,sBAAU,EADoB;AAE9B,uBAAW,cAFmB;AAG9B,8BAAkB,IAHY;AAI9B,uBAAW,MAJmB;AAK9B,mBAAO,KAAK,QALkB;AAM9B,uBAAW,KAAK,SANc;AAO9B,sBAAU,UAPoB;AAQ9B,kBAAM,CAAC,CAAD,CARwB;AAS9B,2BAAe,OATe;AAU9B,oBAAQ,KAAK;AAViB,SAAhB,CAAlB;AAYA,kBAAU,MAAV,CAAiB;AACb,yBAAa;AADA,SAAjB,EAEG,IAFH,CAEQ;AACJ,kBAAK,UAAL,CAAgB,cAAhB;AACH,SAJD,EAIG,KAJH,CAIS,UAAC,GAAD,EAAI;AACT,mBAAO,eAAe,QAAf,CAAP,KAAoC,UAApC,IAAkD,eAAe,QAAf,EAAyB,GAAzB,CAAlD;AACH,SAND;AAOA,eAAO,SAAP;AACH,KAnCD;AAoCA;AACI,aAAK,QAAL,CAAc,OAAd;AACH,KAFD;AA3DA,gBADC,2BAAU,kBAAV,CACD,E,0BAAU,kB,CAAV,G,iBAAA,E,GAAA,E,KAAmB,CAAnB;AAKA,gBAJC,2BAAU,wBAAV,EAAuB,aAAvB,EAAsC;AACnC,oBAAY,IAAI,uBAAJ,EADuB;AAEnC,mBAAW,IAAI,0BAAJ;AAFwB,KAAtC,CAID,E,0BAAgB,wB,CAAhB,G,iBAAA,E,QAAA,E,KAA4B,CAA5B;AAEA,gBADC,2BAAU,kCAAV,CACD,E,0BAAoB,kC,CAApB,G,iBAAA,E,YAAA,E,KAAqC,CAArC;AAuDJ;AAAC,CAjED,CAA6B,mBAA7B;QAAa,O,GAAA,O;;;;;;;ACbA;;AACbjf,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIuf,iBAAiBtf,mBAAOA,CAAC,EAAR,CAArB;AACA,IAAIiF,SAAS,aAAe,YAAY;AACpC,aAASA,MAAT,GAAkB,CACjB;AACDA,WAAOvE,SAAP,CAAiB4E,OAAjB,GAA2B,UAAUC,GAAV,EAAe;AACtC,eAAO1F,OAAOa,SAAP,CAAiB8E,QAAjB,CAA0BC,IAA1B,CAA+BF,GAA/B,CAAP;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBgF,QAAjB,GAA4B,UAAUH,GAAV,EAAe;AACvC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,iBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBiF,QAAjB,GAA4B,UAAUJ,GAAV,EAAe;AACvC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,iBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBkF,OAAjB,GAA2B,UAAUL,GAAV,EAAe;AACtC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,gBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBmF,SAAjB,GAA6B,UAAUN,GAAV,EAAe;AACxC,eAAO,CAACO,MAAMP,GAAN,CAAR;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBqF,KAAjB,GAAyB,UAAUR,GAAV,EAAe;AACpC,eAAO,6CAA4CjE,IAA5C,CAAiD,KAAKgE,OAAL,CAAaC,GAAb,CAAjD;AAAP;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBsF,QAAjB,GAA4B,UAAUT,GAAV,EAAe;AACvC,eAAO,uCAAsCjE,IAAtC,CAA2C,KAAKgE,OAAL,CAAaC,GAAb,CAA3C;AAAP;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBuF,UAAjB,GAA8B,UAAUV,GAAV,EAAe;AACzC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,mBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBwF,UAAjB,GAA8B,UAAUX,GAAV,EAAe;AACzC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,mBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiByF,QAAjB,GAA4B,UAAUZ,GAAV,EAAe;AACvC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,iBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBmE,OAAjB,GAA2B,UAAUU,GAAV,EAAe;AACtC,eAAOA,QAAQd,SAAR,IAAqBc,QAAQ,IAA7B,IAAsC,KAAKG,QAAL,CAAcH,GAAd,KAAsBA,IAAItD,MAAJ,IAAc,CAAjF;AACH,KAFD;AAGA;AACAgD,WAAOvE,SAAP,CAAiB4F,OAAjB,GAA2B,UAAUC,CAAV,EAAanG,CAAb,EAAgB;AACvC,YAAImG,MAAMnG,CAAV,EAAa;AACT,mBAAOmG,MAAM,CAAN,IAAW,IAAIA,CAAJ,KAAU,IAAInG,CAAhC;AACH;AACD,YAAImG,KAAK,IAAL,IAAanG,KAAK,IAAtB,EAA4B;AACxB,mBAAOmG,MAAMnG,CAAb;AACH;AACD,YAAIoG,aAAa,KAAKlB,OAAL,CAAaiB,CAAb,CAAjB;AAAA,YAAkCE,aAAa,KAAKnB,OAAL,CAAalF,CAAb,CAA/C;AACA,YAAIoG,eAAeC,UAAnB,EAA+B;AAC3B,mBAAO,KAAP;AACH,SAFD,MAGK;AACD,oBAAQD,UAAR;AACI,qBAAK,iBAAL;AACA,qBAAK,iBAAL;AACI,2BAAO,KAAKD,CAAL,KAAW,KAAKnG,CAAvB;AACJ,qBAAK,iBAAL;AACI,wBAAI,CAACmG,CAAD,KAAO,CAACA,CAAZ,EAAe;AACX,+BAAO,CAACnG,CAAD,KAAO,CAACA,CAAf;AACH;AACD,2BAAO,CAACmG,CAAD,KAAO,CAAP,GAAW,IAAI,CAACA,CAAL,KAAW,IAAInG,CAA1B,GAA8B,CAACmG,CAAD,KAAO,CAACnG,CAA7C;AACJ,qBAAK,eAAL;AACA,qBAAK,kBAAL;AACI,2BAAO,CAACmG,CAAD,KAAO,CAACnG,CAAf;AAXR;AAaA,gBAAIoG,eAAe,iBAAnB,EAAsC;AAClC,oBAAIE,SAAS7G,OAAO8G,mBAAP,CAA2BJ,CAA3B,CAAb;AAAA,oBAA4CK,SAAS/G,OAAO8G,mBAAP,CAA2BvG,CAA3B,CAArD;AACA,oBAAIsG,OAAOzE,MAAP,KAAkB2E,OAAO3E,MAA7B,EAAqC;AACjC,2BAAO,KAAP;AACH,iBAFD,MAGK;AACD,yBAAK,IAAI4E,IAAI,CAAb,EAAgBA,IAAIH,OAAOzE,MAA3B,EAAmC4E,GAAnC,EAAwC;AACpC,4BAAIC,WAAWJ,OAAOG,CAAP,CAAf;AACA,4BAAIN,EAAEO,QAAF,MAAgB1G,EAAE0G,QAAF,CAApB,EAAiC;AAC7B,mCAAO,KAAP;AACH;AACJ;AACD,2BAAO,IAAP;AACH;AACJ;AACD,gBAAIN,eAAe,gBAAnB,EAAqC;AACjC,uBAAOD,EAAEf,QAAF,OAAiBpF,EAAEoF,QAAF,EAAxB;AACH;AACJ;AACJ,KA5CD;AA6CAP,WAAOvE,SAAP,CAAiBqG,SAAjB,GAA6B,UAAUC,EAAV,EAAcC,OAAd,EAAuBC,GAAvB,EAA4B;AACrD,YAAI,OAAOF,EAAP,KAAc,UAAlB,EAA8B;AAC1B;AACA,gBAAIG,MAAMF,WAAW,GAArB;AACA,gBAAIG,QAAQ,SAARA,KAAQ,GAAY;AACpB,oBAAIF,GAAJ,EAAS;AACLF,uBAAGvB,IAAH,CAAQyB,GAAR;AACH,iBAFD,MAGK;AACDF;AACH;AACD;AACH,aARD;AASAK,uBAAWD,KAAX,EAAkBD,GAAlB;AACH;AACJ,KAfD;AAgBAlC,WAAOvE,SAAP,CAAiB8D,QAAjB,GAA4B,UAAU8C,IAAV,EAAgBC,GAAhB,EAAqBC,YAArB,EAAmC;AAC3D,eAAO8X,eAAeja,YAAf,CAA4Bb,QAA5B,CAAqC8C,IAArC,EAA2CC,GAA3C,EAAgDC,YAAhD,CAAP;AACH,KAFD;AAGA;;;;;;;AAOAvC,WAAOvE,SAAP,CAAiBsH,QAAjB,GAA4B,UAAUV,IAAV,EAAgBC,GAAhB,EAAqBxH,KAArB,EAA4BiH,EAA5B,EAAgC;AACxD,eAAOsY,eAAeja,YAAf,CAA4B2C,QAA5B,CAAqCV,IAArC,EAA2CC,GAA3C,EAAgDxH,KAAhD,EAAuDiH,EAAvD,CAAP;AACH,KAFD;AAGA;;;AAGA/B,WAAOvE,SAAP,CAAiB2H,WAAjB,GAA+B,YAAY;AACvC,YAAIC,MAAM,IAAIC,IAAJ,EAAV;AACA,YAAIC,OAAOF,IAAIG,WAAJ,GAAkBjD,QAAlB,EAAX;AAAA,YAAyCkD,QAAQJ,IAAIK,QAAJ,KAAiB,CAAjB,GAAqB,EAArB,GAA0B,MAAM,CAACL,IAAIK,QAAJ,KAAiB,CAAlB,EAAqBnD,QAArB,EAAhC,GAAkE,CAAC8C,IAAIK,QAAJ,KAAiB,CAAlB,EAAqBnD,QAArB,EAAnH;AAAA,YAAoJoD,OAAON,IAAIO,OAAJ,KAAgB,EAAhB,GAAqB,MAAMP,IAAIO,OAAJ,GAAcrD,QAAd,EAA3B,GAAsD8C,IAAIO,OAAJ,GAAcrD,QAAd,EAAjN;AAAA,YAA2OsD,OAAOR,IAAIS,QAAJ,KAAiB,EAAjB,GAAsB,CAAC,GAAD,EAAMT,IAAIS,QAAJ,EAAN,EAAsB5G,IAAtB,CAA2B,EAA3B,CAAtB,GAAuDmG,IAAIS,QAAJ,GAAevD,QAAf,EAAzS;AAAA,YAAoUwD,SAASV,IAAIW,UAAJ,KAAmB,EAAnB,GAAwB,CAAC,GAAD,EAAMX,IAAIW,UAAJ,EAAN,EAAwB9G,IAAxB,CAA6B,EAA7B,CAAxB,GAA2DmG,IAAIW,UAAJ,GAAiBzD,QAAjB,EAAxY;AAAA,YAAqa0D,SAASZ,IAAIa,UAAJ,KAAmB,EAAnB,GAAwB,CAAC,GAAD,EAAMb,IAAIa,UAAJ,EAAN,EAAwBhH,IAAxB,CAA6B,EAA7B,CAAxB,GAA2DmG,IAAIa,UAAJ,GAAiB3D,QAAjB,EAAze;AAAA,YAAsgB4D,WAAWd,IAAIe,eAAJ,EAAjhB;AACA,YAAIC,YAAYjF,SAAS,CAACkF,KAAKC,MAAL,KAAgB,IAAhB,GAAuB,IAAxB,EAA8BhE,QAA9B,EAAT,EAAmD,EAAnD,CAAhB;AACA,eAAO,CAACgD,IAAD,EAAOE,KAAP,EAAcE,IAAd,EAAoBE,IAApB,EAA0BE,MAA1B,EAAkCE,MAAlC,EAA0CE,QAA1C,EAAoDE,SAApD,EAA+DnH,IAA/D,CAAoE,EAApE,CAAP;AACH,KALD;AAMA;;;;;AAKA8C,WAAOvE,SAAP,CAAiB+I,SAAjB,GAA6B,UAAUlE,GAAV,EAAemE,cAAf,EAA+B;AACxD,YAAI,CAAC,KAAK7E,OAAL,CAAaU,GAAb,CAAL,EAAwB;AACpB,gBAAIoE,OAAOpE,IAAI5D,OAAJ,CAAY,aAAZ,EAA2B,EAA3B,CAAX;AACA,gBAAIiI,OAAOD,KAAKzH,KAAL,CAAW,GAAX,CAAX;AACA,iBAAK,IAAI2E,IAAI,CAAb,EAAgBA,IAAI+C,KAAK3H,MAAzB,EAAiC4E,GAAjC,EAAsC;AAClC,oBAAKA,MAAM,CAAN,IAAW6C,cAAZ,IAA+B7C,IAAI,CAAvC,EAA0C;AACtC+C,yBAAK/C,CAAL,IAAU+C,KAAK/C,CAAL,EAAQ7E,MAAR,CAAe,CAAf,EAAkB,CAAlB,EAAqB6H,WAArB,KAAqCD,KAAK/C,CAAL,EAAQ7E,MAAR,CAAe,CAAf,CAA/C;AACH;AACJ;AACD,mBAAO4H,KAAKzH,IAAL,CAAU,EAAV,CAAP;AACH,SATD,MAUK;AACD,mBAAOoD,GAAP;AACH;AACJ,KAdD;AAeAN,WAAOvE,SAAP,CAAiBoJ,SAAjB,GAA6B,UAAUvE,GAAV,EAAe;AACxC,YAAI,CAAC,KAAKV,OAAL,CAAaU,GAAb,CAAL,EAAwB;AACpB,gBAAIoE,OAAOpE,IAAIvD,MAAJ,CAAW,CAAX,EAAc,CAAd,EAAiB+H,WAAjB,KAAiCxE,IAAIvD,MAAJ,CAAW,CAAX,CAA5C;AACA,gBAAIgI,OAAOL,KAAKhI,OAAL,CAAa,UAAb,EAAyB,UAAUsI,EAAV,EAAc;AAC9C,uBAAO,MAAMA,GAAGF,WAAH,EAAb;AACH,aAFU,CAAX;AAGA,mBAAOC,IAAP;AACH;AACD,eAAOzE,GAAP;AACH,KATD;AAUAN,WAAOvE,SAAP,CAAiBwJ,MAAjB,GAA0B,UAAUC,IAAV,EAAgBC,GAAhB,EAAqBC,WAArB,EAAkCC,UAAlC,EAA8C;AACpE,YAAI,CAACD,WAAL,EAAkB;AACd,gBAAI,KAAK1E,QAAL,CAAcwE,IAAd,KAAuB,KAAKxE,QAAL,CAAcyE,GAAd,CAA3B,EAA+C;AAC3C,oBAAIvK,OAAO0K,MAAX,EAAmB;AACf1K,2BAAO0K,MAAP,CAAcJ,IAAd,EAAoBC,GAApB;AACH,iBAFD,MAGK;AACD;AACA,yBAAK,IAAI7C,GAAT,IAAgB6C,GAAhB,EAAqB;AACjB,4BAAI,CAACE,UAAD,IAAeA,WAAWE,OAAX,CAAmBjD,GAAnB,IAA0B,CAA7C,EAAgD;AAC5C4C,iCAAK5C,GAAL,IAAY6C,IAAI7C,GAAJ,CAAZ;AACH;AACJ;AACJ;AACJ;AACJ,SAdD,MAeK;AACD,gBAAI,KAAK5B,QAAL,CAAcwE,IAAd,KAAuB,KAAKxE,QAAL,CAAcyE,GAAd,CAA3B,EAA+C;AAC3C;AACA,qBAAK,IAAI7C,GAAT,IAAgB6C,GAAhB,EAAqB;AACjB,wBAAI,CAACE,UAAD,IAAeA,WAAWE,OAAX,CAAmBjD,GAAnB,IAA0B,CAA7C,EAAgD;AAC5C;AACA,4BAAI4C,KAAKvK,cAAL,CAAoB2H,GAApB,CAAJ,EAA8B;AAC1B,mCAAO4C,KAAK5C,GAAL,CAAP;AACH;AACD,6BAAKkD,sBAAL,CAA4BN,IAA5B,EAAkC5C,GAAlC,EAAuC6C,IAAI7C,GAAJ,CAAvC;AACH;AACJ;AACJ;AACJ;AACD,eAAO4C,IAAP;AACH,KA/BD;AAgCAlF,WAAOvE,SAAP,CAAiBgK,KAAjB,GAAyB,UAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AAC3C,YAAIxJ,SAAS,EAAb;AACA,YAAIuJ,QAAQ,CAACC,IAAb,EAAmB;AACfxJ,qBAASuJ,IAAT;AACH,SAFD,MAGK,IAAI,CAACA,IAAD,IAASC,IAAb,EAAmB;AACpBxJ,qBAASwJ,IAAT;AACH,SAFI,MAGA,IAAID,QAAQC,IAAZ,EAAkB;AACnB,gBAAI,KAAKjF,QAAL,CAAcgF,IAAd,CAAJ,EAAyB;AACrB;AACA,qBAAK,IAAIpD,GAAT,IAAgBoD,IAAhB,EAAsB;AAClBvJ,2BAAOmG,GAAP,IAAcoD,KAAKpD,GAAL,CAAd;AACH;AACJ;AACD,gBAAI,KAAK5B,QAAL,CAAciF,IAAd,CAAJ,EAAyB;AACrB,qBAAK,IAAIC,IAAT,IAAiBD,IAAjB,EAAuB;AACnB,wBAAI,CAACxJ,OAAOxB,cAAP,CAAsBiL,IAAtB,CAAL,EAAkC;AAC9BzJ,+BAAOyJ,IAAP,IAAeD,KAAKC,IAAL,CAAf;AACH;AACJ;AACJ;AACJ;AACD,eAAOzJ,MAAP;AACH,KAxBD;AAyBA;;;;AAIA6D,WAAOvE,SAAP,CAAiB6E,GAAjB,GAAuB,UAAU+B,IAAV,EAAgB;AACnC,YAAI,KAAK5B,QAAL,CAAc4B,IAAd,CAAJ,EAAyB;AACrB,gBAAI,CAACxB,MAAMwB,IAAN,CAAL,EAAkB;AACd,uBAAQA,KAAKkD,OAAL,CAAa,GAAb,KAAqB,CAArB,GAAyBlG,WAAWgD,IAAX,CAAzB,GAA4CjD,SAASiD,IAAT,EAAe,EAAf,CAApD;AACH,aAFD,MAGK;AACD,uBAAQ,kBAAiBhG,IAAjB,CAAsBgG,IAAtB,IAA8BwD,QAAQxD,IAAR,CAA9B,GAA8CA;AAAtD;AACH;AACJ,SAPD,MAQK;AACD,mBAAOA,IAAP;AACH;AACJ,KAZD;AAaArC,WAAOvE,SAAP,CAAiB+J,sBAAjB,GAA0C,UAAUvD,GAAV,EAAe6D,WAAf,EAA4BC,aAA5B,EAA2C;AACjF,SAAC,UAAUC,QAAV,EAAoBC,gBAApB,EAAsCC,kBAAtC,EAA0D;AACvDF,wBAAYpL,OAAOC,cAAP,CAAsBmL,QAAtB,EAAgCC,gBAAhC,EAAkD;AAC1DE,8BAAc,IAD4C;AAE1DC,4BAAY,IAF8C;AAG1DtL,uBAAOoL,kBAHmD;AAI1DG,0BAAU;AAJgD,aAAlD,CAAZ;AAMH,SAPD,EAOGpE,GAPH,EAOQ6D,WAPR,EAOqBC,aAPrB;AAQH,KATD;AAUA/F,WAAOvE,SAAP,CAAiB6K,gBAAjB,GAAoC,UAAUC,OAAV,EAAmB;AACnD,YAAIA,QAAQC,iBAAZ,EAA+B;AAC3B;AACAD,oBAAQC,iBAAR;AACH,SAHD,MAIK,IAAID,QAAQ,sBAAR,CAAJ,EAAqC;AACtCA,oBAAQ,sBAAR;AACH,SAFI,MAGA,IAAIA,QAAQ,yBAAR,CAAJ,EAAwC;AACzCA,oBAAQ,yBAAR;AACH,SAFI,MAGA,IAAIA,QAAQ,qBAAR,CAAJ,EAAoC;AACrCA,oBAAQ,qBAAR;AACH;AACJ,KAdD;AAeAvG,WAAOvE,SAAP,CAAiBgL,cAAjB,GAAkC,YAAY;AAC1C,YAAIC,SAASD,cAAb,EAA6B;AACzB;AACAC,qBAASD,cAAT;AACH,SAHD,MAIK,IAAIC,SAAS,qBAAT,CAAJ,EAAqC;AACtCA,qBAAS,qBAAT;AACH,SAFI,MAGA,IAAIA,SAAS,sBAAT,CAAJ,EAAsC;AACvCA,qBAAS,sBAAT;AACH;AACJ,KAXD;AAYA1G,WAAOvE,SAAP,CAAiBkL,YAAjB,GAAgC,YAAY;AACxC,eAAOD,SAAS,cAAT,KAA4BA,SAAS,iBAAT,CAA5B,IAA2DA,SAAS,oBAAT,CAAlE;AACH,KAFD;AAGA1G,WAAOvE,SAAP,CAAiBiD,IAAjB,GAAwB,YAAY;AAChC,YAAIkI,KAAK,SAALA,EAAK,GAAY;AACjB;AACA,mBAAO,CAAE,CAAC,IAAItC,KAAKC,MAAL,EAAL,IAAsB,OAAvB,GAAkC,CAAnC,EAAsChE,QAAtC,CAA+C,EAA/C,EAAmDxD,MAAnD,CAA0D,CAA1D,CAAP;AACH,SAHD;AAIA,eAAQ6J,OAAOA,IAAP,GAAc,GAAd,GAAoBA,IAApB,GAA2B,GAA3B,GAAiCA,IAAjC,GAAwC,GAAxC,GAA8CA,IAA9C,GAAqD,GAArD,GAA2DA,IAA3D,GAAkEA,IAA1E;AACH,KAND;AAOA5G,WAAOvE,SAAP,CAAiBoL,MAAjB,GAA0B,YAAY;AAClC,eAAOwT,eAAeja,YAAf,CAA4ByG,MAA5B,EAAP;AACH,KAFD;AAGA7G,WAAOvE,SAAP,CAAiB2L,QAAjB,GAA4B,UAAU9E,GAAV,EAAe;AACvC,eAAO+X,eAAeja,YAAf,CAA4BgH,QAA5B,CAAqC9E,GAArC,CAAP;AACH,KAFD;AAGA,WAAOtC,MAAP;AACH,CAtR2B,EAA5B;AAuRAtF,QAAQsF,MAAR,GAAiBA,MAAjB;AACA,kC;;;;;;;AC3Ra;;AACbpF,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIwf,SAAS,aAAe,YAAY;AACpC,aAASA,MAAT,GAAkB;AACd,aAAKC,qBAAL,GAA6B,EAA7B;AACA;AACA,YAAI/c,QAAQ,IAAZ;AACA;AACA,aAAKgd,qBAAL,GAA6BC,OAAOD,qBAAP,IACzBC,OAAO,6BAAP,CADyB,IAEzBA,OAAO,0BAAP,CAFyB,IAGzB,UAAUC,QAAV,EAAoB;AAChB,gBAAIC,WAAW,IAAIrX,IAAJ,GAAWsX,OAAX,EAAf;AACA,gBAAIC,aAAavW,KAAK4H,GAAL,CAAS,CAAT,EAAY,QAAQyO,WAAWnd,MAAMsd,QAAzB,CAAZ,CAAjB;AACA,gBAAIpN,KAAK+M,OAAOrY,UAAP,CAAkB,YAAY;AACnCsY,yBAASC,WAAWE,UAApB;AACH,aAFQ,EAENA,UAFM,CAAT;AAGArd,kBAAMsd,QAAN,GAAiBH,WAAWE,UAA5B;AACA,mBAAOnN,EAAP;AACH,SAXL;AAYA,aAAKqN,oBAAL,GAA4BN,OAAOM,oBAAP,IACxBN,OAAO,4BAAP,CADwB,IAExBA,OAAO,yBAAP,CAFwB,IAGxB,UAAU/M,EAAV,EAAc;AACVsN,yBAAatN,EAAb;AACH,SALL;AAMA;AACH;AACD4M,WAAO7e,SAAP,CAAiBwf,cAAjB,GAAkC,UAAUC,QAAV,EAAoBC,SAApB,EAA+B;AAC7D,YAAI9N,OAAO,IAAX;AACA;AACA,eAAQ,UAAUtL,EAAV,EAAcE,GAAd,EAAmB;AACvB,gBAAImZ,OAAJ;AACA;AACA,gBAAIC,YAAY,SAAZA,SAAY,GAAY;AACxB,oBAAIvc,SAASuO,KAAKkN,qBAAL,CAA2BhV,OAA3B,CAAmC6V,OAAnC,CAAb;AACA,oBAAItc,SAAS,CAAb,EAAgB;AACZiD,uBAAGjG,KAAH,CAASmG,GAAT,EAAclG,SAAd;AACA,2BAAOsR,KAAKmN,qBAAL,CAA2Bha,IAA3B,CAAgCia,MAAhC,EAAwCY,SAAxC,CAAP;AACH,iBAHD,MAIK;AACDhO,yBAAKkN,qBAAL,CAA2Be,MAA3B,CAAkCxc,MAAlC,EAA0C,CAA1C;AACH;AACDA,yBAAS,IAAT;AACH,aAVD;AAWAsc,sBAAU/N,KAAKmN,qBAAL,CAA2Bha,IAA3B,CAAgCia,MAAhC,EAAwCY,SAAxC,CAAV;AACA,mBAAOD,OAAP;AACH,SAhBM,CAgBJF,QAhBI,EAgBMC,SAhBN,CAAP;AAiBH,KApBD;AAqBAb,WAAO7e,SAAP,CAAiB8f,aAAjB,GAAiC,UAAUH,OAAV,EAAmB;AAChD,aAAKL,oBAAL,CAA0Bva,IAA1B,CAA+Bia,MAA/B,EAAuCW,OAAvC;AACA,aAAKb,qBAAL,CAA2Bpb,IAA3B,CAAgCic,OAAhC;AACH,KAHD;AAIA,WAAOd,MAAP;AACH,CApD2B,EAA5B;AAqDA5f,QAAQ4f,MAAR,GAAiBA,MAAjB;AACA,kC;;;;;;;ACxDa;AACb;AACA;;;;;;AAMA;;AACA1f,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA;AACAJ,QAAQ8gB,gBAAR,GAA2B;AACvB;;;;;;;;AAQAC,YAAQ,gBAAUC,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9D,eAAOD,cAAcF,WAAd,GAA4BG,QAA5B,GAAuCF,UAA9C;AACH,KAXsB;AAYvB;;;AAGAG,UAAM;AACF;;;;;;;;AAQAC,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9DH,2BAAeG,QAAf;AACA,mBAAOD,cAActX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,GAAyCC,UAAhD;AACH,SAZC;AAaF;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,2BAAeG,QAAf;AACA,mBAAO,CAACD,WAAD,GAAeF,WAAf,IAA8BA,cAAc,CAA5C,IAAiDC,UAAxD;AACH,SAxBC;AAyBF;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjEH,0BAAcA,cAAcG,QAA5B;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAOE,cAAc,CAAd,GAAkBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAlB,GAA6CC,UAApD;AACH,aAFD,MAGK;AACDD,8BAAcA,cAAc,CAA5B;AACA,uBAAO,CAACE,WAAD,GAAe,CAAf,IAAoBF,eAAeA,cAAc,CAA7B,IAAkC,CAAtD,IAA2DC,UAAlE;AACH;AACJ;AA1CC,KAfiB;AA2DvB;;;AAGAQ,WAAO;AACH;;;;;;;;AAQAJ,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9DH,0BAAcA,cAAcG,QAA5B;AACA,mBAAOD,cAActX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,GAAyCC,UAAhD;AACH,SAZE;AAaH;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,0BAAcA,cAAcG,QAAd,GAAyB,CAAvC;AACA,mBAAOD,eAAetX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA1C,IAA+CC,UAAtD;AACH,SAxBE;AAyBH;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjEH,0BAAcA,cAAcG,QAA5B;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAOE,cAAc,CAAd,GAAkBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAlB,GAA6CC,UAApD;AACH,aAFD,MAGK;AACDD,8BAAcA,cAAc,CAA5B;AACA,uBAAOE,cAAc,CAAd,IAAmBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA9C,IAAmDC,UAA1D;AACH;AACJ;AA1CE,KA9DgB;AA0GvB;;;AAGAS,WAAO;AACH;;;;;;;;AAQAL,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9DH,0BAAcA,cAAcG,QAA5B;AACA,mBAAOD,cAActX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,GAAyCC,UAAhD;AACH,SAZE;AAaH;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,0BAAcA,cAAcG,QAAd,GAAyB,CAAvC;AACA,mBAAO,CAACD,WAAD,IAAgBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA3C,IAAgDC,UAAvD;AACH,SAxBE;AAyBH;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjEH,0BAAcA,cAAcG,QAA5B;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAOE,cAAc,CAAd,GAAkBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAlB,GAA6CC,UAApD;AACH,aAFD,MAGK;AACDD,+BAAe,CAAf;AACA,uBAAO,CAACE,WAAD,GAAe,CAAf,IAAoBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA/C,IAAoDC,UAA3D;AACH;AACJ;AA1CE,KA7GgB;AAyJvB;;;AAGAU,WAAO;AACH;;;;;;;;AAQAN,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9DH,2BAAeG,QAAf;AACA,mBAAOD,cAActX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,GAAyCC,UAAhD;AACH,SAZE;AAaH;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,0BAAcA,cAAcG,QAAd,GAAyB,CAAvC;AACA,mBAAOD,eAAetX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA1C,IAA+CC,UAAtD;AACH,SAxBE;AAyBH;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjEH,0BAAcA,cAAcG,QAA5B;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAOE,cAAc,CAAd,GAAkBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAlB,GAA6CC,UAApD;AACH,aAFD,MAGK;AACDD,+BAAe,CAAf;AACA,uBAAOE,cAAc,CAAd,IAAmBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA9C,IAAmDC,UAA1D;AACH;AACJ;AA1CE,KA5JgB;AAwMvB;;;AAGAW,UAAM;AACF;;;;;;;;AAQAP,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9D,mBAAO,CAACD,WAAD,GAAetX,KAAKiY,GAAL,CAASb,cAAcG,QAAd,IAA0BvX,KAAKkY,EAAL,GAAU,CAApC,CAAT,CAAf,GAAkEZ,WAAlE,GAAgFD,UAAvF;AACH,SAXC;AAYF;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/D,mBAAOD,cAActX,KAAKmY,GAAL,CAASf,cAAcG,QAAd,IAA0BvX,KAAKkY,EAAL,GAAU,CAApC,CAAT,CAAd,GAAiEb,UAAxE;AACH,SAtBC;AAuBF;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjE,mBAAO,CAACD,WAAD,GAAe,CAAf,IAAoBtX,KAAKiY,GAAL,CAASjY,KAAKkY,EAAL,GAAUd,WAAV,GAAwBG,QAAjC,IAA6C,CAAjE,IAAsEF,UAA7E;AACH;AAjCC,KA3MiB;AA8OvB;;;AAGAe,UAAM;AACF;;;;;;;;AAQAX,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9D,mBAAQH,gBAAgB,CAAjB,GAAsBC,UAAtB,GAAmCC,cAActX,KAAK0X,GAAL,CAAS,CAAT,EAAY,MAAMN,cAAcG,QAAd,GAAyB,CAA/B,CAAZ,CAAd,GAA+DF,UAAzG;AACH,SAXC;AAYF;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/D,mBAAOH,gBAAgBG,QAAhB,GAA2BF,aAAaC,WAAxC,GAAsDA,eAAe,CAACtX,KAAK0X,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMN,WAAN,GAAoBG,QAAhC,CAAD,GAA6C,CAA5D,IAAiEF,UAA9H;AACH,SAtBC;AAuBF;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjE,gBAAIH,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,UAAP;AACH;AACD,gBAAID,gBAAgBG,QAApB,EAA8B;AAC1B,uBAAOF,aAAaC,WAApB;AACH;AACDF,2BAAeG,QAAf;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAOE,cAAc,CAAd,GAAkBtX,KAAK0X,GAAL,CAAS,CAAT,EAAY,MAAMN,cAAc,CAApB,CAAZ,CAAlB,GAAwDC,UAA/D;AACH,aAFD,MAGK;AACDD,+BAAe,CAAf;AACA,uBAAOE,cAAc,CAAd,IAAmB,CAACtX,KAAK0X,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMN,WAAlB,CAAD,GAAkC,CAArD,IAA0DC,UAAjE;AACH;AACJ;AA9CC,KAjPiB;AAiSvB;;;AAGAgB,YAAQ;AACJ;;;;;;;;AAQAZ,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9DH,0BAAcA,cAAcG,QAA5B;AACA,mBAAO,CAACD,WAAD,IAAgBtX,KAAKsY,IAAL,CAAU,IAAItY,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,IAA0C,CAA1D,IAA+DC,UAAtE;AACH,SAZG;AAaJ;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,0BAAcA,cAAcG,QAAd,GAAyB,CAAvC;AACA,mBAAOD,cAActX,KAAKsY,IAAL,CAAU,IAAItY,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,CAAd,GAAwDC,UAA/D;AACH,SAxBG;AAyBJ;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjEH,0BAAcA,cAAcG,QAA5B;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAO,CAACE,WAAD,GAAe,CAAf,IAAoBtX,KAAKsY,IAAL,CAAU,IAAItY,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,IAA0C,CAA9D,IAAmEC,UAA1E;AACH,aAFD,MAGK;AACDD,+BAAe,CAAf;AACA,uBAAOE,cAAc,CAAd,IAAmBtX,KAAKsY,IAAL,CAAU,IAAItY,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,IAA0C,CAA7D,IAAkEC,UAAzE;AACH;AACJ;AA1CG,KApSe;AAgVvB;;;AAGAkB,aAAS;AACL;;;;;;;;;;AAUAd,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0Dva,CAA1D,EAA6D7G,CAA7D,EAAgE;AACpE,gBAAIkQ,CAAJ;AACA,gBAAI+Q,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,UAAP;AACH;AACDD,2BAAeG,QAAf;AACA,gBAAIH,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,aAAaC,WAApB;AACH;AACD,gBAAI,OAAOnhB,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAIohB,WAAW,GAAf;AACH;AACD,gBAAI,CAACva,CAAD,IAAMA,IAAIgD,KAAKwY,GAAL,CAASlB,WAAT,CAAd,EAAqC;AACjCjR,oBAAIlQ,IAAI,CAAR;AACA6G,oBAAIsa,WAAJ;AACH,aAHD,MAIK;AACDjR,oBAAIlQ,KAAK,IAAI6J,KAAKkY,EAAd,IAAoBlY,KAAKyY,IAAL,CAAUnB,cAActa,CAAxB,CAAxB;AACH;AACD,mBAAO,EAAEA,IAAIgD,KAAK0X,GAAL,CAAS,CAAT,EAAY,MAAMN,eAAe,CAArB,CAAZ,CAAJ,GAA2CpX,KAAKmY,GAAL,CAAS,CAACf,cAAcG,QAAd,GAAyBlR,CAA1B,KAAgC,IAAIrG,KAAKkY,EAAzC,IAA+C/hB,CAAxD,CAA7C,IAA2GkhB,UAAlH;AACH,SA/BI;AAgCL;;;;;;;;;;AAUAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0Dva,CAA1D,EAA6D7G,CAA7D,EAAgE;AACrE,gBAAIkQ,CAAJ;AACA,gBAAI+Q,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,UAAP;AACH;AACDD,2BAAeG,QAAf;AACA,gBAAIH,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,aAAaC,WAApB;AACH;AACD,gBAAI,OAAOnhB,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAIohB,WAAW,EAAf;AACH;AACD,gBAAI,CAACva,CAAD,IAAMA,IAAIgD,KAAKwY,GAAL,CAASlB,WAAT,CAAd,EAAqC;AACjCta,oBAAIsa,WAAJ;AACAjR,oBAAIlQ,IAAI,CAAR;AACH,aAHD,MAIK;AACDkQ,oBAAIlQ,KAAK,IAAI6J,KAAKkY,EAAd,IAAoBlY,KAAKyY,IAAL,CAAUnB,cAActa,CAAxB,CAAxB;AACH;AACD,mBAAQA,IAAIgD,KAAK0X,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMN,WAAlB,CAAJ,GAAqCpX,KAAKmY,GAAL,CAAS,CAACf,cAAcG,QAAd,GAAyBlR,CAA1B,KAAgC,IAAIrG,KAAKkY,EAAzC,IAA+C/hB,CAAxD,CAArC,GAAkGmhB,WAAlG,GAAgHD,UAAxH;AACH,SA9DI;AA+DL;;;;;;;;;;AAUAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0Dva,CAA1D,EAA6D7G,CAA7D,EAAgE;AACvE,gBAAIkQ,CAAJ;AACA,gBAAI+Q,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,UAAP;AACH;AACDD,2BAAeG,WAAW,CAA1B;AACA,gBAAIH,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,aAAaC,WAApB;AACH;AACD,gBAAI,OAAOnhB,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAIohB,YAAY,MAAM,GAAlB,CAAJ;AACH;AACD,gBAAI,CAACva,CAAD,IAAMA,IAAIgD,KAAKwY,GAAL,CAASlB,WAAT,CAAd,EAAqC;AACjCta,oBAAIsa,WAAJ;AACAjR,oBAAIlQ,IAAI,CAAR;AACH,aAHD,MAIK;AACDkQ,oBAAIlQ,KAAK,IAAI6J,KAAKkY,EAAd,IAAoBlY,KAAKyY,IAAL,CAAUnB,cAActa,CAAxB,CAAxB;AACH;AACD,gBAAIoa,cAAc,CAAlB,EAAqB;AACjB,uBAAO,CAAC,GAAD,IAAQpa,IAAIgD,KAAK0X,GAAL,CAAS,CAAT,EAAY,MAAMN,eAAe,CAArB,CAAZ,CAAJ,GAA2CpX,KAAKmY,GAAL,CAAS,CAACf,cAAcG,QAAd,GAAyBlR,CAA1B,KAAgC,IAAIrG,KAAKkY,EAAzC,IAA+C/hB,CAAxD,CAAnD,IAAiHkhB,UAAxH;AACH;AACD,mBAAOra,IAAIgD,KAAK0X,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,IAAON,eAAe,CAAtB,CAAZ,CAAJ,GAA4CpX,KAAKmY,GAAL,CAAS,CAACf,cAAcG,QAAd,GAAyBlR,CAA1B,KAAgC,IAAIrG,KAAKkY,EAAzC,IAA+C/hB,CAAxD,CAA5C,GAAyG,EAAzG,GAA8GmhB,WAA9G,GAA4HD,UAAnI;AACH;AAhGI,KAnVc;AAqbvB;;;AAGAqB,UAAM;AACF;;;;;;;;;AASAjB,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0DlR,CAA1D,EAA6D;AACjE,gBAAI,OAAOA,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAI,OAAJ;AACH;AACD,mBAAOiR,eAAeF,eAAeG,QAA9B,IAA0CH,WAA1C,IAAyD,CAAC/Q,IAAI,CAAL,IAAU+Q,WAAV,GAAwB/Q,CAAjF,IAAsFgR,UAA7F;AACH,SAfC;AAgBF;;;;;;;;;AASAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0DlR,CAA1D,EAA6D;AAClE,gBAAI,OAAOA,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAI,OAAJ;AACH;AACD,mBAAOiR,eAAe,CAACF,cAAcA,cAAcG,QAAd,GAAyB,CAAxC,IAA6CH,WAA7C,IAA4D,CAAC/Q,IAAI,CAAL,IAAU+Q,WAAV,GAAwB/Q,CAApF,IAAyF,CAAxG,IAA6GgR,UAApH;AACH,SA9BC;AA+BF;;;;;;;;;AASAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0DlR,CAA1D,EAA6D;AACpE,gBAAI,OAAOA,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAI,OAAJ;AACH;AACD+Q,2BAAeG,WAAW,CAA1B;AACA,gBAAIH,cAAc,CAAlB,EAAqB;AACjB,uBAAOE,cAAc,CAAd,IAAmBF,cAAcA,WAAd,IAA6B,CAAC,CAAC/Q,KAAM,KAAP,IAAiB,CAAlB,IAAuB+Q,WAAvB,GAAqC/Q,CAAlE,CAAnB,IAA2FgR,UAAlG;AACH;AACD,mBAAOC,cAAc,CAAd,IAAmB,CAACF,eAAe,CAAhB,IAAqBA,WAArB,IAAoC,CAAC,CAAC/Q,KAAM,KAAP,IAAiB,CAAlB,IAAuB+Q,WAAvB,GAAqC/Q,CAAzE,IAA8E,CAAjG,IAAsGgR,UAA7G;AACH;AAjDC,KAxbiB;AA2evB;;;AAGAsB,YAAQ;AACJ;;;;;;;;AAQAlB,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9D,mBAAOD,cAAclhB,QAAQ8gB,gBAAR,CAAyByB,MAAzB,CAAgChB,OAAhC,CAAwCJ,WAAWH,WAAnD,EAAgE,CAAhE,EAAmEE,WAAnE,EAAgFC,QAAhF,CAAd,GAA0GF,UAAjH;AACH,SAXG;AAYJ;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,2BAAeG,QAAf;AACA,gBAAIH,cAAe,IAAI,IAAvB,EAA8B;AAC1B,uBAAOE,eAAe,SAASF,WAAT,GAAuBA,WAAtC,IAAqDC,UAA5D;AACH,aAFD,MAGK,IAAID,cAAe,IAAI,IAAvB,EAA8B;AAC/B,uBAAOE,eAAe,UAAUF,eAAgB,MAAM,IAAhC,IAAyCA,WAAzC,GAAuD,GAAtE,IAA6EC,UAApF;AACH,aAFI,MAGA,IAAID,cAAe,MAAM,IAAzB,EAAgC;AACjC,uBAAOE,eAAe,UAAUF,eAAgB,OAAO,IAAjC,IAA0CA,WAA1C,GAAwD,KAAvE,IAAgFC,UAAvF;AACH,aAFI,MAGA;AACD,uBAAOC,eAAe,UAAUF,eAAgB,QAAQ,IAAlC,IAA2CA,WAA3C,GAAyD,OAAxE,IAAmFC,UAA1F;AACH;AACJ,SAlCG;AAmCJ;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjE,gBAAIH,cAAcG,WAAW,CAA7B,EAAgC;AAC5B,uBAAOnhB,QAAQ8gB,gBAAR,CAAyByB,MAAzB,CAAgClB,MAAhC,CAAuCL,cAAc,CAArD,EAAwD,CAAxD,EAA2DE,WAA3D,EAAwEC,QAAxE,IAAoF,EAApF,GAAyFF,UAAhG;AACH,aAFD,MAGK;AACD,uBAAOjhB,QAAQ8gB,gBAAR,CAAyByB,MAAzB,CAAgChB,OAAhC,CAAwCP,cAAc,CAAd,GAAkBG,QAA1D,EAAoE,CAApE,EAAuED,WAAvE,EAAoFC,QAApF,IAAgG,GAAhG,GAAsGD,cAAc,GAApH,GAA0HD,UAAjI;AACH;AACJ;AAlDG;AA9ee,CAA3B;AAmiBA;AACA,4C;;;;;;;AC/iBa;;AACb,IAAIuB,YAAa,aAAQ,UAAKA,SAAd,IAA4B,UAAUC,OAAV,EAAmBC,UAAnB,EAA+BzI,CAA/B,EAAkC0I,SAAlC,EAA6C;AACrF,aAASC,KAAT,CAAexiB,KAAf,EAAsB;AAAE,eAAOA,iBAAiB6Z,CAAjB,GAAqB7Z,KAArB,GAA6B,IAAI6Z,CAAJ,CAAM,UAAU4I,OAAV,EAAmB;AAAEA,oBAAQziB,KAAR;AAAiB,SAA5C,CAApC;AAAoF;AAC5G,WAAO,KAAK6Z,MAAMA,IAAI6I,OAAV,CAAL,EAAyB,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AACvD,iBAASC,SAAT,CAAmB5iB,KAAnB,EAA0B;AAAE,gBAAI;AAAE6iB,qBAAKN,UAAUxH,IAAV,CAAe/a,KAAf,CAAL;AAA8B,aAApC,CAAqC,OAAOkS,CAAP,EAAU;AAAEyQ,uBAAOzQ,CAAP;AAAY;AAAE;AAC3F,iBAAS4Q,QAAT,CAAkB9iB,KAAlB,EAAyB;AAAE,gBAAI;AAAE6iB,qBAAKN,UAAU,OAAV,EAAmBviB,KAAnB,CAAL;AAAkC,aAAxC,CAAyC,OAAOkS,CAAP,EAAU;AAAEyQ,uBAAOzQ,CAAP;AAAY;AAAE;AAC9F,iBAAS2Q,IAAT,CAAcxhB,MAAd,EAAsB;AAAEA,mBAAOib,IAAP,GAAcmG,QAAQphB,OAAOrB,KAAf,CAAd,GAAsCwiB,MAAMnhB,OAAOrB,KAAb,EAAoB+iB,IAApB,CAAyBH,SAAzB,EAAoCE,QAApC,CAAtC;AAAsF;AAC9GD,aAAK,CAACN,YAAYA,UAAUvhB,KAAV,CAAgBqhB,OAAhB,EAAyBC,cAAc,EAAvC,CAAb,EAAyDvH,IAAzD,EAAL;AACH,KALM,CAAP;AAMH,CARD;AASA,IAAIiI,cAAe,aAAQ,UAAKA,WAAd,IAA8B,UAAUX,OAAV,EAAmBY,IAAnB,EAAyB;AACrE,QAAItF,IAAI,EAAEuF,OAAO,CAAT,EAAYC,MAAM,gBAAW;AAAE,gBAAIrT,EAAE,CAAF,IAAO,CAAX,EAAc,MAAMA,EAAE,CAAF,CAAN,CAAY,OAAOA,EAAE,CAAF,CAAP;AAAc,SAAvE,EAAyEsT,MAAM,EAA/E,EAAmFC,KAAK,EAAxF,EAAR;AAAA,QAAsGnT,CAAtG;AAAA,QAAyGoT,CAAzG;AAAA,QAA4GxT,CAA5G;AAAA,QAA+GyT,CAA/G;AACA,WAAOA,IAAI,EAAExI,MAAMyI,KAAK,CAAL,CAAR,EAAiB,SAASA,KAAK,CAAL,CAA1B,EAAmC,UAAUA,KAAK,CAAL,CAA7C,EAAJ,EAA4D,OAAO9N,MAAP,KAAkB,UAAlB,KAAiC6N,EAAE7N,OAAOI,QAAT,IAAqB,YAAW;AAAE,eAAO,IAAP;AAAc,KAAjF,CAA5D,EAAgJyN,CAAvJ;AACA,aAASC,IAAT,CAAcvT,CAAd,EAAiB;AAAE,eAAO,UAAUwT,CAAV,EAAa;AAAE,mBAAOZ,KAAK,CAAC5S,CAAD,EAAIwT,CAAJ,CAAL,CAAP;AAAsB,SAA5C;AAA+C;AAClE,aAASZ,IAAT,CAAca,EAAd,EAAkB;AACd,YAAIxT,CAAJ,EAAO,MAAM,IAAIwH,SAAJ,CAAc,iCAAd,CAAN;AACP,eAAOiG,CAAP;AAAU,gBAAI;AACV,oBAAIzN,IAAI,CAAJ,EAAOoT,MAAMxT,IAAI4T,GAAG,CAAH,IAAQ,CAAR,GAAYJ,EAAE,QAAF,CAAZ,GAA0BI,GAAG,CAAH,IAAQJ,EAAE,OAAF,MAAe,CAACxT,IAAIwT,EAAE,QAAF,CAAL,KAAqBxT,EAAEpK,IAAF,CAAO4d,CAAP,CAArB,EAAgC,CAA/C,CAAR,GAA4DA,EAAEvI,IAAlG,KAA2G,CAAC,CAACjL,IAAIA,EAAEpK,IAAF,CAAO4d,CAAP,EAAUI,GAAG,CAAH,CAAV,CAAL,EAAuBpH,IAA9I,EAAoJ,OAAOxM,CAAP;AACpJ,oBAAIwT,IAAI,CAAJ,EAAOxT,CAAX,EAAc4T,KAAK,CAACA,GAAG,CAAH,IAAQ,CAAT,EAAY5T,EAAE9P,KAAd,CAAL;AACd,wBAAQ0jB,GAAG,CAAH,CAAR;AACI,yBAAK,CAAL,CAAQ,KAAK,CAAL;AAAQ5T,4BAAI4T,EAAJ,CAAQ;AACxB,yBAAK,CAAL;AAAQ/F,0BAAEuF,KAAF,GAAW,OAAO,EAAEljB,OAAO0jB,GAAG,CAAH,CAAT,EAAgBpH,MAAM,KAAtB,EAAP;AACnB,yBAAK,CAAL;AAAQqB,0BAAEuF,KAAF,GAAWI,IAAII,GAAG,CAAH,CAAJ,CAAWA,KAAK,CAAC,CAAD,CAAL,CAAU;AACxC,yBAAK,CAAL;AAAQA,6BAAK/F,EAAE0F,GAAF,CAAMM,GAAN,EAAL,CAAkBhG,EAAEyF,IAAF,CAAOO,GAAP,GAAc;AACxC;AACI,4BAAI,EAAE7T,IAAI6N,EAAEyF,IAAN,EAAYtT,IAAIA,EAAE5N,MAAF,GAAW,CAAX,IAAgB4N,EAAEA,EAAE5N,MAAF,GAAW,CAAb,CAAlC,MAAuDwhB,GAAG,CAAH,MAAU,CAAV,IAAeA,GAAG,CAAH,MAAU,CAAhF,CAAJ,EAAwF;AAAE/F,gCAAI,CAAJ,CAAO;AAAW;AAC5G,4BAAI+F,GAAG,CAAH,MAAU,CAAV,KAAgB,CAAC5T,CAAD,IAAO4T,GAAG,CAAH,IAAQ5T,EAAE,CAAF,CAAR,IAAgB4T,GAAG,CAAH,IAAQ5T,EAAE,CAAF,CAA/C,CAAJ,EAA2D;AAAE6N,8BAAEuF,KAAF,GAAUQ,GAAG,CAAH,CAAV,CAAiB;AAAQ;AACtF,4BAAIA,GAAG,CAAH,MAAU,CAAV,IAAe/F,EAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAA7B,EAAmC;AAAE6N,8BAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAAV,CAAgBA,IAAI4T,EAAJ,CAAQ;AAAQ;AACrE,4BAAI5T,KAAK6N,EAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAAnB,EAAyB;AAAE6N,8BAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAAV,CAAgB6N,EAAE0F,GAAF,CAAMhf,IAAN,CAAWqf,EAAX,EAAgB;AAAQ;AACnE,4BAAI5T,EAAE,CAAF,CAAJ,EAAU6N,EAAE0F,GAAF,CAAMM,GAAN;AACVhG,0BAAEyF,IAAF,CAAOO,GAAP,GAAc;AAXtB;AAaAD,qBAAKT,KAAKvd,IAAL,CAAU2c,OAAV,EAAmB1E,CAAnB,CAAL;AACH,aAjBS,CAiBR,OAAOzL,CAAP,EAAU;AAAEwR,qBAAK,CAAC,CAAD,EAAIxR,CAAJ,CAAL,CAAaoR,IAAI,CAAJ;AAAQ,aAjBzB,SAiBkC;AAAEpT,oBAAIJ,IAAI,CAAR;AAAY;AAjB1D,SAkBA,IAAI4T,GAAG,CAAH,IAAQ,CAAZ,EAAe,MAAMA,GAAG,CAAH,CAAN,CAAa,OAAO,EAAE1jB,OAAO0jB,GAAG,CAAH,IAAQA,GAAG,CAAH,CAAR,GAAgB,KAAK,CAA9B,EAAiCpH,MAAM,IAAvC,EAAP;AAC/B;AACJ,CA1BD;AA2BAxc,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIuf,iBAAiBtf,mBAAOA,CAAC,EAAR,CAArB;AACA,IAAI2jB,gBAAgB,SAAhBA,aAAgB,CAAUC,WAAV,EAAuB;AACvC,QAAIxiB,MAAJ,EAAYoQ,IAAZ,EAAkB1N,KAAlB,EAAyB+f,IAAzB,EAA+Btc,GAA/B,EAAoCoY,QAApC,EAA8CmE,OAA9C,EAAuDpJ,EAAvD,EAA2DqJ,EAA3D;AACA,WAAOhB,YAAY,IAAZ,EAAkB,UAAUiB,EAAV,EAAc;AACnC,gBAAQA,GAAGf,KAAX;AACI,iBAAK,CAAL;AACI7hB,yBAAS,EAAT;AACA,oBAAI,CAACwiB,WAAL,EAAkB,OAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AAClBpS,uBAAO3R,OAAO2R,IAAP,CAAYoS,WAAZ,CAAP;AACA,oBAAI,EAAEpS,KAAKvP,MAAL,GAAc,CAAhB,CAAJ,EAAwB,OAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AACxB6B,wBAAQ,CAAR,EAAW+f,OAAOrS,KAAKvP,MAAvB;AACA+hB,mBAAGf,KAAH,GAAW,CAAX;AACJ,iBAAK,CAAL;AACI,oBAAI,EAAEnf,QAAQ+f,IAAV,CAAJ,EAAqB,OAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AACrBtc,sBAAMiK,KAAK1N,KAAL,CAAN;AACA6b,2BAAWiE,YAAYrc,GAAZ,CAAX;AACA,oBAAI,EAAE,OAAOoY,QAAP,KAAoB,UAAtB,CAAJ,EAAuC,OAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AACvCmE,0BAAUtS,KAAK1N,QAAQ,CAAb,CAAV;AACA4W,qBAAKtZ,MAAL;AACA2iB,qBAAKxc,GAAL;AACA,uBAAO,CAAC,CAAD,CAAG,SAAH,EAAcoY,SAASve,OAAO0iB,OAAP,CAAT,CAAd,CAAP;AACJ,iBAAK,CAAL;AACIpJ,mBAAGqJ,EAAH,IAASC,GAAGd,IAAH,EAAT;AACA,uBAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AACJ,iBAAK,CAAL;AACI9hB,uBAAOmG,GAAP,IAAc;AACVsL,gCAAY,eADF;AAEV;AACAD,6BAAS,SAASrL,GAAT,GAAe;AAHd,iBAAd;AAKAyc,mBAAGf,KAAH,GAAW,CAAX;AACJ,iBAAK,CAAL;AACInf;AACA,uBAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AACJ,iBAAK,CAAL;AAAQ,uBAAO,CAAC,CAAD,CAAG,UAAH,EAAe1C,MAAf,CAAP;AA9BZ;AAgCH,KAjCM,CAAP;AAkCH,CApCD;AAqCAzB,QAAQskB,gBAAR,GAA2B,UAAUC,SAAV,EAAqBld,EAArB,EAAyBmd,MAAzB,EAAiC;AAAE,WAAOhC,UAAU,KAAK,CAAf,EAAkB,KAAK,CAAvB,EAA0B,KAAK,CAA/B,EAAkC,YAAY;AAC/G,eAAOY,YAAY,IAAZ,EAAkB,UAAUrI,EAAV,EAAc;AACnC,mBAAO,CAAC,CAAD,CAAG,UAAH,EAAe,IAAI+H,OAAJ,CAAY,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AACrD,oBAAIwB,aAAaA,UAAUjiB,MAAV,GAAmB,CAApC,EAAuC;AACnC,wBAAImiB,cAAc,EAAlB;AACA,wBAAIC,cAAc,EAAlB;AACA,wBAAIC,mBAAmB,SAAnBA,gBAAmB,GAAY;AAC/B,4BAAIC,WAAW,KAAf;AACA;AACA,6BAAK,IAAIhd,GAAT,IAAgB6c,WAAhB,EAA6B;AACzB,gCAAIA,YAAY7c,GAAZ,MAAqB,SAAzB,EAAoC;AAChC;AACH;AACD,gCAAI6c,YAAY7c,GAAZ,MAAqB,OAAzB,EAAkC;AAC9Bgd,2CAAW,IAAX;AACA;AACH;AACJ;AACD,4BAAIA,QAAJ,EAAc;AACV7B,mCAAO2B,WAAP;AACH,yBAFD,MAGK;AACD7B,oCAAQ6B,WAAR;AACH;AACJ,qBAlBD;AAmBAH,8BAAUxf,GAAV,CAAc,UAAU8f,IAAV,EAAgB1gB,KAAhB,EAAuB;AACjC,4BAAI2gB,SAAS,cAAc3gB,KAA3B;AACAsgB,oCAAY,cAActgB,KAA1B,IAAmC,SAAnC;AACA,yBAAC,UAAU4gB,KAAV,EAAiBC,MAAjB,EAAyB;AACtB,gCAAIhF,WAAW,OAAO+E,MAAM1d,EAAb,KAAoB,UAApB,GAAiC0d,MAAM1d,EAAvC,GAA4CA,EAA3D;AACA,gCAAI,OAAO2Y,QAAP,KAAoB,UAAxB,EAAoC;AAChC;AACA,oCAAIiF,iBAAiBjF,SAAS;AAC1BhN,wCAAI+R,MAAM/R,EADgB;AAE1BmR,6CAAS,IAFiB;AAG1Be,gDAAY,IAHc;AAI1BH,2CAAOA,MAAMI,MAJa;AAK1B1jB,4CAAQijB;AALkB,iCAAT,EAMlBK,MAAMI,MANY,CAArB;AAOA,oCAAIxF,eAAeja,YAAf,CAA4Be,SAA5B,CAAsCwe,cAAtC,CAAJ,EAA2D;AACvDA,mDAAe9B,IAAf,CAAoB,UAAUiC,IAAV,EAAgB;AAChCV,oDAAYK,MAAM/R,EAAlB,IAAwBoS,IAAxB;AACAX,oDAAYK,MAAZ,IAAsB,IAAtB;AACAH;AACH,qCAJD,EAIGU,KAJH,CAIS,UAAU5R,KAAV,EAAiB;AACtBiR,oDAAYK,MAAM/R,EAAlB,IAAwB;AACpBE,wDAAY,MADQ;AAEpB;AACAoS,uDAAW7R,KAHS;AAIpBR,qDAASQ,MAAMR,OAAN,IAAiBQ,MAAM8R,UAAvB,IAAqC;AAJ1B,yCAAxB;AAMAd,oDAAYK,MAAZ,IAAsB,OAAtB;AACAH;AACH,qCAbD;AAcH,iCAfD,MAgBK;AACDD,gDAAYK,MAAM/R,EAAlB,IAAwBiS,cAAxB;AACAR,gDAAYK,MAAZ,IAAsB,IAAtB;AACAH;AACH;AACJ,6BA9BD,MA+BK;AACDD,4CAAYK,MAAM/R,EAAlB,IAAwB;AACpBE,gDAAY,MADQ;AAEpB;AACAD,6CAAS;AAHW,iCAAxB;AAKA0R;AACH;AACJ,yBAzCD,EAyCGE,IAzCH,EAyCSC,MAzCT;AA0CH,qBA7CD;AA8CH,iBApED,MAqEK;AACDjC;AACH;AACJ,aAzEiB,CAAf,CAAP;AA0EH,SA3EM,CAAP;AA4EH,KA7EoE,CAAP;AA6EzD,CA7EL;AA8EA;;;;;AAKA7iB,QAAQwlB,aAAR,GAAwB,UAAUjB,SAAV,EAAqBld,EAArB,EAAyBmd,MAAzB,EAAiC;AAAE,WAAOhC,UAAU,KAAK,CAAf,EAAkB,KAAK,CAAvB,EAA0B,KAAK,CAA/B,EAAkC,YAAY;AAC5G,YAAI1f,QAAQ,IAAZ;AACA,eAAOsgB,YAAY,IAAZ,EAAkB,UAAUrI,EAAV,EAAc;AACnC,mBAAO,CAAC,CAAD,CAAG,UAAH,EAAe,IAAI+H,OAAJ,CAAY,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AACrD,oBAAI0C,eAAe,EAAnB;AACA,oBAAIC,SAAS,EAAb;AACA,oBAAI3d,SAAS,EAAb;AACA,oBAAI4d,cAAc,IAAlB;AACA,oBAAIC,SAAS,SAATA,MAAS,CAAUhe,GAAV,EAAeuc,OAAf,EAAwB;AACjC,2BAAO,YAAY;AACf,4BAAI0B,UAAUF,YAAYxK,IAAZ,CAAiBuK,OAAOvB,OAAP,CAAjB,CAAd;AACA,4BAAI,CAAC0B,QAAQnJ,IAAb,EAAmB;AACf,gCAAImJ,QAAQzlB,KAAR,IAAiB,OAAOylB,QAAQzlB,KAAR,CAAcyF,QAArB,KAAkC,UAAnD,IAAiEggB,QAAQzlB,KAAR,CAAcyF,QAAd,OAA6B,kBAAlG,EAAsH;AAClHggB,wCAAQzlB,KAAR,CAAc+iB,IAAd,CAAmB,UAAUiC,IAAV,EAAgB;AAC/BM,2CAAO9d,GAAP,IAAcwd,IAAd;AACAU,2CAAOle,GAAP;AACH,iCAHD,EAGGyd,KAHH,CAGS,UAAUU,GAAV,EAAe;AACpB,wCAAI,CAACvB,MAAD,IAAW,CAACA,OAAOwB,cAAvB,EAAuC;AACnCN,+CAAO9d,GAAP,IAAc;AACVsL,wDAAY,eADF;AAEV;AACA+S,uDAAWF;AAHD,yCAAd;AAKAD,+CAAOle,GAAP;AACH,qCAPD,MAQK,IAAI4c,UAAUA,OAAOwB,cAArB,EAAqC;AACtCjD,+CAAO;AACHuC,uDAAWS,GADR;AAEH9S,qDAAS8S,IAAI9S,OAFV;AAGHC,wDAAY;AAHT,yCAAP;AAKH;AACJ,iCAnBD;AAoBH,6BArBD,MAsBK;AACDwS,uCAAO9d,GAAP,IAAcie,QAAQzlB,KAAtB;AACA0lB,uCAAOle,GAAP;AACH;AACJ,yBA3BD,MA4BK;AACDib,oCAAQ6C,MAAR;AACH;AACD,+BAAOG,OAAP;AACH,qBAlCD;AAmCH,iBApCD;AAqCA,oBAAIC,SAAS,SAATA,MAAS,CAAUle,GAAV,EAAe;AACxB,wBAAIzD,QAAQ4D,OAAO8C,OAAP,CAAejD,GAAf,CAAZ;AACA,wBAAIO,UAAUJ,OAAO5D,QAAQ,CAAf,CAAd;AACAyhB,2BAAOzd,OAAP,EAAgBP,GAAhB;AACH,iBAJD;AAKA,oBAAI+X,eAAeja,YAAf,CAA4BO,OAA5B,CAAoCse,SAApC,KAAkDA,UAAUjiB,MAAV,GAAmB,CAAzE,EAA4E;AACxEiiB,8BAAUxf,GAAV,CAAc,UAAUmhB,MAAV,EAAkB/hB,KAAlB,EAAyB;AACnC,4BAAIggB,UAAUhgB,QAAQ,CAAR,IAAaogB,UAAUpgB,QAAQ,CAAlB,CAAb,GAAoCogB,UAAUpgB,QAAQ,CAAlB,EAAqB6O,EAAzD,GAA8DlO,SAA5E;AACAiD,+BAAOtD,IAAP,CAAYyhB,OAAOlT,EAAnB;AACAyS,qCAAaS,OAAOlT,EAApB,IAA2B,UAAUmT,OAAV,EAAmBC,IAAnB,EAAyB;AAChD,mCAAO,UAAUC,SAAV,EAAqB;AACxB,oCAAIC,SAASF,IAAb;AACA,oCAAIG,aAAaJ,QAAQhB,MAAzB;AACA,oCAAIzE,UAAUyF,QAAQK,KAAR,IAAiB1jB,KAA/B;AACA,oCAAI2jB,kBAAkB,OAAON,QAAQ9e,EAAf,KAAsB,UAAtB,GAAmC8e,QAAQ9e,EAA3C,GAAgDA,EAAtE;AACA;AACA,oCAAIqf,UAAU;AACV1T,wCAAImT,QAAQnT,EADF;AAEVmR,6CAASmC,MAFC;AAGVpB,gDAAYmB,SAHF;AAIVlB,4CAAQgB,QAAQhB,MAJN;AAKV1jB,4CAAQikB;AALE,iCAAd;AAOA,oCAAI/F,eAAeja,YAAf,CAA4BO,OAA5B,CAAoCsgB,UAApC,CAAJ,EAAqD;AACjDA,+CAAWI,OAAX,CAAmBD,OAAnB;AACA,2CAAOD,gBAAgBrlB,KAAhB,CAAsBsf,OAAtB,EAA+B6F,UAA/B,CAAP;AACH,iCAHD,MAIK;AACD,2CAAOE,gBAAgB3gB,IAAhB,CAAqB4a,OAArB,EAA8BgG,OAA9B,EAAuCH,UAAvC,CAAP;AACH;AACJ,6BApBD;AAqBH,yBAtByB,CAsBvBL,MAtBuB,EAsBf/B,OAtBe,CAA1B;AAuBAA,kCAAU,IAAV;AACH,qBA3BD;AA4BAwB,kCAAc3B,cAAcyB,YAAd,CAAd;AACAG,2BAAOrB,UAAU,CAAV,EAAavR,EAApB,EAAwBlO,SAAxB;AACH,iBA/BD,MAgCK;AACD+d,4BAAQ,EAAR;AACH;AACJ,aAlFiB,CAAf,CAAP;AAmFH,SApFM,CAAP;AAqFH,KAvFiE,CAAP;AAuFtD,CAvFL;AAwFA,wC;;;;;;;ACvPa;;AACb,IAAIviB,YAAa,aAAQ,UAAKA,SAAd,IAA6B,YAAY;AACrD,QAAIC,iBAAgB,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,yBAAgBL,OAAOQ,cAAP,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUJ,CAAV,EAAaC,CAAb,EAAgB;AAAED,cAAEG,SAAF,GAAcF,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,iBAAK,IAAIV,CAAT,IAAcU,CAAd;AAAiB,oBAAIA,EAAER,cAAF,CAAiBF,CAAjB,CAAJ,EAAyBS,EAAET,CAAF,IAAOU,EAAEV,CAAF,CAAP;AAA1C;AAAwD,SAF9E;AAGA,eAAOQ,eAAcC,CAAd,EAAiBC,CAAjB,CAAP;AACH,KALD;AAMA,WAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,uBAAcC,CAAd,EAAiBC,CAAjB;AACA,iBAASI,EAAT,GAAc;AAAE,iBAAKC,WAAL,GAAmBN,CAAnB;AAAuB;AACvCA,UAAEO,SAAF,GAAcN,MAAM,IAAN,GAAaP,OAAOc,MAAP,CAAcP,CAAd,CAAb,IAAiCI,GAAGE,SAAH,GAAeN,EAAEM,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAZ2C,EAA5C;AAaAX,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIa,iBAAiBZ,mBAAOA,CAAC,CAAR,CAArB;AACA,IAAIumB,YAAY,aAAe,UAAUzlB,MAAV,EAAkB;AAC7Cb,cAAUsmB,SAAV,EAAqBzlB,MAArB;AACA,aAASylB,SAAT,GAAqB;AACjB,YAAI9jB,QAAQ3B,OAAO2E,IAAP,CAAY,IAAZ,KAAqB,IAAjC;AACAhD,cAAM+jB,gBAAN,GAAyB,CACrB,UADqB,EACT,OADS,EACA,OADA,EACS,QADT,EACmB,SADnB,EAC8B,cAD9B,CAAzB;AAGA/jB,cAAMgkB,SAAN,GAAkB,EAAlB;AACA,eAAOhkB,KAAP;AACH;AACD8jB,cAAU7lB,SAAV,CAAoBgmB,UAApB,GAAiC,UAAUC,MAAV,EAAkBC,MAAlB,EAA0B;AACvD,YAAIC,aAAa,EAAjB;AACA,YAAIF,UAAUA,OAAO1kB,MAAP,GAAgB,CAA9B,EAAiC;AAC7B0kB,mBAAOjiB,GAAP,CAAW,UAAU8f,IAAV,EAAgB;AACvBqC,2BAAWziB,IAAX,CAAgBogB,IAAhB;AACH,aAFD;AAGH;AACD,YAAIoC,UAAUA,OAAO3kB,MAAP,GAAgB,CAA9B,EAAiC;AAC7B2kB,mBAAOliB,GAAP,CAAW,UAAU8f,IAAV,EAAgB;AACvBqC,2BAAWziB,IAAX,CAAgBogB,IAAhB;AACH,aAFD;AAGH;AACD,eAAOqC,UAAP;AACH,KAbD;AAcAN,cAAU7lB,SAAV,CAAoBomB,KAApB,GAA4B,UAAUC,QAAV,EAAoBnK,QAApB,EAA8B;AACtD,YAAIxb,SAAS;AACTwN,sBAAU,EADD;AAETtH,kBAAM,EAFG;AAGT0f,oBAAQ,EAHC;AAITC,kBAAM,EAJG;AAKTpW,mBAAO,EALE;AAMT1B,oBAAQ,QANC;AAOTyB,qBAASgM,YAAY;AAPZ,SAAb;AASA,YAAIsK,SAAS,KAAK7e,WAAL,EAAb;AACA,aAAKoe,SAAL,CAAeS,MAAf,IAAyB9lB,MAAzB;AACA,aAAK+lB,SAAL,CAAeJ,QAAf,EAAyB3lB,MAAzB,EAAiC8lB,MAAjC,EAAyCtK,QAAzC;AACA,eAAO,KAAK6J,SAAL,CAAeS,MAAf,CAAP;AACA,eAAO9lB,MAAP;AACH,KAfD;AAgBA;;;;;AAKAmlB,cAAU7lB,SAAV,CAAoB0mB,aAApB,GAAoC,UAAUC,QAAV,EAAoBJ,IAApB,EAA0B;AAC1D,YAAII,QAAJ,EAAc;AACV,gBAAIC,YAAYD,QAAhB;AACA,gBAAIE,aAAa,CAAjB;AACA,gBAAIC,kBAAkBP,KAAKM,UAAL,CAAtB;AACA,mBAAOD,aAAaA,UAAU1Y,QAAV,CAAmB4Y,eAAnB,CAApB,EAAyD;AACrDF,4BAAYA,UAAU1Y,QAAV,CAAmB4Y,eAAnB,CAAZ;AACAD,8BAAc,CAAd;AACAC,kCAAkBP,KAAKM,UAAL,CAAlB;AACH;AACD,gBAAIA,eAAeN,KAAKhlB,MAAxB,EAAgC;AAC5B,uBAAOqlB,SAAP;AACH;AACJ;AACD,eAAO,IAAP;AACH,KAfD;AAgBA;;;;;;AAMAf,cAAU7lB,SAAV,CAAoBymB,SAApB,GAAgC,UAAUJ,QAAV,EAAoBU,UAApB,EAAgCC,WAAhC,EAA6CC,aAA7C,EAA4D;AACxF,YAAI,CAAC,KAAK9iB,OAAL,CAAakiB,QAAb,CAAL,EAA6B;AACzB;AACA,gBAAIa,YAAYb,SAASplB,OAAT,CAAiB,YAAjB,EAA+B,GAA/B,CAAhB;AACAimB,wBAAYA,UAAUjmB,OAAV,CAAkB,MAAlB,EAA0B,EAA1B,CAAZ;AACA,gBAAI,CAAC,KAAKkD,OAAL,CAAa+iB,SAAb,CAAL,EAA8B;AAC1B,oBAAI,MAAMtmB,IAAN,CAAWsmB,SAAX,CAAJ,EAA2B;AACvB,wBAAI,YAAYtmB,IAAZ,CAAiBsmB,SAAjB,CAAJ,EAAiC;AAC7B,8BAAM,IAAI1f,KAAJ,CAAU,oBAAV,CAAN;AACH,qBAFD,MAGK,IAAI,UAAU5G,IAAV,CAAesmB,SAAf,CAAJ,EAA+B;AAChC,8BAAM,IAAI1f,KAAJ,CAAU,oBAAV,CAAN;AACH,qBAFI,MAGA;AACD,4BAAI,UAAU5G,IAAV,CAAesmB,SAAf,CAAJ,EAA+B;AAC3B,gCAAIC,cAAc,KAAKC,YAAL,CAAkBF,SAAlB,EAA6BH,UAA7B,CAAlB;AACA,gCAAIM,WAAW,EAAf;AACAN,uCAAW7Y,QAAX,CAAoBxK,IAApB,CAAyByjB,WAAzB;AACAE,uCAAWH,UAAUjmB,OAAV,CAAkBkmB,YAAYzW,SAA9B,EAAyC,EAAzC,EAA6CzP,OAA7C,CAAqD,SAArD,EAAgE,EAAhE,EAAoEA,OAApE,CAA4E,SAA5E,EAAuF,EAAvF,CAAX;AACA,iCAAKwlB,SAAL,CAAeY,QAAf,EAAyBN,UAAzB,EAAqCC,WAArC,EAAkDC,aAAlD;AACH,yBAND,MAOK;AACD,iCAAKK,aAAL,CAAmBJ,SAAnB,EAA8BH,UAA9B,EAA0CC,WAA1C,EAAuDC,aAAvD;AACH;AACJ;AACJ,iBAnBD,MAoBK;AACD;AACA,wBAAIM,SAASlB,SAASvc,OAAT,CAAiB,GAAjB,CAAb;AACA,wBAAI0d,MAAMD,SAAS,CAAT,GAAalB,SAAS/kB,MAAT,CAAgB,CAAhB,EAAmBimB,MAAnB,CAAb,GAA0C,EAApD;AACA,wBAAIE,eAAepB,SAAS/kB,MAAT,CAAgBimB,MAAhB,CAAnB;AACAR,+BAAW7Y,QAAX,CAAoBxK,IAApB,CAAyB;AACrBwK,kCAAU,EADW;AAErBoY,gCAAQ,EAFa;AAGrB5V,mCAAW8W,GAHU;AAIrBE,iCAAS,IAJY;AAKrBnB,8BAAM,KAAKP,UAAL,CAAgBe,WAAWR,IAA3B,EAAiC,CAACQ,WAAW7Y,QAAX,CAAoB3M,MAArB,CAAjC,CALe;AAMrB4O,+BAAO,EANc;AAOrB1B,gCAAQ,QAPa;AAQrByB,iCAAS;AARY,qBAAzB;AAUA,qBAAC,KAAK/L,OAAL,CAAasjB,YAAb,CAAD,IAA+B,KAAKhB,SAAL,CAAegB,YAAf,EAA6BV,UAA7B,EAAyCC,WAAzC,EAAsDC,aAAtD,CAA/B;AACAM,6BAAS,IAAT;AACAC,0BAAM,IAAN;AACAC,mCAAe,IAAf;AACH;AACJ;AACDP,wBAAY,IAAZ;AACH;AACJ,KAjDD;AAkDA;;;;;AAKArB,cAAU7lB,SAAV,CAAoBonB,YAApB,GAAmC,UAAUf,QAAV,EAAoBU,UAApB,EAAgC;AAC/D,YAAIY,cAActB,SAASvc,OAAT,CAAiB,KAAjB,CAAlB;AACA,YAAIpJ,SAAS;AACTwN,sBAAU,EADD;AAETtH,kBAAM,EAFG;AAGT0f,oBAAQ,EAHC;AAIT5V,uBAAW,EAJF;AAKTgX,qBAAS,IALA;AAMTnB,kBAAM,KAAKP,UAAL,CAAgBe,WAAWR,IAA3B,EAAiC,CAACQ,WAAW7Y,QAAX,CAAoB3M,MAArB,CAAjC,CANG;AAOT4O,mBAAO,EAPE;AAQT1B,oBAAQ,QARC;AASTyB,qBAAS;AATA,SAAb;AAWA,YAAIyX,cAAc,CAAlB,EAAqB;AACjB,gBAAIC,cAAcvB,SAAS/kB,MAAT,CAAgB,CAAhB,EAAmBqmB,cAAc,CAAjC,CAAlB;AACA,gBAAIC,YAAYtmB,MAAZ,CAAmB,CAAnB,EAAsBwI,OAAtB,CAA8B,MAA9B,IAAwC,CAA5C,EAA+C;AAC3C,sBAAM,IAAItC,KAAJ,CAAU,WAAV,CAAN;AACH;AACD,gBAAI,CAAC,KAAKrD,OAAL,CAAayjB,WAAb,CAAL,EAAgC;AAC5BA,8BAAcA,YAAY3mB,OAAZ,CAAoB,SAApB,EAA+B,EAA/B,EAAmCA,OAAnC,CAA2C,SAA3C,EAAsD,EAAtD,CAAd;AACH;AACDP,mBAAOgQ,SAAP,GAAmBkX,WAAnB;AACAA,0BAAc,IAAd;AACH;AACDD,sBAAc,IAAd;AACA,eAAOjnB,MAAP;AACH,KA1BD;AA2BA;;;;;;AAMAmlB,cAAU7lB,SAAV,CAAoBsnB,aAApB,GAAoC,UAAUjB,QAAV,EAAoBU,UAApB,EAAgCC,WAAhC,EAA6CC,aAA7C,EAA4D;AAC5F,YAAIY,SAAS,uBAAb;AACA,YAAIC,eAAe,uCAAnB;AACA,YAAID,OAAOjnB,IAAP,CAAYylB,QAAZ,KAAyByB,aAAalnB,IAAb,CAAkBylB,QAAlB,CAA7B,EAA0D;AACtD,gBAAI0B,WAAW1B,SAASllB,KAAT,CAAe0mB,MAAf,CAAf;AACA,gBAAIE,QAAJ,EAAc;AACV,oBAAI7X,UAAU6X,SAAS,CAAT,CAAd;AACA,oBAAIrmB,OAAO2kB,SAASplB,OAAT,CAAiB4mB,MAAjB,EAAyB,EAAzB,CAAX;AACA,oBAAIG,YAAYtmB,KAAKoI,OAAL,CAAa,IAAb,CAAhB;AACA,oBAAIme,aAAavmB,KAAKoI,OAAL,CAAa,GAAb,CAAjB;AACA,oBAAI0G,WAAWwX,YAAY,CAAZ,IAAiBA,YAAYC,UAA7B,GAA0CvmB,KAAKJ,MAAL,CAAY,CAAZ,EAAe0mB,SAAf,CAA1C,GAAsEtmB,KAAKJ,MAAL,CAAY,CAAZ,EAAe2mB,UAAf,CAArF;AACA,oBAAIC,YAAYF,YAAY,CAAZ,IAAiBA,YAAYC,UAA7B,GAA0CvmB,KAAKJ,MAAL,CAAY0mB,SAAZ,CAA1C,GAAmEtmB,KAAKJ,MAAL,CAAY2mB,UAAZ,CAAnF;AACAzX,2BAAWA,SAASvP,OAAT,CAAiB,OAAjB,EAA0B,GAA1B,CAAX;AACAS,uBAAO8O,WAAW0X,SAAlB;AACA,oBAAIC,cAAc,KAAKC,SAAL,CAAe1mB,IAAf,CAAlB;AACA,oBAAI2lB,WAAWc,YAAY9B,QAA3B;AACA,oBAAIgC,cAAc,KAAKC,cAAL,CAAoBjB,QAApB,EAA8BnX,OAA9B,CAAlB;AACA,oBAAIqY,UAAU;AACVra,8BAAU,EADA;AAEVtH,0BAAM,EAFI;AAGV0f,4BAAQ6B,YAAY7B,MAHV;AAIV5V,+BAAW,EAJD;AAKVgX,6BAASW,WALC;AAMV9B,0BAAM,KAAKP,UAAL,CAAgBe,WAAWR,IAA3B,EAAiC,CAACQ,WAAW7Y,QAAX,CAAoB3M,MAArB,CAAjC,CANI;AAOV4O,2BAAOgY,YAAYK,KAPT;AAQV/Z,4BAAQ,QARE;AASVyB,6BAASA;AATC,iBAAd;AAWAmX,2BAAWA,SAASpmB,OAAT,CAAiB,KAAjB,EAAwB,EAAxB,EAA4BA,OAA5B,CAAoC,OAApC,EAA6C,EAA7C,EAAiDA,OAAjD,CAAyD,UAAzD,EAAqE,EAArE,CAAX;AACA8lB,2BAAW7Y,QAAX,CAAoBxK,IAApB,CAAyB6kB,OAAzB;AACA,oBAAIF,WAAJ,EAAiB;AACb,yBAAK5B,SAAL,CAAeY,QAAf,EAAyBN,UAAzB,EAAqCC,WAArC,EAAkDC,aAAlD;AACH,iBAFD,MAGK;AACD,yBAAKR,SAAL,CAAeY,QAAf,EAAyBkB,OAAzB,EAAkCvB,WAAlC,EAA+CC,aAA/C;AACH;AACD/W,0BAAU,IAAV;AACAxO,uBAAO,IAAP;AACAymB,8BAAc,IAAd;AACAH,4BAAY,IAAZ;AACAC,6BAAa,IAAb;AACAI,8BAAc,IAAd;AACAE,0BAAU,IAAV;AACAL,4BAAY,IAAZ;AACH,aAvCD,MAwCK;AACD;AACA,oBAAIO,cAAcpC,SAASllB,KAAT,CAAe2mB,YAAf,CAAlB;AACA,oBAAIW,WAAJ,EAAiB;AACb,wBAAIvY,UAAUuY,YAAY,CAAZ,CAAd;AACA,wBAAIpB,WAAWhB,SAASplB,OAAT,CAAiB,MAAMiP,OAAvB,EAAgC,EAAhC,CAAf;AACA,wBAAImY,cAAc,KAAKC,cAAL,CAAoBjB,QAApB,EAA8BnX,OAA9B,CAAlB;AACA,wBAAIqY,UAAU;AACVra,kCAAU,EADA;AAEVtH,8BAAM,EAFI;AAGV0f,gCAAQ,EAHE;AAIV5V,mCAAW,EAJD;AAKVgX,iCAASW,WALC;AAMV9B,8BAAM,KAAKP,UAAL,CAAgBe,WAAWR,IAA3B,EAAiC,CAACQ,WAAW7Y,QAAX,CAAoB3M,MAArB,CAAjC,CANI;AAOV4O,+BAAO,EAPG;AAQV1B,gCAAQ,QARE;AASVyB,iCAASA;AATC,qBAAd;AAWAmX,+BAAWA,SAASpmB,OAAT,CAAiB,KAAjB,EAAwB,EAAxB,EAA4BA,OAA5B,CAAoC,OAApC,EAA6C,EAA7C,EAAiDA,OAAjD,CAAyD,UAAzD,EAAqE,EAArE,CAAX;AACA8lB,+BAAW7Y,QAAX,CAAoBxK,IAApB,CAAyB6kB,OAAzB;AACA,wBAAIF,WAAJ,EAAiB;AACb,6BAAK5B,SAAL,CAAeY,QAAf,EAAyBN,UAAzB,EAAqCC,WAArC,EAAkDC,aAAlD;AACH,qBAFD,MAGK;AACD,6BAAKR,SAAL,CAAeY,QAAf,EAAyBkB,OAAzB,EAAkCvB,WAAlC,EAA+CC,aAA/C;AACH;AACD/W,8BAAU,IAAV;AACAmX,+BAAW,IAAX;AACAgB,kCAAc,IAAd;AACAE,8BAAU,IAAV;AACH;AACDE,8BAAc,IAAd;AACH;AACJ,SA3ED,MA4EK;AACD,gBAAIC,YAAY,+BAAhB;AACA,gBAAIC,cAActC,SAASllB,KAAT,CAAeunB,SAAf,CAAlB;AACA,gBAAIC,WAAJ,EAAiB;AACb,oBAAIzY,UAAUyY,YAAY,CAAZ,CAAd;AACA,oBAAItB,WAAWhB,SAASplB,OAAT,CAAiBynB,SAAjB,EAA4B,EAA5B,CAAf;AACA,oBAAI,KAAKE,WAAL,CAAiB1Y,OAAjB,EAA0BmX,QAA1B,EAAoCN,UAApC,CAAJ,EAAqD;AACjD,wBAAI8B,iBAAiBvV,KAAK8S,KAAL,CAAW9S,KAAKC,SAAL,CAAewT,WAAWR,IAA1B,CAAX,CAArB;AACA,wBAAIuC,iBAAiB,KAAK,CAA1B;AACAD,mCAAehJ,MAAf,CAAsBgJ,eAAetnB,MAAf,GAAwB,CAA9C,EAAiD,CAAjD;AACAunB,qCAAiB,KAAKpC,aAAL,CAAmB,KAAKX,SAAL,CAAeiB,WAAf,CAAnB,EAAgD6B,cAAhD,CAAjB;AACA,yBAAKpC,SAAL,CAAeY,QAAf,EAAyByB,cAAzB,EAAyC9B,WAAzC,EAAsDC,aAAtD;AACAF,+BAAWW,OAAX,GAAqB,IAArB;AACAoB,qCAAiB,IAAjB;AACAD,qCAAiB,IAAjB;AACH;AACD3Y,0BAAU,IAAV;AACAmX,2BAAW,IAAX;AACH,aAfD,MAgBK;AACD,oBAAI,kBAAkBzmB,IAAlB,CAAuBylB,QAAvB,CAAJ,EAAsC;AAClC,wBAAI0C,YAAY1C,SAASvc,OAAT,CAAiB,GAAjB,CAAhB;AACA,wBAAIud,WAAW0B,YAAY,CAAZ,GAAgB1C,SAAS/kB,MAAT,CAAgBynB,YAAY,CAA5B,CAAhB,GAAiD,EAAhE;AACA,wBAAIR,UAAU;AACVra,kCAAU,EADA;AAEVtH,8BAAM,EAFI;AAGV0f,gCAAQ,EAHE;AAIV5V,mCAAW,EAJD;AAKVgX,iCAAS,IALC;AAMVnB,8BAAM,KAAKP,UAAL,CAAgBe,WAAWR,IAA3B,EAAiC,CAACQ,WAAW7Y,QAAX,CAAoB3M,MAArB,CAAjC,CANI;AAOV4O,+BAAO,EAPG;AAQV1B,gCAAQ,QARE;AASVyB,iCAAS;AATC,qBAAd;AAWA6W,+BAAW7Y,QAAX,CAAoBxK,IAApB,CAAyB6kB,OAAzB;AACA,yBAAK9B,SAAL,CAAeY,QAAf,EAAyBN,UAAzB,EAAqCC,WAArC,EAAkDC,aAAlD;AACA8B,gCAAY,IAAZ;AACA1B,+BAAW,IAAX;AACAkB,8BAAU,IAAV;AACH,iBAnBD,MAoBK;AACD,0BAAM,IAAI/gB,KAAJ,CAAU,oBAAoB6e,QAA9B,CAAN;AACH;AACJ;AACJ;AACJ,KA5HD;AA6HA;;;;;;AAMAR,cAAU7lB,SAAV,CAAoB4oB,WAApB,GAAkC,UAAU1Y,OAAV,EAAmBmW,QAAnB,EAA6BU,UAA7B,EAAyC;AACvE,YAAIhlB,QAAQ,IAAZ;AACA,YAAIglB,WAAW7W,OAAX,KAAuBA,OAA3B,EAAoC;AAChC,gBAAI8Y,cAAc,EAAlB;AACAjC,uBAAWW,OAAX,GAAqB,IAArB;AACAX,uBAAW7Y,QAAX,CAAoBlK,GAApB,CAAwB,UAAUyH,OAAV,EAAmB;AACvC,oBAAI,CAAC1J,MAAMoC,OAAN,CAAcsH,QAAQyE,OAAtB,CAAL,EAAqC;AACjC,wBAAI+Y,WAAW,EAAf;AACA,wBAAIC,UAAU,EAAd;AACA,wBAAIzd,QAAQ0E,KAAZ,EAAmB;AACf;AACA,6BAAK,IAAItJ,GAAT,IAAgB4E,QAAQ0E,KAAxB,EAA+B;AAC3B,gCAAIgZ,YAAY1d,QAAQ0E,KAAR,CAActJ,GAAd,CAAhB;AACAsiB,wCAAYA,UAAUloB,OAAV,CAAkB,KAAlB,EAAyB,IAAzB,CAAZ;AACAioB,oCAAQxlB,IAAR,CAAamD,MAAM,KAAN,GAAcsiB,SAAd,GAA0B,IAAvC;AACH;AACJ;AACDF,+BAAWC,QAAQznB,IAAR,CAAa,GAAb,CAAX;AACA,wBAAIgK,QAAQyE,OAAR,KAAoB,MAAxB,EAAgC;AAC5B8Y,uCAAe,MAAMvd,QAAQyE,OAAd,GAAwB,GAAxB,GAA8B+Y,QAA9B,GAAyC,GAAzC,GAA+Cxd,QAAQiF,SAAvD,GAAmE,IAAnE,GAA0EjF,QAAQyE,OAAlF,GAA4F,GAA3G;AACH,qBAFD,MAGK;AACD8Y,uCAAevd,QAAQiF,SAAvB;AACH;AACDwY,8BAAU,IAAV;AACH,iBAnBD,MAoBK;AACDF,mCAAevd,QAAQiF,SAAvB;AACH;AACJ,aAxBD;AAyBAqW,uBAAWrW,SAAX,GAAuBsY,WAAvB;AACA,mBAAO,IAAP;AACH;AACD,eAAO,KAAP;AACH,KAlCD;AAmCA;;;;;;AAMAnD,cAAU7lB,SAAV,CAAoBopB,aAApB,GAAoC,UAAU/C,QAAV,EAAoBgD,OAApB,EAA6B;AAC7D,YAAI3oB,SAAS;AACT2lB,sBAAUA,QADD;AAEThnB,mBAAO;AAFE,SAAb;AAIA,YAAI6nB,YAAYb,QAAhB;AACAa,oBAAYmC,YAAYtlB,SAAZ,IAAyBslB,YAAY,IAArC,GAA4ChD,SAASplB,OAAT,CAAiB,MAAjB,EAAyB,EAAzB,CAA5C,GAA2EolB,QAAvF;AACA,YAAIa,UAAUoC,UAAV,CAAqB,GAArB,CAAJ,EAA+B;AAAE;AAC7BpC,wBAAYA,UAAU5lB,MAAV,CAAiB,CAAjB,CAAZ;AACA,gBAAIioB,aAAarC,UAAUpd,OAAV,CAAkB,KAAlB,CAAjB;AACA,gBAAI0f,YAAYtC,UAAUpd,OAAV,CAAkB,GAAlB,CAAhB;AACA,gBAAIyf,aAAaC,SAAb,IAA0BD,cAAc,CAA5C,EAA+C;AAC3C;AACA7oB,uBAAOrB,KAAP,GAAe6nB,UAAU5lB,MAAV,CAAiB,CAAjB,EAAoBioB,UAApB,CAAf;AACArC,4BAAYA,UAAU5lB,MAAV,CAAiBioB,aAAa,CAA9B,CAAZ;AACA,oBAAIE,WAAW,CAACvC,UAAUoC,UAAV,CAAqB,GAArB,CAAD,GAA6B,KAAKF,aAAL,CAAmBlC,SAAnB,EAA8B,GAA9B,CAA7B,GAAkE;AAC7Eb,8BAAUa,SADmE;AAE7E7nB,2BAAO;AAFsE,iBAAjF;AAIAqB,uBAAOrB,KAAP,IAAgB,QAAQoqB,SAASpqB,KAAjC;AACAqB,uBAAO2lB,QAAP,GAAkBoD,SAASpD,QAA3B;AACAoD,2BAAW,IAAX;AACH,aAXD,MAYK;AACD,oBAAID,YAAY,CAAhB,EAAmB;AACf9oB,2BAAOrB,KAAP,GAAe6nB,UAAU5lB,MAAV,CAAiB,CAAjB,EAAoBkoB,SAApB,CAAf;AACA9oB,2BAAO2lB,QAAP,GAAkBa,UAAU5lB,MAAV,CAAiBkoB,YAAY,CAA7B,CAAlB;AACH,iBAHD,MAIK;AACD9oB,2BAAOrB,KAAP,GAAe,EAAf;AACAqB,2BAAO2lB,QAAP,GAAkBa,UAAU5lB,MAAV,CAAiB,CAAjB,CAAlB;AACH;AACJ;AACDioB,yBAAa,IAAb;AACAC,wBAAY,IAAZ;AACH,SA5BD,MA6BK,IAAItC,UAAUoC,UAAV,CAAqB,GAArB,CAAJ,EAA+B;AAChCpC,wBAAYA,UAAU5lB,MAAV,CAAiB,CAAjB,CAAZ;AACA,gBAAIioB,aAAarC,UAAUpd,OAAV,CAAkB,KAAlB,CAAjB;AACA,gBAAI0f,YAAYtC,UAAUpd,OAAV,CAAkB,GAAlB,CAAhB;AACA,gBAAIyf,aAAaC,SAAb,IAA0BD,cAAc,CAA5C,EAA+C;AAC3C;AACA7oB,uBAAOrB,KAAP,GAAe6nB,UAAU5lB,MAAV,CAAiB,CAAjB,EAAoBioB,UAApB,CAAf;AACArC,4BAAYA,UAAU5lB,MAAV,CAAiBioB,aAAa,CAA9B,CAAZ;AACA,oBAAIE,WAAW,CAACvC,UAAUoC,UAAV,CAAqB,GAArB,CAAD,GAA6B,KAAKF,aAAL,CAAmBlC,SAAnB,EAA8B,GAA9B,CAA7B,GAAkE;AAC7Eb,8BAAUa,SADmE;AAE7E7nB,2BAAO;AAFsE,iBAAjF;AAIAqB,uBAAOrB,KAAP,IAAgB,QAAQoqB,SAASpqB,KAAjC;AACAqB,uBAAO2lB,QAAP,GAAkBoD,SAASpD,QAA3B;AACAoD,2BAAW,IAAX;AACH,aAXD,MAYK;AACD,oBAAID,YAAY,CAAhB,EAAmB;AACf9oB,2BAAOrB,KAAP,GAAe6nB,UAAU5lB,MAAV,CAAiB,CAAjB,EAAoBkoB,SAApB,CAAf;AACA9oB,2BAAO2lB,QAAP,GAAkBa,UAAU5lB,MAAV,CAAiBkoB,YAAY,CAA7B,CAAlB;AACH,iBAHD,MAIK;AACD9oB,2BAAOrB,KAAP,GAAe,EAAf;AACAqB,2BAAO2lB,QAAP,GAAkBa,UAAU5lB,MAAV,CAAiB,CAAjB,CAAlB;AACH;AACJ;AACDioB,yBAAa,IAAb;AACAC,wBAAY,IAAZ;AACH,SA5BI,MA6BA;AACD,gBAAIH,YAAY,GAAhB,EAAqB;AACjB,oBAAIE,aAAarC,UAAUpd,OAAV,CAAkB,KAAlB,CAAjB;AACA,oBAAI0f,YAAYtC,UAAUpd,OAAV,CAAkB,GAAlB,CAAhB;AACA,oBAAIyf,aAAaC,SAAb,IAA0BD,cAAc,CAA5C,EAA+C;AAC3C7oB,2BAAOrB,KAAP,GAAe6nB,UAAU5lB,MAAV,CAAiB,CAAjB,EAAoBioB,UAApB,CAAf;AACArC,gCAAYA,UAAU5lB,MAAV,CAAiBioB,aAAa,CAA9B,CAAZ;AACA,wBAAIE,WAAW,CAACvC,UAAUoC,UAAV,CAAqB,GAArB,CAAD,GAA6B,KAAKF,aAAL,CAAmBlC,SAAnB,EAA8B,GAA9B,CAA7B,GAAkE;AAC7Eb,kCAAUa,SADmE;AAE7E7nB,+BAAO;AAFsE,qBAAjF;AAIAqB,2BAAOrB,KAAP,IAAgB,QAAQoqB,SAASpqB,KAAjC;AACAqB,2BAAO2lB,QAAP,GAAkBoD,SAASpD,QAA3B;AACAoD,+BAAW,IAAX;AACH,iBAVD,MAWK;AACD,wBAAID,YAAY,CAAhB,EAAmB;AACf9oB,+BAAOrB,KAAP,GAAe6nB,UAAU5lB,MAAV,CAAiB,CAAjB,EAAoBkoB,SAApB,CAAf;AACA9oB,+BAAO2lB,QAAP,GAAkBa,UAAU5lB,MAAV,CAAiBkoB,YAAY,CAA7B,CAAlB;AACH,qBAHD,MAIK;AACD9oB,+BAAOrB,KAAP,GAAe,EAAf;AACAqB,+BAAO2lB,QAAP,GAAkBa,UAAU5lB,MAAV,CAAiB,CAAjB,CAAlB;AACH;AACJ;AACJ,aAxBD,MAyBK,IAAI+nB,YAAY,GAAhB,EAAqB;AACtB,oBAAIE,aAAarC,UAAUpd,OAAV,CAAkB,KAAlB,CAAjB;AACA,oBAAI0f,YAAYtC,UAAUpd,OAAV,CAAkB,GAAlB,CAAhB;AACA,oBAAIyf,aAAaC,SAAb,IAA0BD,cAAc,CAA5C,EAA+C;AAC3C;AACA7oB,2BAAOrB,KAAP,GAAe6nB,UAAU5lB,MAAV,CAAiB,CAAjB,EAAoBioB,UAApB,CAAf;AACArC,gCAAYA,UAAU5lB,MAAV,CAAiBioB,aAAa,CAA9B,CAAZ;AACA,wBAAIE,WAAW,CAACvC,UAAUoC,UAAV,CAAqB,GAArB,CAAD,GAA6B,KAAKF,aAAL,CAAmBlC,SAAnB,EAA8B,GAA9B,CAA7B,GAAkE;AAC7Eb,kCAAUa,SADmE;AAE7E7nB,+BAAO;AAFsE,qBAAjF;AAIAqB,2BAAOrB,KAAP,IAAgB,QAAQoqB,SAASpqB,KAAjC;AACAqB,2BAAO2lB,QAAP,GAAkBoD,SAASpD,QAA3B;AACAoD,+BAAW,IAAX;AACH,iBAXD,MAYK;AACD,wBAAID,YAAY,CAAhB,EAAmB;AACf9oB,+BAAOrB,KAAP,GAAe6nB,UAAU5lB,MAAV,CAAiB,CAAjB,EAAoBkoB,SAApB,CAAf;AACA9oB,+BAAO2lB,QAAP,GAAkBa,UAAU5lB,MAAV,CAAiBkoB,YAAY,CAA7B,CAAlB;AACH,qBAHD,MAIK;AACD9oB,+BAAOrB,KAAP,GAAe,EAAf;AACAqB,+BAAO2lB,QAAP,GAAkBa,UAAU5lB,MAAV,CAAiB,CAAjB,CAAlB;AACH;AACJ;AACDioB,6BAAa,IAAb;AACAC,4BAAY,IAAZ;AACH;AACJ;AACD,eAAO9oB,MAAP;AACH,KAzHD;AA0HA;;;;;AAKAmlB,cAAU7lB,SAAV,CAAoBooB,SAApB,GAAgC,UAAU/B,QAAV,EAAoB;AAChD,YAAIqD,aAAa,6BAAjB;AACA,YAAIC,gBAAgB,oCAApB;AACA,YAAIC,iBAAiB,kCAArB;AACA,YAAI1C,YAAYb,QAAhB;AACA,YAAI3lB,SAAS;AACT8nB,mBAAO,EADE;AAETlC,oBAAQ,EAFC;AAGTD,sBAAU;AAHD,SAAb;AAKAa,oBAAYA,UAAUjmB,OAAV,CAAkB,YAAlB,EAAgC,EAAhC,CAAZ;AACA,eAAOyoB,WAAW9oB,IAAX,CAAgBsmB,SAAhB,KAA8ByC,cAAc/oB,IAAd,CAAmBsmB,SAAnB,CAA9B,IAA+D0C,eAAehpB,IAAf,CAAoBsmB,SAApB,CAAtE,EAAsG;AAClG,gBAAIwC,WAAW9oB,IAAX,CAAgBsmB,SAAhB,CAAJ,EAAgC;AAC5B,oBAAI2C,YAAY3C,UAAU/lB,KAAV,CAAgBuoB,UAAhB,CAAhB;AACA,oBAAII,UAAUD,UAAU,CAAV,CAAd;AACA,oBAAIE,kBAAkB,KAAK,CAA3B;AACA7C,4BAAYA,UAAUjmB,OAAV,CAAkByoB,UAAlB,EAA8B,EAA9B,EAAkCzoB,OAAlC,CAA0C,MAA1C,EAAkD,EAAlD,CAAZ;AACA8oB,kCAAkB,KAAKX,aAAL,CAAmBlC,SAAnB,CAAlB;AACAxmB,uBAAO8nB,KAAP,CAAasB,OAAb,IAAwBC,gBAAgB1qB,KAAxC;AACA6nB,4BAAY6C,gBAAgB1D,QAA5B;AACAa,4BAAYA,UAAUjmB,OAAV,CAAkB,YAAlB,EAAgC,EAAhC,CAAZ;AACA4oB,4BAAY,IAAZ;AACAC,0BAAU,IAAV;AACH,aAXD,MAYK,IAAIH,cAAc/oB,IAAd,CAAmBsmB,SAAnB,CAAJ,EAAmC;AACpC,oBAAI8C,eAAe9C,UAAU/lB,KAAV,CAAgBwoB,aAAhB,CAAnB;AACAjpB,uBAAO8nB,KAAP,CAAa,KAAb,IAAsBwB,aAAa,CAAb,CAAtB;AACA9C,4BAAYA,UAAUjmB,OAAV,CAAkB0oB,aAAlB,EAAiC,EAAjC,EAAqC1oB,OAArC,CAA6C,YAA7C,EAA2D,EAA3D,CAAZ;AACA+oB,+BAAe,IAAf;AACH,aALI,MAMA,IAAIJ,eAAehpB,IAAf,CAAoBsmB,SAApB,CAAJ,EAAoC;AACrC,oBAAI+C,mBAAmB/C,UAAU/lB,KAAV,CAAgByoB,cAAhB,CAAvB;AACAlpB,uBAAO8nB,KAAP,CAAayB,iBAAiB,CAAjB,CAAb,IAAoCA,iBAAiB,CAAjB,CAApC;AACA/C,4BAAYA,UAAUjmB,OAAV,CAAkB2oB,cAAlB,EAAkC,EAAlC,EAAsC3oB,OAAtC,CAA8C,YAA9C,EAA4D,EAA5D,CAAZ;AACAgpB,mCAAmB,IAAnB;AACH;AACJ;AACDvpB,eAAO2lB,QAAP,GAAkBa,SAAlB;AACAwC,qBAAa,IAAb;AACAC,wBAAgB,IAAhB;AACAC,yBAAiB,IAAjB;AACA,eAAOlpB,MAAP;AACH,KA1CD;AA2CA;;;;;AAKAmlB,cAAU7lB,SAAV,CAAoBsoB,cAApB,GAAqC,UAAUjC,QAAV,EAAoBnW,OAApB,EAA6B;AAC9D,aAAK,IAAI0J,KAAK,CAAT,EAAYI,KAAK,KAAK8L,gBAA3B,EAA6ClM,KAAKI,GAAGzY,MAArD,EAA6DqY,IAA7D,EAAmE;AAC/D,gBAAIsQ,MAAMlQ,GAAGJ,EAAH,CAAV;AACA,gBAAIsQ,IAAItpB,IAAJ,CAASsP,OAAT,CAAJ,EAAuB;AACnB,uBAAO,IAAP;AACH;AACJ;AACD,eAAO,YAAWtP,IAAX,CAAgBylB,QAAhB;AAAP;AACH,KARD;AASAR,cAAU/S,SAAV,GAAsB,WAAtB;AACA,WAAO+S,SAAP;AACH,CAjgB8B,CAigB7B3lB,eAAeqE,MAjgBc,CAA/B;AAkgBAtF,QAAQ4mB,SAAR,GAAoBA,SAApB;AACA,qC;;;;;;;ACnhBa;;AACb1mB,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACAJ,QAAQkrB,qBAAR,GAAgC;AAC5BC,YAAQ,QADoB;AAE5BC,YAAQ,QAFoB;AAG5BC,UAAM,MAHsB;AAI5BC,gBAAY,YAJgB;AAK5BC,YAAQ,QALoB;AAM5BC,YAAQ;AANoB,CAAhC;AAQA,2C;;;;;;;ACVa;;AACb,IAAIlrB,YAAa,aAAQ,UAAKA,SAAd,IAA6B,YAAY;AACrD,QAAIC,iBAAgB,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,yBAAgBL,OAAOQ,cAAP,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUJ,CAAV,EAAaC,CAAb,EAAgB;AAAED,cAAEG,SAAF,GAAcF,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,iBAAK,IAAIV,CAAT,IAAcU,CAAd;AAAiB,oBAAIA,EAAER,cAAF,CAAiBF,CAAjB,CAAJ,EAAyBS,EAAET,CAAF,IAAOU,EAAEV,CAAF,CAAP;AAA1C;AAAwD,SAF9E;AAGA,eAAOQ,eAAcC,CAAd,EAAiBC,CAAjB,CAAP;AACH,KALD;AAMA,WAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,uBAAcC,CAAd,EAAiBC,CAAjB;AACA,iBAASI,EAAT,GAAc;AAAE,iBAAKC,WAAL,GAAmBN,CAAnB;AAAuB;AACvCA,UAAEO,SAAF,GAAcN,MAAM,IAAN,GAAaP,OAAOc,MAAP,CAAcP,CAAd,CAAb,IAAiCI,GAAGE,SAAH,GAAeN,EAAEM,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAZ2C,EAA5C;AAaA,IAAI4qB,WAAY,aAAQ,UAAKA,QAAd,IAA2B,YAAY;AAClDA,eAAWvrB,OAAO0K,MAAP,IAAiB,UAASsF,CAAT,EAAY;AACpC,aAAK,IAAID,CAAJ,EAAO/I,IAAI,CAAX,EAAcmJ,IAAIhP,UAAUiB,MAAjC,EAAyC4E,IAAImJ,CAA7C,EAAgDnJ,GAAhD,EAAqD;AACjD+I,gBAAI5O,UAAU6F,CAAV,CAAJ;AACA,iBAAK,IAAInH,CAAT,IAAckQ,CAAd;AAAiB,oBAAI/P,OAAOa,SAAP,CAAiBd,cAAjB,CAAgC6F,IAAhC,CAAqCmK,CAArC,EAAwClQ,CAAxC,CAAJ,EACbmQ,EAAEnQ,CAAF,IAAOkQ,EAAElQ,CAAF,CAAP;AADJ;AAEH;AACD,eAAOmQ,CAAP;AACH,KAPD;AAQA,WAAOub,SAASrqB,KAAT,CAAe,IAAf,EAAqBC,SAArB,CAAP;AACH,CAVD;AAWA,IAAI0T,iBAAkB,aAAQ,UAAKA,cAAd,IAAiC,YAAY;AAC9D,SAAK,IAAI9E,IAAI,CAAR,EAAW/I,IAAI,CAAf,EAAkB8N,KAAK3T,UAAUiB,MAAtC,EAA8C4E,IAAI8N,EAAlD,EAAsD9N,GAAtD;AAA2D+I,aAAK5O,UAAU6F,CAAV,EAAa5E,MAAlB;AAA3D,KACA,KAAK,IAAI4S,IAAItU,MAAMqP,CAAN,CAAR,EAAkBkF,IAAI,CAAtB,EAAyBjO,IAAI,CAAlC,EAAqCA,IAAI8N,EAAzC,EAA6C9N,GAA7C;AACI,aAAK,IAAIN,IAAIvF,UAAU6F,CAAV,CAAR,EAAsBqJ,IAAI,CAA1B,EAA6B6E,KAAKxO,EAAEtE,MAAzC,EAAiDiO,IAAI6E,EAArD,EAAyD7E,KAAK4E,GAA9D;AACID,cAAEC,CAAF,IAAOvO,EAAE2J,CAAF,CAAP;AADJ;AADJ,KAGA,OAAO2E,CAAP;AACH,CAND;AAOAhV,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIa,iBAAiBZ,mBAAOA,CAAC,CAAR,CAArB;AACA,IAAIqrB,oBAAoBrrB,mBAAOA,CAAC,EAAR,CAAxB;AACA,IAAIsrB,sBAAsBtrB,mBAAOA,CAAC,EAAR,CAA1B;AACA;;;;AAIA,IAAIurB,gBAAgB,aAAe,UAAUzqB,MAAV,EAAkB;AACjDb,cAAUsrB,aAAV,EAAyBzqB,MAAzB;AACA,aAASyqB,aAAT,CAAuBC,UAAvB,EAAmC;AAC/B,YAAI/oB,QAAQ3B,OAAO2E,IAAP,CAAY,IAAZ,KAAqB,IAAjC;AACAhD,cAAM+oB,UAAN,GAAmBA,UAAnB;AACA/oB,cAAMgpB,MAAN,GAAe,EAAf;AACAhpB,cAAMukB,MAAN,GAAe,EAAf;AACAvkB,cAAMgpB,MAAN,CAAarnB,IAAb,CAAkB,IAAIinB,kBAAkBK,UAAtB,EAAlB;AACAjpB,cAAMgpB,MAAN,CAAarnB,IAAb,CAAkB,IAAIinB,kBAAkBM,WAAtB,EAAlB;AACAlpB,cAAMgpB,MAAN,CAAarnB,IAAb,CAAkB,IAAIinB,kBAAkBO,QAAtB,EAAlB;AACAnpB,cAAMopB,WAAN,GAAoB,IAAIP,oBAAoBjd,iBAAxB,EAApB;AACA,eAAO5L,KAAP;AACH;AACD8oB,kBAAc7qB,SAAd,CAAwBorB,IAAxB,GAA+B,UAAUC,SAAV,EAAqB3Z,IAArB,EAA2BuN,QAA3B,EAAqC;AAChE,YAAIqM,QAAQ,wBAAwB,KAAKroB,IAAL,EAApC;AACA,YAAI,CAAC,KAAKqjB,MAAL,CAAY+E,SAAZ,CAAL,EAA6B;AACzB,iBAAK/E,MAAL,CAAY+E,SAAZ,IAAyB,EAAzB;AACH;AACD,YAAI,CAAC,KAAK/E,MAAL,CAAY+E,SAAZ,EAAuB3Z,IAAvB,CAAL,EAAmC;AAC/B,iBAAK4U,MAAL,CAAY+E,SAAZ,EAAuB3Z,IAAvB,IAA+B,EAA/B;AACH;AACD,aAAK4U,MAAL,CAAY+E,SAAZ,EAAuB3Z,IAAvB,EAA6B4Z,KAA7B,IAAsCrM,QAAtC;AACA,eAAOqM,KAAP;AACH,KAVD;AAWAT,kBAAc7qB,SAAd,CAAwBurB,MAAxB,GAAiC,UAAUF,SAAV,EAAqB3Z,IAArB,EAA2B8Z,OAA3B,EAAoC;AACjE,YAAI,KAAKlF,MAAL,CAAY+E,SAAZ,CAAJ,EAA4B;AACxB,gBAAI,KAAK/E,MAAL,CAAY+E,SAAZ,EAAuB3Z,IAAvB,CAAJ,EAAkC;AAC9B,uBAAO,KAAK4U,MAAL,CAAY+E,SAAZ,EAAuB3Z,IAAvB,EAA6B8Z,OAA7B,CAAP;AACA,oBAAIrsB,OAAO2R,IAAP,CAAY,KAAKwV,MAAL,CAAY+E,SAAZ,EAAuB3Z,IAAvB,CAAZ,EAA0CnQ,MAA1C,IAAoD,CAAxD,EAA2D;AACvD,2BAAO,KAAK+kB,MAAL,CAAY+E,SAAZ,EAAuB3Z,IAAvB,CAAP;AACH;AACJ;AACD,gBAAIvS,OAAO2R,IAAP,CAAY,KAAKwV,MAAL,CAAY+E,SAAZ,CAAZ,EAAoC9pB,MAApC,IAA8C,CAAlD,EAAqD;AACjD,uBAAO,KAAK+kB,MAAL,CAAY+E,SAAZ,CAAP;AACH;AACJ;AACJ,KAZD;AAaAR,kBAAc7qB,SAAd,CAAwByrB,iBAAxB,GAA4C,UAAUX,UAAV,EAAsB;AAC9D,aAAKA,UAAL,GAAkBA,UAAlB;AACH,KAFD;AAGA;;;;;;AAMAD,kBAAc7qB,SAAd,CAAwB0rB,MAAxB,GAAiC,UAAUC,OAAV,EAAmBC,UAAnB,EAA+B/pB,SAA/B,EAA0CujB,OAA1C,EAAmD;AAChF,YAAIyG,YAAYvY,KAAK8S,KAAL,CAAW9S,KAAKC,SAAL,CAAeoY,OAAf,CAAX,CAAhB;AACA,YAAIG,kBAAkB,gBAAtB;AACA,YAAI1G,WAAW,CAAC,KAAKjhB,OAAL,CAAaihB,QAAQiG,SAArB,CAAhB,EAAiD;AAC7C,gBAAIU,cAAc3G,QAAQiG,SAAR,GAAoB,GAApB,GAA0BS,eAA5C;AACA,gBAAIE,WAAW,KAAKloB,QAAL,CAAc,KAAKwiB,MAAnB,EAA2ByF,WAA3B,CAAf;AACA,gBAAIC,QAAJ,EAAc;AACV,qBAAK,IAAIpS,KAAK,CAAT,EAAYI,KAAK7a,OAAO2R,IAAP,CAAYkb,QAAZ,CAAtB,EAA6CpS,KAAKI,GAAGzY,MAArD,EAA6DqY,IAA7D,EAAmE;AAC/D,wBAAI0R,QAAQtR,GAAGJ,EAAH,CAAZ;AACA,wBAAIqS,gBAAgBD,SAASV,KAAT,CAApB;AACA,wBAAI,OAAOW,aAAP,KAAyB,UAA7B,EAAyC;AACrC,4BAAIC,UAAU;AACVC,0CAAc,KADJ;AAEVC,kCAAMP;AAFI,yBAAd;AAIAI,sCAAcC,OAAd;AACA,4BAAIA,QAAQC,YAAZ,EAA0B;AACtB;AACH;AACJ;AACJ;AACJ;AACJ;AACDN,kBAAUtF,IAAV,GAAiBnB,UAAWA,QAAQiH,QAAR,IAAoB,EAA/B,GAAqC,EAAtD,CAvBgF,CAuBtB;AAC1DjH,mBAAWA,QAAQlX,QAAnB,IAA+B,KAAKoe,cAAL,CAAoBT,SAApB,EAA+BzG,QAAQlX,QAAvC,CAA/B;AACA,aAAKqe,OAAL,CAAa;AACT1qB,uBAAWA,SADF;AAET2qB,oBAAQZ,cAAcA,WAAW1d,QAAX,CAAoB3M,MAApB,GAA6B,CAF1C;AAGToqB,qBAASE,SAHA;AAITD,wBAAYA,UAJH;AAKTa,yBAAa,IALJ;AAMTJ,sBAAUjH,UAAWA,QAAQiH,QAAR,IAAoB,EAA/B,GAAqC,EANtC;AAOTK,6BAAiBd,aAAa,CAAC,KAAKznB,OAAL,CAAaynB,WAAW7c,SAAxB,CAAd,GAAmD;AAP3D,SAAb;AASA,eAAO8c,SAAP;AACH,KAnCD;AAoCA;;;;;;AAMAhB,kBAAc7qB,SAAd,CAAwBssB,cAAxB,GAAyC,UAAUK,SAAV,EAAqBze,QAArB,EAA+B;AACpE;AACA,YAAIA,YAAYA,SAAS3M,MAAT,GAAkB,CAAlC,EAAqC;AACjC,gBAAIqrB,oBAAoB,qCAAxB;AACA,iBAAK,IAAIzmB,IAAI,CAAb,EAAgBA,IAAIwmB,UAAUze,QAAV,CAAmB3M,MAAvC,EAA+C4E,GAA/C,EAAoD;AAChD,oBAAI0mB,QAAQF,UAAUze,QAAV,CAAmB/H,CAAnB,CAAZ;AACA,oBAAI0mB,MAAMpe,MAAN,KAAiB,QAArB,EAA+B;AAC3B;AACA,wBAAI,uCAAuC7N,IAAvC,CAA4CisB,MAAMnc,SAAlD,KACA,oBAAoB9P,IAApB,CAAyBisB,MAAMnc,SAA/B,CADA,IAEAmc,MAAM3c,OAAN,KAAkB,SAFlB,IAGA,uCAAuCtP,IAAvC,CAA4CisB,MAAMnc,SAAlD,CAHA,IAIA,oBAAoB9P,IAApB,CAAyBisB,MAAMnc,SAA/B,CAJA,IAKAmc,MAAM3c,OAAN,KAAkB,SALlB,IAMA,2CAA2CtP,IAA3C,CAAgDisB,MAAMnc,SAAtD,CANA,IAOA,uFAAuF9P,IAAvF,CAA4FisB,MAAMnc,SAAlG,CAPA,IAQAkc,kBAAkBhsB,IAAlB,CAAuBisB,MAAM3c,OAA7B,CARJ,EAQ2C;AACvC;AACA;AACA,4BAAI2c,MAAM3c,OAAN,CAAc7G,WAAd,OAAgC,SAAhC,IAA6CwjB,MAAM3c,OAAN,CAAc7G,WAAd,OAAgC,SAAjF,EAA4F;AACxF,gCAAIyjB,eAAe,KAAnB;AACA,gCAAIC,eAAe,6BAAnB;AACA,iCAAK,IAAIvd,IAAI,CAAR,EAAW2T,OAAOjV,SAAS3M,MAAhC,EAAwCiO,IAAI2T,IAA5C,EAAkD3T,GAAlD,EAAuD;AACnD,oCAAIwd,iBAAiB9e,SAASsB,CAAT,EAAYU,OAAZ,CAAoB/O,KAApB,CAA0B4rB,YAA1B,CAArB;AACA,oCAAIC,cAAJ,EAAoB;AAChB,wCAAIC,gBAAgB,oBAAoBD,eAAe,CAAf,CAAxC;AACA,wCAAIC,kBAAkB/e,SAASsB,CAAT,EAAYU,OAAlC,EAA2C;AACvC4c,uDAAe,IAAf;AACA;AACH;AACDE,qDAAiB,IAAjB;AACH;AACD9e,yCAASsB,CAAT,EAAY0d,SAAZ,GAAwB,IAAxB;AACH;AACDH,2CAAe,IAAf;AACA,gCAAI,CAACD,YAAL,EAAmB;AACf,oCAAIzB,YAAY,KAAKP,UAAL,CAAgBqC,IAAhB,CAAqBR,SAArB,CAAhB;AACA,qCAAK7B,UAAL,CAAgBsC,SAAhB,CAA0B/B,SAA1B,EAAqCnd,QAArC,EAA+C/H,CAA/C;AACA,qCAAK2kB,UAAL,CAAgBlO,KAAhB,CAAsByO,SAAtB;AACA;AACH;AACJ,yBAtBD,MAuBK;AACD,gCAAIgC,eAAeR,MAAM3c,OAAN,CAAc/O,KAAd,CAAoByrB,iBAApB,CAAnB;AACA,gCAAIS,YAAJ,EAAkB;AACd,oCAAIC,aAAa,oBAAoBD,aAAa,CAAb,CAArC;AACA,qCAAK,IAAI7d,IAAI,CAAR,EAAW2T,OAAOjV,SAAS3M,MAAhC,EAAwCiO,IAAI2T,IAA5C,EAAkD3T,GAAlD,EAAuD;AACnD,wCAAI8d,eAAepf,SAASsB,CAAT,EAAYU,OAA/B,EAAwC;AACpC,6CAAK,IAAIgE,IAAI,CAAR,EAAWqZ,OAAOrf,SAASsB,CAAT,EAAYtB,QAAZ,CAAqB3M,MAA5C,EAAoD2S,IAAIqZ,IAAxD,EAA8DrZ,GAA9D,EAAmE;AAC/DhG,qDAASsB,CAAT,EAAYtB,QAAZ,CAAqBgG,CAArB,EAAwBgZ,SAAxB,GAAoC,IAApC;AACH;AACD,4CAAI7B,YAAY,KAAKP,UAAL,CAAgBqC,IAAhB,CAAqBR,SAArB,CAAhB;AACA,6CAAK7B,UAAL,CAAgBsC,SAAhB,CAA0B/B,SAA1B,EAAqCnd,SAASsB,CAAT,EAAYtB,QAAjD,EAA2D/H,CAA3D;AACA,6CAAK2kB,UAAL,CAAgBlO,KAAhB,CAAsByO,SAAtB;AACA;AACH;AACJ;AACJ,6BAbD,MAcK;AACD;AACA,qCAAKiB,cAAL,CAAoBK,UAAUze,QAAV,CAAmB/H,CAAnB,CAApB,EAA2C+H,QAA3C;AACH;AACJ;AACJ;AACJ;AACJ;AACJ;AACJ,KAnED;AAoEA2c,kBAAc7qB,SAAd,CAAwBusB,OAAxB,GAAkC,UAAU1e,KAAV,EAAiB;AAC/C,YAAImM,EAAJ,EAAQqJ,EAAR;AACA,YAAImK,eAAe9C,SAASA,SAAS,EAAT,EAAa7c,MAAM8d,OAAN,CAAc/kB,IAA3B,CAAT,EAA4CiH,MAAM4e,WAAN,IAAqB,EAAjE,CAAnB;AACA,YAAIgB,iBAAiB,EAArB;AACA;AACA;AACA;AACA,YAAIf,kBAAkB,CAAC7e,MAAM6e,eAAP,GAA0B7e,MAAM+d,UAAN,GAAmB,CAAC,KAAKznB,OAAL,CAAa0J,MAAM+d,UAAN,CAAiB7c,SAA9B,CAApB,GAA+D,KAAzF,GAAkG,IAAxH;AACA,YAAI2e,aAAa,KAAjB;AACA,YAAIC,kBAAkB,KAAtB;AACA,YAAIC,qBAAqB,EAAzB;AACA,YAAIC,SAAShgB,MAAM8d,OAAN,CAAczd,QAAd,CAAuB3M,MAApC;AACA,YAAI0M,iBAAiB,CAArB;AACA;AACA,aAAK,IAAI6f,SAAS,CAAlB,EAAqBA,SAASD,MAA9B,EAAsCC,QAAtC,EAAgD;AAC5C,gBAAItf,MAAMX,MAAM8d,OAAN,CAAczd,QAAd,CAAuB4f,MAAvB,CAAV;AACA,gBAAI,CAAC,kBAAkBltB,IAAlB,CAAuB4N,IAAI0B,OAA3B,CAAL,EAA0C;AACtC,oBAAI,CAAC,KAAK/L,OAAL,CAAaqK,IAAI2B,KAAJ,CAAU,QAAV,CAAb,CAAD,IAAsC3B,IAAI0B,OAAJ,KAAgB,SAA1D,EAAqE;AACjE;AACA,wBAAI6d,UAAU,KAAKC,YAAL,CAAkBxf,GAAlB,EAAuBX,MAAMhM,SAA7B,EAAwC2rB,YAAxC,CAAd;AACA,wBAAIO,QAAQxsB,MAAR,GAAiB,CAArB,EAAwB;AACpB,yBAACyY,KAAKnM,MAAM8d,OAAN,CAAczd,QAApB,EAA8B2R,MAA9B,CAAqCxf,KAArC,CAA2C2Z,EAA3C,EAA+ChG,eAAe,CAAC8Z,MAAD,EAAS,CAAT,CAAf,EAA4BC,OAA5B,CAA/C;AACAvf,8BAAMX,MAAM8d,OAAN,CAAczd,QAAd,CAAuB4f,MAAvB,CAAN;AACAD,kCAAUE,QAAQxsB,MAAR,GAAiB,CAA3B;AACAmsB,qCAAa,IAAb;AACH,qBALD,MAMK;AACD,+BAAO7f,MAAM8d,OAAN,CAAczd,QAAd,CAAuB4f,MAAvB,EAA+B3d,KAA/B,CAAqC,QAArC,CAAP;AACAtC,8BAAM8d,OAAN,CAAczd,QAAd,CAAuB4f,MAAvB,EAA+Brf,MAA/B,GAAwC,QAAxC;AACH;AACJ;AACD,oBAAID,IAAI0B,OAAJ,KAAgB,SAApB,EAA+B;AAC3B;AACA,wBAAI+d,cAAc,KAAKC,aAAL,CAAmB1f,GAAnB,EAAwBX,MAAMhM,SAA9B,EAAyC2rB,YAAzC,CAAlB;AACA,wBAAIS,YAAY1sB,MAAZ,GAAqB,CAAzB,EAA4B;AACxB,yBAAC8hB,KAAKxV,MAAM8d,OAAN,CAAczd,QAApB,EAA8B2R,MAA9B,CAAqCxf,KAArC,CAA2CgjB,EAA3C,EAA+CrP,eAAe,CAAC8Z,MAAD,EAAS,CAAT,CAAf,EAA4BG,WAA5B,CAA/C;AACAzf,8BAAMX,MAAM8d,OAAN,CAAczd,QAAd,CAAuB4f,MAAvB,CAAN;AACAD,kCAAUI,YAAY1sB,MAAZ,GAAqB,CAA/B;AACAmsB,qCAAa,IAAb;AACH,qBALD,MAMK;AACD7f,8BAAM8d,OAAN,CAAczd,QAAd,CAAuB4f,MAAvB,EAA+Brf,MAA/B,GAAwC,QAAxC;AACH;AACDif,iCAAa,IAAb;AACH;AACDlf,oBAAI+X,IAAJ,GAAWvS,eAAenG,MAAM8d,OAAN,CAAcpF,IAA7B,EAAmC,CAACuH,MAAD,CAAnC,CAAX,CA7BsC,CA6BmB;AACzD;AACA,oBAAI,KAAKK,eAAL,CAAqB3f,GAArB,EAA0BX,MAAMhM,SAAhC,EAA2C6oB,SAASA,SAAS,EAAT,EAAa8C,YAAb,CAAT,EAAsChf,IAAI5H,IAAJ,IAAY,EAAlD,CAA3C,CAAJ,EAAwG;AACpG;AACA+mB,sCAAkB,IAAlB;AACH;AACD;AACA,oBAAIS,aAAa,CAAC1B,eAAD,GAAmB,KAAKvB,WAAL,CAAiBvd,IAAjB,CAAsB;AACtDY,yBAAKA,GADiD;AAEtD6f,8BAAUP,MAF4C;AAGtDQ,0BAAMzgB,MAAMhM,SAAN,CAAgBysB,IAHgC;AAItDrgB,oCAAgBA,cAJsC;AAKtDH,kCAAcD,MAAM+d,UALkC;AAMtD2C,gCAAYT,WAAWD,SAAS;AANsB,iBAAtB,CAAnB,GAOZ;AACD7f,gCAAY,CADX;AAEDD,8BAAU;AAFT,iBAPL;AAWAE,iCAAiBmgB,WAAWpgB,UAA5B;AACA;AACA,oBAAIQ,IAAIN,QAAJ,CAAa3M,MAAb,GAAsB,CAA1B,EAA6B;AACzB,wBAAIitB,UAAU;AACV3sB,mCAAWgM,MAAMhM,SADP;AAEV2qB,gCAAQ3e,MAAM2e,MAFJ;AAGVb,iCAASnd,GAHC;AAIVod,oCAAYwC,WAAWrgB,QAJb;AAKV0e,qCAAae,YALH;AAMViB,0CAAkBf,UANR;AAOVrB,kCAAUxe,MAAMwe,QAPN;AAQVK,yCAAiBA;AARP,qBAAd;AAUA,wBAAIgC,WAAW,KAAKnC,OAAL,CAAaiC,OAAb,CAAf;AACA,wBAAIE,SAASf,eAAb,EAA8B;AAC1B;AACAnf,4BAAIkC,SAAJ,GAAgBge,SAAShe,SAAzB;AACAid,0CAAkB,IAAlB;AACH;AACJ;AACD,oBAAIgB,kBAAkBngB,IAAIgC,QAAJ,IAAgB,EAAtC;AACAod,sCAAsB,CAAC,KAAKzpB,OAAL,CAAaypB,kBAAb,CAAD,GAAoC,MAApC,GAA6C,EAAnE;AACAA,sCAAsB,UAAUhtB,IAAV,CAAe4N,IAAI0B,OAAnB,IAA8B1B,IAAIkC,SAAlC,GAA8C,MAAMlC,IAAI0B,OAAV,GAAoB,GAApB,GAA0Bye,eAA1B,GAA4C,GAA5C,GAAkDngB,IAAIkC,SAAtD,GAAkE,IAAlE,GAAyElC,IAAI0B,OAA7E,GAAuF,GAA3J;AACH,aAtED,MAuEK;AACD1B,oBAAIC,MAAJ,GAAa,QAAb;AACAD,oBAAIN,QAAJ,GAAe,EAAf;AACAM,oBAAIkC,SAAJ,GAAgB,0CAAhB;AACAlC,oBAAI0B,OAAJ,GAAc,MAAd;AACA,sBAAM,IAAI1I,KAAJ,CAAU,+CAA+CqG,MAAMhM,SAAN,CAAgBqa,QAA/D,GAA0E,GAApF,CAAN;AACH;AACJ;AACD;AACA;AACA,YAAI,CAACwQ,eAAD,IAAoB7e,MAAM+d,UAA1B,IAAwC/d,MAAM+d,UAAN,CAAiB1d,QAAjB,CAA0B3M,MAA1B,GAAmC,CAA/E,EAAkF;AAC9EsM,kBAAM+d,UAAN,CAAiB1d,QAAjB,CAA0BlK,GAA1B,CAA8B,UAAU4qB,MAAV,EAAkB;AAC5C;AACA,oBAAI,CAACA,OAAOvgB,MAAZ,EAAoB;AAChBugB,2BAAOngB,MAAP,GAAgB,QAAhB;AACAgf,mCAAe/pB,IAAf,CAAoBkrB,MAApB;AACH;AACJ,aAND;AAOH;AACD/gB,cAAM8d,OAAN,CAAc8B,cAAd,GAA+BA,cAA/B;AACA,eAAO;AACHE,6BAAiBA,eADd;AAEHjd,uBAAWkd;AAFR,SAAP;AAIH,KA/GD;AAgHA;;;;;;AAMA/C,kBAAc7qB,SAAd,CAAwBmuB,eAAxB,GAA0C,UAAU3f,GAAV,EAAe3M,SAAf,EAA0B2rB,YAA1B,EAAwC;AAC9E,YAAI9e,YAAY,KAAhB;AACA,YAAIF,IAAI0B,OAAJ,KAAgB,MAApB,EAA4B;AACxB,gBAAI1B,IAAI2B,KAAR,EAAe;AACX,oBAAIyG,aAAa,EAAjB;AACA,oBAAIiY,UAAU,EAAd;AACA;AACA,qBAAK,IAAI/E,OAAT,IAAoBtb,IAAI2B,KAAxB,EAA+B;AAC3B,wBAAIgZ,YAAY3a,IAAI2B,KAAJ,CAAU2Z,OAAV,CAAhB;AACA,wBAAIgF,aAAahF,OAAjB;AACA,wBAAIiF,UAAU,KAAd,CAH2B,CAGN;AACrB,yBAAK,IAAInV,KAAK,CAAT,EAAYI,KAAK,KAAK+Q,MAA3B,EAAmCnR,KAAKI,GAAGzY,MAA3C,EAAmDqY,IAAnD,EAAyD;AACrD,4BAAImR,SAAS/Q,GAAGJ,EAAH,CAAb;AACA,4BAAIoV,cAAc;AACdlF,qCAASA,OADK;AAEdmF,mCAAO,KAFO;AAGdptB,uCAAWA,SAHG;AAId+E,kCAAM4mB,YAJQ;AAKdvhB,oCAAQuC,IAAI2B,KAAJ,CAAU2Z,OAAV;AALM,yBAAlB;AAOA,4BAAIoF,eAAenE,OAAOW,MAAP,CAAcsD,WAAd,CAAnB;AACA,4BAAIE,aAAaxgB,SAAjB,EAA4B;AACxBya,wCAAY+F,aAAaxuB,MAAzB;AACAgO,wCAAY,IAAZ;AACA,gCAAI,CAAC,KAAKvK,OAAL,CAAa+qB,aAAapF,OAA1B,CAAL,EAAyC;AACrCgF,6CAAaI,aAAapF,OAA1B;AACH;AACJ;AACD,4BAAIoF,aAAaH,OAAjB,EAA0B;AACtBA,sCAAU,IAAV;AACH;AACD,4BAAIC,YAAYC,KAAhB,EAAuB;AACnB;AACH;AACJ;AACD,wBAAI,CAACF,OAAL,EAAc;AACV,4BAAIrgB,SAAJ,EAAe;AACX;AACA,gCAAIogB,eAAe,IAAnB,EAAyB;AACrB;AACA,oCAAI3F,SAAJ,EAAe;AACX3a,wCAAIC,MAAJ,GAAa,QAAb;AACH,iCAFD,MAGK;AACDD,wCAAIC,MAAJ,GAAa,QAAb;AACH;AACJ,6BARD,MASK;AACDD,oCAAI2B,KAAJ,CAAU2e,UAAV,IAAwB3F,SAAxB;AACH;AACD,gCAAI2F,eAAehF,OAAf,IAA0BgF,eAAe,IAA7C,EAAmD;AAC/C,uCAAOtgB,IAAI2B,KAAJ,CAAU2Z,OAAV,CAAP;AACH;AACJ;AACD,4BAAI,UAAUlpB,IAAV,CAAekuB,UAAf,CAAJ,EAAgC;AAC5BD,oCAAQC,WAAW7tB,OAAX,CAAmB,SAAnB,EAA8B,EAA9B,CAAR,IAA6CkoB,SAA7C;AACH;AACD,4BAAIgG,kBAAkBprB,cAAcolB,SAAd,GAA0B,WAA1B,GAAyC,SAASA,SAAT,GAAqB,MAArB,GAA8BA,UAAUrkB,QAAV,EAA7F;AACA,yBAAC,OAAOlE,IAAP,CAAYkuB,UAAZ,CAAD,IAA4BlY,WAAWlT,IAAX,CAAgBorB,aAAa,GAAb,GAAmBxb,KAAKC,SAAL,CAAe4b,eAAf,CAAnC,CAA5B;AACH,qBAxBD,MAyBK;AACD,4BAAIC,YAAYN,WAAW7tB,OAAX,CAAmB,QAAnB,EAA6B,EAA7B,CAAhB;AACA,4BAAI,OAAOkoB,SAAP,KAAqB,UAAzB,EAAqC;AACjC3a,gCAAI8X,MAAJ,CAAW8I,SAAX,IAAwBjG,UAAUiC,IAAV,CAAevpB,SAAf,CAAxB;AACH;AACD,+BAAO2M,IAAI2B,KAAJ,CAAU2Z,OAAV,CAAP;AACH;AACJ;AACDtb,oBAAIqgB,OAAJ,GAAcA,OAAd;AACA;AACArgB,oBAAIgC,QAAJ,GAAeoG,WAAWnV,IAAX,CAAgB,GAAhB,CAAf,CAnEW,CAmE0B;AACxC;AACJ,SAtED,MAuEK;AACD,gBAAIf,SAAS8N,IAAIkC,SAAjB;AACA,iBAAK,IAAI2S,KAAK,CAAT,EAAYC,KAAK,KAAKyH,MAA3B,EAAmC1H,KAAKC,GAAG/hB,MAA3C,EAAmD8hB,IAAnD,EAAyD;AACrD,oBAAI0H,SAASzH,GAAGD,EAAH,CAAb;AACA,oBAAI2L,cAAc;AACdlF,6BAAS,IADK;AAEdmF,2BAAO,KAFO;AAGdptB,+BAAWA,SAHG;AAId+E,0BAAM4mB,YAJQ;AAKdvhB,4BAAQvL;AALM,iBAAlB;AAOA,oBAAIwuB,eAAenE,OAAOW,MAAP,CAAcsD,WAAd,CAAnB;AACA,oBAAIE,aAAaxgB,SAAjB,EAA4B;AACxBA,gCAAY,IAAZ;AACAhO,6BAASwuB,aAAaxuB,MAAtB;AACH;AACD,oBAAIsuB,YAAYC,KAAhB,EAAuB;AACnB;AACH;AACJ;AACDzgB,gBAAIkC,SAAJ,GAAgBhQ,MAAhB;AACH;AACD,eAAOgO,SAAP;AACH,KAhGD;AAiGA;;;;;AAKAmc,kBAAc7qB,SAAd,CAAwBguB,YAAxB,GAAuC,UAAUxf,GAAV,EAAe3M,SAAf,EAA0B4qB,WAA1B,EAAuC;AAC1E,YAAI4C,gBAAgB,CAAC7gB,IAAI2B,KAAJ,CAAU,QAAV,KAAuB,EAAxB,EAA4BlP,OAA5B,CAAoC,MAApC,EAA4C,EAA5C,EAAgDA,OAAhD,CAAwD,KAAxD,EAA+D,EAA/D,CAApB;AACA,YAAIquB,SAAS,8DAAb;AACA,YAAIC,WAAWF,cAAcluB,KAAd,CAAoBmuB,MAApB,CAAf;AACA,YAAIE,aAAa,EAAjB;AACA,YAAID,QAAJ,EAAc;AACV,gBAAIE,UAAUF,SAAS,CAAT,CAAd;AACA,gBAAIG,UAAUH,SAAS,CAAT,EAAYtuB,OAAZ,CAAoB,UAApB,EAAgC,EAAhC,CAAd;AACA,gBAAI0uB,aAAa,KAAK7rB,QAAL,CAAc2oB,WAAd,EAA2BiD,OAA3B,KAAuC,KAAK5rB,QAAL,CAAcjC,SAAd,EAAyB6tB,OAAzB,CAAxD;AACA,gBAAIC,UAAJ,EAAgB;AACZ,oBAAItE,YAAY,KAAKP,UAAL,CAAgBqC,IAAhB,CAAqB3e,GAArB,CAAhB;AACA;AACA,qBAAK,IAAIohB,MAAT,IAAmBD,UAAnB,EAA+B;AAC3B,wBAAI5f,SAAS,KAAK+a,UAAL,CAAgB+E,KAAhB,CAAsBxE,SAAtB,CAAb;AACA,wBAAIyE,cAAcxc,KAAK8S,KAAL,CAAW9S,KAAKC,SAAL,CAAeoc,WAAWC,MAAX,CAAf,CAAX,CAAlB;AACA7f,2BAAOI,KAAP,GAAeua,SAAS,EAAT,EAAalc,IAAI2B,KAAjB,CAAf;AACA,2BAAOJ,OAAOI,KAAP,CAAa,QAAb,CAAP;AACA2f,gCAAYjpB,GAAZ,GAAkB+oB,MAAlB;AACA7f,2BAAOnJ,IAAP,GAAc8jB,SAASA,SAAS,EAAT,EAAa3a,OAAOnJ,IAApB,CAAT,EAAoC6lB,WAApC,CAAd;AACA1c,2BAAOnJ,IAAP,CAAY6oB,OAAZ,IAAuBK,WAAvB;AACA/f,2BAAOnJ,IAAP,CAAY,OAAZ,IAAuBgpB,MAAvB;AACAJ,+BAAW9rB,IAAX,CAAgBqM,MAAhB;AACH;AACD,qBAAK+a,UAAL,CAAgBlO,KAAhB,CAAsByO,SAAtB;AACH;AACJ;AACD,eAAOmE,UAAP;AACH,KA3BD;AA4BA;;;;;;AAMA3E,kBAAc7qB,SAAd,CAAwBkuB,aAAxB,GAAwC,UAAU1f,GAAV,EAAe3M,SAAf,EAA0B4qB,WAA1B,EAAuC;AAC3E,YAAIiD,UAAU,CAAClhB,IAAI2B,KAAJ,CAAU,MAAV,KAAqB,EAAtB,EAA0BlP,OAA1B,CAAkC,UAAlC,EAA8C,EAA9C,EAAkDA,OAAlD,CAA0D,UAA1D,EAAsE,EAAtE,EAA0EA,OAA1E,CAAkF,MAAlF,EAA0F,EAA1F,EAA8FA,OAA9F,CAAsG,KAAtG,EAA6G,EAA7G,EAAiHA,OAAjH,CAAyH,UAAzH,EAAqI,EAArI,CAAd;AACA,YAAIuuB,aAAa,EAAjB;AACA,YAAIC,UAAUjhB,IAAI2B,KAAJ,CAAU,MAAV,CAAd;AACA,YAAI4f,WAAWvhB,IAAI2B,KAAJ,CAAU,OAAV,CAAf;AACA,YAAIwf,aAAa,KAAK7rB,QAAL,CAAc2oB,WAAd,EAA2BiD,OAA3B,KAAuC,KAAK5rB,QAAL,CAAcjC,SAAd,EAAyB6tB,OAAzB,CAAxD;AACA,YAAIC,UAAJ,EAAgB;AACZ,gBAAIK,gBAAgB,CAApB;AACA,gBAAIC,eAAe,IAAnB;AACAzhB,gBAAIN,QAAJ,CAAalK,GAAb,CAAiB,UAAUksB,QAAV,EAAoB;AACjC,oBAAIA,SAAShgB,OAAT,KAAqB,MAArB,IAA+BggB,SAASxf,SAAT,CAAmBzP,OAAnB,CAA2B,YAA3B,EAAyC,EAAzC,EAA6CM,MAA7C,GAAsD,CAAzF,EAA4F;AACxFyuB,qCAAiB,CAAjB;AACAC,mCAAeC,QAAf;AACH,iBAHD,MAIK;AACD,wBAAIA,SAAShgB,OAAT,KAAqB,MAAzB,EAAiC;AAC7B8f,yCAAiB,CAAjB;AACAC,uCAAeC,QAAf;AACH;AACJ;AACJ,aAXD;AAYA,gBAAIF,kBAAkB,CAAtB,EAAyB;AACrB,sBAAM,IAAIxoB,KAAJ,CAAU,iCAAV,CAAN;AACH;AACD,gBAAI,KAAKrD,OAAL,CAAa8rB,aAAa9f,KAAb,CAAmBtJ,GAAhC,CAAJ,EAA0C;AACtC,sBAAM,IAAIW,KAAJ,CAAU,0BAAV,CAAN;AACH;AACD,gBAAI6jB,YAAY,KAAKP,UAAL,CAAgBqC,IAAhB,CAAqB8C,YAArB,CAAhB;AACA;AACA,iBAAK,IAAIL,MAAT,IAAmBD,UAAnB,EAA+B;AAC3B,oBAAI5f,SAAS,KAAK+a,UAAL,CAAgB+E,KAAhB,CAAsBxE,SAAtB,CAAb;AACA,oBAAIyE,cAAcxc,KAAK8S,KAAL,CAAW9S,KAAKC,SAAL,CAAeoc,WAAWC,MAAX,CAAf,CAAX,CAAlB;AACA7f,uBAAOnJ,IAAP,GAAc8jB,SAASA,SAAS,EAAT,EAAa3a,OAAOnJ,IAApB,CAAT,EAAoC6lB,WAApC,CAAd;AACA1c,uBAAOI,KAAP,GAAeua,SAAS,EAAT,EAAauF,aAAa9f,KAA1B,CAAf;AACAJ,uBAAOI,KAAP,CAAatJ,GAAb,GAAmBkJ,OAAOI,KAAP,CAAatJ,GAAb,GAAmB+oB,MAAtC;AACA7f,uBAAOnJ,IAAP,CAAY6oB,OAAZ,IAAuBK,WAAvB;AACA/f,uBAAOnJ,IAAP,CAAYmpB,QAAZ,IAAwBH,MAAxB;AACAJ,2BAAW9rB,IAAX,CAAgBqM,MAAhB;AACH;AACD,iBAAK+a,UAAL,CAAgBlO,KAAhB,CAAsByO,SAAtB;AACH;AACD,eAAOmE,UAAP;AACH,KA1CD;AA2CA3E,kBAAc/X,SAAd,GAA0B,eAA1B;AACA,WAAO+X,aAAP;AACH,CAvckC,CAucjC3qB,eAAeqE,MAvckB,CAAnC;AAwcAtF,QAAQ4rB,aAAR,GAAwBA,aAAxB;AACA,yC;;;;;;;ACjfa;;AACb,SAAS/rB,QAAT,CAAkBC,CAAlB,EAAqB;AACjB,SAAK,IAAIC,CAAT,IAAcD,CAAd;AAAiB,YAAI,CAACE,QAAQC,cAAR,CAAuBF,CAAvB,CAAL,EAAgCC,QAAQD,CAAR,IAAaD,EAAEC,CAAF,CAAb;AAAjD;AACH;AACDG,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACAP,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,CAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACA,iC;;;;;;;ACTa;;AACb,IAAIC,YAAa,aAAQ,UAAKA,SAAd,IAA6B,YAAY;AACrD,QAAIC,iBAAgB,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,yBAAgBL,OAAOQ,cAAP,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUJ,CAAV,EAAaC,CAAb,EAAgB;AAAED,cAAEG,SAAF,GAAcF,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,iBAAK,IAAIV,CAAT,IAAcU,CAAd;AAAiB,oBAAIA,EAAER,cAAF,CAAiBF,CAAjB,CAAJ,EAAyBS,EAAET,CAAF,IAAOU,EAAEV,CAAF,CAAP;AAA1C;AAAwD,SAF9E;AAGA,eAAOQ,eAAcC,CAAd,EAAiBC,CAAjB,CAAP;AACH,KALD;AAMA,WAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,uBAAcC,CAAd,EAAiBC,CAAjB;AACA,iBAASI,EAAT,GAAc;AAAE,iBAAKC,WAAL,GAAmBN,CAAnB;AAAuB;AACvCA,UAAEO,SAAF,GAAcN,MAAM,IAAN,GAAaP,OAAOc,MAAP,CAAcP,CAAd,CAAb,IAAiCI,GAAGE,SAAH,GAAeN,EAAEM,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAZ2C,EAA5C;AAaAX,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAI8wB,YAAY7wB,mBAAOA,CAAC,CAAR,CAAhB;AACA,IAAI0rB,aAAa,aAAe,UAAU5qB,MAAV,EAAkB;AAC9Cb,cAAUyrB,UAAV,EAAsB5qB,MAAtB;AACA,aAAS4qB,UAAT,GAAsB;AAClB,eAAO5qB,WAAW,IAAX,IAAmBA,OAAOC,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAA3D;AACH;AACD0qB,eAAWhrB,SAAX,CAAqB0rB,MAArB,GAA8B,UAAU7d,KAAV,EAAiB;AAC3C,YAAI9L,QAAQ,IAAZ;AACA,YAAI,CAAC,SAASnB,IAAT,CAAciN,MAAMic,OAApB,CAAD,IAAiC,CAAC,OAAOlpB,IAAP,CAAYiN,MAAMic,OAAlB,CAAlC,IAAgE,KAAK9kB,QAAL,CAAc6I,MAAM5B,MAApB,CAApE,EAAiG;AAC7F,gBAAIie,MAAM,uBAAV;AACA,gBAAIkG,gBAAgB,iDAApB;AACA,gBAAIC,eAAe,gCAAnB;AACA,gBAAIC,cAAc,oEAAlB;AACA,gBAAIC,aAAa,8DAAjB;AACA,gBAAIC,SAAS3iB,MAAM5B,MAAN,CAAahL,OAAb,CAAqB,MAArB,EAA6B,EAA7B,EAAiCA,OAAjC,CAAyC,KAAzC,EAAgD,EAAhD,CAAb;AACA,gBAAIwvB,WAAWD,OAAOrvB,KAAP,CAAa+oB,GAAb,CAAf;AACA,gBAAIwG,aAAa7iB,MAAM5B,MAAvB;AACA,gBAAI0kB,cAAc,KAAlB;AACA,gBAAIF,QAAJ,EAAc;AACVA,yBAASzsB,GAAT,CAAa,UAAUkP,QAAV,EAAoB;AAC7B,wBAAI0d,kBAAkBL,WAAW3vB,IAAX,CAAgBsS,QAAhB,CAAtB;AACA;AACA,wBAAI,oCAAoCtS,IAApC,CAAyCsS,QAAzC,KAAsD,CAAC0d,eAA3D,EAA4E;AACxE;AACA,4BAAIC,UAAU3d,SAASjS,OAAT,CAAiB,OAAjB,EAA0B,EAA1B,EAA8BA,OAA9B,CAAsC,OAAtC,EAA+C,EAA/C,CAAd;AACA,4BAAI4C,cAAc9B,MAAM+B,QAAN,CAAe+J,MAAMjH,IAArB,EAA2BiqB,OAA3B,CAAlB;AACA,4BAAIC,YAAY/sB,cAAcF,WAAd,IAA6B,SAASA,WAAtC,GAAoD9B,MAAM+B,QAAN,CAAe+J,MAAMhM,SAArB,EAAgCgvB,OAAhC,CAApD,GAA+FhtB,WAA/G;AACA,4BAAI,CAAC9B,MAAMwD,UAAN,CAAiBurB,SAAjB,CAAL,EAAkC;AAC9BJ,yCAAaF,WAAWtd,QAAX,GAAsBwd,WAAWzvB,OAAX,CAAmBiS,QAAnB,EAA6B4d,SAA7B,CAAtB,GAAgEA,SAA7E;AACH,yBAFD,MAGK;AACDJ,yCAAaA,WAAWzvB,OAAX,CAAmBiS,QAAnB,EAA6B4d,WAA7B,CAAb;AACH;AACDH,sCAAc,IAAd;AACH,qBAZD,MAaK,IAAIP,cAAcxvB,IAAd,CAAmBsS,QAAnB,CAAJ,EAAkC;AAAE;AACrC,4BAAI6d,gBAAgB7d,SAAS/R,KAAT,CAAeivB,aAAf,CAApB;AACA,4BAAIW,aAAJ,EAAmB;AACf,gCAAIC,aAAaD,cAAc,CAAd,EAAiB9vB,OAAjB,CAAyB,SAAzB,EAAoC,EAApC,CAAjB;AACA,gCAAImjB,SAAS2M,cAAc,CAAd,CAAb;AACA,gCAAI1uB,SAAS+hB,OAAO5iB,KAAP,CAAa,GAAb,CAAb;AACA,gCAAIyvB,SAASlvB,MAAM+B,QAAN,CAAe+J,MAAMhM,SAArB,EAAgCmvB,UAAhC,CAAb;AACA,gCAAI1nB,OAAO,WAAX;AACA,gCAAI,OAAO2nB,MAAP,KAAkB,UAAtB,EAAkC;AAC9B,oCAAI5uB,UAAUA,OAAOd,MAAP,GAAgB,CAA9B,EAAiC;AAC7B,wCAAI2vB,mBAAmB,EAAvB;AACA7uB,2CAAO2B,GAAP,CAAW,UAAUyH,OAAV,EAAmB;AAC1B,4CAAIjI,SAASiI,QAAQxK,OAAR,CAAgB,MAAhB,EAAwB,EAAxB,EAA4BA,OAA5B,CAAoC,MAApC,EAA4C,EAA5C,CAAb;AACA,4CAAK,KAAKL,IAAL,CAAU4C,MAAV,KAAqB,KAAK5C,IAAL,CAAU4C,MAAV,CAAtB,IAA6C,KAAK5C,IAAL,CAAU4C,MAAV,KAAqB,KAAK5C,IAAL,CAAU4C,MAAV,CAAtE,EAA0F;AACtF;AACA0tB,6DAAiBxtB,IAAjB,CAAsBF,MAAtB;AACH,yCAHD,MAIK;AACD;AACA,gDAAI2tB,KAAKpvB,MAAM+B,QAAN,CAAe+J,MAAMhM,SAArB,EAAgC2B,MAAhC,CAAT;AACA0tB,6DAAiBxtB,IAAjB,CAAsBytB,EAAtB;AACH;AACJ,qCAXD;AAYA7nB,2CAAO2nB,OAAO5wB,KAAP,CAAawN,MAAMhM,SAAnB,EAA8BqvB,gBAA9B,CAAP;AACH,iCAfD,MAgBK;AACD5nB,2CAAO2nB,OAAOlsB,IAAP,CAAY8I,MAAMhM,SAAlB,CAAP;AACH;AACJ;AACD6uB,yCAAaF,WAAWtd,QAAX,GAAsBwd,WAAWzvB,OAAX,CAAmBiS,QAAnB,EAA6B5J,IAA7B,CAAtB,GAA2DA,IAAxE;AACAqnB,0CAAc,IAAd;AACH;AACJ,qBAhCI,MAiCA,IAAIN,aAAazvB,IAAb,CAAkBsS,QAAlB,KAA+B,CAAC0d,eAApC,EAAqD;AACtD,4BAAIQ,KAAKle,SAAS/R,KAAT,CAAekvB,YAAf,CAAT;AACA,4BAAIgB,SAAS,KAAKzwB,IAAL,CAAUwwB,GAAG,CAAH,CAAV,KAAoB,KAAKxwB,IAAL,CAAUwwB,GAAG,CAAH,CAAV,CAApB,GAAuCA,GAAG,CAAH,EAAMnwB,OAAN,CAAc,IAAd,EAAoB,EAApB,EAAwBA,OAAxB,CAAgC,IAAhC,EAAsC,EAAtC,CAAvC,GAAmF;AAC5F,6BAAKL,IAAL,CAAUwwB,GAAG,CAAH,CAAV,KAAoB,KAAKxwB,IAAL,CAAUwwB,GAAG,CAAH,CAAV,CAApB,GAAuCA,GAAG,CAAH,EAAMnwB,OAAN,CAAc,IAAd,EAAoB,EAApB,EAAwBA,OAAxB,CAAgC,IAAhC,EAAsC,EAAtC,CAAvC,GAAmF;AAC/Ec,8BAAMoD,SAAN,CAAgBisB,GAAG,CAAH,CAAhB,IAA0BA,GAAG,CAAH,EAAMtnB,OAAN,CAAc,GAAd,KAAsB,CAAtB,GAA0BlG,WAAWwtB,GAAG,CAAH,CAAX,CAA1B,GAA8CztB,SAASytB,GAAG,CAAH,CAAT,EAAgB,EAAhB,CAAxE,GAA+F;AAC3F,wCAAgBxwB,IAAhB,CAAqBwwB,GAAG,CAAH,CAArB,IAA8B,SAASxwB,IAAT,CAAcwwB,GAAG,CAAH,CAAd,CAA9B,GAAqDrvB,MAAM+B,QAAN,CAAe+J,MAAMhM,SAArB,EAAgCuvB,GAAG,CAAH,CAAhC,CAHjE,CAFsD,CAKmD;AACzG,4BAAIE,KAAKvvB,MAAM+B,QAAN,CAAe+J,MAAMhM,SAArB,EAAgCuvB,GAAG,CAAH,CAAhC,KAA0CC,MAAnD;AACAX,qCAAaF,WAAWtd,QAAX,GAAsBwd,WAAWzvB,OAAX,CAAmBiS,QAAnB,EAA6Boe,EAA7B,CAAtB,GAAyDA,EAAtE;AACAX,sCAAc,IAAd;AACH,qBATI,MAUA,IAAIL,YAAY1vB,IAAZ,CAAiBsS,QAAjB,CAAJ,EAAgC;AAAE;AACnC,4BAAIqe,OAAOre,SAAS/R,KAAT,CAAemvB,WAAf,CAAX;AACA,4BAAIkB,YAAYzvB,MAAMH,cAAN,CAAqB2vB,KAAK,CAAL,CAArB,EAA8B1jB,MAAMhM,SAApC,EAA+CgM,MAAMjH,IAArD,CAAhB;AACA,4BAAI6qB,aAAa,KAAK,CAAtB;AACA,4BAAID,SAAJ,EAAe;AACXC,yCAAa1vB,MAAMH,cAAN,CAAqB2vB,KAAK,CAAL,CAArB,EAA8B1jB,MAAMhM,SAApC,EAA+CgM,MAAMjH,IAArD,CAAb;AACH,yBAFD,MAGK;AACD6qB,yCAAa1vB,MAAMH,cAAN,CAAqB2vB,KAAK,CAAL,CAArB,EAA8B1jB,MAAMhM,SAApC,EAA+CgM,MAAMjH,IAArD,CAAb;AACH;AACD8pB,qCAAaF,WAAWtd,QAAX,GAAsBwd,WAAWzvB,OAAX,CAAmBiS,QAAnB,EAA6Bue,UAA7B,CAAtB,GAAiEA,UAA9E;AACAd,sCAAc,IAAd;AACH,qBAZI,MAaA,IAAIC,eAAJ,EAAqB;AACtB,4BAAIc,YAAYxe,SAASjS,OAAT,CAAiB,OAAjB,EAA0B,EAA1B,EAA8BA,OAA9B,CAAsC,OAAtC,EAA+C,EAA/C,CAAhB;AACA,4BAAI0wB,SAAS5vB,MAAMH,cAAN,CAAqB8vB,SAArB,EAAgC7jB,MAAMhM,SAAtC,EAAiDgM,MAAMjH,IAAvD,CAAb;AACA8pB,qCAAaF,WAAWtd,QAAX,GAAsBwd,WAAWzvB,OAAX,CAAmBiS,QAAnB,EAA6Bye,MAA7B,CAAtB,GAA6DA,MAA1E;AACAhB,sCAAc,IAAd;AACH;AACJ,iBA9ED;AA+EH;AACD9iB,kBAAMohB,KAAN,GAAc0B,WAAd;AACA,mBAAO;AACH7G,yBAASjc,MAAMic,OADZ;AAEHpb,2BAAWiiB,WAFR;AAGHjwB,wBAAQgwB;AAHL,aAAP;AAKH,SAjGD,MAkGK;AACD,mBAAO;AACH5G,yBAAS,IADN;AAEHpb,2BAAW,KAFR;AAGHhO,wBAAQ;AAHL,aAAP;AAKH;AACJ,KA3GD;AA4GA,WAAOsqB,UAAP;AACH,CAlH+B,CAkH9BmF,UAAUhwB,OAlHoB,CAAhC;AAmHAlB,QAAQ+rB,UAAR,GAAqBA,UAArB;AACA,sC;;;;;;;ACpIa;;AACb,IAAIzrB,YAAa,aAAQ,UAAKA,SAAd,IAA6B,YAAY;AACrD,QAAIC,iBAAgB,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,yBAAgBL,OAAOQ,cAAP,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUJ,CAAV,EAAaC,CAAb,EAAgB;AAAED,cAAEG,SAAF,GAAcF,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,iBAAK,IAAIV,CAAT,IAAcU,CAAd;AAAiB,oBAAIA,EAAER,cAAF,CAAiBF,CAAjB,CAAJ,EAAyBS,EAAET,CAAF,IAAOU,EAAEV,CAAF,CAAP;AAA1C;AAAwD,SAF9E;AAGA,eAAOQ,eAAcC,CAAd,EAAiBC,CAAjB,CAAP;AACH,KALD;AAMA,WAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,uBAAcC,CAAd,EAAiBC,CAAjB;AACA,iBAASI,EAAT,GAAc;AAAE,iBAAKC,WAAL,GAAmBN,CAAnB;AAAuB;AACvCA,UAAEO,SAAF,GAAcN,MAAM,IAAN,GAAaP,OAAOc,MAAP,CAAcP,CAAd,CAAb,IAAiCI,GAAGE,SAAH,GAAeN,EAAEM,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAZ2C,EAA5C;AAaAX,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAI8wB,YAAY7wB,mBAAOA,CAAC,CAAR,CAAhB;AACA,IAAI2rB,cAAc,aAAe,UAAU7qB,MAAV,EAAkB;AAC/Cb,cAAU0rB,WAAV,EAAuB7qB,MAAvB;AACA,aAAS6qB,WAAT,GAAuB;AACnB,eAAO7qB,WAAW,IAAX,IAAmBA,OAAOC,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAA3D;AACH;AACD2qB,gBAAYjrB,SAAZ,CAAsB0rB,MAAtB,GAA+B,UAAU7d,KAAV,EAAiB;AAC5C,YAAI,SAASjN,IAAT,CAAciN,MAAMic,OAApB,CAAJ,EAAkC;AAC9B,gBAAImH,SAAS,KAAKntB,QAAL,CAAc+J,MAAMhM,SAApB,EAA+BgM,MAAM5B,MAArC,CAAb;AACA4B,kBAAMohB,KAAN,GAAc,IAAd;AACA,mBAAO;AACHnF,yBAASjc,MAAMic,OAAN,CAAc7oB,OAAd,CAAsB,QAAtB,EAAgC,EAAhC,CADN;AAEHyN,2BAAW,OAAOuiB,MAAP,KAAkB,UAF1B;AAGHlC,yBAAS,IAHN;AAIHruB,wBAAQuwB;AAJL,aAAP;AAMH,SATD,MAUK;AACD,mBAAO;AACHnH,yBAAS,IADN;AAEHpb,2BAAW,KAFR;AAGHhO,wBAAQ;AAHL,aAAP;AAKH;AACJ,KAlBD;AAmBA,WAAOuqB,WAAP;AACH,CAzBgC,CAyB/BkF,UAAUhwB,OAzBqB,CAAjC;AA0BAlB,QAAQgsB,WAAR,GAAsBA,WAAtB;AACA,uC;;;;;;;AC3Ca;;AACb,IAAI1rB,YAAa,aAAQ,UAAKA,SAAd,IAA6B,YAAY;AACrD,QAAIC,iBAAgB,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,yBAAgBL,OAAOQ,cAAP,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUJ,CAAV,EAAaC,CAAb,EAAgB;AAAED,cAAEG,SAAF,GAAcF,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,iBAAK,IAAIV,CAAT,IAAcU,CAAd;AAAiB,oBAAIA,EAAER,cAAF,CAAiBF,CAAjB,CAAJ,EAAyBS,EAAET,CAAF,IAAOU,EAAEV,CAAF,CAAP;AAA1C;AAAwD,SAF9E;AAGA,eAAOQ,eAAcC,CAAd,EAAiBC,CAAjB,CAAP;AACH,KALD;AAMA,WAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,uBAAcC,CAAd,EAAiBC,CAAjB;AACA,iBAASI,EAAT,GAAc;AAAE,iBAAKC,WAAL,GAAmBN,CAAnB;AAAuB;AACvCA,UAAEO,SAAF,GAAcN,MAAM,IAAN,GAAaP,OAAOc,MAAP,CAAcP,CAAd,CAAb,IAAiCI,GAAGE,SAAH,GAAeN,EAAEM,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAZ2C,EAA5C;AAaAX,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAI8wB,YAAY7wB,mBAAOA,CAAC,CAAR,CAAhB;AACA,IAAI4rB,WAAW,aAAe,UAAU9qB,MAAV,EAAkB;AAC5Cb,cAAU2rB,QAAV,EAAoB9qB,MAApB;AACA,aAAS8qB,QAAT,GAAoB;AAChB,eAAO9qB,WAAW,IAAX,IAAmBA,OAAOC,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAA3D;AACH;AACD4qB,aAASlrB,SAAT,CAAmB0rB,MAAnB,GAA4B,UAAU7d,KAAV,EAAiB;AACzC,YAAI,SAASjN,IAAT,CAAciN,MAAMic,OAApB,CAAJ,EAAkC;AAC9B,gBAAI8H,UAAU,KAAKhwB,cAAL,CAAoBiM,MAAM5B,MAA1B,EAAkC4B,MAAMhM,SAAxC,EAAmDgM,MAAMjH,IAAzD,CAAd;AACAiH,kBAAMohB,KAAN,GAAc,IAAd;AACA,mBAAO;AACHnF,yBAASjc,MAAMic,OAAN,CAAc7oB,OAAd,CAAsB,QAAtB,EAAgC,EAAhC,CADN;AAEHyN,2BAAW,IAFR;AAGHhO,wBAAQkxB;AAHL,aAAP;AAKH,SARD,MASK;AACD,mBAAO;AACH9H,yBAAS,IADN;AAEHpb,2BAAW,KAFR;AAGHhO,wBAAQ;AAHL,aAAP;AAKH;AACJ,KAjBD;AAkBA,WAAOwqB,QAAP;AACH,CAxB6B,CAwB5BiF,UAAUhwB,OAxBkB,CAA9B;AAyBAlB,QAAQisB,QAAR,GAAmBA,QAAnB;AACA,oC;;;;;;;AC1Ca;;AACb,IAAI3rB,YAAa,aAAQ,UAAKA,SAAd,IAA6B,YAAY;AACrD,QAAIC,iBAAgB,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,yBAAgBL,OAAOQ,cAAP,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUJ,CAAV,EAAaC,CAAb,EAAgB;AAAED,cAAEG,SAAF,GAAcF,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,iBAAK,IAAIV,CAAT,IAAcU,CAAd;AAAiB,oBAAIA,EAAER,cAAF,CAAiBF,CAAjB,CAAJ,EAAyBS,EAAET,CAAF,IAAOU,EAAEV,CAAF,CAAP;AAA1C;AAAwD,SAF9E;AAGA,eAAOQ,eAAcC,CAAd,EAAiBC,CAAjB,CAAP;AACH,KALD;AAMA,WAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,uBAAcC,CAAd,EAAiBC,CAAjB;AACA,iBAASI,EAAT,GAAc;AAAE,iBAAKC,WAAL,GAAmBN,CAAnB;AAAuB;AACvCA,UAAEO,SAAF,GAAcN,MAAM,IAAN,GAAaP,OAAOc,MAAP,CAAcP,CAAd,CAAb,IAAiCI,GAAGE,SAAH,GAAeN,EAAEM,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAZ2C,EAA5C;AAaAX,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIa,iBAAiBZ,mBAAOA,CAAC,CAAR,CAArB;AACA,IAAIuyB,cAAc,aAAe,UAAUzxB,MAAV,EAAkB;AAC/Cb,cAAUsyB,WAAV,EAAuBzxB,MAAvB;AACA,aAASyxB,WAAT,GAAuB;AACnB,YAAI9vB,QAAQ3B,WAAW,IAAX,IAAmBA,OAAOC,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAAhE;AACAyB,cAAM+vB,KAAN,GAAc,EAAd;AACA,eAAO/vB,KAAP;AACH;AACD8vB,gBAAY7xB,SAAZ,CAAsBmtB,IAAtB,GAA6B,UAAUf,IAAV,EAAgB;AACzC,YAAI2F,MAAM,gBAAgB,KAAK9uB,IAAL,EAA1B;AACA,aAAK6uB,KAAL,CAAWC,GAAX,IAAkB3F,IAAlB;AACA,eAAO2F,GAAP;AACH,KAJD;AAKAF,gBAAY7xB,SAAZ,CAAsB4c,KAAtB,GAA8B,UAAUyO,SAAV,EAAqB;AAC/C,eAAO,KAAKyG,KAAL,CAAWzG,SAAX,CAAP;AACH,KAFD;AAGA;;;;;;AAMAwG,gBAAY7xB,SAAZ,CAAsBC,MAAtB,GAA+B,UAAUiQ,OAAV,EAAmBC,KAAnB,EAA0BjC,QAA1B,EAAoC;AAC/D,YAAIxN,SAAS;AACTwN,sBAAUA,YAAY,EADb;AAETtH,kBAAM,EAFG;AAGT0f,oBAAQ,EAHC;AAITC,kBAAM,EAJG;AAKTpW,mBAAOA,SAAS,EALP;AAMT1B,oBAAQ,QANC;AAOTO,sBAAU,EAPD;AAQTkB,qBAASA;AARA,SAAb;AAUA,eAAOxP,MAAP;AACH,KAZD;AAaAmxB,gBAAY7xB,SAAZ,CAAsBgyB,OAAtB,GAAgC,UAAU3G,SAAV,EAAqB;AACjD,eAAO,KAAKyG,KAAL,CAAWzG,SAAX,CAAP;AACH,KAFD;AAGAwG,gBAAY7xB,SAAZ,CAAsBiyB,MAAtB,GAA+B,UAAU5G,SAAV,EAAqB6G,WAArB,EAAkC;AAC7D,YAAI9F,OAAO,KAAK0F,KAAL,CAAWzG,SAAX,CAAX;AACA,YAAI6G,eAAe9F,KAAKle,QAAxB,EAAkC;AAC9B,gBAAIikB,SAAS/F,KAAKle,QAAL,CAAc3M,MAA3B;AACA2wB,wBAAY3L,IAAZ,GAAmBjT,KAAK8S,KAAL,CAAW9S,KAAKC,SAAL,CAAe6Y,KAAK7F,IAApB,CAAX,CAAnB;AACA6F,iBAAKle,QAAL,CAAcxK,IAAd,CAAmBwuB,WAAnB;AACA,iBAAKE,UAAL,CAAgBF,WAAhB,EAA6B9F,KAAK7F,IAAlC,EAAwC4L,MAAxC;AACH,SALD,MAMK,IAAID,eAAe,CAAC9F,KAAKle,QAAzB,EAAmC;AACpCke,iBAAKle,QAAL,GAAgB,CAACgkB,WAAD,CAAhB;AACH;AACJ,KAXD;AAYAL,gBAAY7xB,SAAZ,CAAsBqyB,QAAtB,GAAiC,UAAUhH,SAAV,EAAqB6G,WAArB,EAAkC9uB,KAAlC,EAAyC;AACtE,YAAIrB,QAAQ,IAAZ;AACA,YAAIqqB,OAAO,KAAK0F,KAAL,CAAWzG,SAAX,CAAX;AACA,YAAI6G,WAAJ,EAAiB;AACb,gBAAI,CAAC,KAAKhtB,OAAL,CAAagtB,WAAb,CAAL,EAAgC;AAC5B9F,qBAAKle,QAAL,CAAc2R,MAAd,CAAqBzc,KAArB,EAA4B,CAA5B,EAA+B8uB,WAA/B;AACA,qBAAKE,UAAL,CAAgBF,WAAhB,EAA6B9F,KAAK7F,IAAlC,EAAwCnjB,KAAxC;AACH,aAHD,MAIK;AACD,oBAAIkvB,WAAWJ,WAAf;AACAI,yBAAStuB,GAAT,CAAa,UAAUyH,OAAV,EAAmB8mB,OAAnB,EAA4B;AACrC,wBAAIC,cAAcpvB,QAAQmvB,OAA1B;AACAnG,yBAAKle,QAAL,CAAc2R,MAAd,CAAqB2S,WAArB,EAAkC,CAAlC,EAAqC/mB,OAArC;AACA1J,0BAAMqwB,UAAN,CAAiB3mB,OAAjB,EAA0B2gB,KAAK7F,IAA/B,EAAqCiM,WAArC;AACH,iBAJD;AAKAF,2BAAW,IAAX;AACH;AACJ;AACJ,KAlBD;AAmBAT,gBAAY7xB,SAAZ,CAAsBotB,SAAtB,GAAkC,UAAU/B,SAAV,EAAqBoH,YAArB,EAAmCrvB,KAAnC,EAA0C;AACxE,YAAIsvB,cAAc,CAAC,KAAKxtB,OAAL,CAAautB,YAAb,CAAD,GAA8B,CAACA,YAAD,CAA9B,GAA+CA,YAAjE;AACA,YAAIA,gBAAgBC,YAAYnxB,MAAZ,GAAqB,CAAzC,EAA4C;AACxC,gBAAI6qB,OAAO,KAAK0F,KAAL,CAAWzG,SAAX,CAAX;AACA,gBAAIsH,gBAAgB,EAApB;AACAvG,iBAAKle,QAAL,CAAc9K,KAAd,IAAuB,IAAvB;AACA,iBAAK,IAAI+C,IAAI,CAAb,EAAgBA,IAAIimB,KAAKle,QAAL,CAAc3M,MAAlC,EAA0C4E,GAA1C,EAA+C;AAC3C,oBAAIA,MAAM/C,KAAV,EAAiB;AACbsvB,gCAAY1uB,GAAZ,CAAgB,UAAU8f,IAAV,EAAgB;AAC5B6O,sCAAcjvB,IAAd,CAAmBogB,IAAnB;AACH,qBAFD;AAGH,iBAJD,MAKK;AACD6O,kCAAcjvB,IAAd,CAAmB0oB,KAAKle,QAAL,CAAc/H,CAAd,CAAnB;AACH;AACJ;AACDimB,iBAAKle,QAAL,GAAgBykB,aAAhB;AACA,gBAAID,YAAYnxB,MAAZ,GAAqB,CAAzB,EAA4B;AACxB,qBAAK,IAAI4E,IAAI/C,KAAb,EAAoB+C,IAAIimB,KAAKle,QAAL,CAAc3M,MAAtC,EAA8C4E,GAA9C,EAAmD;AAC/C,yBAAKisB,UAAL,CAAgBhG,KAAKle,QAAL,CAAc/H,CAAd,CAAhB,EAAkCimB,KAAK7F,IAAvC,EAA6CpgB,CAA7C;AACH;AACJ;AACD,iBAAKysB,eAAL,CAAqBxG,IAArB;AACH;AACJ,KAxBD;AAyBAyF,gBAAY7xB,SAAZ,CAAsB6yB,MAAtB,GAA+B,UAAUxH,SAAV,EAAqByH,WAArB,EAAkC;AAC7D,YAAI1G,OAAO,KAAK0F,KAAL,CAAWzG,SAAX,CAAX;AACA,YAAI0H,UAAU3G,KAAKle,QAAL,CAAcpE,OAAd,CAAsBgpB,WAAtB,CAAd;AACA,YAAIC,WAAW,CAAX,IAAgBA,UAAU3G,KAAKle,QAAL,CAAc3M,MAA5C,EAAoD;AAChD6qB,iBAAKle,QAAL,CAAc2R,MAAd,CAAqBkT,OAArB,EAA8B,CAA9B;AACH;AACD,YAAIA,UAAU,CAAV,GAAc3G,KAAKle,QAAL,CAAc3M,MAA5B,IAAsCwxB,UAAU,CAAV,IAAe,CAAzD,EAA4D;AACxD,iBAAK,IAAI5sB,IAAI4sB,UAAU,CAAvB,EAA0B5sB,IAAIimB,KAAKle,QAAL,CAAc3M,MAA5C,EAAoD4E,GAApD,EAAyD;AACrD,qBAAKisB,UAAL,CAAgBhG,KAAKle,QAAL,CAAc/H,CAAd,CAAhB,EAAkCimB,KAAK7F,IAAvC,EAA6CpgB,CAA7C;AACH;AACJ;AACJ,KAXD;AAYA0rB,gBAAY7xB,SAAZ,CAAsBgzB,QAAtB,GAAiC,UAAU3H,SAAV,EAAqBjoB,KAArB,EAA4B;AACzD,YAAIgpB,OAAO,KAAK0F,KAAL,CAAWzG,SAAX,CAAX;AACAe,aAAKle,QAAL,CAAc9K,KAAd,IAAuB,IAAvB;AACAgpB,aAAKle,QAAL,CAAc2R,MAAd,CAAqBzc,KAArB,EAA4B,CAA5B;AACA;AACA,YAAIA,QAAQ,CAAR,GAAYgpB,KAAKle,QAAL,CAAc3M,MAA1B,IAAoC6B,QAAQ,CAAR,IAAa,CAArD,EAAwD;AACpD,iBAAK,IAAI+C,IAAI/C,QAAQ,CAArB,EAAwB+C,IAAIimB,KAAKle,QAAL,CAAc3M,MAA1C,EAAkD4E,GAAlD,EAAuD;AACnD,qBAAKisB,UAAL,CAAgBhG,KAAKle,QAAL,CAAc/H,CAAd,CAAhB,EAAkCimB,KAAK7F,IAAvC,EAA6CpgB,CAA7C;AACH;AACJ;AACD,aAAKysB,eAAL,CAAqBxG,IAArB;AACH,KAXD;AAYAyF,gBAAY7xB,SAAZ,CAAsBsZ,MAAtB,GAA+B,UAAU+R,SAAV,EAAqB4H,OAArB,EAA8B;AACzD,YAAI1M,OAAOjT,KAAK8S,KAAL,CAAW9S,KAAKC,SAAL,CAAe0f,QAAQ1M,IAAvB,CAAX,CAAX;AACAA,aAAK1G,MAAL,CAAY0G,KAAKhlB,MAAL,GAAc,CAA1B,EAA6B,CAA7B;AACA,eAAO,KAAK2xB,gBAAL,CAAsB7H,SAAtB,EAAiC9E,IAAjC,CAAP;AACH,KAJD;AAKAsL,gBAAY7xB,SAAZ,CAAsBkzB,gBAAtB,GAAyC,UAAU7H,SAAV,EAAqB9E,IAArB,EAA2B;AAChE,YAAI,KAAKrhB,OAAL,CAAaqhB,IAAb,KAAsBA,KAAKhlB,MAAL,GAAc,CAAxC,EAA2C;AACvC,gBAAIqtB,SAAS,KAAKkD,KAAL,CAAWzG,SAAX,CAAb;AACA,gBAAI4H,UAAU,IAAd;AACA,iBAAK,IAAI9sB,IAAI,CAAb,EAAgBA,IAAIogB,KAAKhlB,MAAzB,EAAiC4E,GAAjC,EAAsC;AAClC,oBAAIgtB,cAAc5M,KAAKpgB,CAAL,CAAlB;AACAyoB,yBAASA,OAAO1gB,QAAP,CAAgBilB,WAAhB,CAAT;AACA,oBAAI,CAACvE,MAAL,EAAa;AACTqE,8BAAU,KAAV;AACA;AACH;AACJ;AACD,mBAAOA,UAAUrE,MAAV,GAAmB,IAA1B;AACH;AACJ,KAdD;AAeA;;;AAGAiD,gBAAY7xB,SAAZ,CAAsBozB,OAAtB,GAAgC,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AACvD,YAAIA,MAAJ,EAAY;AACR,gBAAIC,WAAW,KAAKja,MAAL,CAAY+Z,OAAZ,EAAqBC,MAArB,CAAf;AACA,gBAAIlwB,QAAQkwB,OAAO/M,IAAP,CAAY+M,OAAO/M,IAAP,CAAYhlB,MAAZ,GAAqB,CAAjC,CAAZ;AACA,gBAAIgyB,YAAYnwB,QAAQ,CAAR,IAAa,CAAzB,IAA8BA,QAAQ,CAAR,GAAYmwB,SAASrlB,QAAT,CAAkB3M,MAAhE,EAAwE;AACpE,qBAAK,IAAI4E,IAAI/C,QAAQ,CAArB,EAAwB+C,KAAK,CAA7B,EAAgCA,GAAhC,EAAqC;AACjC,wBAAIqtB,WAAWD,SAASrlB,QAAT,CAAkB/H,CAAlB,CAAf;AACA,wBAAIqtB,SAAS/kB,MAAT,KAAoB,QAAxB,EAAkC;AAC9B,+BAAO+kB,QAAP;AACH;AACJ;AACJ;AACJ;AACD,eAAO,IAAP;AACH,KAdD;AAeA3B,gBAAY7xB,SAAZ,CAAsByzB,OAAtB,GAAgC,UAAUJ,OAAV,EAAmBC,MAAnB,EAA2B;AACvD,YAAIA,MAAJ,EAAY;AACR,gBAAII,WAAW,KAAKpa,MAAL,CAAY+Z,OAAZ,EAAqBC,MAArB,CAAf;AACA,gBAAIlwB,QAAQkwB,OAAO/M,IAAP,CAAY+M,OAAO/M,IAAP,CAAYhlB,MAAZ,GAAqB,CAAjC,IAAsC,CAAlD;AACA,gBAAI6B,SAAS,CAAT,IAAcA,QAAQswB,SAASxlB,QAAT,CAAkB3M,MAA5C,EAAoD;AAChD,uBAAOmyB,SAASxlB,QAAT,CAAkB9K,KAAlB,CAAP;AACH;AACJ;AACD,eAAO,IAAP;AACH,KATD;AAUA;;;AAGAyuB,gBAAY7xB,SAAZ,CAAsB6vB,KAAtB,GAA8B,UAAUxE,SAAV,EAAqB;AAC/C,YAAIsI,YAAY,KAAK3B,OAAL,CAAa3G,SAAb,CAAhB;AACA,YAAIuI,aAAaD,UAAUxjB,KAA3B;AACAwjB,kBAAUxjB,KAAV,GAAkB,EAAlB;AACA,YAAI0jB,UAAUvgB,KAAK8S,KAAL,CAAW9S,KAAKC,SAAL,CAAeogB,SAAf,CAAX,CAAd;AACAE,gBAAQnjB,SAAR,GAAoBijB,UAAUjjB,SAA9B;AACAmjB,gBAAQtN,IAAR,GAAejT,KAAK8S,KAAL,CAAW9S,KAAKC,SAAL,CAAeogB,UAAUpN,IAAzB,CAAX,CAAf;AACAsN,gBAAQ1jB,KAAR,GAAgByjB,UAAhB;AACAC,gBAAQvN,MAAR,GAAiBqN,UAAUrN,MAA3B;AACAuN,gBAAQrlB,GAAR,GAAcmlB,UAAUnlB,GAAxB;AACAqlB,gBAAQjtB,IAAR,GAAe+sB,UAAU/sB,IAAzB;AACA,eAAOitB,OAAP;AACH,KAZD;AAaAhC,gBAAY7xB,SAAZ,CAAsB8zB,YAAtB,GAAqC,UAAU1H,IAAV,EAAgB3d,MAAhB,EAAwB;AACzD,YAAI1M,QAAQ,IAAZ;AACAqqB,aAAK3d,MAAL,GAAcA,MAAd;AACA,YAAI2d,KAAKle,QAAL,IAAiBke,KAAKle,QAAL,CAAc3M,MAAd,GAAuB,CAA5C,EAA+C;AAC3C6qB,iBAAKle,QAAL,CAAclK,GAAd,CAAkB,UAAU+vB,OAAV,EAAmB;AACjChyB,sBAAM+xB,YAAN,CAAmBC,OAAnB,EAA4BtlB,MAA5B;AACH,aAFD;AAGH;AACJ,KARD;AASAojB,gBAAY7xB,SAAZ,CAAsB4yB,eAAtB,GAAwC,UAAUxG,IAAV,EAAgB;AACpD,YAAIA,KAAKle,QAAL,IAAiBke,KAAKle,QAAL,CAAc3M,MAAd,GAAuB,CAA5C,EAA+C;AAC3C,gBAAIyyB,SAAS,EAAb;AACA5H,iBAAKle,QAAL,CAAclK,GAAd,CAAkB,UAAUiwB,KAAV,EAAiB;AAC/BD,0BAAU,MAAMC,MAAM/jB,OAAZ,GAAsB,GAAtB,GAA4B+jB,MAAMzjB,QAAlC,GAA6C,GAA7C,GAAmDyjB,MAAMvjB,SAAzD,GAAqE,IAArE,GAA4EujB,MAAM/jB,OAAlF,GAA4F,OAAtG;AACH,aAFD;AAGAkc,iBAAK1b,SAAL,GAAiBsjB,MAAjB;AACH;AACJ,KARD;AASAnC,gBAAY7xB,SAAZ,CAAsBoyB,UAAtB,GAAmC,UAAU8B,aAAV,EAAyBC,UAAzB,EAAqCC,QAArC,EAA+C;AAC9E,YAAIryB,QAAQ,IAAZ;AACA,YAAIsyB,UAAU/gB,KAAK8S,KAAL,CAAW9S,KAAKC,SAAL,CAAe4gB,UAAf,CAAX,CAAd;AACAE,gBAAQ3wB,IAAR,CAAa0wB,QAAb;AACAF,sBAAc3N,IAAd,GAAqB8N,OAArB;AACAH,sBAAchmB,QAAd,CAAuBlK,GAAvB,CAA2B,UAAUyH,OAAV,EAAmBrI,KAAnB,EAA0B;AACjDrB,kBAAMqwB,UAAN,CAAiB3mB,OAAjB,EAA0B4oB,OAA1B,EAAmCjxB,KAAnC;AACH,SAFD;AAGAixB,kBAAU,IAAV;AACH,KATD;AAUAxC,gBAAY/e,SAAZ,GAAwB,aAAxB;AACA,WAAO+e,WAAP;AACH,CAnNgC,CAmN/B3xB,eAAeqE,MAnNgB,CAAjC;AAoNAtF,QAAQ4yB,WAAR,GAAsBA,WAAtB;AACA,uC;;;;;;;ACrOa;;AACb,SAAS/yB,QAAT,CAAkBC,CAAlB,EAAqB;AACjB,SAAK,IAAIC,CAAT,IAAcD,CAAd;AAAiB,YAAI,CAACE,QAAQC,cAAR,CAAuBF,CAAvB,CAAL,EAAgCC,QAAQD,CAAR,IAAaD,EAAEC,CAAF,CAAb;AAAjD;AACH;AACDG,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIi1B,eAAeh1B,mBAAOA,CAAC,EAAR,CAAnB;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAR,SAASQ,mBAAOA,CAAC,EAAR,CAAT;AACAL,QAAQs1B,oBAAR,GAA+BD,aAAazhB,kBAA5C;AACA5T,QAAQu1B,oBAAR,GAA+BF,aAAa3hB,kBAA5C;AACA1T,QAAQw1B,oBAAR,GAA+BH,aAAaxgB,kBAA5C,C;;;;;;;ACVa;;AACb,IAAIvU,YAAa,aAAQ,UAAKA,SAAd,IAA6B,YAAY;AACrD,QAAIC,iBAAgB,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,yBAAgBL,OAAOQ,cAAP,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUJ,CAAV,EAAaC,CAAb,EAAgB;AAAED,cAAEG,SAAF,GAAcF,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,iBAAK,IAAIV,CAAT,IAAcU,CAAd;AAAiB,oBAAIA,EAAER,cAAF,CAAiBF,CAAjB,CAAJ,EAAyBS,EAAET,CAAF,IAAOU,EAAEV,CAAF,CAAP;AAA1C;AAAwD,SAF9E;AAGA,eAAOQ,eAAcC,CAAd,EAAiBC,CAAjB,CAAP;AACH,KALD;AAMA,WAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,uBAAcC,CAAd,EAAiBC,CAAjB;AACA,iBAASI,EAAT,GAAc;AAAE,iBAAKC,WAAL,GAAmBN,CAAnB;AAAuB;AACvCA,UAAEO,SAAF,GAAcN,MAAM,IAAN,GAAaP,OAAOc,MAAP,CAAcP,CAAd,CAAb,IAAiCI,GAAGE,SAAH,GAAeN,EAAEM,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAZ2C,EAA5C;AAaAX,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIa,iBAAiBZ,mBAAOA,CAAC,CAAR,CAArB;AACA,IAAIo1B,oBAAoBp1B,mBAAOA,CAAC,EAAR,CAAxB;AACA,IAAIg1B,eAAeh1B,mBAAOA,CAAC,EAAR,CAAnB;AACA,IAAIq1B,cAAe,UAAUv0B,MAAV,EAAkB;AACjCb,cAAUo1B,WAAV,EAAuBv0B,MAAvB;AACA,aAASu0B,WAAT,CAAqBxkB,KAArB,EAA4B;AACxB,YAAIpO,QAAQ3B,OAAO2E,IAAP,CAAY,IAAZ,KAAqB,IAAjC;AACAhD,cAAMoO,KAAN,GAAcA,KAAd;AACApO,cAAM0L,QAAN,GAAiB,EAAjB;AACA1L,cAAM6yB,WAAN,GAAoB,EAApB;AACA7yB,cAAM8yB,YAAN;AACA9yB,cAAM+yB,SAAN;AACA,eAAO/yB,KAAP;AACH;AACD4yB,gBAAY30B,SAAZ,CAAsB+0B,UAAtB,GAAmC,UAAUC,UAAV,EAAsB;AACrD,YAAIjzB,QAAQ,IAAZ;AACA,YAAIqiB,SAAS,EAAb;AACA,aAAK,IAAIxK,KAAK,CAAd,EAAiBA,KAAKtZ,UAAUiB,MAAhC,EAAwCqY,IAAxC,EAA8C;AAC1CwK,mBAAOxK,KAAK,CAAZ,IAAiBtZ,UAAUsZ,EAAV,CAAjB;AACH;AACD,eAAO,IAAImI,OAAJ,CAAY,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AAC1C,gBAAI/P,KAAKlQ,MAAM4F,WAAN,EAAT;AACA5F,kBAAMiQ,OAAN,CAAc;AACVpL,sBAAMwd,MADI;AAEVnS,oBAAIA,EAFM;AAGVK,wBAAQ0iB,UAHE;AAIVtjB,sBAAM;AAJI,aAAd;AAMA3P,kBAAM6yB,WAAN,CAAkB3iB,EAAlB,IAAwB;AACpB+P,wBAAQA,MADY;AAEpBF,yBAASA;AAFW,aAAxB;AAIH,SAZM,CAAP;AAaH,KAnBD;AAoBA6S,gBAAY30B,SAAZ,CAAsBi1B,aAAtB,GAAsC,UAAU7iB,MAAV,EAAkB4iB,UAAlB,EAA8B;AAChE,YAAIjzB,QAAQ,IAAZ;AACA,YAAIqiB,SAAS,EAAb;AACA,aAAK,IAAIxK,KAAK,CAAd,EAAiBA,KAAKtZ,UAAUiB,MAAhC,EAAwCqY,IAAxC,EAA8C;AAC1CwK,mBAAOxK,KAAK,CAAZ,IAAiBtZ,UAAUsZ,EAAV,CAAjB;AACH;AACD,eAAO,IAAImI,OAAJ,CAAY,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AAC1C,gBAAI/P,KAAKlQ,MAAM4F,WAAN,EAAT;AACA5F,kBAAMiQ,OAAN,CAAc;AACVpL,sBAAMwd,MADI;AAEVnS,oBAAIA,EAFM;AAGVK,wBAAQ0iB,UAHE;AAIVxuB,qBAAK4L,MAJK;AAKVV,sBAAM;AALI,aAAd;AAOA3P,kBAAM6yB,WAAN,CAAkB3iB,EAAlB,IAAwB;AACpB+P,wBAAQA,MADY;AAEpBF,yBAASA;AAFW,aAAxB;AAIH,SAbM,CAAP;AAcH,KApBD;AAqBA6S,gBAAY30B,SAAZ,CAAsBk1B,OAAtB,GAAgC,UAAUnjB,UAAV,EAAsBzL,EAAtB,EAA0B;AACtD,YAAIvE,QAAQ,IAAZ;AACA,eAAO,IAAIggB,OAAJ,CAAY,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AAC1C,gBAAI/P,KAAKlQ,MAAM4F,WAAN,EAAT;AACA5F,kBAAMiQ,OAAN,CAAc;AACVpL,sBAAM0tB,aAAaljB,SAAb,CAAuB9K,EAAvB,CADI;AAEVyL,4BAAYA,UAFF;AAGVE,oBAAIA,EAHM;AAIVP,sBAAM;AAJI,aAAd;AAMA3P,kBAAM6yB,WAAN,CAAkB3iB,EAAlB,IAAwB;AACpB+P,wBAAQA,MADY;AAEpBF,yBAASA;AAFW,aAAxB;AAIH,SAZM,CAAP;AAaH,KAfD;AAgBA6S,gBAAY30B,SAAZ,CAAsBm1B,SAAtB,GAAkC,UAAUpjB,UAAV,EAAsBvL,GAAtB,EAA2B;AACzD,YAAIzE,QAAQ,IAAZ;AACA,eAAO,IAAIggB,OAAJ,CAAY,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AAC1C,gBAAI/P,KAAKlQ,MAAM4F,WAAN,EAAT;AACA5F,kBAAMiQ,OAAN,CAAc;AACVpL,sBAAM0tB,aAAa3hB,kBAAb,CAAgCnM,GAAhC,CADI;AAEVuL,4BAAYA,UAFF;AAGVE,oBAAIA,EAHM;AAIVP,sBAAM;AAJI,aAAd;AAMA3P,kBAAM6yB,WAAN,CAAkB3iB,EAAlB,IAAwB;AACpB+P,wBAAQA,MADY;AAEpBF,yBAASA;AAFW,aAAxB;AAIH,SAZM,CAAP;AAaH,KAfD;AAgBA6S,gBAAY30B,SAAZ,CAAsBo1B,OAAtB,GAAgC,YAAY;AACxC,aAAKC,MAAL,CAAYC,SAAZ;AACA,aAAKD,MAAL,GAAc,IAAd;AACH,KAHD;AAIAV,gBAAY30B,SAAZ,CAAsBu1B,EAAtB,GAA2B,UAAUnG,SAAV,EAAqB3P,QAArB,EAA+B;AACtD,aAAKhS,QAAL,CAAc2hB,SAAd,IAA2B3P,QAA3B;AACH,KAFD;AAGAkV,gBAAY30B,SAAZ,CAAsBw1B,gBAAtB,GAAyC,YAAY;AACjD,YAAI90B,SAAS,EAAb;AACA,YAAI,KAAKyP,KAAT,EAAgB;AACZ,iBAAK,IAAItJ,GAAT,IAAgB,KAAKsJ,KAArB,EAA4B;AACxB,oBAAI+C,WAAW,KAAK/C,KAAL,CAAWtJ,GAAX,CAAf;AACA,oBAAI,KAAK5B,QAAL,CAAciO,QAAd,CAAJ,EAA6B;AACzBxS,8BAAU,SAASmG,GAAT,GAAe,KAAf,GAAuBytB,aAAazhB,kBAAb,CAAgC,KAAK1C,KAAL,CAAWtJ,GAAX,CAAhC,EAAiDA,GAAjD,CAAvB,GAA+E,MAAzF;AACH,iBAFD,MAGK,IAAI,KAAK1B,SAAL,CAAe+N,QAAf,CAAJ,EAA8B;AAC/BxS,8BAAU,SAASmG,GAAT,GAAe,KAAf,GAAuBqM,QAAvB,GAAkC,OAA5C;AACH,iBAFI,MAGA,IAAI,KAAK3N,UAAL,CAAgB2N,QAAhB,CAAJ,EAA+B;AAChCA,+BAAWA,SAASpO,QAAT,EAAX;AACApE,8BAAU,SAASmG,GAAT,GAAe,KAAf,GAAuBqM,QAAvB,GAAkC,OAA5C;AACH,iBAHI,MAIA,IAAI,KAAKhO,OAAL,CAAagO,QAAb,KAA0B,KAAKlO,QAAL,CAAckO,QAAd,CAA9B,EAAuD;AACxDA,+BAAWI,KAAKC,SAAL,CAAeL,QAAf,CAAX;AACAxS,8BAAU,SAASmG,GAAT,GAAe,KAAf,GAAuBqM,QAAvB,GAAkC,OAA5C;AACH,iBAHI,MAIA,IAAI,KAAKzN,QAAL,CAAcyN,QAAd,CAAJ,EAA6B;AAC9BA,+BAAWA,SAASuiB,MAApB;AACA/0B,8BAAU,SAASmG,GAAT,GAAe,KAAf,GAAuBqM,QAAvB,GAAkC,OAA5C;AACH,iBAHI,MAIA;AACD,0BAAM,IAAI1L,KAAJ,CAAU,UAAV,CAAN;AACH;AACJ;AACJ;AACD,eAAO9G,MAAP;AACH,KA7BD;AA8BAi0B,gBAAY30B,SAAZ,CAAsB60B,YAAtB,GAAqC,YAAY;AAC7C,YAAIa,SAAS,IAAIC,IAAJ,CAAS,CAAC,KAAKC,YAAL,EAAD,CAAT,CAAb;AACA,aAAKP,MAAL,GAAc,IAAIQ,MAAJ,CAAW7W,OAAO8W,GAAP,CAAWC,eAAX,CAA2BL,MAA3B,CAAX,CAAd;AACH,KAHD;AAIAf,gBAAY30B,SAAZ,CAAsB80B,SAAtB,GAAkC,YAAY;AAC1C,aAAKO,MAAL,CAAYW,gBAAZ,CAA6B,SAA7B,EAAwC,KAAK9jB,OAAL,CAAakZ,IAAb,CAAkB,IAAlB,CAAxC;AACA,aAAKiK,MAAL,CAAYW,gBAAZ,CAA6B,OAA7B,EAAsC,KAAKtjB,KAAL,CAAW0Y,IAAX,CAAgB,IAAhB,CAAtC;AACH,KAHD;AAIAuJ,gBAAY30B,SAAZ,CAAsB0S,KAAtB,GAA8B,UAAUsS,GAAV,EAAe;AACzC,YAAI,OAAO,KAAKvX,QAAL,CAAcyE,OAArB,KAAiC,UAArC,EAAiD;AAC7C,gBAAI6B,YAAY;AACZkiB,wBAAQ,KADI;AAEZ/jB,yBAAS8S,IAAI9S,OAFD;AAGZgkB,0BAAUlR;AAHE,aAAhB;AAKA,iBAAKvX,QAAL,CAAcyE,OAAd,CAAsB6B,SAAtB;AACA,gBAAIA,UAAUkiB,MAAd,EAAsB;AAClB;AACH;AACJ;AACJ,KAZD;AAaAtB,gBAAY30B,SAAZ,CAAsBkS,OAAtB,GAAgC,UAAUrE,KAAV,EAAiB;AAC7C,YAAIjH,OAAOiH,MAAMjH,IAAjB;AACA,YAAIqL,KAAKrL,KAAKqL,EAAd;AACA,YAAI,OAAO,KAAKxE,QAAL,CAAcyE,OAArB,KAAiC,UAArC,EAAiD;AAC7C,gBAAI6B,YAAY;AACZkiB,wBAAQ,KADI;AAEZrvB,sBAAMiH,MAAMjH,IAFA;AAGZsvB,0BAAUroB;AAHE,aAAhB;AAKA,iBAAKJ,QAAL,CAAcyE,OAAd,CAAsB6B,SAAtB;AACA,gBAAIA,UAAUkiB,MAAd,EAAsB;AAClB;AACH;AACJ;AACD,YAAIrvB,KAAK8K,IAAL,KAAc,YAAd,IAA8B9K,KAAK8K,IAAL,KAAc,eAAhD,EAAiE;AAC7D,gBAAI,KAAKkjB,WAAL,CAAiB3iB,EAAjB,CAAJ,EAA0B;AACtB,oBAAIkkB,iBAAiBvvB,IAArB;AACA,oBAAIuvB,eAAehkB,UAAf,KAA8B,GAAlC,EAAuC;AACnC,yBAAKyiB,WAAL,CAAiB3iB,EAAjB,EAAqB6P,OAArB,CAA6BqU,cAA7B;AACH,iBAFD,MAGK;AACD,yBAAKvB,WAAL,CAAiB3iB,EAAjB,EAAqB+P,MAArB,CAA4BmU,cAA5B;AACH;AACD,uBAAO,KAAKvB,WAAL,CAAiB3iB,EAAjB,CAAP;AACH,aATD,MAUK;AACD,uBAAO,KAAKxE,QAAL,CAAc2oB,kBAArB,KAA4C,UAA5C,IAA0D,KAAK3oB,QAAL,CAAc2oB,kBAAd,CAAiC;AACvFH,4BAAQ,KAD+E;AAEvFrvB,0BAAMA,IAFiF;AAGvFsvB,8BAAUroB;AAH6E,iBAAjC,CAA1D;AAKH;AACJ,SAlBD,MAmBK,IAAIjH,KAAK8K,IAAL,KAAc,YAAd,IAA8B9K,KAAK8K,IAAL,KAAc,cAAhD,EAAgE;AACjE,gBAAI,KAAKkjB,WAAL,CAAiB3iB,EAAjB,CAAJ,EAA0B;AACtB,oBAAIokB,eAAezvB,IAAnB;AACA,oBAAIyvB,aAAalkB,UAAb,KAA4B,GAAhC,EAAqC;AACjC,yBAAKyiB,WAAL,CAAiB3iB,EAAjB,EAAqB6P,OAArB,CAA6BuU,YAA7B;AACH,iBAFD,MAGK;AACD,yBAAKzB,WAAL,CAAiB3iB,EAAjB,EAAqB+P,MAArB,CAA4BqU,YAA5B;AACH;AACD,uBAAO,KAAKzB,WAAL,CAAiB3iB,EAAjB,CAAP;AACH,aATD,MAUK;AACD,uBAAO,KAAKxE,QAAL,CAAc4oB,YAArB,KAAsC,UAAtC,IAAoD,KAAK5oB,QAAL,CAAc4oB,YAAd,CAA2B;AAC3EJ,4BAAQ,KADmE;AAE3ErvB,0BAAMA,IAFqE;AAG3EsvB,8BAAUroB;AAHiE,iBAA3B,CAApD;AAKH;AACJ;AACJ,KApDD;AAqDA8mB,gBAAY30B,SAAZ,CAAsBgS,OAAtB,GAAgC,UAAUskB,GAAV,EAAe;AAC3C,aAAKjB,MAAL,CAAYkB,WAAZ,CAAwBD,GAAxB;AACH,KAFD;AAGA3B,gBAAY30B,SAAZ,CAAsB41B,YAAtB,GAAqC,YAAY;AAC7C,YAAIY,gBAAgBlC,aAAapjB,SAAb,CAAuBpM,QAAvB,EAApB;AACA,YAAI2O,WAAW6gB,aAAazhB,kBAAb,CAAgC,IAAI6hB,kBAAkB+B,eAAtB,EAAhC,EAAyE,iBAAzE,CAAf;AACA,YAAIC,aAAapC,aAAa9gB,iBAAb,CAA+BtT,eAAeyE,YAA9C,CAAjB;AACA,YAAIjD,OAAO,EAAX;AACAA,aAAKgC,IAAL,CAAU,qBAAqB8yB,aAA/B;AACA90B,aAAKgC,IAAL,CAAU,0BAA0B4wB,aAAaljB,SAAb,CAAuBkjB,aAAatgB,cAApC,CAApC;AACAtS,aAAKgC,IAAL,CAAU,8BAA8B4wB,aAAaljB,SAAb,CAAuBkjB,aAAaxgB,kBAApC,CAAxC;AACApS,aAAKgC,IAAL,CAAU,iBAAiBgzB,UAA3B;AACAh1B,aAAKgC,IAAL,CAAU,iBAAiB+P,QAA3B;AACA/R,aAAKgC,IAAL,CAAU,KAAK8xB,gBAAL,EAAV;AACA9zB,aAAKgC,IAAL,CAAU,iBAAiB4wB,aAAaljB,SAAb,CAAuBkjB,aAAahjB,SAApC,CAA3B;AACA,eAAO5P,KAAKD,IAAL,CAAU,MAAV,CAAP;AACH,KAbD;AAcA,WAAOkzB,WAAP;AACH,CArNkB,CAqNjBz0B,eAAeqE,MArNE,CAAnB;AAsNAtF,QAAQ01B,WAAR,GAAsBA,WAAtB,C;;;;;;;ACxOa;;AACbx1B,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIo3B,kBAAmB,YAAY;AAC/B,aAASA,eAAT,GAA2B,CAC1B;AACDA,oBAAgBz2B,SAAhB,CAA0BgS,OAA1B,GAAoC,UAAUskB,GAAV,EAAe;AAC/C1kB,aAAK,aAAL,EAAoB0kB,GAApB;AACH,KAFD;AAGA,WAAOG,eAAP;AACH,CAPsB,EAAvB;AAQAx3B,QAAQw3B,eAAR,GAA0BA,eAA1B,C;;;;;;;ACVa;;AACbt3B,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACAJ,QAAQ03B,OAAR,GAAkB,EAAlB,C;;;;;;;;;;;;;;;;ACDA;;;;;;AA4EA;AAMI,4BAAoB,OAApB,EAAsD;AAAlC;AADZ,6BAA6C,EAA7C;AAEJ,aAAK,YAAL,GAAoB,IAAI,mBAAJ,EAApB;AACA,aAAK,kBAAL;AACA,aAAK,KAAL;AACH;AACD;AACI,YAAG,KAAK,OAAR,EAAiB;AACb,mBAAO,KAAK,OAAL,CAAa,OAApB,KAAgC,UAAhC,IAA8C,KAAK,OAAL,CAAa,OAAb,EAA9C;AACA,iBAAK,SAAL,GAAkB,IAAI,IAAJ,EAAD,CAAa,OAAb,EAAjB;AACA,iBAAK,OAAL,GAAe,KAAK,YAAL,CAAkB,cAAlB,CAAiC,KAAK,iBAAtC,EAAyD,IAAzD,CAAf;AACH;AACJ,KAND;AAOA;AACI,aAAK,YAAL,CAAkB,aAAlB,CAAgC,KAAK,OAArC;AACA,aAAK,OAAL,IAAgB,OAAO,KAAK,OAAL,CAAa,KAApB,KAA8B,UAA9C,IAA4D,KAAK,OAAL,CAAa,KAAb,EAA5D;AACA,aAAK,OAAL;AACH,KAJD;AAKQ,kDAAR;AACI,YAAM,OAAoC,KAAK,OAAL,CAAa,IAAb,IAAqB,EAA/D;AACA,YAAM,gBAA6C,EAAnD;AACA,aAAK,GAAL,CAAS,UAAC,IAAD,EAAgC;AACrC,0BAAc,IAAd,CAAmB;AACf,2BAAW,KAAK,SADD;AAEf,6BAAa,iCAAgB,4BAAhB,CAA6C,KAAK,GAAlD,EAAuD,KAAK,IAA5D,EAAkE,KAAK,EAAvE,CAFE;AAGf,qBAAK,KAAK,GAHK;AAIf,0BAAU,KAAK,QAJA;AAKf,0BAAU,iCAAgB,YAAhB,CAA6B,KAAK,IAAlC,CALK;AAMf,yBAAS,KAAK,OANC;AAOf,uBAAO,KAAK,QAPG;AAQf,yBAAS,KAAK,OARC;AASf,yBAAS,KAAK,OATC;AAUf,yBAAS,KAAK,OAVC;AAWf,wBAAQ,iCAAgB,YAAhB,CAA6B,KAAK,EAAlC,CAXO;AAYf,sBAAM,KAAK;AAZI,aAAnB;AAcH,SAfD;AAgBA,aAAK,aAAL,GAAqB,aAArB;AACH,KApBO;AAqBA,uCAAR;AACI,YAAG,KAAK,aAAL,IAAsB,KAAK,aAAL,CAAmB,MAAnB,GAA4B,CAArD,EAAwD;AACpD,iBAAK,aAAL,CAAmB,GAAnB,CAAuB,UAAC,OAAD,EAAkC;AACrD,uBAAO,QAAQ,KAAf,KAAyB,UAAzB,IAAuC,QAAQ,KAAR,CAAc;AACjD,6BAAS,QAAQ,WADgC;AAEjD,0BAAM,QAAQ,QAFmC;AAGjD,wBAAI,QAAQ;AAHqC,iBAAd,CAAvC;AAKH,aAND;AAOH;AACD,aAAK,aAAL,GAAqB,IAArB;AACA,aAAK,YAAL,GAAoB,IAApB;AACA,aAAK,OAAL,GAAe,IAAf;AACA,aAAK,qBAAL,GAA6B,IAA7B;AACA,eAAO,KAAK,aAAZ;AACA,eAAO,KAAK,YAAZ;AACA,eAAO,KAAK,OAAZ;AACA,eAAO,KAAK,qBAAZ;AACH,KAlBO;AAmBA,wDAAR,UAAiC,aAAjC,EAAqE;AACjE,YAAI,iBAAiB,IAArB;AACA,gBAAO,aAAP;AACI,iBAAK,QAAL;AACI,iCAAiB,8BAAiB,MAAlC;AACA;AACJ,iBAAK,YAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,MAAvC;AACA;AACJ,iBAAK,eAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,SAAvC;AACA;AACJ,iBAAK,aAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,OAAvC;AACA;AACJ,iBAAK,cAAL;AACI,iCAAiB,8BAAiB,MAAjB,CAAwB,MAAzC;AACA;AACJ,iBAAK,iBAAL;AACI,iCAAiB,8BAAiB,MAAjB,CAAwB,SAAzC;AACA;AACJ,iBAAK,eAAL;AACI,iCAAiB,8BAAiB,MAAjB,CAAwB,OAAzC;AACA;AACJ,iBAAK,cAAL;AACI,iCAAiB,8BAAiB,MAAjB,CAAwB,MAAzC;AACA;AACJ,iBAAK,iBAAL;AACI,iCAAiB,8BAAiB,MAAjB,CAAwB,SAAzC;AACA;AACJ,iBAAK,eAAL;AACI,iCAAiB,8BAAiB,MAAjB,CAAwB,OAAzC;AACA;AACJ,iBAAK,aAAL;AACI,iCAAiB,8BAAiB,KAAjB,CAAuB,MAAxC;AACA;AACJ,iBAAK,gBAAL;AACI,iCAAiB,8BAAiB,KAAjB,CAAuB,SAAxC;AACA;AACJ,iBAAK,cAAL;AACI,iCAAiB,8BAAiB,KAAjB,CAAuB,OAAxC;AACA;AACJ,iBAAK,eAAL;AACI,iCAAiB,8BAAiB,OAAjB,CAAyB,MAA1C;AACA;AACJ,iBAAK,kBAAL;AACI,iCAAiB,8BAAiB,OAAjB,CAAyB,SAA1C;AACA;AACJ,iBAAK,gBAAL;AACI,iCAAiB,8BAAiB,OAAjB,CAAyB,OAA1C;AACA;AACJ,iBAAK,YAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,MAAvC;AACA;AACJ,iBAAK,eAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,SAAvC;AACA;AACJ,iBAAK,aAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,OAAvC;AACA;AACJ,iBAAK,YAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,MAAvC;AACA;AACJ,iBAAK,eAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,SAAvC;AACA;AACJ,iBAAK,aAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,OAAvC;AACA;AACJ,iBAAK,aAAL;AACI,iCAAiB,8BAAiB,KAAjB,CAAuB,MAAxC;AACA;AACJ,iBAAK,gBAAL;AACI,iCAAiB,8BAAiB,KAAjB,CAAuB,SAAxC;AACA;AACJ,iBAAK,cAAL;AACI,iCAAiB,8BAAiB,KAAjB,CAAuB,OAAxC;AACA;AACJ,iBAAK,aAAL;AACI,iCAAiB,8BAAiB,KAAjB,CAAuB,MAAxC;AACA;AACJ,iBAAK,gBAAL;AACI,iCAAiB,8BAAiB,KAAjB,CAAuB,SAAxC;AACA;AACJ,iBAAK,cAAL;AACI,iCAAiB,8BAAiB,KAAjB,CAAuB,OAAxC;AACA;AACJ,iBAAK,YAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,MAAvC;AACA;AACJ,iBAAK,eAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,SAAvC;AACA;AACJ,iBAAK,aAAL;AACI,iCAAiB,8BAAiB,IAAjB,CAAsB,OAAvC;AACA;AA7FR;AA+FA,eAAO,cAAP;AACH,KAlGO;AAmGA,iDAAR;AAAA;AACI,YAAI,UAAW,IAAI,IAAJ,EAAD,CAAa,OAAb,EAAd;AACA,YAAI,SAAS,UAAU,KAAK,SAA5B;AACA,YAAG,CAAC,KAAK,OAAT,EAAkB;AACd,iBAAK,IAAL;AACH,SAFD,MAEO;AACH,gBAAG,SAAS,KAAK,OAAL,CAAa,QAAzB,EAAmC;AAC/B,qBAAK,IAAL;AACH,aAFD,MAEO;AACH,qBAAK,aAAL,CAAmB,GAAnB,CAAuB,UAAC,QAAD,EAAqC,QAArC,EAAqD;AACxE,wBAAM,gBAAgB,SAAS,SAAT,IAAsB,CAA5C;AACA,wBAAG,iBAAiB,MAAjB,IAA2B,UAAU,gBAAgB,SAAS,QAAjE,EAA2E;AACvE,4BAAG,CAAC,SAAS,OAAb,EAAsB;AAClB,qCAAS,OAAT,GAAmB,IAAnB;AACA,mCAAO,SAAS,OAAhB,KAA4B,UAA5B,IAA0C,SAAS,OAAT,CAAiB,QAAjB,CAA1C;AACH;AACD,4BAAM,oBAAoB,MAAK,kBAAL,CAAwB,MAAxB,EAAgC,QAAhC,CAA1B;AACA,+BAAO,MAAK,OAAL,CAAa,QAApB,KAAiC,UAAjC,IAA+C,MAAK,OAAL,CAAa,QAAb,CAAsB;AACjE,kCAAM,iBAD2D;AAEjE,iCAAK,SAAS,GAFmD;AAGjE,mCAAO,iCAAgB,uBAAhB,CAAwC,iBAAxC;AAH0D,yBAAtB,CAA/C;AAKH,qBAXD,MAWO;AACH,4BAAG,SAAS,gBAAgB,SAAS,QAArC,EAA+C;AAC3C,mCAAO,SAAS,KAAhB,KAA0B,UAA1B,IAAwC,SAAS,KAAT,CAAe;AACnD,yCAAS,SAAS,WADiC;AAEnD,sCAAM,SAAS,QAFoC;AAGnD,oCAAI,SAAS;AAHsC,6BAAf,CAAxC;AAKA,mCAAO,MAAK,aAAL,CAAmB,QAAnB,CAAP;AACH;AACJ;AACJ,iBAvBD;AAwBH;AACJ;AACD,kBAAU,IAAV;AACA,iBAAS,IAAT;AACH,KArCO;AAsCA,kDAAR,UAA2B,IAA3B,EAAwC,IAAxC,EAAuE;AAAvE;AACI,YAAI,wBAAwB,KAAK,wBAAL,CAA8B,KAAK,IAAnC,CAA5B;AACA,YAAM,iBAAiB,EAAvB;AACA,YAAG,OAAO,qBAAP,KAAiC,UAApC,EAAgD;AAC5C,mBAAO,IAAP,CAAY,KAAK,MAAjB,EAAyB,GAAzB,CAA6B,UAAC,MAAD,EAAc;AACvC,oBAAM,eAAqC,KAAK,WAAL,CAAiB,MAAjB,CAA3C;AACA,oBAAM,aAAmC,KAAK,QAAL,CAAc,MAAd,KAAyB,YAAlE;AACA,oBAAM,UAA+B,KAAK,MAAL,CAAY,MAAZ,CAArC;AACA,oBAAM,cAAqB,EAA3B;AACA,oBAAM,iBAAwB,EAA9B;AACA,oBAAM,cAAmB,EAAzB;AACA,4BAAY,IAAZ,CAAiB,QAAQ,MAAzB;AACA,4BAAY,IAAZ,CAAiB,QAAQ,MAAzB;AACA,4BAAY,IAAZ,CAAiB,QAAQ,MAAzB;AACA,4BAAY,IAAZ,CAAiB,QAAQ,MAAzB;AACA,+BAAe,IAAf,CAAoB,WAAW,MAA/B;AACA,+BAAe,IAAf,CAAoB,WAAW,MAA/B;AACA,+BAAe,IAAf,CAAoB,WAAW,MAA/B;AACA,+BAAe,IAAf,CAAoB,WAAW,MAA/B;AACA,4BAAY,GAAZ,CAAgB,UAAC,QAAD,EAA4B,KAA5B,EAAwC;AACpD,wBAAM,YAAY,QAAQ,CAA1B;AACA,wBAAM,UAAU,UAAQ,SAAxB;AACA,wBAAG,CAAC,wCAAW,QAAX,CAAJ,EAA0B;AACtB,4BAAI,kBAAgB,CAApB;AACA,4BAAG,0BAAa,OAAb,CAAqB,QAArB,CAAH,EAAmC;AAC/B,gCAAM,mBAAiB,EAAvB;AACA,qCAAS,GAAT,CAAa,UAAC,YAAD,EAAuB,QAAvB,EAAsC;AAC/C,kDAAgB,eAAe,KAAf,EAAsB,QAAtB,KAAmC,CAAnD;AACA,iDAAe,IAAf,CAAoB,MAAK,uBAAL,CAA6B,IAA7B,EAAmC,KAAK,IAAxC,EAA8C,qBAA9C,EAAqE;AACrF,gDAAY,eADyE;AAErF,iDAAa,eAAa,eAF2D;AAGrF,iDAAa,IAHwE;AAIrF,8CAAU,KAAK,QAJsE;AAKrF,6CAAS,KAAK,OALuE;AAMrF,6CAAS,KAAK,OANuE;AAOrF,6CAAS,KAAK;AAPuE,iCAArE,CAApB;AASH,6BAXD;AAYA,wCAAY,OAAZ,IAAuB,gBAAvB;AACH,yBAfD,MAeO;AACH,8CAAgB,eAAe,KAAf,KAAyB,CAAzC;AACA,wCAAY,OAAZ,IAAuB,MAAK,uBAAL,CAA6B,IAA7B,EAAmC,KAAK,IAAxC,EAA8C,qBAA9C,EAAqE;AACxF,4CAAY,eAD4E;AAExF,6CAAa,WAAW,eAFgE;AAGxF,6CAAa,IAH2E;AAIxF,0CAAU,KAAK,QAJyE;AAKxF,yCAAS,KAAK,OAL0E;AAMxF,yCAAS,KAAK,OAN0E;AAOxF,yCAAS,KAAK;AAP0E,6BAArE,CAAvB;AASH;AACD,oCAAY,UAAQ,SAAR,GAAiB,MAA7B,IAAuC,QAAQ,UAAQ,SAAR,GAAiB,MAAzB,CAAvC;AACH;AACJ,iBAlCD;AAmCA,+BAAe,MAAf,IAAyB,WAAzB;AACH,aAnDD;AAoDH;AACD,gCAAwB,IAAxB;AACA,eAAO,cAAP;AACH,KA3DO;AA4DA,uDAAR,UAAgC,IAAhC,EAA4C,IAA5C,EAAwE,qBAAxE,EAAwG,OAAxG,EAAiI;AAC7H,YAAI,SAAS,CAAb;AACA,YAAG,OAAO,QAAQ,UAAf,KAA8B,QAA9B,IAA2C,OAAO,QAAQ,WAAf,KAA+B,QAA1E,IAAsF,OAAO,QAAQ,QAAf,KAA4B,QAArH,EAA+H;AAC3H,gBAAI,CAAC,eAAD,EAAkB,kBAAlB,EAAsC,gBAAtC,EAAwD,YAAxD,EAAsE,eAAtE,EAAuF,aAAvF,EAAsG,OAAtG,CAA8G,IAA9G,IAAsH,CAA1H,EAA6H;AACzH,yBAAS,sBAAsB,IAAtB,EAA4B,QAAQ,UAApC,EAAgD,QAAQ,WAAxD,EAAqE,QAAQ,QAA7E,CAAT;AACH,aAFD,MAEO;AACH,oBAAI,CAAC,eAAD,EAAkB,kBAAlB,EAAsC,gBAAtC,EAAwD,OAAxD,CAAgE,IAAhE,KAAyE,CAA7E,EAAgF;AAC5E,6BAAS,sBAAsB,IAAtB,EAA4B,QAAQ,UAApC,EAAgD,QAAQ,WAAxD,EAAqE,QAAQ,QAA7E,EAAuF,QAAQ,OAA/F,EAAwG,QAAQ,OAAhH,CAAT;AACH,iBAFD,MAEO,IAAI,CAAC,YAAD,EAAe,eAAf,EAAgC,aAAhC,EAA+C,OAA/C,CAAuD,IAAvD,KAAgE,CAApE,EAAuE;AAC1E,6BAAS,sBAAsB,IAAtB,EAA4B,QAAQ,UAApC,EAAgD,QAAQ,WAAxD,EAAqE,QAAQ,QAA7E,EAAuF,QAAQ,OAA/F,CAAT;AACH;AACJ;AACJ,SAVD,MAUO;AACH,qBAAS,SAAT;AACH;AACD,eAAO,MAAP;AACH,KAhBO;AAiBZ;AAAC,CArRD;;;;;;;;;;;;;;kBC5Ee;AACX,YAAQ,SADG;AAEX,aAAS,SAFE;AAGX,WAAO,SAHI;AAIX,eAAW,SAJA;AAKX,aAAS,SALE;AAMX,SAAK,SANM;AAOX,qBAAiB,SAPN;AAQX,mBAAe,SARJ;AASX,cAAU,SATC;AAUX,aAAQ,SAVG;AAWX,aAAS,SAXE;AAYX,aAAS,SAZE;AAaX,UAAM,SAbK;AAcX,eAAW,SAdA;AAeX,eAAW,SAfA;AAgBX,mBAAe,SAhBJ;AAiBX,YAAQ,SAjBG;AAkBX,YAAQ,SAlBG;AAmBX,iBAAa,SAnBF;AAoBX,gBAAY,SApBD;AAqBX,gBAAY,SArBD;AAsBX,gBAAY,SAtBD;AAuBX,eAAW,SAvBA;AAwBX,kBAAc,SAxBH;AAyBX,qBAAiB,SAzBN;AA0BX,kBAAc,SA1BH;AA2BX,YAAQ,SA3BG;AA4BX,UAAM,SA5BK;AA6BX,aAAS,SA7BE;AA8BX,cAAU,SA9BC;AA+BX,iBAAa,SA/BF;AAgCX,YAAQ,SAhCG;AAiCX,eAAW,SAjCA;AAkCX,eAAW,SAlCA;AAmCX,eAAW,SAnCA;AAoCX,gBAAY,SApCD;AAqCX,YAAQ,SArCG;AAsCX,iBAAa,SAtCF;AAuCX,eAAW,SAvCA;AAwCX,YAAQ,SAxCG;AAyCX,WAAO,SAzCI;AA0CX,gBAAY,SA1CD;AA2CX,gBAAY,SA3CD;AA4CX,UAAM,SA5CK;AA6CX,SAAK,SA7CM;AA8CX,eAAW,SA9CA;AA+CX,WAAO,SA/CI;AAgDX,cAAU,SAhDC;AAiDX,iBAAa,SAjDF;AAkDX,eAAW,SAlDA;AAmDX,YAAQ,SAnDG;AAoDX,kBAAc,SApDH;AAqDX,gBAAY,SArDD;AAsDX,cAAU,SAtDC;AAuDX,aAAS,SAvDE;AAwDX,WAAO,SAxDI;AAyDX,cAAU,SAzDC;AA0DX,UAAM,SA1DK;AA2DX,iBAAa,SA3DF;AA4DX,WAAO,SA5DI;AA6DX,eAAW,SA7DA;AA8DX,mBAAe,SA9DJ;AA+DX,eAAW,SA/DA;AAgEX,UAAM,SAhEK;AAiEX,YAAQ,SAjEG;AAkEX,eAAW,SAlEA;AAmEX,WAAO,SAnEI;AAoEX,mBAAe,SApEJ;AAqEX,WAAO,SArEI;AAsEX,kBAAc,SAtEH;AAuEX,0BAAsB,SAvEX;AAwEX,iBAAa,SAxEF;AAyEX,mBAAe,SAzEJ;AA0EX,oBAAgB,SA1EL;AA2EX,WAAO,SA3EI;AA4EX,eAAW,SA5EA;AA6EX,iBAAa,SA7EF;AA8EX,cAAU,SA9EC;AA+EX,WAAO,SA/EI;AAgFX,UAAM,SAhFK;AAiFX,mBAAe,SAjFJ;AAkFX,sBAAkB,SAlFP;AAmFX,oBAAgB,SAnFL;AAoFX,kBAAc,SApFH;AAqFX,iBAAa,SArFF;AAsFX,eAAW,SAtFA;AAuFX,UAAM,SAvFK;AAwFX,gBAAY,SAxFD;AAyFX,eAAW,SAzFA;AA0FX,iBAAa,SA1FF;AA2FX,uBAAmB,SA3FR;AA4FX,iBAAa,SA5FF;AA6FX,gBAAY,SA7FD;AA8FX,eAAW,SA9FA;AA+FX,gBAAY,SA/FD;AAgGX,cAAU,SAhGC;AAiGX,kBAAc,SAjGH;AAkGX,UAAM,SAlGK;AAmGX,cAAU,SAnGC;AAoGX,mBAAe,SApGJ;AAqGX,gBAAY,SArGD;AAsGX,eAAW,SAtGA;AAuGX,gBAAY,SAvGD;AAwGX,oBAAgB,SAxGL;AAyGX,iBAAa,SAzGF;AA0GX,kBAAc,SA1GH;AA2GX,oBAAgB,SA3GL;AA4GX,eAAW,SA5GA;AA6GX,eAAW,SA7GA;AA8GX,cAAU,SA9GC;AA+GX,eAAW,SA/GA;AAgHX,mBAAe,SAhHJ;AAiHX,qBAAiB,SAjHN;AAkHX,eAAW,SAlHA;AAmHX,aAAS,SAnHE;AAoHX,gBAAY,SApHD;AAqHX,mBAAe,SArHJ;AAsHX,eAAW,SAtHA;AAuHX,WAAO,SAvHI;AAwHX,eAAW,SAxHA;AAyHX,UAAM,SAzHK;AA0HX,UAAM,SA1HK;AA2HX,WAAO,SA3HI;AA4HX,aAAS,SA5HE;AA6HX,UAAM,SA7HK;AA8HX,eAAW,SA9HA;AA+HX,oBAAgB,SA/HL;AAgIX,aAAS,SAhIE;AAiIX,YAAQ,SAjIG;AAkIX,eAAW,SAlIA;AAmIX,eAAW,SAnIA;AAoIX,gBAAY,SApID;AAqIX,gBAAY,SArID;AAsIX,WAAO;AAtII,C;AAwIf,2C;;;;;;;;;;;;ACzIO,IAAM,kCAAa,CACtB,OADsB,EAEtB,UAFsB,EAGtB,gBAHsB,EAItB,YAJsB,EAKtB,WALsB,EAMtB,kBANsB,EAOtB,aAPsB,EAQtB,MARsB,EAStB,SATsB,EAUtB,gBAVsB,EAWtB,QAXsB,EAYtB,OAZsB,EAatB,aAbsB,EActB,MAdsB,EAetB,WAfsB,EAgBtB,KAhBsB,EAiBtB,UAjBsB,EAkBtB,YAlBsB,EAmBtB,MAnBsB,EAoBtB,SApBsB,EAqBtB,WArBsB,EAsBtB,WAtBsB,EAuBtB,UAvBsB,EAwBtB,WAxBsB,EAyBtB,MAzBsB,EA0BtB,gBA1BsB,EA2BtB,SA3BsB,EA4BtB,OA5BsB,EA6BtB,OA7BsB,EA8BtB,OA9BsB,EA+BtB,OA/BsB,EAgCtB,SAhCsB,EAiCtB,SAjCsB,EAkCtB,UAlCsB,EAmCtB,OAnCsB,EAoCtB,MApCsB,EAqCtB,YArCsB,EAsCtB,gBAtCsB,EAuCtB,WAvCsB,EAwCtB,WAxCsB,EAyCtB,YAzCsB,EA0CtB,YA1CsB,EA2CtB,WA3CsB,EA4CtB,UA5CsB,EA6CtB,WA7CsB,EA8CtB,SA9CsB,EA+CtB,YA/CsB,EAgDtB,eAhDsB,EAiDtB,4BAjDsB,EAkDtB,OAlDsB,EAmDtB,OAnDsB,EAoDtB,MApDsB,EAqDtB,SArDsB,EAsDtB,UAtDsB,EAuDtB,YAvDsB,EAwDtB,OAxDsB,EAyDtB,QAzDsB,EA0DtB,QA1DsB,EA2DtB,SA3DsB,EA4DtB,QA5DsB,EA6DtB,aA7DsB,EA8DtB,SA9DsB,EA+DtB,QA/DsB,EAgEtB,SAhEsB,EAiEtB,YAjEsB,EAkEtB,cAlEsB,EAmEtB,SAnEsB,EAoEtB,aApEsB,EAqEtB,SArEsB,EAsEtB,mBAtEsB,EAuEtB,oBAvEsB,EAwEtB,iBAxEsB,EAyEtB,oBAzEsB,EA0EtB,cA1EsB,EA2EtB,eA3EsB,EA4EtB,gBA5EsB,EA6EtB,cA7EsB,EA8EtB,qBA9EsB,EA+EtB,gBA/EsB,EAgFtB,sBAhFsB,EAiFtB,iBAjFsB,EAkFtB,eAlFsB,EAmFtB,gBAnFsB,EAoFtB,gBApFsB,EAqFtB,eArFsB,EAsFtB,cAtFsB,EAuFtB,eAvFsB,EAwFtB,aAxFsB,EAyFtB,aAzFsB,EA0FtB,UA1FsB,EA2FtB,WA3FsB,EA4FtB,YA5FsB,EA6FtB,wBA7FsB,EA8FtB,uBA9FsB,EA+FtB,eA/FsB,EAgGtB,aAhGsB,EAiGtB,cAjGsB,EAkGtB,cAlGsB,EAmGtB,aAnGsB,EAoGtB,YApGsB,EAqGtB,aArGsB,EAsGtB,WAtGsB,EAuGtB,OAvGsB,EAwGtB,cAxGsB,EAyGtB,cAzGsB,EA0GtB,oBA1GsB,EA2GtB,iBA3GsB,EA4GtB,gBA5GsB,EA6GtB,eA7GsB,EA8GtB,eA9GsB,EA+GtB,eA/GsB,EAgHtB,qBAhHsB,EAiHtB,kBAjHsB,EAkHtB,iBAlHsB,EAmHtB,gBAnHsB,CAAnB,C;;;;;;ACAP;AACA,IAAI7gB,UAAU8gB,OAAO33B,OAAP,GAAiB,EAA/B;;AAEA;AACA;AACA;AACA;;AAEA,IAAI43B,gBAAJ;AACA,IAAIC,kBAAJ;;AAEA,SAASC,gBAAT,GAA4B;AACxB,UAAM,IAAIvvB,KAAJ,CAAU,iCAAV,CAAN;AACH;AACD,SAASwvB,mBAAT,GAAgC;AAC5B,UAAM,IAAIxvB,KAAJ,CAAU,mCAAV,CAAN;AACH;AACA,aAAY;AACT,QAAI;AACA,YAAI,OAAOb,UAAP,KAAsB,UAA1B,EAAsC;AAClCkwB,+BAAmBlwB,UAAnB;AACH,SAFD,MAEO;AACHkwB,+BAAmBE,gBAAnB;AACH;AACJ,KAND,CAME,OAAOxlB,CAAP,EAAU;AACRslB,2BAAmBE,gBAAnB;AACH;AACD,QAAI;AACA,YAAI,OAAOxX,YAAP,KAAwB,UAA5B,EAAwC;AACpCuX,iCAAqBvX,YAArB;AACH,SAFD,MAEO;AACHuX,iCAAqBE,mBAArB;AACH;AACJ,KAND,CAME,OAAOzlB,CAAP,EAAU;AACRulB,6BAAqBE,mBAArB;AACH;AACJ,CAnBA,GAAD;AAoBA,SAASC,UAAT,CAAoBC,GAApB,EAAyB;AACrB,QAAIL,qBAAqBlwB,UAAzB,EAAqC;AACjC;AACA,eAAOA,WAAWuwB,GAAX,EAAgB,CAAhB,CAAP;AACH;AACD;AACA,QAAI,CAACL,qBAAqBE,gBAArB,IAAyC,CAACF,gBAA3C,KAAgElwB,UAApE,EAAgF;AAC5EkwB,2BAAmBlwB,UAAnB;AACA,eAAOA,WAAWuwB,GAAX,EAAgB,CAAhB,CAAP;AACH;AACD,QAAI;AACA;AACA,eAAOL,iBAAiBK,GAAjB,EAAsB,CAAtB,CAAP;AACH,KAHD,CAGE,OAAM3lB,CAAN,EAAQ;AACN,YAAI;AACA;AACA,mBAAOslB,iBAAiB9xB,IAAjB,CAAsB,IAAtB,EAA4BmyB,GAA5B,EAAiC,CAAjC,CAAP;AACH,SAHD,CAGE,OAAM3lB,CAAN,EAAQ;AACN;AACA,mBAAOslB,iBAAiB9xB,IAAjB,CAAsB,IAAtB,EAA4BmyB,GAA5B,EAAiC,CAAjC,CAAP;AACH;AACJ;AAGJ;AACD,SAASC,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,QAAIN,uBAAuBvX,YAA3B,EAAyC;AACrC;AACA,eAAOA,aAAa6X,MAAb,CAAP;AACH;AACD;AACA,QAAI,CAACN,uBAAuBE,mBAAvB,IAA8C,CAACF,kBAAhD,KAAuEvX,YAA3E,EAAyF;AACrFuX,6BAAqBvX,YAArB;AACA,eAAOA,aAAa6X,MAAb,CAAP;AACH;AACD,QAAI;AACA;AACA,eAAON,mBAAmBM,MAAnB,CAAP;AACH,KAHD,CAGE,OAAO7lB,CAAP,EAAS;AACP,YAAI;AACA;AACA,mBAAOulB,mBAAmB/xB,IAAnB,CAAwB,IAAxB,EAA8BqyB,MAA9B,CAAP;AACH,SAHD,CAGE,OAAO7lB,CAAP,EAAS;AACP;AACA;AACA,mBAAOulB,mBAAmB/xB,IAAnB,CAAwB,IAAxB,EAA8BqyB,MAA9B,CAAP;AACH;AACJ;AAIJ;AACD,IAAIC,QAAQ,EAAZ;AACA,IAAIC,WAAW,KAAf;AACA,IAAIC,YAAJ;AACA,IAAIC,aAAa,CAAC,CAAlB;;AAEA,SAASC,eAAT,GAA2B;AACvB,QAAI,CAACH,QAAD,IAAa,CAACC,YAAlB,EAAgC;AAC5B;AACH;AACDD,eAAW,KAAX;AACA,QAAIC,aAAah2B,MAAjB,EAAyB;AACrB81B,gBAAQE,aAAaG,MAAb,CAAoBL,KAApB,CAAR;AACH,KAFD,MAEO;AACHG,qBAAa,CAAC,CAAd;AACH;AACD,QAAIH,MAAM91B,MAAV,EAAkB;AACdo2B;AACH;AACJ;;AAED,SAASA,UAAT,GAAsB;AAClB,QAAIL,QAAJ,EAAc;AACV;AACH;AACD,QAAI/wB,UAAU0wB,WAAWQ,eAAX,CAAd;AACAH,eAAW,IAAX;;AAEA,QAAIzrB,MAAMwrB,MAAM91B,MAAhB;AACA,WAAMsK,GAAN,EAAW;AACP0rB,uBAAeF,KAAf;AACAA,gBAAQ,EAAR;AACA,eAAO,EAAEG,UAAF,GAAe3rB,GAAtB,EAA2B;AACvB,gBAAI0rB,YAAJ,EAAkB;AACdA,6BAAaC,UAAb,EAAyBI,GAAzB;AACH;AACJ;AACDJ,qBAAa,CAAC,CAAd;AACA3rB,cAAMwrB,MAAM91B,MAAZ;AACH;AACDg2B,mBAAe,IAAf;AACAD,eAAW,KAAX;AACAH,oBAAgB5wB,OAAhB;AACH;;AAEDuP,QAAQ+hB,QAAR,GAAmB,UAAUX,GAAV,EAAe;AAC9B,QAAIY,OAAO,IAAIj4B,KAAJ,CAAUS,UAAUiB,MAAV,GAAmB,CAA7B,CAAX;AACA,QAAIjB,UAAUiB,MAAV,GAAmB,CAAvB,EAA0B;AACtB,aAAK,IAAI4E,IAAI,CAAb,EAAgBA,IAAI7F,UAAUiB,MAA9B,EAAsC4E,GAAtC,EAA2C;AACvC2xB,iBAAK3xB,IAAI,CAAT,IAAc7F,UAAU6F,CAAV,CAAd;AACH;AACJ;AACDkxB,UAAM3zB,IAAN,CAAW,IAAIq0B,IAAJ,CAASb,GAAT,EAAcY,IAAd,CAAX;AACA,QAAIT,MAAM91B,MAAN,KAAiB,CAAjB,IAAsB,CAAC+1B,QAA3B,EAAqC;AACjCL,mBAAWU,UAAX;AACH;AACJ,CAXD;;AAaA;AACA,SAASI,IAAT,CAAcb,GAAd,EAAmBc,KAAnB,EAA0B;AACtB,SAAKd,GAAL,GAAWA,GAAX;AACA,SAAKc,KAAL,GAAaA,KAAb;AACH;AACDD,KAAK/3B,SAAL,CAAe43B,GAAf,GAAqB,YAAY;AAC7B,SAAKV,GAAL,CAAS72B,KAAT,CAAe,IAAf,EAAqB,KAAK23B,KAA1B;AACH,CAFD;AAGAliB,QAAQmiB,KAAR,GAAgB,SAAhB;AACAniB,QAAQoiB,OAAR,GAAkB,IAAlB;AACApiB,QAAQ1J,GAAR,GAAc,EAAd;AACA0J,QAAQqiB,IAAR,GAAe,EAAf;AACAriB,QAAQsiB,OAAR,GAAkB,EAAlB,C,CAAsB;AACtBtiB,QAAQuiB,QAAR,GAAmB,EAAnB;;AAEA,SAASC,IAAT,GAAgB,CAAE;;AAElBxiB,QAAQyf,EAAR,GAAa+C,IAAb;AACAxiB,QAAQyiB,WAAR,GAAsBD,IAAtB;AACAxiB,QAAQ0iB,IAAR,GAAeF,IAAf;AACAxiB,QAAQ2iB,GAAR,GAAcH,IAAd;AACAxiB,QAAQ4iB,cAAR,GAAyBJ,IAAzB;AACAxiB,QAAQ6iB,kBAAR,GAA6BL,IAA7B;AACAxiB,QAAQ8iB,IAAR,GAAeN,IAAf;AACAxiB,QAAQ+iB,eAAR,GAA0BP,IAA1B;AACAxiB,QAAQgjB,mBAAR,GAA8BR,IAA9B;;AAEAxiB,QAAQijB,SAAR,GAAoB,UAAUplB,IAAV,EAAgB;AAAE,WAAO,EAAP;AAAW,CAAjD;;AAEAmC,QAAQkjB,OAAR,GAAkB,UAAUrlB,IAAV,EAAgB;AAC9B,UAAM,IAAInM,KAAJ,CAAU,kCAAV,CAAN;AACH,CAFD;;AAIAsO,QAAQmjB,GAAR,GAAc,YAAY;AAAE,WAAO,GAAP;AAAY,CAAxC;AACAnjB,QAAQojB,KAAR,GAAgB,UAAUC,GAAV,EAAe;AAC3B,UAAM,IAAI3xB,KAAJ,CAAU,gCAAV,CAAN;AACH,CAFD;AAGAsO,QAAQsjB,KAAR,GAAgB,YAAW;AAAE,WAAO,CAAP;AAAW,CAAxC,C;;;;;;ACvLA,IAAIxW,CAAJ;;AAEA;AACAA,IAAK,YAAW;AACf,QAAO,IAAP;AACA,CAFG,EAAJ;;AAIA,IAAI;AACH;AACAA,KAAIA,KAAK,IAAIte,QAAJ,CAAa,aAAb,GAAT;AACA,CAHD,CAGE,OAAOiN,CAAP,EAAU;AACX;AACA,KAAI,OAAOyN,MAAP,KAAkB,QAAtB,EAAgC4D,IAAI5D,MAAJ;AAChC;;AAED;AACA;AACA;;AAEA4X,OAAO33B,OAAP,GAAiB2jB,CAAjB,C;;;;;;;;;;;;;;;;ACnBA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AAAmC;AAG/B;eACI,qBAAO,I;AACV;AACD,kDAAU,GAAV,EAA4B,WAA5B,EAAiD;AAC7C,aAAK,QAAL,GAAgB,GAAhB;AACA,aAAK,QAAL,GAAgB,WAAhB;AACH,KAHD;AAIA;AACI,YAAG,KAAK,UAAL,CAAgB,KAAK,QAArB,CAAH,EAAmC;AAC/B,gBAAM,OAAa,GAAG,KAAH,CAAS,IAAT,CAAc,SAAd,CAAnB;AACA,iBAAK,IAAL,CAAU,KAAK,QAAf;AACA,iBAAK,QAAL,CAAc,KAAd,CAAoB,KAAK,QAAzB,EAAmC,IAAnC;AACH;AACJ,KAND;AAVS,oBAAa,YADzB,4BAAW,eAAX,CACyB,E,mCAAA,GAAb,aAAa,CAAb;AAiBb;AAAC,CAjBD,CAAmC,mBAAnC;QAAa,a,GAAA,a;;;;;;;;;;;;;;ACJb;;;;;;;;;;;;;;;;;;;;;;AASA;AAAmC;AAAnC;;AA8DC;AA7DU,2CAAP,UAAoB,QAApB,EAAoC;AAApC;AACI,YAAM,OAA2B,EAAjC;AACA,YAAG,CAAC,KAAK,OAAL,CAAa,QAAb,CAAJ,EAA4B;AACxB,gBAAM,MAAe,SAAS,KAAT,CAAe,GAAf,CAArB;AACA,gBAAI,GAAJ,CAAQ,UAAC,SAAD,EAAkB;AACtB,qBAAK,IAAL,CAAU,MAAK,WAAL,CAAiB,SAAjB,CAAV;AACH,aAFD;AAGH;AACD,eAAO,IAAP;AACH,KATM;AAUC,0CAAR,UAAoB,aAApB,EAAyC;AACrC,YAAM,SAAc,EAApB;AACA,YAAM,WAAW,cAAc,OAAd,CAAsB,MAAtB,EAA8B,EAA9B,EAAkC,OAAlC,CAA0C,MAA1C,EAAiD,EAAjD,CAAjB;AACA,YAAM,UAAU,0CAAhB;AACA,YAAM,YAAY,SAAS,KAAT,CAAe,OAAf,CAAlB;AACA,YAAI,WAAW,EAAf;AACA,YAAI,eAAuB,QAA3B;AACA,YAAI,WAAW,EAAf;AACA,YAAG,SAAH,EAAc;AACV;AACA,2BAAe,UAAU,CAAV,CAAf;AACA,uBAAW,UAAU,CAAV,CAAX;AACH;AACD,YAAM,kBAAkB,KAAK,eAAL,CAAqB,YAArB,CAAxB;AACA,YAAG,eAAH,EAAoB;AAChB,mBAAO,IAAP,GAAc,QAAd;AACA,mBAAO,IAAP,GAAc,gBAAgB,IAA9B;AACA,mBAAO,KAAP,GAAc,gBAAgB,KAA9B;AACA,uBAAW,gBAAgB,QAAhB,IAA4B,EAAvC;AACH;AACD,mBAAW,SAAS,OAAT,CAAiB,MAAjB,EAAwB,EAAxB,EAA4B,OAA5B,CAAoC,MAApC,EAA2C,EAA3C,CAAX;AACA,YAAG,CAAC,KAAK,OAAL,CAAa,QAAb,CAAD,IAA2B,SAAS,MAAT,GAAgB,CAA9C,EAAiD;AAC7C,mBAAO,KAAP,GAAe,KAAK,WAAL,CAAiB,QAAjB,CAAf;AACH;AACD,eAAO,MAAP;AACH,KAzBO;AA0BA,8CAAR,UAAwB,QAAxB,EAAuC;AACnC,YAAM,UAAU,kDAAhB;AACA,YAAM,YAAY,SAAS,KAAT,CAAe,OAAf,CAAlB;AACA,YAAM,SAAc,EAApB;AACA,YAAM,UAAU,6CAAhB;AACA,YAAM,aAAa,uCAAnB;AACA,YAAI,eAAe,QAAnB;AACA,YAAI,OAAO,EAAX;AACA,YAAG,SAAH,EAAc;AACV,mBAAO,UAAU,CAAV,CAAP;AACA,2BAAe,UAAU,CAAV,CAAf;AACH;AACD,YAAM,YAAY,aAAa,KAAb,CAAmB,OAAnB,CAAlB;AACA,eAAO,IAAP,GAAc,IAAd;AACA,YAAG,SAAH,EAAc;AACV,mBAAO,KAAP,GAAe,UAAU,CAAV,CAAf;AACA,mBAAO,QAAP,GAAkB,aAAa,OAAb,CAAqB,OAArB,EAA8B,IAA9B,CAAlB;AACH,SAHD,MAGO;AACH,gBAAM,eAAe,aAAa,KAAb,CAAmB,UAAnB,CAArB;AACA,gBAAG,YAAH,EAAiB;AACb,uBAAO,KAAP,GAAe,aAAa,CAAb,CAAf;AACH;AACJ;AACD,eAAO,MAAP;AACH,KAxBO;AAyBZ;AAAC,CA9DD,CAAmC,mBAAnC;;;;;;;;;;;;;;;;;ACkBA;AAKI,wBAAY,MAAZ,EAA+B;AAJvB,8BAAsB,EAAtB;AAGA,uBAAe,EAAf;AAEJ,aAAK,MAAL,GAAc,MAAd;AACH;AACD;;;;AAIA,kDAAa,QAAb,EAA8B,IAA9B,EAA4C;AACxC,YAAM,UAAU,wBAAhB;AACA,YAAM,SAAS,SAAS,KAAT,CAAe,OAAf,CAAf;AACA,YAAM,aAAa,SAAS,SAAS,OAAT,CAAiB,OAAjB,EAA0B,EAA1B,CAAT,GAAyC,IAA5D;AACA,YAAM,cAAc,SAAS,OAAO,CAAP,CAAT,GAAqB,QAAzC;AACA,YAAG,CAAC,0BAAM,OAAN,CAAc,UAAd,CAAJ,EAA+B;AAC3B,gBAAM,gBAAgB,WAAW,OAAX,CAAmB,KAAnB,EAA0B,SAA1B,CAAtB;AACA,gBAAM,QAAY,0BAAM,QAAN,CAAe,KAAK,OAApB,EAA6B,aAA7B,CAAlB;AACA,kBAAM,KAAN,CAAY,WAAZ,IAA2B;AACvB,wBAAQ,EADe;AAEvB,uBAAO,EAFgB;AAGvB,wBAAQ,EAHe;AAIvB,sBAAI;AAJmB,aAA3B;AAMH,SATD,MASO;AACH,iBAAK,OAAL,CAAa,WAAb,IAA4B;AACxB,wBAAQ,EADgB;AAExB,uBAAO,EAFiB;AAGxB,wBAAQ,EAHgB;AAIxB,sBAAI;AAJoB,aAA5B;AAMH;AACJ,KAtBD;AAuBA;;;;;;AAMA,oDAAe,IAAf,EAA6B,aAA7B,EAAoD;AAApD;AACI,YAAM,gBAAgB,KAAK,OAAL,CAAa,KAAb,EAAoB,SAApB,CAAtB;AACA,YAAM,aAAa,cAAc,OAAd,CAAsB,sBAAtB,EAA6C,EAA7C,CAAnB;AACA,YAAM,WAAW,cAAc,KAAd,CAAoB,wBAApB,CAAjB;AACA,YAAM,UAA2B,0BAAM,QAAN,CAAe,KAAK,OAApB,EAA6B,UAA7B,CAAjC;AACA,YAAG,OAAH,EAAY;AACR,gBAAG,QAAQ,MAAX,EAAmB;AACf,uBAAO,IAAP,CAAY,QAAQ,MAApB,EAA4B,GAA5B,CAAgC,UAAC,OAAD,EAAQ;AACpC,wBAAM,aAAa,MAAK,cAAL,CAAoB,OAApB,CAAnB;AACA,wBAAM,YAA0B,QAAQ,MAAR,CAAe,OAAf,CAAhC;AACA,wBAAG,cAAc,UAAU,KAA3B,EAAkC;AAC9B,4BAAM,SAAS,WAAW,MAA1B;AACA,6BAAqB,2BAAU,KAA/B,EAAqB,cAArB,EAAqB,IAArB,EAAsC;AAAlC,gCAAM,UAAO,MAAb;AACA,mCAAO,OAAO,QAAQ,OAAf,CAAP;AACH;AACD,4BAAG,OAAO,IAAP,CAAY,MAAZ,EAAoB,MAApB,IAA8B,CAAjC,EAAoC;AAChC,kCAAK,iBAAL,CAAuB,OAAvB,EAAgC,WAAW,OAA3C;AACH;AACD,kCAAU,SAAV,GAAsB,EAAtB;AACA,kCAAU,WAAV,GAAwB,EAAxB;AACA,kCAAU,KAAV,GAAkB,EAAlB;AACH;AACJ,iBAfD;AAgBH;AACD,gBAAG,eAAe,IAAlB,EAAwB;AACpB,iCAAiB,QAAjB,IAA6B,OAAO,QAAQ,SAAS,CAAT,CAAR,CAApC;AACH,aAFD,MAEO;AACH,oBAAG,aAAH,EAAkB;AACd,yBAAK,OAAL,CAAa,IAAb,IAAqB;AACjB,gCAAQ,EADS;AAEjB,+BAAO,EAFU;AAGjB,gCAAQ;AAHS,qBAArB;AAKH;AACJ;AACJ;AACJ,KApCD;AAqCA;;;;AAIA,+CAAU,OAAV,EAAqC;AACzB,mBAAyC,QAArC,IAAJ;AAAA,YAAM,YAAmC,QAA1B,SAAf;AAAA,YAAiB,WAAwB,QAAhB,QAAzB;AAAA,YAA2B,YAAc,QAAL,SAApC;AACR,YAAM,QAAQ,SAAS,0BAAM,IAAN,EAAvB;AACA,YAAM,UAAU,KAAK,IAAL,CAAU,GAAV,CAAhB;AACA,YAAM,gBAAgB,UAAU,OAAV,CAAkB,KAAlB,EAAyB,SAAzB,CAAtB;AACA,YAAI,YAAY,0BAAM,QAAN,CAAiC,KAAK,OAAtC,EAA+C,aAA/C,CAAhB;AACA,YAAG,CAAC,0BAAM,OAAN,CAAc,SAAd,CAAJ,EAA8B;AAC1B,gBAAG,CAAC,SAAJ,EAAe;AACX,qBAAK,YAAL,CAAkB,SAAlB,EAA6B,IAA7B;AACA,4BAAY,0BAAM,QAAN,CAAiC,KAAK,OAAtC,EAA+C,aAA/C,CAAZ;AACH;AACD;AACA,gBAAI,SAAuB,UAAU,MAAV,CAAiB,SAAjB,CAA3B;AACA,gBAAG,CAAC,MAAJ,EAAY;AACR,oBAAM,eAAe,KAAK,kBAAL,EAArB;AACA,0BAAU,MAAV,CAAiB,SAAjB,IAA8B;AAC1B,iCAAa,EADa;AAE1B,+BAAW,EAFe;AAG1B,2BAAO;AAHmB,iBAA9B;AAKA,yBAAS,UAAU,MAAV,CAAiB,SAAjB,CAAT;AACA,oBAAG,CAAC,KAAK,cAAL,CAAoB,SAApB,CAAJ,EAAoC;AAChC,yBAAK,cAAL,CAAoB,SAApB,IAAiC;AAC7B,gCAAQ,EADqB;AAE7B,iCAAS;AAFoB,qBAAjC;AAIA,yBAAK,gBAAL,CAAsB,SAAtB,EAAiC,YAAjC;AACH;AACJ;AACD,gBAAG,OAAO,WAAP,CAAmB,OAAnB,CAA2B,OAA3B,IAAoC,CAAvC,EAA0C;AACtC;AACA,uBAAO,WAAP,CAAmB,IAAnB,CAAwB,OAAxB;AACA,uBAAO,SAAP,CAAiB,KAAjB,IAA0B,QAA1B;AACA,uBAAO,KAAP,CAAa,IAAb,CAAkB;AACd,6BAAS,KADK;AAEd,0BAAI;AAFU,iBAAlB;AAIA,qBAAK,cAAL,CAAoB,SAApB,EAA+B,MAA/B,CAAsC,KAAtC,IAA+C;AAC3C,8BAAU;AADiC,iBAA/C;AAGH;AACJ;AACD,eAAO,KAAP;AACH,KA3CD;AA4CA,iDAAY,SAAZ,EAA+B,OAA/B,EAA8C;AAC1C;AACA,YAAG,KAAK,cAAL,CAAoB,SAApB,CAAH,EAAmC;AAC/B,gBAAM,YAAY,KAAK,cAAL,CAAoB,SAApB,CAAlB;AACA,gBAAM,SAAS,UAAU,MAAzB;AACA,gBAAM,kBAAkB,OAAO,OAAP,CAAxB;AACA,gBAAG,eAAH,EAAoB;AAChB,oBAAM,YAAY,gBAAgB,QAAlC;AACA,oBAAM,gBAAgB,UAAU,OAAV,CAAkB,KAAlB,EAAyB,SAAzB,CAAtB;AACA,oBAAM,eAAe,0BAAM,QAAN,CAAiC,KAAK,OAAtC,EAA+C,aAA/C,CAArB;AACA,oBAAG,YAAH,EAAiB;AACb,wBAAM,gBAA+B,aAAa,MAAb,CAAoB,SAApB,CAArC;AACA,wBAAM,UAAoB,EAA1B;AACA,wBAAM,cAAqB,EAA3B;AACA,yBAAI,IAAI,IAAE,CAAV,EAAY,IAAE,cAAc,KAAd,CAAoB,MAAlC,EAAyC,GAAzC,EAA8C;AAC1C,4BAAG,cAAc,KAAd,CAAoB,CAApB,EAAuB,OAAvB,KAAmC,OAAtC,EAA+C;AAC3C,oCAAQ,IAAR,CAAa,cAAc,KAAd,CAAoB,CAApB,EAAuB,IAAvB,CAA4B,IAA5B,CAAiC,GAAjC,CAAb;AACA,wCAAY,IAAZ,CAAiB,cAAc,KAAd,CAAoB,CAApB,CAAjB;AACH;AACJ;AACD,kCAAc,WAAd,GAA4B,OAA5B;AACA,kCAAc,KAAd,GAAsB,WAAtB;AACH;AACD,uBAAO,UAAU,MAAV,CAAiB,OAAjB,CAAP;AACA,oBAAG,OAAO,IAAP,CAAY,UAAU,MAAtB,EAA8B,MAA9B,IAAwC,CAA3C,EAA8C;AAC1C,yBAAK,iBAAL,CAAuB,SAAvB,EAAkC,UAAU,OAA5C;AACH;AACJ;AACJ;AACJ,KA7BD;AA8BA;AAAA;AACI,eAAO,IAAP,CAAY,KAAK,cAAjB,EAAiC,GAAjC,CAAqC,UAAC,SAAD,EAAkB;AACnD,gBAAM,SAAS,MAAK,cAAL,CAAoB,SAApB,CAAf;AACA,mBAAO,IAAP,CAAY,MAAZ,EAAoB,GAApB,CAAwB,UAAC,KAAD,EAAc;AAClC,sBAAK,WAAL,CAAiB,SAAS,IAA1B,EAAgC,SAAhC,EAA2C,OAAO,KAAP,EAAc,QAAzD;AACH,aAFD;AAGA,mBAAO,MAAK,cAAL,CAAoB,SAApB,CAAP;AACH,SAND;AAOA,aAAK,cAAL,GAAsB,EAAtB;AACH,KATD;AAUQ,2CAAR,UAAwB,GAAxB,EAAmC,SAAnC,EAAqD,IAArD,EAAqE,SAArE,EAAsF;AAAtF;AACI,YAAM,gBAAgB,UAAU,OAAV,CAAkB,KAAlB,EAAyB,SAAzB,CAAtB;AACA,YAAM,YAAY,0BAAM,QAAN,CAAiC,KAAK,OAAtC,EAA+C,aAA/C,CAAlB;AACA,YAAG,aAAa,UAAU,MAA1B,EAAkC;AAC9B,gBAAI,cAA0B,IAA9B;AACA;AACA,iBAAI,IAAM,OAAV,IAAqB,UAAU,MAA/B,EAAuC;AACnC,oBAAG,YAAY,SAAf,EAA0B;AACtB,kCAAY,UAAU,MAAV,CAAiB,OAAjB,CAAZ;AACA;AACH;AACJ;AACD;AACA,gBAAG,CAAC,WAAJ,EAAe;AACX,oBAAM,aAAa,UAAU,OAAV,CAAkB,sBAAlB,EAAyC,EAAzC,CAAnB;AACA,iBAAC,0BAAM,OAAN,CAAc,UAAd,CAAD,IAA8B,eAAe,SAA7C,IAA0D,KAAK,eAAL,CAAqB,GAArB,EAA0B,SAA1B,EAAqC,UAAU,IAA/C,EAAqD,UAArD,CAA1D;AACH,aAHD,MAGO;AACH,qBAAK,MAAL,CAAY,aAAZ,CAA0B,YAA1B,EAAwC,aAAxC,EAAuD,YAAU,KAAjE,EAAwE,IAAxE,EAA8E,IAA9E,CAAmF,UAAC,IAAD,EAAS;AACxF,wBAAG,QAAQ,IAAR,CAAa,KAAK,UAAlB,CAAH,EAAkC;AAC9B,4BAAM,WAAW,KAAK,IAAL,IAAa,EAA9B;AACA,4BAAM,SAA8B,SAAS,WAAT,IAAwB,EAA5D;AACA,4BAAM,QAAQ,OAAO,UAArB;AAAA,4BAAiC,SAAS,OAAO,WAAjD;AAAA,4BAA8D,WAAW,OAAO,UAAhF;AAAA,4BAA4F,YAAY,OAAO,WAA/G;AACA,4BAAM,YAAkC,EAAxC;AACA,4BAAM,UAAmB,SAAS,IAAlC;AACA,4BAAI,iBAAiB,KAArB;AACA,6BAAoB,6BAApB,EAAoB,oBAApB,EAAoB,IAApB,EAA4B;AAAxB,gCAAM,SAAM,YAAZ;AACA,gCAAM,cAAc;AAChB,8CAAc,KADE;AAEhB,6CAAa,GAFG;AAGhB,4CAAY;AACR,4CAAM,MADE;AAER,+CAAS,SAFD;AAGR,8CAAQ,QAHA;AAIR,2CAAK;AAJG;AAHI,6BAApB;AAUA,gCAAG,cAAc,QAAjB,EAA2B;AACvB,oCAAG,OAAO,IAAP,IAAe,OAAO,IAAP,CAAY,MAAZ,IAAsB,QAAQ,MAAhD,EAAwD;AACpD,wCAAM,YAAY,OAAO,IAAP,CAAY,IAAZ,CAAiB,GAAjB,CAAlB;AACA,wCAAM,aAAa,QAAQ,KAAR,CAAc,CAAd,EAAiB,OAAO,IAAP,CAAY,MAA7B,EAAqC,IAArC,CAA0C,GAA1C,CAAnB;AACA,wCAAG,cAAc,UAAjB,EAA6B;AACzB,4CAAM,cAAc,YAAU,SAAV,CAAoB,OAAO,OAA3B,CAApB;AACA,oDAAY,WAAZ,EAAyB,SAAzB;AACA,4CAAG,YAAY,YAAf,EAA6B;AACzB,6DAAiB,IAAjB;AACA;AACH;AACJ;AACJ;AACJ,6BAbD,MAaO;AACH,oCAAM,cAAc,YAAU,SAAV,CAAoB,OAAO,OAA3B,CAApB;AACA,4CAAY,WAAZ,EAAyB,SAAzB;AACH;AACJ;AACD,4BAAG,CAAC,cAAJ,EAAoB;AAChB,gCAAM,aAAa,UAAU,OAAV,CAAkB,sBAAlB,EAAyC,EAAzC,CAAnB;AACA,6BAAC,0BAAM,OAAN,CAAc,UAAd,CAAD,IAA8B,eAAe,SAA7C,IAA0D,MAAK,eAAL,CAAqB,GAArB,EAA0B,SAA1B,EAAqC,UAAU,IAA/C,EAAqD,UAArD,CAA1D;AACH;AACJ,qBAxCD,MAwCO;AACH,8BAAM,IAAI,KAAJ,CAAU,kEAAc,KAAK,OAA7B,CAAN;AACH;AACJ,iBA5CD,EA4CG,KA5CH,CA4CS,UAAC,KAAD,EAAM;AACX,0BAAM,MAAN,IAAgB,sBAAhB;AACA,0BAAM,KAAN;AACH,iBA/CD;AAgDH;AACJ;AACJ,KAnEO;AAoEA,8CAAR;AAAA;AACI,eAAO,UAAC,GAAD,EAAU;AACb,gBAAM,SAAS,IAAI,MAAnB;AACA,gBAAM,OAAQ,OAAe,IAA7B;AACA,gBAAM,YAAa,OAAe,SAAlC;AACA,gBAAM,YAAY,IAAI,IAAtB;AACA,gBAAG,CAAC,0BAAM,OAAN,CAAc,IAAd,CAAD,IAAwB,CAAC,0BAAM,OAAN,CAAc,SAAd,CAA5B,EAAsD;AAClD,sBAAK,eAAL,CAAqB,GAArB,EAA0B,SAA1B,EAAqC,IAArC,EAA2C,SAA3C;AACH;AACJ,SARD;AASH,KAVO;AAWA,4CAAR,UAAyB,SAAzB,EAA4C,aAA5C,EAAmE;AAC/D,YAAG,cAAc,QAAjB,EAA2B;AACvB,iBAAK,QAAL,CAAc,SAAS,IAAvB,EAA4B,SAA5B,EAAuC,aAAvC;AACA,gBAAG,cAAc,cAAjB,EAAiC;AAC7B,qBAAK,QAAL,CAAc,SAAS,IAAvB,EAA4B,oBAA5B,EAAkD,aAAlD;AACA,qBAAK,QAAL,CAAc,SAAS,IAAvB,EAA4B,iBAA5B,EAA+C,aAA/C;AACA,qBAAK,QAAL,CAAc,SAAS,IAAvB,EAA4B,gBAA5B,EAA8C,aAA9C;AACA,qBAAK,QAAL,CAAc,SAAS,IAAvB,EAA4B,eAA5B,EAA6C,aAA7C;AACH,aALD,MAKO,IAAG,cAAc,eAAjB,EAAkC;AACrC,qBAAK,QAAL,CAAc,SAAS,IAAvB,EAA4B,qBAA5B,EAAmD,aAAnD;AACA,qBAAK,QAAL,CAAc,SAAS,IAAvB,EAA4B,kBAA5B,EAAgD,aAAhD;AACA,qBAAK,QAAL,CAAc,SAAS,IAAvB,EAA4B,iBAA5B,EAA+C,aAA/C;AACA,qBAAK,QAAL,CAAc,SAAS,IAAvB,EAA4B,gBAA5B,EAA8C,aAA9C;AACH;AACJ,SAbD,MAaO;AACH,iBAAK,QAAL,CAAc,MAAd,EAAqB,SAArB,EAAgC,aAAhC;AACH;AACJ,KAjBO;AAkBA,6CAAR,UAA0B,SAA1B,EAA6C,QAA7C,EAA8D;AAC1D,YAAG,cAAc,QAAjB,EAA2B;AACvB,iBAAK,WAAL,CAAiB,SAAS,IAA1B,EAAgC,SAAhC,EAA2C,QAA3C;AACA,gBAAG,cAAc,cAAjB,EAAiC;AAC7B,qBAAK,WAAL,CAAiB,SAAS,IAA1B,EAA+B,oBAA/B,EAAqD,QAArD;AACA,qBAAK,WAAL,CAAiB,SAAS,IAA1B,EAA+B,iBAA/B,EAAkD,QAAlD;AACA,qBAAK,WAAL,CAAiB,SAAS,IAA1B,EAA+B,gBAA/B,EAAiD,QAAjD;AACA,qBAAK,WAAL,CAAiB,SAAS,IAA1B,EAA+B,eAA/B,EAAgD,QAAhD;AACH,aALD,MAKO,IAAG,cAAc,eAAjB,EAAkC;AACrC,qBAAK,WAAL,CAAiB,SAAS,IAA1B,EAA+B,qBAA/B,EAAsD,QAAtD;AACA,qBAAK,WAAL,CAAiB,SAAS,IAA1B,EAA+B,kBAA/B,EAAmD,QAAnD;AACA,qBAAK,WAAL,CAAiB,SAAS,IAA1B,EAA+B,iBAA/B,EAAkD,QAAlD;AACA,qBAAK,WAAL,CAAiB,SAAS,IAA1B,EAA+B,gBAA/B,EAAiD,QAAjD;AACH;AACJ,SAbD,MAaO;AACH,iBAAK,WAAL,CAAiB,MAAjB,EAAyB,QAAzB,EAAmC,QAAnC;AACH;AACJ,KAjBO;AAkBA,oCAAR,UAAiB,GAAjB,EAAyC,SAAzC,EAA4D,QAA5D,EAA6E;AACzE,YAAG,IAAI,gBAAP,EAAyB;AACrB,gBAAI,gBAAJ,CAAqB,SAArB,EAAgC,QAAhC,EAAiD;AAC7C,yBAAS;AADoC,aAAjD;AAGH,SAJD,MAIO,IAAI,IAAY,WAAhB,EAA6B;AAC/B,gBAAY,WAAZ,CAAwB,OAAO,SAA/B,EAA0C,QAA1C;AACJ;AACJ,KARO;AASA,uCAAR,UAAoB,GAApB,EAA4C,SAA5C,EAA+D,QAA/D,EAAgF;AAC5E,YAAG,IAAI,mBAAP,EAA4B;AACxB,gBAAI,mBAAJ,CAAwB,SAAxB,EAAmC,QAAnC;AACH,SAFD,MAEO,IAAI,IAAY,WAAhB,EAA6B;AAC/B,gBAAY,WAAZ,CAAwB,OAAO,SAA/B,EAA0C,QAA1C;AACJ;AACJ,KANO;AAOZ;AAAC,CAzSD;;;;;;;;;;;;;ACtBA;AAAA,8BAmCC;AAlCG,oDAAY,OAAZ,EAA2C,SAA3C,EAA8D;AAC1D,YAAG,KAAK,OAAL,EAAc,OAAd,CAAsB,OAAtB,CAAH,EAAmC;AAC/B,iBAAI,IAAI,IAAE,CAAV,EAAY,IAAE,QAAQ,MAAtB,EAA6B,GAA7B,EAAkC;AAC9B,oBAAM,YAAY,QAAQ,CAAR,CAAlB;AACA,qBAAI,IAAI,IAAE,CAAV,EAAY,IAAE,QAAQ,MAAtB,EAA6B,GAA7B,EAAkC;AAC9B,wBAAM,UAAU,QAAQ,CAAR,CAAhB;AACA,wBAAG,KAAK,UAAL,CAAgB,UAAU,IAA1B,EAAgC,QAAQ,IAAxC,CAAH,EAAkD;AAC9C,gCAAQ,CAAR,IAAa,OAAb;AACA,gCAAQ,CAAR,IAAa,SAAb;AACH;AACJ;AACJ;AACD,mBAAO;AACH,6BAAa,OADV;AAEH,sBAAM;AAFH,aAAP;AAIH,SAfD,MAeO;AACH,mBAAO;AACH,6BAAa,OADV;AAEH,sBAAM;AAFH,aAAP;AAIH;AACJ,KAtBD;AAuBA,mDAAW,KAAX,EAA4B,KAA5B,EAA2C;AACvC,YAAG,MAAM,MAAN,KAAiB,MAAM,MAA1B,EAAkC;AAC9B,mBAAO,MAAM,MAAN,GAAe,MAAM,MAArB,GAA8B,KAA9B,GAAsC,IAA7C;AACH,SAFD,MAEO;AACH,iBAAI,IAAI,IAAE,CAAV,EAAY,IAAE,MAAM,MAApB,EAA2B,GAA3B,EAAgC;AAC5B,oBAAG,MAAM,CAAN,MAAa,MAAM,CAAN,CAAhB,EAA0B;AACtB,2BAAO,MAAM,CAAN,IAAW,MAAM,CAAN,CAAlB;AACH;AACJ;AACJ;AACJ,KAVD;AAWJ;AAAC,CAnCD;;;;;;;;;;;;;;;;;ACLA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;AAAuC;AAAvC;;AA0CC;AAzCG,iDAAK,OAAL,EAAsC;AAClC,YAAM,cAAc,QAAQ,SAAR,CAAkB,SAAlB,CAA4B,WAAhD;AACA,YAAM,gBAAgB,QAAQ,SAAR,CAAkB,SAAlB,CAA4B,aAAlD;AACA,aAAK,MAAL,CAAY,QAAQ,YAApB,EAAkC,WAAlC,EAA+C,OAA/C;AACA,aAAK,MAAL,CAAY,QAAQ,YAApB,EAAkC,aAAlC,EAAiD,SAAjD,EAA4D,IAA5D;AACH,KALD;AAMA;;;;;;;AAOQ,yCAAR,UAAe,MAAf,EAA4B,MAA5B,EAA4C,WAA5C,EAAkE,WAAlE,EAAuF;AAAvF;AACI,YAAG,OAAO,WAAP,KAAuB,QAAvB,IAAmC,YAAY,MAAZ,GAAmB,CAAzD,EAA4D;AACxD,gBAAG,CAAC,OAAO,WAAP,CAAJ,EAAyB;AACrB,uBAAO,WAAP,IAAsB,EAAtB;AACH;AACJ;AACD,YAAG,UAAU,MAAV,IAAoB,OAAO,IAAP,CAAY,MAAZ,EAAoB,MAApB,GAA2B,CAAlD,EAAqD;AACjD,mBAAO,IAAP,CAAY,MAAZ,EAAoB,GAApB,CAAwB,UAAC,MAAD,EAAO;AAC3B,oBAAG,CAAC,MAAK,OAAL,CAAa,MAAb,CAAJ,EAA0B;AACtB,wBAAM,aAAiC,OAAO,MAAP,CAAvC;AACA,wBAAG,OAAO,UAAP,KAAsB,UAAzB,EAAqC;AACjC,4BAAM,SAAS,CAAC,WAAD,GAAgB,IAAU,UAAV,CAAsB,MAAtB,CAAhB,GAAiD,4CAAwB,UAAxB,CAAhE;AACA,4BAAG,CAAC,MAAK,OAAL,CAAa,WAAb,CAAJ,EAA+B;AAC3B,mCAAO,WAAP,EAAoB,MAApB,IAA8B,MAA9B;AACH,yBAFD,MAEO;AACH,mCAAO,MAAP,IAAiB,MAAjB;AACH;AACJ,qBAPD,MAOO;AACH;AACA,gCAAQ,GAAR,CAAY,OAAO,SAAnB,EAA6B,MAA7B;AACA,8BAAM,IAAI,KAAJ,CAAU,SAAS,gBAAnB,CAAN;AACH;AACJ,iBAdD,MAcO;AACH,0BAAM,IAAI,KAAJ,CAAU,qBAAV,CAAN;AACH;AACJ,aAlBD;AAmBH;AACJ,KA3BO;AAdC,wBAAiB,YAD7B,4BAAW,mBAAX,CAC6B,GAAjB,iBAAiB,CAAjB;AA0Cb;AAAC,CA1CD,CAAuC,mBAAvC;QAAa,iB,GAAA,iB;;;;;;;;;;;;;;ACNb;;AAIA;;;;;;;;;;;;;;;;;;;;;;AAEA;AAAyC;AAAzC;;AAqDC;AApDG,mDAAK,OAAL,EAAuC;AACnC,aAAK,cAAL,CAAoB,QAAQ,YAA5B,EAA0C,QAAQ,SAAlD;AACH,KAFD;AAGQ,mDAAR,UAAuB,eAAvB,EAAkD,cAAlD,EAAoE;AAChE,YAAM,YAAY,eAAe,UAAf,KAA8B,EAAhD;AACA,YAAM,WAAW,OAAO,IAAP,CAAY,SAAZ,KAA0B,EAA3C;AACA,YAAG,SAAS,MAAT,GAAgB,CAAnB,EAAsB;AAClB,iBAAK,sBAAL,CAA4B,eAA5B,EAA6C,SAA7C;AACH;AACJ,KANO;AAOA,2DAAR,UAA+B,MAA/B,EAA2C,UAA3C,EAA0D;AAA1D;AACI,eAAO,IAAP,CAAY,UAAZ,EAAwB,GAAxB,CAA4B,UAAC,MAAD,EAAY;AACpC,gBAAI,gBAAyC,WAAW,MAAX,CAA7C;AACA,gBAAG,0BAAM,UAAN,CAAiB,aAAjB,CAAH,EAAoC;AAChC,sBAAK,eAAL,CAAqB,MAArB,EAA6B,MAA7B,EAAqC,aAArC;AACH,aAFD,MAEO,IAAG,0BAAM,QAAN,CAAe,aAAf,CAAH,EAAkC;AACrC,oBAAI,YAA2B,aAA/B;AACA,oBAAG,0BAAM,UAAN,CAAiB,UAAU,IAA3B,CAAH,EAAqC;AACjC,0BAAK,eAAL,CAAqB,MAArB,EAA6B,MAA7B,EAA+C,UAAU,IAAzD;AACH;AACD;AACA,oBAAG,CAAC,0BAAM,OAAN,CAAc,UAAU,WAAxB,CAAJ,EAA0C;AACtC,2BAAO,UAAU,WAAjB,IAAgC,OAAO,KAAP,CAAa,MAAb,CAAhC;AACH;AACD;AACA,oBAAG,CAAC,0BAAM,OAAN,CAAc,UAAU,QAAxB,CAAJ,EAAuC;AACnC,2BAAO,KAAP,CAAa,UAAU,QAAvB,IAAmC,OAAO,KAAP,CAAa,MAAb,CAAnC;AACH;AACD,4BAAY,IAAZ;AACH;AACD,4BAAgB,IAAhB;AACH,SApBD;AAqBH,KAtBO;AAuBR;;;;;;AAMQ,oDAAR,UAAwB,MAAxB,EAAqC,WAArC,EAA0D,aAA1D,EAAiF;AAC7E,YAAM,YAAY,OAAO,KAAP,CAAa,WAAb,CAAlB;AACA,kCAAM,UAAN,CAAiB,aAAjB,KAAmC,cAAc,SAAd,EAAyB;AACxD,mBAAO,eAAC,GAAD,EAAW,IAAX,EAAmB;AACtB,oBAAM,UAAU,OAAO,SAAP,CAAiB,OAAO,UAAP,CAAjB,CAAhB;AACA,oBAAM,OAAO,QAAM,OAAN,GAAc,MAAd,GAAqB,WAArB,GAAiC,QAAjC,GAA4C,GAAzD;AACA;AACA,wBAAQ,KAAR,CAAc,IAAd,EAAoB,IAApB;AACH,aANuD;AAOxD,0BAAc,WAP0C;AAQxD,2BAAe;AARyC,SAAzB,CAAnC;AAUH,KAZO;AAaZ;AAAC,CArDD,CAAyC,8CAAzC;;;;;;;;;;;;;;;;;ACNA;;AACA;;AAEA;;AACA;;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;AAAiC;AAG7B;AAAA,oBACI,qBAAO,IADX;AAEI,cAAK,eAAL,CAAqB,kBAArB,CAAwC,0BAAxC,EAAwD,6BAAxD;AACA,cAAK,eAAL,CAAqB,iBAArB,CAAuC,CAAC,iBAAD,EAAoB,mBAApB,CAAvC;;AACH;AACD;;;;;AAKA,2CAAK,OAAL,EAAuC;AACnC;AACA,YAAM,aAAa,QAAQ,SAAR,CAAkB,SAAlB,CAA4B,OAA/C;AACA,YAAG,eAAe,WAAW,eAAX,IAA8B,WAAW,kBAAxD,CAAH,EAAgF;AAC5E,iBAAK,eAAL,CAAqB,mBAArB,CAAyC,QAAQ,YAAjD,EAA+D,QAAQ,SAAR,CAAkB,SAAlB,CAA4B,QAA3F,EAAqG,QAAQ,QAA7G;AACH;AACJ,KAND;AAOA,8CAAQ,OAAR,EAA0C;AACrC;AACD,YAAG,QAAQ,YAAX,EAAyB;AACrB,iBAAK,eAAL,CAAqB,eAArB,CAAsC,QAAQ,YAAR,CAA6B,QAAnE,EAA6E,QAAQ,QAArF;AACH;AACJ,KALD;AAMA,mDAAa,OAAb,EAA+C;AAC3C;AACA,YAAM,aAAa,KAAK,eAAL,CAAqB,yBAArB,CAA+C,QAAQ,SAAR,CAAkB,SAAlB,CAA4B,QAA3E,CAAnB;AACA,YAAM,gBAAe,KAAK,eAAL,CAAqB,4BAArB,CAAkD,QAAQ,SAAR,CAAkB,SAAlB,CAA4B,QAA9E,CAArB;AACA,kCAAM,QAAN,CAAe,UAAf,KAA8B,0BAAM,MAAN,CAAa,QAAQ,KAArB,EAA4B,UAA5B,EAAwC,IAAxC,CAA9B;AACA,kCAAM,QAAN,CAAe,aAAf,KAAiC,0BAAM,MAAN,CAAa,QAAQ,KAArB,EAA4B,aAA5B,EAA2C,IAA3C,CAAjC;AACA,aAAK,eAAL,CAAqB,QAAQ,KAA7B,EAAqC,QAAQ,SAAR,CAA0B,QAA/D;AACH,KAPD;AAQA;;;;AAIA,iDAAY,OAAZ,EAA8C;AAA9C;AACI,YAAM,aAA2B,QAAQ,SAAR,CAAkB,SAAlB,CAA4B,OAA7D;AACA,YAAG,UAAH,EAAe;AACX,gBAAG,WAAW,QAAX,IAAuB,WAAW,QAAX,CAAoB,MAApB,GAA6B,CAAvD,EAA0D;AACtD,2BAAW,QAAX,CAAoB,GAApB,CAAwB,UAAC,UAAD,EAAW;AAC/B,wBAAG,OAAO,WAAW,QAAlB,KAA+B,UAAlC,EAA8C;AAC1C,uDAAc,MAAK,eAAnB,EAAoC,WAAW,IAA/C,EAAqD,WAAW,QAAhE;AACH,qBAFD,MAEO;AACH;AACA,gCAAQ,KAAR,CAAc,gDAAd;AACH;AACJ,iBAPD;AAQA,oBAAG,CAAC,KAAK,eAAL,CAAqB,QAAzB,EAAmC;AAC/B,yBAAK,eAAL,CAAqB,QAArB,GAAgC,EAAhC;AACH;AACD,2DAA0B,KAAK,eAA/B;AACH;AACD,gBAAG,WAAW,eAAX,IAA8B,WAAW,kBAA5C,EAAgE;AAC5D;AACA,oBAAG,0BAAM,OAAN,CAAc,QAAQ,SAAR,CAAkB,SAAlB,CAA4B,QAA1C,CAAH,EAAwD;AACpD,8CAAM,sBAAN,CAA6B,QAAQ,SAAR,CAAkB,SAA/C,EAA0D,UAA1D,EAAsE,0BAAM,IAAN,GAAa,OAAb,CAAqB,KAArB,EAA4B,EAA5B,CAAtE;AACH;AACD;AACA,qBAAK,eAAL,CAAqB,OAArB,CAA6B,QAAQ,SAAR,CAAkB,SAAlB,CAA4B,QAAzD,EAAmE,WAAW,eAA9E,EAA+F,WAAW,kBAA1G;AACA;AACA,qBAAK,eAAL,CAAqB,QAArB,CAA8B;AAC1B,0BAAM;AADoB,iBAA9B;AAGA,oBAAM,aAAa,KAAK,eAAL,CAAqB,yBAArB,CAA+C,QAAQ,SAAR,CAAkB,SAAlB,CAA4B,QAA3E,CAAnB;AACA,oBAAM,gBAAe,KAAK,eAAL,CAAqB,4BAArB,CAAkD,QAAQ,SAAR,CAAkB,SAAlB,CAA4B,QAA9E,CAArB;AACA,8BAAc,0BAAM,MAAN,CAAa,QAAQ,KAArB,EAA4B,UAA5B,EAAwC,IAAxC,CAAd;AACA,iCAAiB,0BAAM,MAAN,CAAa,QAAQ,KAArB,EAA4B,aAA5B,EAA2C,IAA3C,CAAjB;AACH;AACJ;AACD,aAAK,eAAL,CAAqB,QAAQ,KAA7B,EAAqC,QAAQ,SAAR,CAA0B,QAA/D,EAlC0C,CAkCiC;AAC9E,KAnCD;AAoCQ,4CAAR,UAAwB,KAAxB,EAAmC,UAAnC,EAAkD;AAC9C,YAAG,0BAAM,QAAN,CAAe,KAAf,KAAyB,0BAAM,QAAN,CAAe,UAAf,CAA5B,EAAwD;AACpD;AACA,mBAAO,IAAP,CAAY,UAAZ,EAAwB,GAAxB,CAA4B,UAAC,OAAD,EAAe;AACvC,oBAAG,0BAAM,QAAN,CAAe,WAAW,OAAX,CAAf,CAAH,EAAwC;AACpC,wBAAM,eAA8B,WAAW,OAAX,CAApC;AACA,wBAAG,0BAAM,OAAN,CAAc,MAAM,OAAN,CAAd,CAAH,EAAkC;AAC9B,4BAAG,aAAa,YAAb,KAA8B,SAAjC,EAA4C;AACxC,mCAAO,MAAM,OAAN,CAAP;AACA,sDAAM,sBAAN,CAA6B,KAA7B,EAAoC,OAApC,EAA6C,aAAa,YAA1D;AACH;AACJ;AACD,wBAAG,OAAO,aAAa,IAApB,KAA6B,UAA7B,IAA2C,aAAa,IAAb,CAAkB,MAAlB,MAA8B,QAA5E,EAAsF;AAClF,4BAAG,CAAC,MAAM,MAAM,OAAN,CAAN,CAAD,IAA0B,0BAAM,QAAN,CAAe,MAAM,OAAN,CAAf,CAA7B,EAA6D;AACzD,gCAAM,WAAW,KAAK,IAAL,CAAU,MAAM,OAAN,CAAV,IAA4B,WAAW,MAAM,OAAN,CAAX,CAA5B,GAAyD,SAAS,MAAM,OAAN,CAAT,EAAyB,EAAzB,CAA1E;AACA,mCAAO,MAAM,OAAN,CAAP;AACA,sDAAM,sBAAN,CAA6B,KAA7B,EAAoC,OAApC,EAA6C,QAA7C;AACH;AACJ;AACJ;AACJ,aAjBD;AAkBH;AACJ,KAtBO;AAxER,gBADC,2BAAU,2BAAV,EAA2B,iBAA3B,CACD,E,0BAAyB,2B,CAAzB,G,qBAAA,E,iBAAA,E,KAAyC,CAAzC;AAFS,kBAAW,YADvB,4BAAW,aAAX,CACuB,E,mCAAA,GAAX,WAAW,CAAX;AAiGb;AAAC,CAjGD,CAAiC,8CAAjC;QAAa,W,GAAA,W;;;;;;;ACVA;;AACbzjB,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIa,iBAAiBZ,mBAAOA,CAAC,CAAR,CAArB;AACAL,QAAQo6B,aAAR,GAAwB,UAAUptB,MAAV,EAAkBmZ,OAAlB,EAA2B;AAC/C,QAAIkU,WAAW;AACXC,qBAAa;AADF,KAAf;AAGAr5B,mBAAeyE,YAAf,CAA4B6E,MAA5B,CAAmC8vB,QAAnC,EAA6ClU,OAA7C;AACA,QAAI,CAACllB,eAAeyE,YAAf,CAA4BR,OAA5B,CAAoCm1B,SAASE,WAA7C,CAAD,IAA8D,CAACt5B,eAAeyE,YAAf,CAA4BR,OAA5B,CAAoCm1B,SAASC,WAA7C,CAAnE,EAA8H;AAC1H;AACA,YAAIE,UAAUxtB,OAAOqtB,SAASC,WAAhB,KAAgC,EAA9C;AACA,YAAIG,aAAaJ,SAASE,WAA1B;AACA,aAAK,IAAI3yB,GAAT,IAAgB6yB,UAAhB,EAA4B;AACxB,gBAAI,CAACD,QAAQ5yB,GAAR,CAAL,EAAmB;AACf3G,+BAAeyE,YAAf,CAA4BoF,sBAA5B,CAAmD0vB,OAAnD,EAA4D5yB,GAA5D,EAAiE6yB,WAAW7yB,GAAX,CAAjE;AACH,aAFD,MAGK;AACD;AACA4L,wBAAQC,KAAR,CAAc,wCAAwC7L,GAAxC,GAA8C,iCAA5D;AACA;AACH;AACJ;AACD,YAAI,CAACoF,OAAOqtB,SAASC,WAAhB,CAAL,EAAmC;AAC/Br5B,2BAAeyE,YAAf,CAA4BoF,sBAA5B,CAAmDkC,MAAnD,EAA2DqtB,SAASC,WAApE,EAAiFE,OAAjF;AACH;AACD,eAAOA,OAAP;AACH,KAlBD,MAmBK;AACD;AACAhnB,gBAAQC,KAAR,CAAc,0DAAd;AACH;AACJ,CA5BD,C;;;;;;;ACHa;;AACbvT,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIuf,iBAAiBtf,mBAAOA,CAAC,EAAR,CAArB;AACA,IAAIiF,SAAS,aAAe,YAAY;AACpC,aAASA,MAAT,GAAkB,CACjB;AACDA,WAAOvE,SAAP,CAAiB4E,OAAjB,GAA2B,UAAUC,GAAV,EAAe;AACtC,eAAO1F,OAAOa,SAAP,CAAiB8E,QAAjB,CAA0BC,IAA1B,CAA+BF,GAA/B,CAAP;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBgF,QAAjB,GAA4B,UAAUH,GAAV,EAAe;AACvC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,iBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBiF,QAAjB,GAA4B,UAAUJ,GAAV,EAAe;AACvC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,iBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBkF,OAAjB,GAA2B,UAAUL,GAAV,EAAe;AACtC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,gBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBmF,SAAjB,GAA6B,UAAUN,GAAV,EAAe;AACxC,eAAO,CAACO,MAAMP,GAAN,CAAR;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBqF,KAAjB,GAAyB,UAAUR,GAAV,EAAe;AACpC,eAAO,6CAA4CjE,IAA5C,CAAiD,KAAKgE,OAAL,CAAaC,GAAb,CAAjD;AAAP;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBsF,QAAjB,GAA4B,UAAUT,GAAV,EAAe;AACvC,eAAO,uCAAsCjE,IAAtC,CAA2C,KAAKgE,OAAL,CAAaC,GAAb,CAA3C;AAAP;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBuF,UAAjB,GAA8B,UAAUV,GAAV,EAAe;AACzC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,mBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBwF,UAAjB,GAA8B,UAAUX,GAAV,EAAe;AACzC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,mBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiByF,QAAjB,GAA4B,UAAUZ,GAAV,EAAe;AACvC,eAAO,KAAKD,OAAL,CAAaC,GAAb,MAAsB,iBAA7B;AACH,KAFD;AAGAN,WAAOvE,SAAP,CAAiBmE,OAAjB,GAA2B,UAAUU,GAAV,EAAe;AACtC,eAAOA,QAAQd,SAAR,IAAqBc,QAAQ,IAA7B,IAAsC,KAAKG,QAAL,CAAcH,GAAd,KAAsBA,IAAItD,MAAJ,IAAc,CAAjF;AACH,KAFD;AAGA;AACAgD,WAAOvE,SAAP,CAAiB4F,OAAjB,GAA2B,UAAUC,CAAV,EAAanG,CAAb,EAAgB;AACvC,YAAImG,MAAMnG,CAAV,EAAa;AACT,mBAAOmG,MAAM,CAAN,IAAW,IAAIA,CAAJ,KAAU,IAAInG,CAAhC;AACH;AACD,YAAImG,KAAK,IAAL,IAAanG,KAAK,IAAtB,EAA4B;AACxB,mBAAOmG,MAAMnG,CAAb;AACH;AACD,YAAIoG,aAAa,KAAKlB,OAAL,CAAaiB,CAAb,CAAjB;AAAA,YAAkCE,aAAa,KAAKnB,OAAL,CAAalF,CAAb,CAA/C;AACA,YAAIoG,eAAeC,UAAnB,EAA+B;AAC3B,mBAAO,KAAP;AACH,SAFD,MAGK;AACD,oBAAQD,UAAR;AACI,qBAAK,iBAAL;AACA,qBAAK,iBAAL;AACI,2BAAO,KAAKD,CAAL,KAAW,KAAKnG,CAAvB;AACJ,qBAAK,iBAAL;AACI,wBAAI,CAACmG,CAAD,KAAO,CAACA,CAAZ,EAAe;AACX,+BAAO,CAACnG,CAAD,KAAO,CAACA,CAAf;AACH;AACD,2BAAO,CAACmG,CAAD,KAAO,CAAP,GAAW,IAAI,CAACA,CAAL,KAAW,IAAInG,CAA1B,GAA8B,CAACmG,CAAD,KAAO,CAACnG,CAA7C;AACJ,qBAAK,eAAL;AACA,qBAAK,kBAAL;AACI,2BAAO,CAACmG,CAAD,KAAO,CAACnG,CAAf;AAXR;AAaA,gBAAIoG,eAAe,iBAAnB,EAAsC;AAClC,oBAAIE,SAAS7G,OAAO8G,mBAAP,CAA2BJ,CAA3B,CAAb;AAAA,oBAA4CK,SAAS/G,OAAO8G,mBAAP,CAA2BvG,CAA3B,CAArD;AACA,oBAAIsG,OAAOzE,MAAP,KAAkB2E,OAAO3E,MAA7B,EAAqC;AACjC,2BAAO,KAAP;AACH,iBAFD,MAGK;AACD,yBAAK,IAAI4E,IAAI,CAAb,EAAgBA,IAAIH,OAAOzE,MAA3B,EAAmC4E,GAAnC,EAAwC;AACpC,4BAAIC,WAAWJ,OAAOG,CAAP,CAAf;AACA,4BAAIN,EAAEO,QAAF,MAAgB1G,EAAE0G,QAAF,CAApB,EAAiC;AAC7B,mCAAO,KAAP;AACH;AACJ;AACD,2BAAO,IAAP;AACH;AACJ;AACD,gBAAIN,eAAe,gBAAnB,EAAqC;AACjC,uBAAOD,EAAEf,QAAF,OAAiBpF,EAAEoF,QAAF,EAAxB;AACH;AACJ;AACJ,KA5CD;AA6CAP,WAAOvE,SAAP,CAAiBqG,SAAjB,GAA6B,UAAUC,EAAV,EAAcC,OAAd,EAAuBC,GAAvB,EAA4B;AACrD,YAAI,OAAOF,EAAP,KAAc,UAAlB,EAA8B;AAC1B;AACA,gBAAIG,MAAMF,WAAW,GAArB;AACA,gBAAIG,QAAQ,SAARA,KAAQ,GAAY;AACpB,oBAAIF,GAAJ,EAAS;AACLF,uBAAGvB,IAAH,CAAQyB,GAAR;AACH,iBAFD,MAGK;AACDF;AACH;AACD;AACH,aARD;AASAK,uBAAWD,KAAX,EAAkBD,GAAlB;AACH;AACJ,KAfD;AAgBAlC,WAAOvE,SAAP,CAAiB8D,QAAjB,GAA4B,UAAU8C,IAAV,EAAgBC,GAAhB,EAAqBC,YAArB,EAAmC;AAC3D,eAAO8X,eAAeja,YAAf,CAA4Bb,QAA5B,CAAqC8C,IAArC,EAA2CC,GAA3C,EAAgDC,YAAhD,CAAP;AACH,KAFD;AAGA;;;;;;;AAOAvC,WAAOvE,SAAP,CAAiBsH,QAAjB,GAA4B,UAAUV,IAAV,EAAgBC,GAAhB,EAAqBxH,KAArB,EAA4BiH,EAA5B,EAAgC;AACxD,eAAOsY,eAAeja,YAAf,CAA4B2C,QAA5B,CAAqCV,IAArC,EAA2CC,GAA3C,EAAgDxH,KAAhD,EAAuDiH,EAAvD,CAAP;AACH,KAFD;AAGA;;;AAGA/B,WAAOvE,SAAP,CAAiB2H,WAAjB,GAA+B,YAAY;AACvC,YAAIC,MAAM,IAAIC,IAAJ,EAAV;AACA,YAAIC,OAAOF,IAAIG,WAAJ,GAAkBjD,QAAlB,EAAX;AAAA,YAAyCkD,QAAQJ,IAAIK,QAAJ,KAAiB,CAAjB,GAAqB,EAArB,GAA0B,MAAM,CAACL,IAAIK,QAAJ,KAAiB,CAAlB,EAAqBnD,QAArB,EAAhC,GAAkE,CAAC8C,IAAIK,QAAJ,KAAiB,CAAlB,EAAqBnD,QAArB,EAAnH;AAAA,YAAoJoD,OAAON,IAAIO,OAAJ,KAAgB,EAAhB,GAAqB,MAAMP,IAAIO,OAAJ,GAAcrD,QAAd,EAA3B,GAAsD8C,IAAIO,OAAJ,GAAcrD,QAAd,EAAjN;AAAA,YAA2OsD,OAAOR,IAAIS,QAAJ,KAAiB,EAAjB,GAAsB,CAAC,GAAD,EAAMT,IAAIS,QAAJ,EAAN,EAAsB5G,IAAtB,CAA2B,EAA3B,CAAtB,GAAuDmG,IAAIS,QAAJ,GAAevD,QAAf,EAAzS;AAAA,YAAoUwD,SAASV,IAAIW,UAAJ,KAAmB,EAAnB,GAAwB,CAAC,GAAD,EAAMX,IAAIW,UAAJ,EAAN,EAAwB9G,IAAxB,CAA6B,EAA7B,CAAxB,GAA2DmG,IAAIW,UAAJ,GAAiBzD,QAAjB,EAAxY;AAAA,YAAqa0D,SAASZ,IAAIa,UAAJ,KAAmB,EAAnB,GAAwB,CAAC,GAAD,EAAMb,IAAIa,UAAJ,EAAN,EAAwBhH,IAAxB,CAA6B,EAA7B,CAAxB,GAA2DmG,IAAIa,UAAJ,GAAiB3D,QAAjB,EAAze;AAAA,YAAsgB4D,WAAWd,IAAIe,eAAJ,EAAjhB;AACA,YAAIC,YAAYjF,SAAS,CAACkF,KAAKC,MAAL,KAAgB,IAAhB,GAAuB,IAAxB,EAA8BhE,QAA9B,EAAT,EAAmD,EAAnD,CAAhB;AACA,eAAO,CAACgD,IAAD,EAAOE,KAAP,EAAcE,IAAd,EAAoBE,IAApB,EAA0BE,MAA1B,EAAkCE,MAAlC,EAA0CE,QAA1C,EAAoDE,SAApD,EAA+DnH,IAA/D,CAAoE,EAApE,CAAP;AACH,KALD;AAMA;;;;;AAKA8C,WAAOvE,SAAP,CAAiB+I,SAAjB,GAA6B,UAAUlE,GAAV,EAAemE,cAAf,EAA+B;AACxD,YAAI,CAAC,KAAK7E,OAAL,CAAaU,GAAb,CAAL,EAAwB;AACpB,gBAAIoE,OAAOpE,IAAI5D,OAAJ,CAAY,aAAZ,EAA2B,EAA3B,CAAX;AACA,gBAAIiI,OAAOD,KAAKzH,KAAL,CAAW,GAAX,CAAX;AACA,iBAAK,IAAI2E,IAAI,CAAb,EAAgBA,IAAI+C,KAAK3H,MAAzB,EAAiC4E,GAAjC,EAAsC;AAClC,oBAAKA,MAAM,CAAN,IAAW6C,cAAZ,IAA+B7C,IAAI,CAAvC,EAA0C;AACtC+C,yBAAK/C,CAAL,IAAU+C,KAAK/C,CAAL,EAAQ7E,MAAR,CAAe,CAAf,EAAkB,CAAlB,EAAqB6H,WAArB,KAAqCD,KAAK/C,CAAL,EAAQ7E,MAAR,CAAe,CAAf,CAA/C;AACH;AACJ;AACD,mBAAO4H,KAAKzH,IAAL,CAAU,EAAV,CAAP;AACH,SATD,MAUK;AACD,mBAAOoD,GAAP;AACH;AACJ,KAdD;AAeAN,WAAOvE,SAAP,CAAiBoJ,SAAjB,GAA6B,UAAUvE,GAAV,EAAe;AACxC,YAAI,CAAC,KAAKV,OAAL,CAAaU,GAAb,CAAL,EAAwB;AACpB,gBAAIoE,OAAOpE,IAAIvD,MAAJ,CAAW,CAAX,EAAc,CAAd,EAAiB+H,WAAjB,KAAiCxE,IAAIvD,MAAJ,CAAW,CAAX,CAA5C;AACA,gBAAIgI,OAAOL,KAAKhI,OAAL,CAAa,UAAb,EAAyB,UAAUsI,EAAV,EAAc;AAC9C,uBAAO,MAAMA,GAAGF,WAAH,EAAb;AACH,aAFU,CAAX;AAGA,mBAAOC,IAAP;AACH;AACD,eAAOzE,GAAP;AACH,KATD;AAUAN,WAAOvE,SAAP,CAAiBwJ,MAAjB,GAA0B,UAAUC,IAAV,EAAgBC,GAAhB,EAAqBC,WAArB,EAAkCC,UAAlC,EAA8C;AACpE,YAAI,CAACD,WAAL,EAAkB;AACd,gBAAI,KAAK1E,QAAL,CAAcwE,IAAd,KAAuB,KAAKxE,QAAL,CAAcyE,GAAd,CAA3B,EAA+C;AAC3C,oBAAIvK,OAAO0K,MAAX,EAAmB;AACf1K,2BAAO0K,MAAP,CAAcJ,IAAd,EAAoBC,GAApB;AACH,iBAFD,MAGK;AACD;AACA,yBAAK,IAAI7C,GAAT,IAAgB6C,GAAhB,EAAqB;AACjB,4BAAI,CAACE,UAAD,IAAeA,WAAWE,OAAX,CAAmBjD,GAAnB,IAA0B,CAA7C,EAAgD;AAC5C4C,iCAAK5C,GAAL,IAAY6C,IAAI7C,GAAJ,CAAZ;AACH;AACJ;AACJ;AACJ;AACJ,SAdD,MAeK;AACD,gBAAI,KAAK5B,QAAL,CAAcwE,IAAd,KAAuB,KAAKxE,QAAL,CAAcyE,GAAd,CAA3B,EAA+C;AAC3C;AACA,qBAAK,IAAI7C,GAAT,IAAgB6C,GAAhB,EAAqB;AACjB,wBAAI,CAACE,UAAD,IAAeA,WAAWE,OAAX,CAAmBjD,GAAnB,IAA0B,CAA7C,EAAgD;AAC5C;AACA,4BAAI4C,KAAKvK,cAAL,CAAoB2H,GAApB,CAAJ,EAA8B;AAC1B,mCAAO4C,KAAK5C,GAAL,CAAP;AACH;AACD,6BAAKkD,sBAAL,CAA4BN,IAA5B,EAAkC5C,GAAlC,EAAuC6C,IAAI7C,GAAJ,CAAvC;AACH;AACJ;AACJ;AACJ;AACD,eAAO4C,IAAP;AACH,KA/BD;AAgCAlF,WAAOvE,SAAP,CAAiBgK,KAAjB,GAAyB,UAAUC,IAAV,EAAgBC,IAAhB,EAAsB;AAC3C,YAAIxJ,SAAS,EAAb;AACA,YAAIuJ,QAAQ,CAACC,IAAb,EAAmB;AACfxJ,qBAASuJ,IAAT;AACH,SAFD,MAGK,IAAI,CAACA,IAAD,IAASC,IAAb,EAAmB;AACpBxJ,qBAASwJ,IAAT;AACH,SAFI,MAGA,IAAID,QAAQC,IAAZ,EAAkB;AACnB,gBAAI,KAAKjF,QAAL,CAAcgF,IAAd,CAAJ,EAAyB;AACrB;AACA,qBAAK,IAAIpD,GAAT,IAAgBoD,IAAhB,EAAsB;AAClBvJ,2BAAOmG,GAAP,IAAcoD,KAAKpD,GAAL,CAAd;AACH;AACJ;AACD,gBAAI,KAAK5B,QAAL,CAAciF,IAAd,CAAJ,EAAyB;AACrB,qBAAK,IAAIC,IAAT,IAAiBD,IAAjB,EAAuB;AACnB,wBAAI,CAACxJ,OAAOxB,cAAP,CAAsBiL,IAAtB,CAAL,EAAkC;AAC9BzJ,+BAAOyJ,IAAP,IAAeD,KAAKC,IAAL,CAAf;AACH;AACJ;AACJ;AACJ;AACD,eAAOzJ,MAAP;AACH,KAxBD;AAyBA;;;;AAIA6D,WAAOvE,SAAP,CAAiB6E,GAAjB,GAAuB,UAAU+B,IAAV,EAAgB;AACnC,YAAI,KAAK5B,QAAL,CAAc4B,IAAd,CAAJ,EAAyB;AACrB,gBAAI,CAACxB,MAAMwB,IAAN,CAAL,EAAkB;AACd,uBAAQA,KAAKkD,OAAL,CAAa,GAAb,KAAqB,CAArB,GAAyBlG,WAAWgD,IAAX,CAAzB,GAA4CjD,SAASiD,IAAT,EAAe,EAAf,CAApD;AACH,aAFD,MAGK;AACD,uBAAQ,kBAAiBhG,IAAjB,CAAsBgG,IAAtB,IAA8BwD,QAAQxD,IAAR,CAA9B,GAA8CA;AAAtD;AACH;AACJ,SAPD,MAQK;AACD,mBAAOA,IAAP;AACH;AACJ,KAZD;AAaArC,WAAOvE,SAAP,CAAiB+J,sBAAjB,GAA0C,UAAUvD,GAAV,EAAe6D,WAAf,EAA4BC,aAA5B,EAA2C;AACjF,SAAC,UAAUC,QAAV,EAAoBC,gBAApB,EAAsCC,kBAAtC,EAA0D;AACvDF,wBAAYpL,OAAOC,cAAP,CAAsBmL,QAAtB,EAAgCC,gBAAhC,EAAkD;AAC1DE,8BAAc,IAD4C;AAE1DC,4BAAY,IAF8C;AAG1DtL,uBAAOoL,kBAHmD;AAI1DG,0BAAU;AAJgD,aAAlD,CAAZ;AAMH,SAPD,EAOGpE,GAPH,EAOQ6D,WAPR,EAOqBC,aAPrB;AAQH,KATD;AAUA/F,WAAOvE,SAAP,CAAiB6K,gBAAjB,GAAoC,UAAUC,OAAV,EAAmB;AACnD,YAAIA,QAAQC,iBAAZ,EAA+B;AAC3B;AACAD,oBAAQC,iBAAR;AACH,SAHD,MAIK,IAAID,QAAQ,sBAAR,CAAJ,EAAqC;AACtCA,oBAAQ,sBAAR;AACH,SAFI,MAGA,IAAIA,QAAQ,yBAAR,CAAJ,EAAwC;AACzCA,oBAAQ,yBAAR;AACH,SAFI,MAGA,IAAIA,QAAQ,qBAAR,CAAJ,EAAoC;AACrCA,oBAAQ,qBAAR;AACH;AACJ,KAdD;AAeAvG,WAAOvE,SAAP,CAAiBgL,cAAjB,GAAkC,YAAY;AAC1C,YAAIC,SAASD,cAAb,EAA6B;AACzB;AACAC,qBAASD,cAAT;AACH,SAHD,MAIK,IAAIC,SAAS,qBAAT,CAAJ,EAAqC;AACtCA,qBAAS,qBAAT;AACH,SAFI,MAGA,IAAIA,SAAS,sBAAT,CAAJ,EAAsC;AACvCA,qBAAS,sBAAT;AACH;AACJ,KAXD;AAYA1G,WAAOvE,SAAP,CAAiBkL,YAAjB,GAAgC,YAAY;AACxC,eAAOD,SAAS,cAAT,KAA4BA,SAAS,iBAAT,CAA5B,IAA2DA,SAAS,oBAAT,CAAlE;AACH,KAFD;AAGA1G,WAAOvE,SAAP,CAAiBiD,IAAjB,GAAwB,YAAY;AAChC,YAAIkI,KAAK,SAALA,EAAK,GAAY;AACjB;AACA,mBAAO,CAAE,CAAC,IAAItC,KAAKC,MAAL,EAAL,IAAsB,OAAvB,GAAkC,CAAnC,EAAsChE,QAAtC,CAA+C,EAA/C,EAAmDxD,MAAnD,CAA0D,CAA1D,CAAP;AACH,SAHD;AAIA,eAAQ6J,OAAOA,IAAP,GAAc,GAAd,GAAoBA,IAApB,GAA2B,GAA3B,GAAiCA,IAAjC,GAAwC,GAAxC,GAA8CA,IAA9C,GAAqD,GAArD,GAA2DA,IAA3D,GAAkEA,IAA1E;AACH,KAND;AAOA5G,WAAOvE,SAAP,CAAiBoL,MAAjB,GAA0B,YAAY;AAClC,eAAOwT,eAAeja,YAAf,CAA4ByG,MAA5B,EAAP;AACH,KAFD;AAGA7G,WAAOvE,SAAP,CAAiB2L,QAAjB,GAA4B,UAAU9E,GAAV,EAAe;AACvC,eAAO+X,eAAeja,YAAf,CAA4BgH,QAA5B,CAAqC9E,GAArC,CAAP;AACH,KAFD;AAGA,WAAOtC,MAAP;AACH,CAtR2B,EAA5B;AAuRAtF,QAAQsF,MAAR,GAAiBA,MAAjB;AACA,kC;;;;;;;AC3Ra;;AACbpF,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIwf,SAAS,aAAe,YAAY;AACpC,aAASA,MAAT,GAAkB;AACd,aAAKC,qBAAL,GAA6B,EAA7B;AACA;AACA,YAAI/c,QAAQ,IAAZ;AACA;AACA,aAAKgd,qBAAL,GAA6BC,OAAOD,qBAAP,IACzBC,OAAO,6BAAP,CADyB,IAEzBA,OAAO,0BAAP,CAFyB,IAGzB,UAAUC,QAAV,EAAoB;AAChB,gBAAIC,WAAW,IAAIrX,IAAJ,GAAWsX,OAAX,EAAf;AACA,gBAAIC,aAAavW,KAAK4H,GAAL,CAAS,CAAT,EAAY,QAAQyO,WAAWnd,MAAMsd,QAAzB,CAAZ,CAAjB;AACA,gBAAIpN,KAAK+M,OAAOrY,UAAP,CAAkB,YAAY;AACnCsY,yBAASC,WAAWE,UAApB;AACH,aAFQ,EAENA,UAFM,CAAT;AAGArd,kBAAMsd,QAAN,GAAiBH,WAAWE,UAA5B;AACA,mBAAOnN,EAAP;AACH,SAXL;AAYA,aAAKqN,oBAAL,GAA4BN,OAAOM,oBAAP,IACxBN,OAAO,4BAAP,CADwB,IAExBA,OAAO,yBAAP,CAFwB,IAGxB,UAAU/M,EAAV,EAAc;AACVsN,yBAAatN,EAAb;AACH,SALL;AAMA;AACH;AACD4M,WAAO7e,SAAP,CAAiBwf,cAAjB,GAAkC,UAAUC,QAAV,EAAoBC,SAApB,EAA+B;AAC7D,YAAI9N,OAAO,IAAX;AACA;AACA,eAAQ,UAAUtL,EAAV,EAAcE,GAAd,EAAmB;AACvB,gBAAImZ,OAAJ;AACA;AACA,gBAAIC,YAAY,SAAZA,SAAY,GAAY;AACxB,oBAAIvc,SAASuO,KAAKkN,qBAAL,CAA2BhV,OAA3B,CAAmC6V,OAAnC,CAAb;AACA,oBAAItc,SAAS,CAAb,EAAgB;AACZiD,uBAAGjG,KAAH,CAASmG,GAAT,EAAclG,SAAd;AACA,2BAAOsR,KAAKmN,qBAAL,CAA2Bha,IAA3B,CAAgCia,MAAhC,EAAwCY,SAAxC,CAAP;AACH,iBAHD,MAIK;AACDhO,yBAAKkN,qBAAL,CAA2Be,MAA3B,CAAkCxc,MAAlC,EAA0C,CAA1C;AACH;AACDA,yBAAS,IAAT;AACH,aAVD;AAWAsc,sBAAU/N,KAAKmN,qBAAL,CAA2Bha,IAA3B,CAAgCia,MAAhC,EAAwCY,SAAxC,CAAV;AACA,mBAAOD,OAAP;AACH,SAhBM,CAgBJF,QAhBI,EAgBMC,SAhBN,CAAP;AAiBH,KApBD;AAqBAb,WAAO7e,SAAP,CAAiB8f,aAAjB,GAAiC,UAAUH,OAAV,EAAmB;AAChD,aAAKL,oBAAL,CAA0Bva,IAA1B,CAA+Bia,MAA/B,EAAuCW,OAAvC;AACA,aAAKb,qBAAL,CAA2Bpb,IAA3B,CAAgCic,OAAhC;AACH,KAHD;AAIA,WAAOd,MAAP;AACH,CApD2B,EAA5B;AAqDA5f,QAAQ4f,MAAR,GAAiBA,MAAjB;AACA,kC;;;;;;;ACxDa;AACb;AACA;;;;;;AAMA;;AACA1f,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA;AACAJ,QAAQ8gB,gBAAR,GAA2B;AACvB;;;;;;;;AAQAC,YAAQ,gBAAUC,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9D,eAAOD,cAAcF,WAAd,GAA4BG,QAA5B,GAAuCF,UAA9C;AACH,KAXsB;AAYvB;;;AAGAG,UAAM;AACF;;;;;;;;AAQAC,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9DH,2BAAeG,QAAf;AACA,mBAAOD,cAActX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,GAAyCC,UAAhD;AACH,SAZC;AAaF;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,2BAAeG,QAAf;AACA,mBAAO,CAACD,WAAD,GAAeF,WAAf,IAA8BA,cAAc,CAA5C,IAAiDC,UAAxD;AACH,SAxBC;AAyBF;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjEH,0BAAcA,cAAcG,QAA5B;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAOE,cAAc,CAAd,GAAkBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAlB,GAA6CC,UAApD;AACH,aAFD,MAGK;AACDD,8BAAcA,cAAc,CAA5B;AACA,uBAAO,CAACE,WAAD,GAAe,CAAf,IAAoBF,eAAeA,cAAc,CAA7B,IAAkC,CAAtD,IAA2DC,UAAlE;AACH;AACJ;AA1CC,KAfiB;AA2DvB;;;AAGAQ,WAAO;AACH;;;;;;;;AAQAJ,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9DH,0BAAcA,cAAcG,QAA5B;AACA,mBAAOD,cAActX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,GAAyCC,UAAhD;AACH,SAZE;AAaH;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,0BAAcA,cAAcG,QAAd,GAAyB,CAAvC;AACA,mBAAOD,eAAetX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA1C,IAA+CC,UAAtD;AACH,SAxBE;AAyBH;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjEH,0BAAcA,cAAcG,QAA5B;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAOE,cAAc,CAAd,GAAkBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAlB,GAA6CC,UAApD;AACH,aAFD,MAGK;AACDD,8BAAcA,cAAc,CAA5B;AACA,uBAAOE,cAAc,CAAd,IAAmBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA9C,IAAmDC,UAA1D;AACH;AACJ;AA1CE,KA9DgB;AA0GvB;;;AAGAS,WAAO;AACH;;;;;;;;AAQAL,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9DH,0BAAcA,cAAcG,QAA5B;AACA,mBAAOD,cAActX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,GAAyCC,UAAhD;AACH,SAZE;AAaH;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,0BAAcA,cAAcG,QAAd,GAAyB,CAAvC;AACA,mBAAO,CAACD,WAAD,IAAgBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA3C,IAAgDC,UAAvD;AACH,SAxBE;AAyBH;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjEH,0BAAcA,cAAcG,QAA5B;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAOE,cAAc,CAAd,GAAkBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAlB,GAA6CC,UAApD;AACH,aAFD,MAGK;AACDD,+BAAe,CAAf;AACA,uBAAO,CAACE,WAAD,GAAe,CAAf,IAAoBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA/C,IAAoDC,UAA3D;AACH;AACJ;AA1CE,KA7GgB;AAyJvB;;;AAGAU,WAAO;AACH;;;;;;;;AAQAN,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9DH,2BAAeG,QAAf;AACA,mBAAOD,cAActX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,GAAyCC,UAAhD;AACH,SAZE;AAaH;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,0BAAcA,cAAcG,QAAd,GAAyB,CAAvC;AACA,mBAAOD,eAAetX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA1C,IAA+CC,UAAtD;AACH,SAxBE;AAyBH;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjEH,0BAAcA,cAAcG,QAA5B;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAOE,cAAc,CAAd,GAAkBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAlB,GAA6CC,UAApD;AACH,aAFD,MAGK;AACDD,+BAAe,CAAf;AACA,uBAAOE,cAAc,CAAd,IAAmBtX,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,IAA2B,CAA9C,IAAmDC,UAA1D;AACH;AACJ;AA1CE,KA5JgB;AAwMvB;;;AAGAW,UAAM;AACF;;;;;;;;AAQAP,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9D,mBAAO,CAACD,WAAD,GAAetX,KAAKiY,GAAL,CAASb,cAAcG,QAAd,IAA0BvX,KAAKkY,EAAL,GAAU,CAApC,CAAT,CAAf,GAAkEZ,WAAlE,GAAgFD,UAAvF;AACH,SAXC;AAYF;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/D,mBAAOD,cAActX,KAAKmY,GAAL,CAASf,cAAcG,QAAd,IAA0BvX,KAAKkY,EAAL,GAAU,CAApC,CAAT,CAAd,GAAiEb,UAAxE;AACH,SAtBC;AAuBF;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjE,mBAAO,CAACD,WAAD,GAAe,CAAf,IAAoBtX,KAAKiY,GAAL,CAASjY,KAAKkY,EAAL,GAAUd,WAAV,GAAwBG,QAAjC,IAA6C,CAAjE,IAAsEF,UAA7E;AACH;AAjCC,KA3MiB;AA8OvB;;;AAGAe,UAAM;AACF;;;;;;;;AAQAX,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9D,mBAAQH,gBAAgB,CAAjB,GAAsBC,UAAtB,GAAmCC,cAActX,KAAK0X,GAAL,CAAS,CAAT,EAAY,MAAMN,cAAcG,QAAd,GAAyB,CAA/B,CAAZ,CAAd,GAA+DF,UAAzG;AACH,SAXC;AAYF;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/D,mBAAOH,gBAAgBG,QAAhB,GAA2BF,aAAaC,WAAxC,GAAsDA,eAAe,CAACtX,KAAK0X,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMN,WAAN,GAAoBG,QAAhC,CAAD,GAA6C,CAA5D,IAAiEF,UAA9H;AACH,SAtBC;AAuBF;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjE,gBAAIH,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,UAAP;AACH;AACD,gBAAID,gBAAgBG,QAApB,EAA8B;AAC1B,uBAAOF,aAAaC,WAApB;AACH;AACDF,2BAAeG,QAAf;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAOE,cAAc,CAAd,GAAkBtX,KAAK0X,GAAL,CAAS,CAAT,EAAY,MAAMN,cAAc,CAApB,CAAZ,CAAlB,GAAwDC,UAA/D;AACH,aAFD,MAGK;AACDD,+BAAe,CAAf;AACA,uBAAOE,cAAc,CAAd,IAAmB,CAACtX,KAAK0X,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMN,WAAlB,CAAD,GAAkC,CAArD,IAA0DC,UAAjE;AACH;AACJ;AA9CC,KAjPiB;AAiSvB;;;AAGAgB,YAAQ;AACJ;;;;;;;;AAQAZ,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9DH,0BAAcA,cAAcG,QAA5B;AACA,mBAAO,CAACD,WAAD,IAAgBtX,KAAKsY,IAAL,CAAU,IAAItY,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,IAA0C,CAA1D,IAA+DC,UAAtE;AACH,SAZG;AAaJ;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,0BAAcA,cAAcG,QAAd,GAAyB,CAAvC;AACA,mBAAOD,cAActX,KAAKsY,IAAL,CAAU,IAAItY,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,CAAd,GAAwDC,UAA/D;AACH,SAxBG;AAyBJ;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjEH,0BAAcA,cAAcG,QAA5B;AACA,gBAAIH,cAAc,CAAd,GAAkB,CAAtB,EAAyB;AACrB,uBAAO,CAACE,WAAD,GAAe,CAAf,IAAoBtX,KAAKsY,IAAL,CAAU,IAAItY,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,IAA0C,CAA9D,IAAmEC,UAA1E;AACH,aAFD,MAGK;AACDD,+BAAe,CAAf;AACA,uBAAOE,cAAc,CAAd,IAAmBtX,KAAKsY,IAAL,CAAU,IAAItY,KAAK0X,GAAL,CAASN,WAAT,EAAsB,CAAtB,CAAd,IAA0C,CAA7D,IAAkEC,UAAzE;AACH;AACJ;AA1CG,KApSe;AAgVvB;;;AAGAkB,aAAS;AACL;;;;;;;;;;AAUAd,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0Dva,CAA1D,EAA6D7G,CAA7D,EAAgE;AACpE,gBAAIkQ,CAAJ;AACA,gBAAI+Q,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,UAAP;AACH;AACDD,2BAAeG,QAAf;AACA,gBAAIH,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,aAAaC,WAApB;AACH;AACD,gBAAI,OAAOnhB,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAIohB,WAAW,GAAf;AACH;AACD,gBAAI,CAACva,CAAD,IAAMA,IAAIgD,KAAKwY,GAAL,CAASlB,WAAT,CAAd,EAAqC;AACjCjR,oBAAIlQ,IAAI,CAAR;AACA6G,oBAAIsa,WAAJ;AACH,aAHD,MAIK;AACDjR,oBAAIlQ,KAAK,IAAI6J,KAAKkY,EAAd,IAAoBlY,KAAKyY,IAAL,CAAUnB,cAActa,CAAxB,CAAxB;AACH;AACD,mBAAO,EAAEA,IAAIgD,KAAK0X,GAAL,CAAS,CAAT,EAAY,MAAMN,eAAe,CAArB,CAAZ,CAAJ,GAA2CpX,KAAKmY,GAAL,CAAS,CAACf,cAAcG,QAAd,GAAyBlR,CAA1B,KAAgC,IAAIrG,KAAKkY,EAAzC,IAA+C/hB,CAAxD,CAA7C,IAA2GkhB,UAAlH;AACH,SA/BI;AAgCL;;;;;;;;;;AAUAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0Dva,CAA1D,EAA6D7G,CAA7D,EAAgE;AACrE,gBAAIkQ,CAAJ;AACA,gBAAI+Q,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,UAAP;AACH;AACDD,2BAAeG,QAAf;AACA,gBAAIH,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,aAAaC,WAApB;AACH;AACD,gBAAI,OAAOnhB,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAIohB,WAAW,EAAf;AACH;AACD,gBAAI,CAACva,CAAD,IAAMA,IAAIgD,KAAKwY,GAAL,CAASlB,WAAT,CAAd,EAAqC;AACjCta,oBAAIsa,WAAJ;AACAjR,oBAAIlQ,IAAI,CAAR;AACH,aAHD,MAIK;AACDkQ,oBAAIlQ,KAAK,IAAI6J,KAAKkY,EAAd,IAAoBlY,KAAKyY,IAAL,CAAUnB,cAActa,CAAxB,CAAxB;AACH;AACD,mBAAQA,IAAIgD,KAAK0X,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMN,WAAlB,CAAJ,GAAqCpX,KAAKmY,GAAL,CAAS,CAACf,cAAcG,QAAd,GAAyBlR,CAA1B,KAAgC,IAAIrG,KAAKkY,EAAzC,IAA+C/hB,CAAxD,CAArC,GAAkGmhB,WAAlG,GAAgHD,UAAxH;AACH,SA9DI;AA+DL;;;;;;;;;;AAUAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0Dva,CAA1D,EAA6D7G,CAA7D,EAAgE;AACvE,gBAAIkQ,CAAJ;AACA,gBAAI+Q,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,UAAP;AACH;AACDD,2BAAeG,WAAW,CAA1B;AACA,gBAAIH,gBAAgB,CAApB,EAAuB;AACnB,uBAAOC,aAAaC,WAApB;AACH;AACD,gBAAI,OAAOnhB,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAIohB,YAAY,MAAM,GAAlB,CAAJ;AACH;AACD,gBAAI,CAACva,CAAD,IAAMA,IAAIgD,KAAKwY,GAAL,CAASlB,WAAT,CAAd,EAAqC;AACjCta,oBAAIsa,WAAJ;AACAjR,oBAAIlQ,IAAI,CAAR;AACH,aAHD,MAIK;AACDkQ,oBAAIlQ,KAAK,IAAI6J,KAAKkY,EAAd,IAAoBlY,KAAKyY,IAAL,CAAUnB,cAActa,CAAxB,CAAxB;AACH;AACD,gBAAIoa,cAAc,CAAlB,EAAqB;AACjB,uBAAO,CAAC,GAAD,IAAQpa,IAAIgD,KAAK0X,GAAL,CAAS,CAAT,EAAY,MAAMN,eAAe,CAArB,CAAZ,CAAJ,GAA2CpX,KAAKmY,GAAL,CAAS,CAACf,cAAcG,QAAd,GAAyBlR,CAA1B,KAAgC,IAAIrG,KAAKkY,EAAzC,IAA+C/hB,CAAxD,CAAnD,IAAiHkhB,UAAxH;AACH;AACD,mBAAOra,IAAIgD,KAAK0X,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,IAAON,eAAe,CAAtB,CAAZ,CAAJ,GAA4CpX,KAAKmY,GAAL,CAAS,CAACf,cAAcG,QAAd,GAAyBlR,CAA1B,KAAgC,IAAIrG,KAAKkY,EAAzC,IAA+C/hB,CAAxD,CAA5C,GAAyG,EAAzG,GAA8GmhB,WAA9G,GAA4HD,UAAnI;AACH;AAhGI,KAnVc;AAqbvB;;;AAGAqB,UAAM;AACF;;;;;;;;;AASAjB,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0DlR,CAA1D,EAA6D;AACjE,gBAAI,OAAOA,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAI,OAAJ;AACH;AACD,mBAAOiR,eAAeF,eAAeG,QAA9B,IAA0CH,WAA1C,IAAyD,CAAC/Q,IAAI,CAAL,IAAU+Q,WAAV,GAAwB/Q,CAAjF,IAAsFgR,UAA7F;AACH,SAfC;AAgBF;;;;;;;;;AASAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0DlR,CAA1D,EAA6D;AAClE,gBAAI,OAAOA,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAI,OAAJ;AACH;AACD,mBAAOiR,eAAe,CAACF,cAAcA,cAAcG,QAAd,GAAyB,CAAxC,IAA6CH,WAA7C,IAA4D,CAAC/Q,IAAI,CAAL,IAAU+Q,WAAV,GAAwB/Q,CAApF,IAAyF,CAAxG,IAA6GgR,UAApH;AACH,SA9BC;AA+BF;;;;;;;;;AASAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0DlR,CAA1D,EAA6D;AACpE,gBAAI,OAAOA,CAAP,KAAa,WAAjB,EAA8B;AAC1BA,oBAAI,OAAJ;AACH;AACD+Q,2BAAeG,WAAW,CAA1B;AACA,gBAAIH,cAAc,CAAlB,EAAqB;AACjB,uBAAOE,cAAc,CAAd,IAAmBF,cAAcA,WAAd,IAA6B,CAAC,CAAC/Q,KAAM,KAAP,IAAiB,CAAlB,IAAuB+Q,WAAvB,GAAqC/Q,CAAlE,CAAnB,IAA2FgR,UAAlG;AACH;AACD,mBAAOC,cAAc,CAAd,IAAmB,CAACF,eAAe,CAAhB,IAAqBA,WAArB,IAAoC,CAAC,CAAC/Q,KAAM,KAAP,IAAiB,CAAlB,IAAuB+Q,WAAvB,GAAqC/Q,CAAzE,IAA8E,CAAjG,IAAsGgR,UAA7G;AACH;AAjDC,KAxbiB;AA2evB;;;AAGAsB,YAAQ;AACJ;;;;;;;;AAQAlB,gBAAQ,gBAAUL,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC9D,mBAAOD,cAAclhB,QAAQ8gB,gBAAR,CAAyByB,MAAzB,CAAgChB,OAAhC,CAAwCJ,WAAWH,WAAnD,EAAgE,CAAhE,EAAmEE,WAAnE,EAAgFC,QAAhF,CAAd,GAA0GF,UAAjH;AACH,SAXG;AAYJ;;;;;;;;AAQAM,iBAAS,iBAAUP,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AAC/DH,2BAAeG,QAAf;AACA,gBAAIH,cAAe,IAAI,IAAvB,EAA8B;AAC1B,uBAAOE,eAAe,SAASF,WAAT,GAAuBA,WAAtC,IAAqDC,UAA5D;AACH,aAFD,MAGK,IAAID,cAAe,IAAI,IAAvB,EAA8B;AAC/B,uBAAOE,eAAe,UAAUF,eAAgB,MAAM,IAAhC,IAAyCA,WAAzC,GAAuD,GAAtE,IAA6EC,UAApF;AACH,aAFI,MAGA,IAAID,cAAe,MAAM,IAAzB,EAAgC;AACjC,uBAAOE,eAAe,UAAUF,eAAgB,OAAO,IAAjC,IAA0CA,WAA1C,GAAwD,KAAvE,IAAgFC,UAAvF;AACH,aAFI,MAGA;AACD,uBAAOC,eAAe,UAAUF,eAAgB,QAAQ,IAAlC,IAA2CA,WAA3C,GAAyD,OAAxE,IAAmFC,UAA1F;AACH;AACJ,SAlCG;AAmCJ;;;;;;;;AAQAO,mBAAW,mBAAUR,WAAV,EAAuBC,UAAvB,EAAmCC,WAAnC,EAAgDC,QAAhD,EAA0D;AACjE,gBAAIH,cAAcG,WAAW,CAA7B,EAAgC;AAC5B,uBAAOnhB,QAAQ8gB,gBAAR,CAAyByB,MAAzB,CAAgClB,MAAhC,CAAuCL,cAAc,CAArD,EAAwD,CAAxD,EAA2DE,WAA3D,EAAwEC,QAAxE,IAAoF,EAApF,GAAyFF,UAAhG;AACH,aAFD,MAGK;AACD,uBAAOjhB,QAAQ8gB,gBAAR,CAAyByB,MAAzB,CAAgChB,OAAhC,CAAwCP,cAAc,CAAd,GAAkBG,QAA1D,EAAoE,CAApE,EAAuED,WAAvE,EAAoFC,QAApF,IAAgG,GAAhG,GAAsGD,cAAc,GAApH,GAA0HD,UAAjI;AACH;AACJ;AAlDG;AA9ee,CAA3B;AAmiBA;AACA,4C;;;;;;;AC/iBa;;AACb,IAAIuB,YAAa,aAAQ,UAAKA,SAAd,IAA4B,UAAUC,OAAV,EAAmBC,UAAnB,EAA+BzI,CAA/B,EAAkC0I,SAAlC,EAA6C;AACrF,aAASC,KAAT,CAAexiB,KAAf,EAAsB;AAAE,eAAOA,iBAAiB6Z,CAAjB,GAAqB7Z,KAArB,GAA6B,IAAI6Z,CAAJ,CAAM,UAAU4I,OAAV,EAAmB;AAAEA,oBAAQziB,KAAR;AAAiB,SAA5C,CAApC;AAAoF;AAC5G,WAAO,KAAK6Z,MAAMA,IAAI6I,OAAV,CAAL,EAAyB,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AACvD,iBAASC,SAAT,CAAmB5iB,KAAnB,EAA0B;AAAE,gBAAI;AAAE6iB,qBAAKN,UAAUxH,IAAV,CAAe/a,KAAf,CAAL;AAA8B,aAApC,CAAqC,OAAOkS,CAAP,EAAU;AAAEyQ,uBAAOzQ,CAAP;AAAY;AAAE;AAC3F,iBAAS4Q,QAAT,CAAkB9iB,KAAlB,EAAyB;AAAE,gBAAI;AAAE6iB,qBAAKN,UAAU,OAAV,EAAmBviB,KAAnB,CAAL;AAAkC,aAAxC,CAAyC,OAAOkS,CAAP,EAAU;AAAEyQ,uBAAOzQ,CAAP;AAAY;AAAE;AAC9F,iBAAS2Q,IAAT,CAAcxhB,MAAd,EAAsB;AAAEA,mBAAOib,IAAP,GAAcmG,QAAQphB,OAAOrB,KAAf,CAAd,GAAsCwiB,MAAMnhB,OAAOrB,KAAb,EAAoB+iB,IAApB,CAAyBH,SAAzB,EAAoCE,QAApC,CAAtC;AAAsF;AAC9GD,aAAK,CAACN,YAAYA,UAAUvhB,KAAV,CAAgBqhB,OAAhB,EAAyBC,cAAc,EAAvC,CAAb,EAAyDvH,IAAzD,EAAL;AACH,KALM,CAAP;AAMH,CARD;AASA,IAAIiI,cAAe,aAAQ,UAAKA,WAAd,IAA8B,UAAUX,OAAV,EAAmBY,IAAnB,EAAyB;AACrE,QAAItF,IAAI,EAAEuF,OAAO,CAAT,EAAYC,MAAM,gBAAW;AAAE,gBAAIrT,EAAE,CAAF,IAAO,CAAX,EAAc,MAAMA,EAAE,CAAF,CAAN,CAAY,OAAOA,EAAE,CAAF,CAAP;AAAc,SAAvE,EAAyEsT,MAAM,EAA/E,EAAmFC,KAAK,EAAxF,EAAR;AAAA,QAAsGnT,CAAtG;AAAA,QAAyGoT,CAAzG;AAAA,QAA4GxT,CAA5G;AAAA,QAA+GyT,CAA/G;AACA,WAAOA,IAAI,EAAExI,MAAMyI,KAAK,CAAL,CAAR,EAAiB,SAASA,KAAK,CAAL,CAA1B,EAAmC,UAAUA,KAAK,CAAL,CAA7C,EAAJ,EAA4D,OAAO9N,MAAP,KAAkB,UAAlB,KAAiC6N,EAAE7N,OAAOI,QAAT,IAAqB,YAAW;AAAE,eAAO,IAAP;AAAc,KAAjF,CAA5D,EAAgJyN,CAAvJ;AACA,aAASC,IAAT,CAAcvT,CAAd,EAAiB;AAAE,eAAO,UAAUwT,CAAV,EAAa;AAAE,mBAAOZ,KAAK,CAAC5S,CAAD,EAAIwT,CAAJ,CAAL,CAAP;AAAsB,SAA5C;AAA+C;AAClE,aAASZ,IAAT,CAAca,EAAd,EAAkB;AACd,YAAIxT,CAAJ,EAAO,MAAM,IAAIwH,SAAJ,CAAc,iCAAd,CAAN;AACP,eAAOiG,CAAP;AAAU,gBAAI;AACV,oBAAIzN,IAAI,CAAJ,EAAOoT,MAAMxT,IAAI4T,GAAG,CAAH,IAAQ,CAAR,GAAYJ,EAAE,QAAF,CAAZ,GAA0BI,GAAG,CAAH,IAAQJ,EAAE,OAAF,MAAe,CAACxT,IAAIwT,EAAE,QAAF,CAAL,KAAqBxT,EAAEpK,IAAF,CAAO4d,CAAP,CAArB,EAAgC,CAA/C,CAAR,GAA4DA,EAAEvI,IAAlG,KAA2G,CAAC,CAACjL,IAAIA,EAAEpK,IAAF,CAAO4d,CAAP,EAAUI,GAAG,CAAH,CAAV,CAAL,EAAuBpH,IAA9I,EAAoJ,OAAOxM,CAAP;AACpJ,oBAAIwT,IAAI,CAAJ,EAAOxT,CAAX,EAAc4T,KAAK,CAACA,GAAG,CAAH,IAAQ,CAAT,EAAY5T,EAAE9P,KAAd,CAAL;AACd,wBAAQ0jB,GAAG,CAAH,CAAR;AACI,yBAAK,CAAL,CAAQ,KAAK,CAAL;AAAQ5T,4BAAI4T,EAAJ,CAAQ;AACxB,yBAAK,CAAL;AAAQ/F,0BAAEuF,KAAF,GAAW,OAAO,EAAEljB,OAAO0jB,GAAG,CAAH,CAAT,EAAgBpH,MAAM,KAAtB,EAAP;AACnB,yBAAK,CAAL;AAAQqB,0BAAEuF,KAAF,GAAWI,IAAII,GAAG,CAAH,CAAJ,CAAWA,KAAK,CAAC,CAAD,CAAL,CAAU;AACxC,yBAAK,CAAL;AAAQA,6BAAK/F,EAAE0F,GAAF,CAAMM,GAAN,EAAL,CAAkBhG,EAAEyF,IAAF,CAAOO,GAAP,GAAc;AACxC;AACI,4BAAI,EAAE7T,IAAI6N,EAAEyF,IAAN,EAAYtT,IAAIA,EAAE5N,MAAF,GAAW,CAAX,IAAgB4N,EAAEA,EAAE5N,MAAF,GAAW,CAAb,CAAlC,MAAuDwhB,GAAG,CAAH,MAAU,CAAV,IAAeA,GAAG,CAAH,MAAU,CAAhF,CAAJ,EAAwF;AAAE/F,gCAAI,CAAJ,CAAO;AAAW;AAC5G,4BAAI+F,GAAG,CAAH,MAAU,CAAV,KAAgB,CAAC5T,CAAD,IAAO4T,GAAG,CAAH,IAAQ5T,EAAE,CAAF,CAAR,IAAgB4T,GAAG,CAAH,IAAQ5T,EAAE,CAAF,CAA/C,CAAJ,EAA2D;AAAE6N,8BAAEuF,KAAF,GAAUQ,GAAG,CAAH,CAAV,CAAiB;AAAQ;AACtF,4BAAIA,GAAG,CAAH,MAAU,CAAV,IAAe/F,EAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAA7B,EAAmC;AAAE6N,8BAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAAV,CAAgBA,IAAI4T,EAAJ,CAAQ;AAAQ;AACrE,4BAAI5T,KAAK6N,EAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAAnB,EAAyB;AAAE6N,8BAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAAV,CAAgB6N,EAAE0F,GAAF,CAAMhf,IAAN,CAAWqf,EAAX,EAAgB;AAAQ;AACnE,4BAAI5T,EAAE,CAAF,CAAJ,EAAU6N,EAAE0F,GAAF,CAAMM,GAAN;AACVhG,0BAAEyF,IAAF,CAAOO,GAAP,GAAc;AAXtB;AAaAD,qBAAKT,KAAKvd,IAAL,CAAU2c,OAAV,EAAmB1E,CAAnB,CAAL;AACH,aAjBS,CAiBR,OAAOzL,CAAP,EAAU;AAAEwR,qBAAK,CAAC,CAAD,EAAIxR,CAAJ,CAAL,CAAaoR,IAAI,CAAJ;AAAQ,aAjBzB,SAiBkC;AAAEpT,oBAAIJ,IAAI,CAAR;AAAY;AAjB1D,SAkBA,IAAI4T,GAAG,CAAH,IAAQ,CAAZ,EAAe,MAAMA,GAAG,CAAH,CAAN,CAAa,OAAO,EAAE1jB,OAAO0jB,GAAG,CAAH,IAAQA,GAAG,CAAH,CAAR,GAAgB,KAAK,CAA9B,EAAiCpH,MAAM,IAAvC,EAAP;AAC/B;AACJ,CA1BD;AA2BAxc,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIuf,iBAAiBtf,mBAAOA,CAAC,EAAR,CAArB;AACA,IAAI2jB,gBAAgB,SAAhBA,aAAgB,CAAUC,WAAV,EAAuB;AACvC,QAAIxiB,MAAJ,EAAYoQ,IAAZ,EAAkB1N,KAAlB,EAAyB+f,IAAzB,EAA+Btc,GAA/B,EAAoCoY,QAApC,EAA8CmE,OAA9C,EAAuDpJ,EAAvD,EAA2DqJ,EAA3D;AACA,WAAOhB,YAAY,IAAZ,EAAkB,UAAUiB,EAAV,EAAc;AACnC,gBAAQA,GAAGf,KAAX;AACI,iBAAK,CAAL;AACI7hB,yBAAS,EAAT;AACA,oBAAI,CAACwiB,WAAL,EAAkB,OAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AAClBpS,uBAAO3R,OAAO2R,IAAP,CAAYoS,WAAZ,CAAP;AACA,oBAAI,EAAEpS,KAAKvP,MAAL,GAAc,CAAhB,CAAJ,EAAwB,OAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AACxB6B,wBAAQ,CAAR,EAAW+f,OAAOrS,KAAKvP,MAAvB;AACA+hB,mBAAGf,KAAH,GAAW,CAAX;AACJ,iBAAK,CAAL;AACI,oBAAI,EAAEnf,QAAQ+f,IAAV,CAAJ,EAAqB,OAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AACrBtc,sBAAMiK,KAAK1N,KAAL,CAAN;AACA6b,2BAAWiE,YAAYrc,GAAZ,CAAX;AACA,oBAAI,EAAE,OAAOoY,QAAP,KAAoB,UAAtB,CAAJ,EAAuC,OAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AACvCmE,0BAAUtS,KAAK1N,QAAQ,CAAb,CAAV;AACA4W,qBAAKtZ,MAAL;AACA2iB,qBAAKxc,GAAL;AACA,uBAAO,CAAC,CAAD,CAAG,SAAH,EAAcoY,SAASve,OAAO0iB,OAAP,CAAT,CAAd,CAAP;AACJ,iBAAK,CAAL;AACIpJ,mBAAGqJ,EAAH,IAASC,GAAGd,IAAH,EAAT;AACA,uBAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AACJ,iBAAK,CAAL;AACI9hB,uBAAOmG,GAAP,IAAc;AACVsL,gCAAY,eADF;AAEV;AACAD,6BAAS,SAASrL,GAAT,GAAe;AAHd,iBAAd;AAKAyc,mBAAGf,KAAH,GAAW,CAAX;AACJ,iBAAK,CAAL;AACInf;AACA,uBAAO,CAAC,CAAD,CAAG,SAAH,EAAc,CAAd,CAAP;AACJ,iBAAK,CAAL;AAAQ,uBAAO,CAAC,CAAD,CAAG,UAAH,EAAe1C,MAAf,CAAP;AA9BZ;AAgCH,KAjCM,CAAP;AAkCH,CApCD;AAqCAzB,QAAQskB,gBAAR,GAA2B,UAAUC,SAAV,EAAqBld,EAArB,EAAyBmd,MAAzB,EAAiC;AAAE,WAAOhC,UAAU,KAAK,CAAf,EAAkB,KAAK,CAAvB,EAA0B,KAAK,CAA/B,EAAkC,YAAY;AAC/G,eAAOY,YAAY,IAAZ,EAAkB,UAAUrI,EAAV,EAAc;AACnC,mBAAO,CAAC,CAAD,CAAG,UAAH,EAAe,IAAI+H,OAAJ,CAAY,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AACrD,oBAAIwB,aAAaA,UAAUjiB,MAAV,GAAmB,CAApC,EAAuC;AACnC,wBAAImiB,cAAc,EAAlB;AACA,wBAAIC,cAAc,EAAlB;AACA,wBAAIC,mBAAmB,SAAnBA,gBAAmB,GAAY;AAC/B,4BAAIC,WAAW,KAAf;AACA;AACA,6BAAK,IAAIhd,GAAT,IAAgB6c,WAAhB,EAA6B;AACzB,gCAAIA,YAAY7c,GAAZ,MAAqB,SAAzB,EAAoC;AAChC;AACH;AACD,gCAAI6c,YAAY7c,GAAZ,MAAqB,OAAzB,EAAkC;AAC9Bgd,2CAAW,IAAX;AACA;AACH;AACJ;AACD,4BAAIA,QAAJ,EAAc;AACV7B,mCAAO2B,WAAP;AACH,yBAFD,MAGK;AACD7B,oCAAQ6B,WAAR;AACH;AACJ,qBAlBD;AAmBAH,8BAAUxf,GAAV,CAAc,UAAU8f,IAAV,EAAgB1gB,KAAhB,EAAuB;AACjC,4BAAI2gB,SAAS,cAAc3gB,KAA3B;AACAsgB,oCAAY,cAActgB,KAA1B,IAAmC,SAAnC;AACA,yBAAC,UAAU4gB,KAAV,EAAiBC,MAAjB,EAAyB;AACtB,gCAAIhF,WAAW,OAAO+E,MAAM1d,EAAb,KAAoB,UAApB,GAAiC0d,MAAM1d,EAAvC,GAA4CA,EAA3D;AACA,gCAAI,OAAO2Y,QAAP,KAAoB,UAAxB,EAAoC;AAChC;AACA,oCAAIiF,iBAAiBjF,SAAS;AAC1BhN,wCAAI+R,MAAM/R,EADgB;AAE1BmR,6CAAS,IAFiB;AAG1Be,gDAAY,IAHc;AAI1BH,2CAAOA,MAAMI,MAJa;AAK1B1jB,4CAAQijB;AALkB,iCAAT,EAMlBK,MAAMI,MANY,CAArB;AAOA,oCAAIxF,eAAeja,YAAf,CAA4Be,SAA5B,CAAsCwe,cAAtC,CAAJ,EAA2D;AACvDA,mDAAe9B,IAAf,CAAoB,UAAUiC,IAAV,EAAgB;AAChCV,oDAAYK,MAAM/R,EAAlB,IAAwBoS,IAAxB;AACAX,oDAAYK,MAAZ,IAAsB,IAAtB;AACAH;AACH,qCAJD,EAIGU,KAJH,CAIS,UAAU5R,KAAV,EAAiB;AACtBiR,oDAAYK,MAAM/R,EAAlB,IAAwB;AACpBE,wDAAY,MADQ;AAEpB;AACAoS,uDAAW7R,KAHS;AAIpBR,qDAASQ,MAAMR,OAAN,IAAiBQ,MAAM8R,UAAvB,IAAqC;AAJ1B,yCAAxB;AAMAd,oDAAYK,MAAZ,IAAsB,OAAtB;AACAH;AACH,qCAbD;AAcH,iCAfD,MAgBK;AACDD,gDAAYK,MAAM/R,EAAlB,IAAwBiS,cAAxB;AACAR,gDAAYK,MAAZ,IAAsB,IAAtB;AACAH;AACH;AACJ,6BA9BD,MA+BK;AACDD,4CAAYK,MAAM/R,EAAlB,IAAwB;AACpBE,gDAAY,MADQ;AAEpB;AACAD,6CAAS;AAHW,iCAAxB;AAKA0R;AACH;AACJ,yBAzCD,EAyCGE,IAzCH,EAyCSC,MAzCT;AA0CH,qBA7CD;AA8CH,iBApED,MAqEK;AACDjC;AACH;AACJ,aAzEiB,CAAf,CAAP;AA0EH,SA3EM,CAAP;AA4EH,KA7EoE,CAAP;AA6EzD,CA7EL;AA8EA;;;;;AAKA7iB,QAAQwlB,aAAR,GAAwB,UAAUjB,SAAV,EAAqBld,EAArB,EAAyBmd,MAAzB,EAAiC;AAAE,WAAOhC,UAAU,KAAK,CAAf,EAAkB,KAAK,CAAvB,EAA0B,KAAK,CAA/B,EAAkC,YAAY;AAC5G,YAAI1f,QAAQ,IAAZ;AACA,eAAOsgB,YAAY,IAAZ,EAAkB,UAAUrI,EAAV,EAAc;AACnC,mBAAO,CAAC,CAAD,CAAG,UAAH,EAAe,IAAI+H,OAAJ,CAAY,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AACrD,oBAAI0C,eAAe,EAAnB;AACA,oBAAIC,SAAS,EAAb;AACA,oBAAI3d,SAAS,EAAb;AACA,oBAAI4d,cAAc,IAAlB;AACA,oBAAIC,SAAS,SAATA,MAAS,CAAUhe,GAAV,EAAeuc,OAAf,EAAwB;AACjC,2BAAO,YAAY;AACf,4BAAI0B,UAAUF,YAAYxK,IAAZ,CAAiBuK,OAAOvB,OAAP,CAAjB,CAAd;AACA,4BAAI,CAAC0B,QAAQnJ,IAAb,EAAmB;AACf,gCAAImJ,QAAQzlB,KAAR,IAAiB,OAAOylB,QAAQzlB,KAAR,CAAcyF,QAArB,KAAkC,UAAnD,IAAiEggB,QAAQzlB,KAAR,CAAcyF,QAAd,OAA6B,kBAAlG,EAAsH;AAClHggB,wCAAQzlB,KAAR,CAAc+iB,IAAd,CAAmB,UAAUiC,IAAV,EAAgB;AAC/BM,2CAAO9d,GAAP,IAAcwd,IAAd;AACAU,2CAAOle,GAAP;AACH,iCAHD,EAGGyd,KAHH,CAGS,UAAUU,GAAV,EAAe;AACpB,wCAAI,CAACvB,MAAD,IAAW,CAACA,OAAOwB,cAAvB,EAAuC;AACnCN,+CAAO9d,GAAP,IAAc;AACVsL,wDAAY,eADF;AAEV;AACA+S,uDAAWF;AAHD,yCAAd;AAKAD,+CAAOle,GAAP;AACH,qCAPD,MAQK,IAAI4c,UAAUA,OAAOwB,cAArB,EAAqC;AACtCjD,+CAAO;AACHuC,uDAAWS,GADR;AAEH9S,qDAAS8S,IAAI9S,OAFV;AAGHC,wDAAY;AAHT,yCAAP;AAKH;AACJ,iCAnBD;AAoBH,6BArBD,MAsBK;AACDwS,uCAAO9d,GAAP,IAAcie,QAAQzlB,KAAtB;AACA0lB,uCAAOle,GAAP;AACH;AACJ,yBA3BD,MA4BK;AACDib,oCAAQ6C,MAAR;AACH;AACD,+BAAOG,OAAP;AACH,qBAlCD;AAmCH,iBApCD;AAqCA,oBAAIC,SAAS,SAATA,MAAS,CAAUle,GAAV,EAAe;AACxB,wBAAIzD,QAAQ4D,OAAO8C,OAAP,CAAejD,GAAf,CAAZ;AACA,wBAAIO,UAAUJ,OAAO5D,QAAQ,CAAf,CAAd;AACAyhB,2BAAOzd,OAAP,EAAgBP,GAAhB;AACH,iBAJD;AAKA,oBAAI+X,eAAeja,YAAf,CAA4BO,OAA5B,CAAoCse,SAApC,KAAkDA,UAAUjiB,MAAV,GAAmB,CAAzE,EAA4E;AACxEiiB,8BAAUxf,GAAV,CAAc,UAAUmhB,MAAV,EAAkB/hB,KAAlB,EAAyB;AACnC,4BAAIggB,UAAUhgB,QAAQ,CAAR,IAAaogB,UAAUpgB,QAAQ,CAAlB,CAAb,GAAoCogB,UAAUpgB,QAAQ,CAAlB,EAAqB6O,EAAzD,GAA8DlO,SAA5E;AACAiD,+BAAOtD,IAAP,CAAYyhB,OAAOlT,EAAnB;AACAyS,qCAAaS,OAAOlT,EAApB,IAA2B,UAAUmT,OAAV,EAAmBC,IAAnB,EAAyB;AAChD,mCAAO,UAAUC,SAAV,EAAqB;AACxB,oCAAIC,SAASF,IAAb;AACA,oCAAIG,aAAaJ,QAAQhB,MAAzB;AACA,oCAAIzE,UAAUyF,QAAQK,KAAR,IAAiB1jB,KAA/B;AACA,oCAAI2jB,kBAAkB,OAAON,QAAQ9e,EAAf,KAAsB,UAAtB,GAAmC8e,QAAQ9e,EAA3C,GAAgDA,EAAtE;AACA;AACA,oCAAIqf,UAAU;AACV1T,wCAAImT,QAAQnT,EADF;AAEVmR,6CAASmC,MAFC;AAGVpB,gDAAYmB,SAHF;AAIVlB,4CAAQgB,QAAQhB,MAJN;AAKV1jB,4CAAQikB;AALE,iCAAd;AAOA,oCAAI/F,eAAeja,YAAf,CAA4BO,OAA5B,CAAoCsgB,UAApC,CAAJ,EAAqD;AACjDA,+CAAWI,OAAX,CAAmBD,OAAnB;AACA,2CAAOD,gBAAgBrlB,KAAhB,CAAsBsf,OAAtB,EAA+B6F,UAA/B,CAAP;AACH,iCAHD,MAIK;AACD,2CAAOE,gBAAgB3gB,IAAhB,CAAqB4a,OAArB,EAA8BgG,OAA9B,EAAuCH,UAAvC,CAAP;AACH;AACJ,6BApBD;AAqBH,yBAtByB,CAsBvBL,MAtBuB,EAsBf/B,OAtBe,CAA1B;AAuBAA,kCAAU,IAAV;AACH,qBA3BD;AA4BAwB,kCAAc3B,cAAcyB,YAAd,CAAd;AACAG,2BAAOrB,UAAU,CAAV,EAAavR,EAApB,EAAwBlO,SAAxB;AACH,iBA/BD,MAgCK;AACD+d,4BAAQ,EAAR;AACH;AACJ,aAlFiB,CAAf,CAAP;AAmFH,SApFM,CAAP;AAqFH,KAvFiE,CAAP;AAuFtD,CAvFL;AAwFA,wC;;;;;;;ACvPa;;AACb3iB,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIa,iBAAiBZ,mBAAOA,CAAC,CAAR,CAArB;AACAL,QAAQ06B,UAAR,GAAqB,UAAU1tB,MAAV,EAAkB2tB,WAAlB,EAA+BL,WAA/B,EAA4C;AAC7D,QAAIzP,UAAU,CAAC5pB,eAAeyE,YAAf,CAA4BR,OAA5B,CAAoCo1B,WAApC,CAAD,GAAoDA,WAApD,GAAkE,cAAhF;AACA,QAAIC,cAAcvtB,OAAO6d,OAAP,KAAmB,EAArC;AACA,QAAI+P,gBAAgB,EAApB;AACA,QAAID,WAAJ,EAAiB;AACb;AACA,aAAK,IAAI/yB,GAAT,IAAgB+yB,WAAhB,EAA6B;AACzB,gBAAIE,QAAQF,YAAY/yB,GAAZ,CAAZ;AACA,gBAAIkzB,QAAQ75B,eAAeyE,YAAf,CAA4Bb,QAA5B,CAAqC01B,WAArC,EAAkD3yB,GAAlD,CAAZ;AACA,gBAAIkzB,UAAUh2B,SAAd,EAAyB;AACrB81B,8BAAchzB,GAAd,IAAqBkzB,KAArB;AACH;AACD,gBAAI,OAAOD,MAAME,IAAb,KAAsB,UAA1B,EAAsC;AAClC,oBAAI,CAACF,MAAME,IAAN,CAAWD,KAAX,CAAL,EAAwB;AACpB;AACAtnB,4BAAQC,KAAR,CAAc7L,MAAM,2EAApB;AACH;AACJ;AACJ;AACJ;AACD,WAAOgzB,aAAP;AACH,CArBD,C;;;;;;;ACHa;;AACb16B,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIa,iBAAiBZ,mBAAOA,CAAC,CAAR,CAArB;AACA,IAAI26B,wBAAwB36B,mBAAOA,CAAC,EAAR,CAA5B;AACA,IAAI4N,yBAAyB5N,mBAAOA,CAAC,CAAR,CAA7B;AACAL,QAAQi7B,OAAR,GAAkB,UAAUC,eAAV,EAA2BC,SAA3B,EAAsCC,iBAAtC,EAAyDC,oBAAzD,EAA+EltB,cAA/E,EAA+FC,iBAA/F,EAAkH;AAChI,QAAIktB,UAAUrtB,uBAAuBxI,uBAArC;AACA,QAAI81B,YAAYptB,eAAemtB,OAAf,CAAhB;AACA,QAAIE,gBAAgBL,UAAUp6B,SAAV,CAAoBkc,QAAxC;AACA,QAAIue,kBAAkB12B,SAAlB,IAA+B02B,kBAAkB,IAArD,EAA2D;AACvD,YAAI,CAACD,SAAL,EAAgB;AACZ,gBAAIE,SAAST,sBAAsB9sB,mBAAtB,CAA0CC,cAA1C,EAA0DC,iBAA1D,CAAb;AACAmtB,wBAAYE,OAAOjtB,QAAnB;AACAitB,qBAAS,IAAT;AACH;AACD,YAAI,CAACF,UAAUC,aAAV,CAAL,EAA+B;AAC3Bv6B,2BAAe8L,sBAAf,CAAsCmuB,gBAAgBQ,WAAtD,EAAmEF,aAAnE,EAAkF;AAC9EG,oCAAoBN,oBAD0D;AAE9EO,iCAAiBR;AAF6D,aAAlF;AAIH;AACJ;AACDI,oBAAgB,IAAhB;AACAF,cAAU,IAAV;AACH,CAnBD,C;;;;;;;ACLa;;AACb,IAAIh7B,YAAa,aAAQ,UAAKA,SAAd,IAA6B,YAAY;AACrD,QAAIC,iBAAgB,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,yBAAgBL,OAAOQ,cAAP,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUJ,CAAV,EAAaC,CAAb,EAAgB;AAAED,cAAEG,SAAF,GAAcF,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,iBAAK,IAAIV,CAAT,IAAcU,CAAd;AAAiB,oBAAIA,EAAER,cAAF,CAAiBF,CAAjB,CAAJ,EAAyBS,EAAET,CAAF,IAAOU,EAAEV,CAAF,CAAP;AAA1C;AAAwD,SAF9E;AAGA,eAAOQ,eAAcC,CAAd,EAAiBC,CAAjB,CAAP;AACH,KALD;AAMA,WAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,uBAAcC,CAAd,EAAiBC,CAAjB;AACA,iBAASI,EAAT,GAAc;AAAE,iBAAKC,WAAL,GAAmBN,CAAnB;AAAuB;AACvCA,UAAEO,SAAF,GAAcN,MAAM,IAAN,GAAaP,OAAOc,MAAP,CAAcP,CAAd,CAAb,IAAiCI,GAAGE,SAAH,GAAeN,EAAEM,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAZ2C,EAA5C;AAaA,IAAI4qB,WAAY,aAAQ,UAAKA,QAAd,IAA2B,YAAY;AAClDA,eAAWvrB,OAAO0K,MAAP,IAAiB,UAASsF,CAAT,EAAY;AACpC,aAAK,IAAID,CAAJ,EAAO/I,IAAI,CAAX,EAAcmJ,IAAIhP,UAAUiB,MAAjC,EAAyC4E,IAAImJ,CAA7C,EAAgDnJ,GAAhD,EAAqD;AACjD+I,gBAAI5O,UAAU6F,CAAV,CAAJ;AACA,iBAAK,IAAInH,CAAT,IAAckQ,CAAd;AAAiB,oBAAI/P,OAAOa,SAAP,CAAiBd,cAAjB,CAAgC6F,IAAhC,CAAqCmK,CAArC,EAAwClQ,CAAxC,CAAJ,EACbmQ,EAAEnQ,CAAF,IAAOkQ,EAAElQ,CAAF,CAAP;AADJ;AAEH;AACD,eAAOmQ,CAAP;AACH,KAPD;AAQA,WAAOub,SAASrqB,KAAT,CAAe,IAAf,EAAqBC,SAArB,CAAP;AACH,CAVD;AAWA,IAAImhB,YAAa,aAAQ,UAAKA,SAAd,IAA4B,UAAUC,OAAV,EAAmBC,UAAnB,EAA+BzI,CAA/B,EAAkC0I,SAAlC,EAA6C;AACrF,aAASC,KAAT,CAAexiB,KAAf,EAAsB;AAAE,eAAOA,iBAAiB6Z,CAAjB,GAAqB7Z,KAArB,GAA6B,IAAI6Z,CAAJ,CAAM,UAAU4I,OAAV,EAAmB;AAAEA,oBAAQziB,KAAR;AAAiB,SAA5C,CAApC;AAAoF;AAC5G,WAAO,KAAK6Z,MAAMA,IAAI6I,OAAV,CAAL,EAAyB,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AACvD,iBAASC,SAAT,CAAmB5iB,KAAnB,EAA0B;AAAE,gBAAI;AAAE6iB,qBAAKN,UAAUxH,IAAV,CAAe/a,KAAf,CAAL;AAA8B,aAApC,CAAqC,OAAOkS,CAAP,EAAU;AAAEyQ,uBAAOzQ,CAAP;AAAY;AAAE;AAC3F,iBAAS4Q,QAAT,CAAkB9iB,KAAlB,EAAyB;AAAE,gBAAI;AAAE6iB,qBAAKN,UAAU,OAAV,EAAmBviB,KAAnB,CAAL;AAAkC,aAAxC,CAAyC,OAAOkS,CAAP,EAAU;AAAEyQ,uBAAOzQ,CAAP;AAAY;AAAE;AAC9F,iBAAS2Q,IAAT,CAAcxhB,MAAd,EAAsB;AAAEA,mBAAOib,IAAP,GAAcmG,QAAQphB,OAAOrB,KAAf,CAAd,GAAsCwiB,MAAMnhB,OAAOrB,KAAb,EAAoB+iB,IAApB,CAAyBH,SAAzB,EAAoCE,QAApC,CAAtC;AAAsF;AAC9GD,aAAK,CAACN,YAAYA,UAAUvhB,KAAV,CAAgBqhB,OAAhB,EAAyBC,cAAc,EAAvC,CAAb,EAAyDvH,IAAzD,EAAL;AACH,KALM,CAAP;AAMH,CARD;AASA,IAAIiI,cAAe,aAAQ,UAAKA,WAAd,IAA8B,UAAUX,OAAV,EAAmBY,IAAnB,EAAyB;AACrE,QAAItF,IAAI,EAAEuF,OAAO,CAAT,EAAYC,MAAM,gBAAW;AAAE,gBAAIrT,EAAE,CAAF,IAAO,CAAX,EAAc,MAAMA,EAAE,CAAF,CAAN,CAAY,OAAOA,EAAE,CAAF,CAAP;AAAc,SAAvE,EAAyEsT,MAAM,EAA/E,EAAmFC,KAAK,EAAxF,EAAR;AAAA,QAAsGnT,CAAtG;AAAA,QAAyGoT,CAAzG;AAAA,QAA4GxT,CAA5G;AAAA,QAA+GyT,CAA/G;AACA,WAAOA,IAAI,EAAExI,MAAMyI,KAAK,CAAL,CAAR,EAAiB,SAASA,KAAK,CAAL,CAA1B,EAAmC,UAAUA,KAAK,CAAL,CAA7C,EAAJ,EAA4D,OAAO9N,MAAP,KAAkB,UAAlB,KAAiC6N,EAAE7N,OAAOI,QAAT,IAAqB,YAAW;AAAE,eAAO,IAAP;AAAc,KAAjF,CAA5D,EAAgJyN,CAAvJ;AACA,aAASC,IAAT,CAAcvT,CAAd,EAAiB;AAAE,eAAO,UAAUwT,CAAV,EAAa;AAAE,mBAAOZ,KAAK,CAAC5S,CAAD,EAAIwT,CAAJ,CAAL,CAAP;AAAsB,SAA5C;AAA+C;AAClE,aAASZ,IAAT,CAAca,EAAd,EAAkB;AACd,YAAIxT,CAAJ,EAAO,MAAM,IAAIwH,SAAJ,CAAc,iCAAd,CAAN;AACP,eAAOiG,CAAP;AAAU,gBAAI;AACV,oBAAIzN,IAAI,CAAJ,EAAOoT,MAAMxT,IAAI4T,GAAG,CAAH,IAAQ,CAAR,GAAYJ,EAAE,QAAF,CAAZ,GAA0BI,GAAG,CAAH,IAAQJ,EAAE,OAAF,MAAe,CAACxT,IAAIwT,EAAE,QAAF,CAAL,KAAqBxT,EAAEpK,IAAF,CAAO4d,CAAP,CAArB,EAAgC,CAA/C,CAAR,GAA4DA,EAAEvI,IAAlG,KAA2G,CAAC,CAACjL,IAAIA,EAAEpK,IAAF,CAAO4d,CAAP,EAAUI,GAAG,CAAH,CAAV,CAAL,EAAuBpH,IAA9I,EAAoJ,OAAOxM,CAAP;AACpJ,oBAAIwT,IAAI,CAAJ,EAAOxT,CAAX,EAAc4T,KAAK,CAACA,GAAG,CAAH,IAAQ,CAAT,EAAY5T,EAAE9P,KAAd,CAAL;AACd,wBAAQ0jB,GAAG,CAAH,CAAR;AACI,yBAAK,CAAL,CAAQ,KAAK,CAAL;AAAQ5T,4BAAI4T,EAAJ,CAAQ;AACxB,yBAAK,CAAL;AAAQ/F,0BAAEuF,KAAF,GAAW,OAAO,EAAEljB,OAAO0jB,GAAG,CAAH,CAAT,EAAgBpH,MAAM,KAAtB,EAAP;AACnB,yBAAK,CAAL;AAAQqB,0BAAEuF,KAAF,GAAWI,IAAII,GAAG,CAAH,CAAJ,CAAWA,KAAK,CAAC,CAAD,CAAL,CAAU;AACxC,yBAAK,CAAL;AAAQA,6BAAK/F,EAAE0F,GAAF,CAAMM,GAAN,EAAL,CAAkBhG,EAAEyF,IAAF,CAAOO,GAAP,GAAc;AACxC;AACI,4BAAI,EAAE7T,IAAI6N,EAAEyF,IAAN,EAAYtT,IAAIA,EAAE5N,MAAF,GAAW,CAAX,IAAgB4N,EAAEA,EAAE5N,MAAF,GAAW,CAAb,CAAlC,MAAuDwhB,GAAG,CAAH,MAAU,CAAV,IAAeA,GAAG,CAAH,MAAU,CAAhF,CAAJ,EAAwF;AAAE/F,gCAAI,CAAJ,CAAO;AAAW;AAC5G,4BAAI+F,GAAG,CAAH,MAAU,CAAV,KAAgB,CAAC5T,CAAD,IAAO4T,GAAG,CAAH,IAAQ5T,EAAE,CAAF,CAAR,IAAgB4T,GAAG,CAAH,IAAQ5T,EAAE,CAAF,CAA/C,CAAJ,EAA2D;AAAE6N,8BAAEuF,KAAF,GAAUQ,GAAG,CAAH,CAAV,CAAiB;AAAQ;AACtF,4BAAIA,GAAG,CAAH,MAAU,CAAV,IAAe/F,EAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAA7B,EAAmC;AAAE6N,8BAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAAV,CAAgBA,IAAI4T,EAAJ,CAAQ;AAAQ;AACrE,4BAAI5T,KAAK6N,EAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAAnB,EAAyB;AAAE6N,8BAAEuF,KAAF,GAAUpT,EAAE,CAAF,CAAV,CAAgB6N,EAAE0F,GAAF,CAAMhf,IAAN,CAAWqf,EAAX,EAAgB;AAAQ;AACnE,4BAAI5T,EAAE,CAAF,CAAJ,EAAU6N,EAAE0F,GAAF,CAAMM,GAAN;AACVhG,0BAAEyF,IAAF,CAAOO,GAAP,GAAc;AAXtB;AAaAD,qBAAKT,KAAKvd,IAAL,CAAU2c,OAAV,EAAmB1E,CAAnB,CAAL;AACH,aAjBS,CAiBR,OAAOzL,CAAP,EAAU;AAAEwR,qBAAK,CAAC,CAAD,EAAIxR,CAAJ,CAAL,CAAaoR,IAAI,CAAJ;AAAQ,aAjBzB,SAiBkC;AAAEpT,oBAAIJ,IAAI,CAAR;AAAY;AAjB1D,SAkBA,IAAI4T,GAAG,CAAH,IAAQ,CAAZ,EAAe,MAAMA,GAAG,CAAH,CAAN,CAAa,OAAO,EAAE1jB,OAAO0jB,GAAG,CAAH,IAAQA,GAAG,CAAH,CAAR,GAAgB,KAAK,CAA9B,EAAiCpH,MAAM,IAAvC,EAAP;AAC/B;AACJ,CA1BD;AA2BAxc,OAAOC,cAAP,CAAsBH,OAAtB,EAA+B,YAA/B,EAA6C,EAAEI,OAAO,IAAT,EAA7C;AACA,IAAIa,iBAAiBZ,mBAAOA,CAAC,CAAR,CAArB;AACA,IAAIw7B,kBAAkBx7B,mBAAOA,CAAC,EAAR,CAAtB;AACA,IAAI26B,wBAAwB36B,mBAAOA,CAAC,EAAR,CAA5B;AACA,IAAI4N,yBAAyB5N,mBAAOA,CAAC,CAAR,CAA7B;AACA,IAAIy7B,kBAAkB,aAAe,UAAU36B,MAAV,EAAkB;AACnDb,cAAUw7B,eAAV,EAA2B36B,MAA3B;AACA,aAAS26B,eAAT,GAA2B;AACvB,YAAIh5B,QAAQ3B,OAAO2E,IAAP,CAAY,IAAZ,KAAqB,IAAjC;AACAhD,cAAMy4B,SAAN,GAAkB,EAAlB;AACAz4B,cAAM44B,WAAN,GAAoB,EAApB;AACA54B,cAAM0c,QAAN,GAAiB,EAAjB;AACA1c,cAAMi5B,YAAN,GAAqB,EAArB;AACAj5B,cAAMk5B,cAAN,GAAuB,EAAvB;AACAl5B,cAAMm5B,QAAN,GAAiB,KAAjB;AACAn5B,cAAMo5B,WAAN,GAAoB,iBAApB;AACA,YAAI,CAACp5B,MAAM0c,QAAX,EAAqB;AACjB1c,kBAAM0c,QAAN,GAAiB,EAAjB;AACH;AACD,eAAO1c,KAAP;AACH;AACDg5B,oBAAgB/6B,SAAhB,CAA0Bo7B,iBAA1B,GAA8C,UAAUC,aAAV,EAAyB;AACnE,aAAKC,mBAAL,GAA2BD,aAA3B;AACH,KAFD;AAGAN,oBAAgB/6B,SAAhB,CAA0Bu7B,kBAA1B,GAA+C,UAAUnuB,cAAV,EAA0BC,iBAA1B,EAA6C;AACxF,YAAI,CAACD,eAAeF,uBAAuBzI,sBAAtC,CAAL,EAAoE;AAChEw1B,kCAAsB9sB,mBAAtB,CAA0CC,cAA1C,EAA0DC,iBAA1D;AACH;AACD,aAAKD,cAAL,GAAsBA,cAAtB;AACA,aAAKC,iBAAL,GAAyBA,iBAAzB;AACA,aAAKmtB,SAAL,GAAiB,CAAC,KAAKA,SAAN,GAAkBptB,eAAeF,uBAAuBzI,sBAAtC,CAAlB,GAAkFimB,SAASA,SAAS,EAAT,EAAa,KAAK8P,SAAlB,CAAT,EAAuCptB,eAAeF,uBAAuBzI,sBAAtC,CAAvC,CAAnG;AACA,aAAKk2B,WAAL,GAAmB,CAAC,KAAKA,WAAN,GAAqBvtB,eAAeF,uBAAuBxI,uBAAtC,KAAkE,EAAvF,GAA6FgmB,SAASA,SAAS,EAAT,EAAa,KAAKiQ,WAAlB,CAAT,EAA0CvtB,eAAeF,uBAAuBxI,uBAAtC,KAAkE,EAA5G,CAAhH;AACH,KARD;AASAq2B,oBAAgB/6B,SAAhB,CAA0Bk6B,OAA1B,GAAoC,UAAUhe,QAAV,EAAoB2e,eAApB,EAAqCD,kBAArC,EAAyD;AACzF,YAAI,CAAC,KAAKz2B,OAAL,CAAa+X,QAAb,CAAL,EAA6B;AACzB,gBAAI,CAAC,KAAKye,WAAL,CAAiBze,QAAjB,CAAL,EAAiC;AAC7B,qBAAKnS,sBAAL,CAA4B,KAAK4wB,WAAjC,EAA8Cze,QAA9C,EAAwD;AACpD0e,wCAAoBA,kBADgC;AAEpDC,qCAAiBA;AAFmC,iBAAxD;AAIH;AACJ;AACJ,KATD;AAUA;;;;AAIAE,oBAAgB/6B,SAAhB,CAA0Bw7B,yBAA1B,GAAsD,UAAUtf,QAAV,EAAoB;AACtE,YAAIse,YAAY,KAAKiB,SAAL,EAAhB;AACA,YAAIC,aAAa,KAAKC,UAAL,EAAjB;AACA,YAAIx8B,OAAO2R,IAAP,CAAY4qB,UAAZ,EAAwB5xB,OAAxB,CAAgCoS,QAAhC,KAA6C,CAAjD,EAAoD;AAChD,gBAAI0f,SAASF,WAAWxf,QAAX,CAAb;AACA,mBAAO,OAAO0f,OAAOf,eAAd,KAAkC,UAAlC,IAAgDe,OAAOf,eAAP,CAAuB91B,IAAvB,CAA4B,IAA5B,EAAkCy1B,SAAlC,EAA6C,IAA7C,CAAvD;AACH;AACJ,KAPD;AAQAO,oBAAgB/6B,SAAhB,CAA0B67B,4BAA1B,GAAyD,UAAU3f,QAAV,EAAoB;AACzE,YAAI4f,UAAU,KAAKH,UAAL,EAAd;AACA,YAAIx8B,OAAO2R,IAAP,CAAYgrB,OAAZ,EAAqBhyB,OAArB,CAA6BoS,QAA7B,KAA0C,CAA9C,EAAiD;AAC7C,gBAAI0f,SAASE,QAAQ5f,QAAR,CAAb;AACA,mBAAO,OAAO0f,OAAOhB,kBAAd,KAAqC,UAArC,IAAmDgB,OAAOhB,kBAAP,CAA0B71B,IAA1B,CAA+B,IAA/B,EAAqC,KAAKg3B,QAAL,CAAc3Q,IAAd,CAAmB,IAAnB,CAArC,EAA+D,IAA/D,CAA1D;AACH;AACJ,KAND;AAOA2P,oBAAgB/6B,SAAhB,CAA0Bg8B,mBAA1B,GAAgD,UAAUC,eAAV,EAA2B/f,QAA3B,EAAqCggB,QAArC,EAA+C;AAC3F,YAAIC,WAAWh9B,OAAO2R,IAAP,CAAY,KAAK6qB,UAAL,EAAZ,CAAf;AACA,aAAK,IAAI/hB,KAAK,CAAT,EAAYwiB,aAAaD,QAA9B,EAAwCviB,KAAKwiB,WAAW76B,MAAxD,EAAgEqY,IAAhE,EAAsE;AAClE,gBAAI3I,SAASmrB,WAAWxiB,EAAX,CAAb;AACA,gBAAI3I,WAAWiL,QAAf,EAAyB;AACrB,oBAAI,KAAK/X,OAAL,CAAa,KAAK82B,cAAL,CAAoB/e,QAApB,CAAb,CAAJ,EAAiD;AAC7C,yBAAK+e,cAAL,CAAoB/e,QAApB,IAAgC,EAAhC;AACH;AACD,qBAAK+e,cAAL,CAAoB/e,QAApB,EAA8BggB,SAASntB,SAAvC,IAAoDktB,eAApD;AACA;AACH;AACJ;AACDE,mBAAW,IAAX;AACH,KAbD;AAcApB,oBAAgB/6B,SAAhB,CAA0Bq8B,eAA1B,GAA4C,UAAUngB,QAAV,EAAoBggB,QAApB,EAA8B;AACtE,YAAI,KAAKjB,cAAL,CAAoB/e,QAApB,CAAJ,EAAmC;AAC/B,iBAAK+e,cAAL,CAAoB/e,QAApB,EAA8BggB,SAASntB,SAAvC,IAAoD,IAApD;AACA,mBAAO,KAAKksB,cAAL,CAAoB/e,QAApB,EAA8BggB,SAASntB,SAAvC,CAAP;AACA,gBAAI5P,OAAO2R,IAAP,CAAY,KAAKmqB,cAAL,CAAoB/e,QAApB,CAAZ,EAA2C3a,MAA3C,IAAqD,CAAzD,EAA4D;AACxD,uBAAO,KAAK05B,cAAL,CAAoB/e,QAApB,CAAP;AACH;AACJ;AACJ,KARD;AASA6e,oBAAgB/6B,SAAhB,CAA0B+7B,QAA1B,GAAqC,UAAUO,SAAV,EAAqBlX,OAArB,EAA8B;AAC/D,eAAO3D,UAAU,IAAV,EAAgB,KAAK,CAArB,EAAwB,KAAK,CAA7B,EAAgC,YAAY;AAC/C,gBAAI1f,QAAQ,IAAZ;AACA,mBAAOsgB,YAAY,IAAZ,EAAkB,UAAUrI,EAAV,EAAc;AACnC,uBAAO,CAAC,CAAD,CAAG,UAAH,EAAe,IAAI+H,OAAJ,CAAY,UAAUD,OAAV,EAAmBE,MAAnB,EAA2B;AACrD,wBAAI;AACAjgB,8BAAMw6B,UAAN,CAAiBD,SAAjB,EAA4BlX,OAA5B;AACA,4BAAIrjB,MAAMm5B,QAAV,EAAoB;AAChBn5B,kCAAMy6B,SAAN,CAAgBC,OAAhB,CAAwB16B,MAAMo5B,WAA9B,EAA2C7nB,KAAKC,SAAL,CAAexR,MAAMy4B,SAArB,CAA3C;AACH;AACD1Y,gCAAQ;AACJ5P,qCAAS,SADL;AAEJzD,oCAAQ;AAFJ,yBAAR;AAIH,qBATD,CAUA,OAAO8C,CAAP,EAAU;AACNyQ,+BAAO;AACH9P,qCAASX,EAAEW,OADR;AAEHwqB,mCAAOnrB,EAAEmrB,KAFN;AAGHjuB,oCAAQ;AAHL,yBAAP;AAKH;AACJ,iBAlBiB,CAAf,CAAP;AAmBH,aApBM,CAAP;AAqBH,SAvBM,CAAP;AAwBH,KAzBD;AA0BAssB,oBAAgB/6B,SAAhB,CAA0By7B,SAA1B,GAAsC,YAAY;AAC9C,YAAIjB,YAAY,CAAC,KAAKA,SAAN,GAAkB,KAAKptB,cAAL,CAAoBF,uBAAuBzI,sBAA3C,CAAlB,GAAuFimB,SAASA,SAAS,EAAT,EAAa,KAAK8P,SAAlB,CAAT,EAAuC,KAAKptB,cAAL,CAAoBF,uBAAuBzI,sBAA3C,CAAvC,CAAvG;AACA,eAAO+1B,SAAP;AACH,KAHD;AAIAO,oBAAgB/6B,SAAhB,CAA0B27B,UAA1B,GAAuC,YAAY;AAC/C,YAAI5C,YAAY,CAAC,KAAK4B,WAAN,GAAqB,KAAKvtB,cAAL,CAAoBF,uBAAuBxI,uBAA3C,KAAuE,EAA5F,GAAkGgmB,SAASA,SAAS,EAAT,EAAa,KAAKiQ,WAAlB,CAAT,EAA0C,KAAKvtB,cAAL,CAAoBF,uBAAuBxI,uBAA3C,KAAuE,EAAjH,CAAlH;AACA,eAAOq0B,SAAP;AACH,KAHD;AAIAgC,oBAAgB/6B,SAAhB,CAA0Bu8B,UAA1B,GAAuC,UAAUD,SAAV,EAAqBlX,OAArB,EAA8B;AACjE,YAAIrjB,QAAQ,IAAZ;AACA,YAAIiY,EAAJ;AACA,YAAI;AACA,gBAAI,CAAC,KAAK7V,OAAL,CAAam4B,SAAb,CAAD,IAA4B,CAAC,KAAKn4B,OAAL,CAAam4B,UAAU5qB,IAAvB,CAAjC,EAA+D;AAC3D;AACA,oBAAI+M,WAAW,KAAKA,QAApB;AACA,oBAAI,CAACA,QAAL,EAAe;AACX,yBAAKA,QAAL,GAAgB,EAAhB;AACAqc,oCAAgBxc,yBAAhB,CAA0C,IAA1C;AACAG,+BAAW,KAAKA,QAAhB;AACH;AACD;AACA,oBAAIke,YAAY,CAAC,CAAC3iB,KAAKoL,OAAN,MAAmB,IAAnB,IAA2BpL,OAAO,KAAK,CAAvC,GAA2C,KAAK,CAAhD,GAAoDA,GAAGyE,QAAxD,KAAqE,EAArF;AACA,oBAAIme,cAAcz9B,OAAO2R,IAAP,CAAY2N,QAAZ,CAAlB;AACA,oBAAI+b,YAAY,KAAKiB,SAAL,EAAhB;AACA,oBAAIxoB,UAAU,SAAVA,OAAU,CAAU4pB,aAAV,EAAyB;AACnC,wBAAI,CAACF,SAAD,IAAcA,UAAUp7B,MAAV,IAAoB,CAAlC,IAAwCo7B,UAAUp7B,MAAV,GAAmB,CAAnB,IAAwBo7B,UAAU7yB,OAAV,CAAkB+yB,aAAlB,KAAoC,CAAxG,EAA4G;AACxG,4BAAIpD,UAAUqD,OAAOh5B,QAAP,CAAgB02B,SAAhB,EAA2BqC,aAA3B,CAAd;AACA,4BAAIE,eAAetD,YAAY11B,SAAZ,IAAyB,SAAS01B,OAAlC,GAA4CnmB,KAAK8S,KAAL,CAAW9S,KAAKC,SAAL,CAAekmB,OAAf,CAAX,CAA5C,GAAkFA,OAArG;AACA,4BAAIuD,eAAeF,OAAOh5B,QAAP,CAAgBg5B,OAAOre,QAAvB,EAAiCoe,aAAjC,CAAnB;AACA,4BAAII,WAAWD,aAAaD,YAAb,EAA2BT,SAA3B,EAAsC;AACjD9yB,oCAAQszB,OAAOtzB;AADkC,yBAAtC,CAAf;AAGA,4BAAI8J,KAAKC,SAAL,CAAekmB,OAAf,MAA4BnmB,KAAKC,SAAL,CAAe0pB,QAAf,CAAhC,EAA0D;AACtD;AACA,gCAAIC,gBAAgB,EAApB;AACA,iCAAK,IAAItjB,KAAK,CAAT,EAAYI,KAAK7a,OAAO2R,IAAP,CAAYmsB,QAAZ,CAAtB,EAA6CrjB,KAAKI,GAAGzY,MAArD,EAA6DqY,IAA7D,EAAmE;AAC/D,oCAAIujB,WAAWnjB,GAAGJ,EAAH,CAAf;AACA,iCAAC,UAAUwjB,cAAV,EAA0BC,gBAA1B,EAA4C;AACzCt7B,0CAAMs7B,gBAAN,CAAuBA,gBAAvB;AACAl+B,2CAAOC,cAAP,CAAsB89B,aAAtB,EAAqCE,cAArC,EAAqD;AACjD1yB,sDAAc,IADmC;AAEjDC,oDAAY,IAFqC;AAGjD+K,6CAAK,eAAY;AACb,mDAAO2nB,gBAAP;AACH,yCALgD;AAMjDjkB,6CAAK,eAAY;AACb;AACA3G,oDAAQC,KAAR,CAAc,iBAAd,EAAiC0qB,cAAjC,EAAiDC,gBAAjD;AACH;AATgD,qCAArD;AAWH,iCAbD,EAaGF,QAbH,EAaaF,SAASE,QAAT,CAbb;AAcH;AACDL,mCAAOx1B,QAAP,CAAgBkzB,SAAhB,EAA2BqC,aAA3B,EAA0CK,aAA1C,EAAyD,UAAU12B,GAAV,EAAe6D,WAAf,EAA4BhL,KAA5B,EAAmC;AACxF,oCAAI0C,MAAMkD,QAAN,CAAeuB,GAAf,KAAuB,CAACzE,MAAMoC,OAAN,CAAckG,WAAd,CAA5B,EAAwD;AACpD,wCAAI,CAACtI,MAAMoC,OAAN,CAAc9E,KAAd,CAAL,EAA2B;AACvB,+CAAOmH,IAAI6D,WAAJ,CAAP;AACH;AACDlL,2CAAOC,cAAP,CAAsBoH,GAAtB,EAA2B6D,WAA3B,EAAwC;AACpCK,sDAAc,IADsB;AAEpCC,oDAAY,IAFwB;AAGpC+K,6CAAK,eAAY;AACb,mDAAOrW,SAAS,EAAhB;AACH,yCALmC;AAMpC+Z,6CAAK,eAAY;AACb;AACA3G,oDAAQC,KAAR,CAAc,iBAAd;AACH;AATmC,qCAAxC;AAWH;AACJ,6BAjBD;AAkBAoqB,mCAAOtC,SAAP,GAAmBA,SAAnB;AACAsC,mCAAOQ,oBAAP;AACA,mCAAO,OAAP;AACH;AACJ;AACJ,iBAnDD;AAoDA,oBAAIR,SAAS,IAAb;AACA,qBAAK,IAAIljB,KAAK,CAAT,EAAY2jB,gBAAgBX,WAAjC,EAA8ChjB,KAAK2jB,cAAch8B,MAAjE,EAAyEqY,IAAzE,EAA+E;AAC3E,wBAAIijB,gBAAgBU,cAAc3jB,EAAd,CAApB;AACA,wBAAI4jB,UAAUvqB,QAAQ4pB,aAAR,CAAd;AACA,wBAAIW,YAAY,OAAhB,EACI;AACP;AACDZ,8BAAc,IAAd;AACH,aAxED,MAyEK;AACD,oBAAIN,aAAa,KAAKn4B,OAAL,CAAam4B,UAAU5qB,IAAvB,CAAjB,EAA+C;AAC3C,0BAAM,IAAIlK,KAAJ,CAAU,+CAAV,CAAN;AACH,iBAFD,MAGK;AACD,0BAAM,IAAIA,KAAJ,CAAU,gDAAV,CAAN;AACH;AACJ;AACJ,SAlFD,CAmFA,OAAO+J,CAAP,EAAU;AACNkB,oBAAQC,KAAR,CAAcnB,CAAd;AACH;AACJ,KAzFD;AA0FAwpB,oBAAgB/6B,SAAhB,CAA0Bq9B,gBAA1B,GAA6C,UAAUI,UAAV,EAAsB;AAC/D,YAAI,KAAKx4B,QAAL,CAAcw4B,UAAd,CAAJ,EAA+B;AAC3Bt+B,mBAAO2R,IAAP,CAAY2sB,UAAZ,EAAwBz5B,GAAxB,CAA4B,UAAUm5B,QAAV,EAAoB;AAC5C,iBAAC,UAAUO,QAAV,EAAoBC,UAApB,EAAgC;AAC7B;AACAx+B,2BAAOC,cAAP,CAAsBq+B,UAAtB,EAAkCC,QAAlC,EAA4C;AACxChzB,sCAAc,IAD0B;AAExCC,oCAAY,IAF4B;AAGxC+K,6BAAK,eAAY;AACb,mCAAOioB,UAAP;AACH,yBALuC;AAMxCvkB,6BAAK,eAAY;AACb;AACA3G,oCAAQC,KAAR,CAAc,uEAAuEyqB,QAAvE,GAAkF,GAAhG,EAAqGM,UAArG;AACH;AATuC,qBAA5C;AAWH,iBAbD,EAaGN,QAbH,EAaaM,WAAWN,QAAX,CAbb;AAcH,aAfD;AAgBH;AACJ,KAnBD;AAoBApC,oBAAgB/6B,SAAhB,CAA0Bs9B,oBAA1B,GAAiD,YAAY;AACzD,YAAIM,cAAc,KAAKjC,UAAL,EAAlB;AACA,YAAIkC,YAAY1+B,OAAO2R,IAAP,CAAY8sB,WAAZ,CAAhB;AACA,aAAK,IAAIhkB,KAAK,CAAT,EAAYkkB,cAAcD,SAA/B,EAA0CjkB,KAAKkkB,YAAYv8B,MAA3D,EAAmEqY,IAAnE,EAAyE;AACrE,gBAAImkB,OAAOD,YAAYlkB,EAAZ,CAAX;AACA,gBAAIokB,WAAWJ,YAAYG,IAAZ,CAAf;AACA,gBAAI,OAAOC,SAASnD,eAAhB,KAAoC,UAAxC,EAAoD;AAChD,oBAAIoD,WAAWD,SAASnD,eAAT,CAAyB91B,IAAzB,CAA8B,IAA9B,EAAoC,KAAK02B,SAAL,EAApC,EAAsD,IAAtD,CAAf;AACA,qBAAKyC,uBAAL,CAA6BD,QAA7B,EAAuCF,IAAvC;AACAE,2BAAW,IAAX;AACH;AACDD,uBAAW,IAAX;AACH;AACDH,oBAAY,IAAZ;AACAD,sBAAc,IAAd;AACH,KAfD;AAgBA7C,oBAAgB/6B,SAAhB,CAA0Bk+B,uBAA1B,GAAoD,UAAUD,QAAV,EAAoB/hB,QAApB,EAA8B;AAC9E,YAAIna,QAAQ,IAAZ;AACA5C,eAAO2R,IAAP,CAAY,KAAKmqB,cAAjB,EAAiCj3B,GAAjC,CAAqC,UAAUm6B,WAAV,EAAuB;AACxD,gBAAIA,gBAAgBjiB,QAApB,EAA8B;AAC1B;AACA,oBAAIkiB,gBAAgBr8B,MAAMk5B,cAAN,CAAqBkD,WAArB,CAApB;AACA,oBAAIE,UAAU,SAAVA,OAAU,CAAUtvB,SAAV,EAAqB;AAC/B,wBAAIuvB,eAAeF,cAAcrvB,SAAd,CAAnB;AACA,wBAAIwvB,aAAaD,aAAanuB,KAAb,IAAsB,EAAvC;AACA,wBAAIquB,aAAa,KAAjB;AACA,yBAAK,IAAIC,MAAT,IAAmBR,QAAnB,EAA6B;AACzB,4BAAIA,YAAY3qB,KAAKC,SAAL,CAAe0qB,SAASQ,MAAT,CAAf,MAAqCnrB,KAAKC,SAAL,CAAegrB,WAAWE,MAAX,CAAf,CAArD,EAAyF;AACrFD,yCAAa,IAAb;AACA,mCAAOD,WAAWE,MAAX,CAAP;AACA18B,kCAAMgI,sBAAN,CAA6Bw0B,UAA7B,EAAyCE,MAAzC,EAAiDR,SAASQ,MAAT,CAAjD;AACH;AACJ;AACD,wBAAID,UAAJ,EAAgB;AACZ,4BAAIz8B,MAAMu5B,mBAAN,IAA6Bv5B,MAAMu5B,mBAAN,CAA0B/5B,MAA1B,GAAmC,CAApE,EAAuE;AACnE;AACAQ,kCAAMu5B,mBAAN,CAA0Bt3B,GAA1B,CAA8B,UAAUqO,YAAV,EAAwB;AAClD,uCAAOisB,aAAajsB,YAAb,CAAP,KAAsC,UAAtC,IAAoDisB,aAAajsB,YAAb,EAA2BtN,IAA3B,CAAgCu5B,YAAhC,EAA8CC,UAA9C,CAApD;AACH,6BAFD;AAGH;AACJ;AACDD,mCAAe,IAAf;AACAC,iCAAa,IAAb;AACH,iBArBD;AAsBA;AACA,qBAAK,IAAIxvB,SAAT,IAAsBqvB,aAAtB,EAAqC;AACjCC,4BAAQtvB,SAAR;AACH;AACDqvB,gCAAgB,IAAhB;AACH;AACJ,SAhCD;AAiCH,KAnCD;AAoCArD,oBAAgBjoB,SAAhB,GAA4B,iBAA5B;AACA,WAAOioB,eAAP;AACH,CAtRoC,CAsRnC76B,eAAeqE,MAtRoB,CAArC;AAuRAtF,QAAQ87B,eAAR,GAA0BA,eAA1B,C;;;;;;;;;ACzVA,IAAG,CAAC,OAAO,SAAP,CAAiB,kBAAjB,CAAJ,EAA0C;AACtC;AACA,WAAO,SAAP,CAAiB,kBAAjB,IAAuC,UAAS,KAAT,EAAe,IAAf,EAAmB;AACtD,aAAK,KAAL,IAAc,IAAd;AACH,KAFD;AAGH;AACD;;;;;;;;;;AAUA,IAAG,CAAC,KAAK,SAAL,CAAe,MAAnB,EAA2B;AACvB;AACA,SAAK,SAAL,CAAe,MAAf,GAAwB,UAAS,SAAT,EAA0B;AAC9C,YAAM,OAAO,KAAK,WAAL,EAAb;AACA,YAAI,QAAQ,KAAK,QAAL,KAAkB,CAA9B;AACA,YAAI,OAAO,KAAK,OAAL,EAAX;AACA,YAAI,OAAO,KAAK,QAAL,EAAX;AACA,YAAI,UAAU,KAAK,UAAL,EAAd;AACA,YAAI,SAAS,KAAK,UAAL,EAAb;AACA,YAAM,eAAe,KAAK,eAAL,EAArB;AACA,gBAAQ,QAAQ,CAAR,GAAY,KAAZ,GAAoB,MAAM,KAAlC;AACA,eAAO,OAAO,CAAP,GAAW,IAAX,GAAkB,MAAM,IAA/B;AACA,eAAO,OAAO,CAAP,GAAW,IAAX,GAAkB,MAAM,IAA/B;AACA,kBAAU,UAAU,CAAV,GAAc,OAAd,GAAwB,MAAM,OAAxC;AACA,iBAAS,SAAS,CAAT,GAAa,MAAb,GAAsB,MAAM,MAArC;AACA,YAAM,SAAS,UAAU,OAAV,CAAkB,OAAlB,EAA2B,IAA3B,EACV,OADU,CACF,KADE,EACK,KADL,EAEV,OAFU,CAEF,KAFE,EAEK,IAFL,EAGV,OAHU,CAGF,KAHE,EAGK,IAHL,EAIV,OAJU,CAIF,IAJE,EAII,OAJJ,EAKV,OALU,CAKF,KALE,EAKK,YALL,EAMV,OANU,CAMF,IANE,EAMI,MANJ,EAOV,OAPU,CAOF,OAPE,EAOO,IAPP,EAQV,OARU,CAQF,KARE,EAQK,KARL,EASV,OATU,CASF,KATE,EASK,IATL,CAAf;AAUA,eAAO,MAAP;AACH,KAxBD;AAyBH,C;;;;;;;;;;;;;;;;AC3CD;;AACA;;AAEA;;AAGA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAHA;;AA6CA;AAAiC;AAuB7B,yBAAY,OAAZ,EAA2C;;AAA3C,sBACI,qBAAO,IADX;AAJQ,iCAAsB,EAAtB,CAImC,CAJT;AAG1B,mCAAwB,EAAxB,CACmC,CADP;AAGhC,YAAI,iBAAkB,QAAQ,SAAR,CAA0B,UAA1B,IAAwC,EAA9D;AACA,YAAM,uBAAuB,QAAQ,cAAR,IAA0B,EAAvD;AACA,YAAG,QAAK,OAAL,CAAa,cAAb,CAAH,EAAiC;AAC7B;AACA;AACA,gBAAM,qBAAmB,EAAzB;AACA,2BAAe,GAAf,CAAmB,UAAC,eAAD,EAAoB;AACnC,mCAAiB,gBAAgB,QAAjC,IAA6C,gBAAgB,SAA7D;AACH,aAFD;AAGA,6BAAiB,kBAAjB;AACH;AACD,gBAAK,aAAL,CAAmB,iBAAnB,CAAqC,QAAK,cAA1C;AACA,gBAAK,SAAL,GAAiB,QAAK,IAAL,KAAc,GAAd,GAAqB,IAAI,IAAJ,EAAD,CAAa,OAAb,GAAuB,QAAvB,EAArC,CAduC,CAciC;AACxE,gBAAK,OAAL,GAAe,OAAf;AACA,gBAAK,cAAL,GAAmB,sBAAO,cAAP,GAA0B,oBAA1B,CAAnB;AACA,gBAAK,QAAL,GAAgB,QAAQ,KAAxB;AACA,gBAAK,OAAL,CAAa,SAAb,CAAuB,QAAvB,GAAkC,QAAK,iBAAL,CAAuB,IAAvB,CAA4B,OAA5B,CAAlC;AACA,gBAAK,OAAL,CAAa,SAAb,CAAuB,OAAvB,GAAiC,QAAK,gBAAL,CAAsB,IAAtB,CAA2B,OAA3B,CAAjC,CAnBuC,CAmB4B;AACnE,gBAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,GAA6B,EAA7B;AACA,4BAAO,QAAK,OAAZ,MAAmB,IAAnB,IAAmB,aAAnB,GAAmB,MAAnB,GAAmB,GAAE,SAArB,MAA8B,IAA9B,IAA8B,aAA9B,GAA8B,MAA9B,GAA8B,GAAE,KAAhC,MAA0C,UAA1C,KAAoD,YAAI,QAAK,OAAT,MAAgB,IAAhB,IAAgB,aAAhB,GAAgB,MAAhB,GAAgB,GAAE,SAAlB,MAA2B,IAA3B,IAA2B,aAA3B,GAA2B,MAA3B,GAA2B,GAAE,KAAF,EAA/E;AACA,YAAG,OAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,OAA9B,KAA0C,UAA7C,EAAyD;AACrD,oBAAK,QAAL,CAAc,SAAd,CAAwB;AACpB,0BAAU,QAAK,OAAL,CAAa,SAAb,CAAuB,OADb;AAEpB,2BAAW,QAFS;AAGpB,sBAAM,QAAK,OAAL,CAAa,IAHC;AAIpB,2BAAW,QAAK,OAAL,CAAa;AAJJ,aAAxB;AAMH;AACD,gBAAK,QAAL,CAAc,YAAd,CAA2B,QAAQ,QAAnC,EAA6C,QAAK,OAAL,CAAa,IAA1D;;AACH;AACD;;;AAGA;AACI,YAAG,KAAK,MAAL,IAAe,KAAK,MAAL,CAAY,QAA9B,EAAwC;AACpC,iBAAI,IAAI,IAAE,KAAK,MAAL,CAAY,QAAZ,CAAqB,MAArB,GAA8B,CAAxC,EAA0C,KAAG,CAA7C,EAA+C,GAA/C,EAAoD;AAChD,oBAAG,KAAK,MAAL,CAAY,QAAZ,CAAqB,CAArB,EAAwB,MAAxB,KAAmC,QAAtC,EAAgD;AAC5C,2BAAO,KAAK,MAAL,CAAY,QAAZ,CAAqB,CAArB,EAAwB,GAA/B;AACH;AACJ;AACJ;AACJ,KARD;AASA;;;AAGA;AACI,YAAG,KAAK,MAAL,IAAe,KAAK,MAAL,CAAY,QAA9B,EAAwC;AACpC,iBAAI,IAAI,IAAE,CAAV,EAAY,IAAE,KAAK,MAAL,CAAY,QAAZ,CAAqB,MAAnC,EAA0C,GAA1C,EAA+C;AAC3C,oBAAG,KAAK,MAAL,CAAY,QAAZ,CAAqB,CAArB,EAAwB,MAAxB,KAAmC,QAAtC,EAAgD;AAC5C,2BAAO,KAAK,MAAL,CAAY,QAAZ,CAAqB,CAArB,EAAwB,GAA/B;AACH;AACJ;AACJ;AACJ,KARD;AASA;AAAA;AACI,aAAK,gBAAL,CAAsB,OAAtB,CAA8B;AAC1B,uBAAW,KAAK,OAAL,CAAa,gBADE;AAE1B,0BAAc,KAAK,OAAL,CAAa,SAFD;AAG1B,sBAAU,KAAK,OAAL,CAAa,SAAb,CAAuB,IAHP;AAI1B,mBAAO,KAAK,OAAL,CAAa,SAAb,CAAuB;AAJJ,SAA9B;AAMA,YAAG,KAAK,MAAR,EAAgB;AACZ,iBAAK,MAAL,CAAY,QAAZ,CAAqB,GAArB,CAAyB,UAAC,OAAD,EAAwB;;AAC7C,kCAAO,IAAP,gBAAO,MAAP,GAAO,MAAP,WAAS,GAAT,MAAY,IAAZ,IAAY,aAAZ,GAAY,MAAZ,GAAY,GAAE,aAAF,CAAgB,WAAhB,CAA4B,QAAQ,GAApC,CAAZ;AACH,aAFD;AAGH;AACD,YAAG,KAAK,gBAAR,EAA0B;AACtB,mBAAO,IAAP,CAAY,KAAK,gBAAjB,EAAmC,GAAnC,CAAuC,UAAC,SAAD,EAAkB;AACrD,oBAAM,UAAuB,QAAK,gBAAL,CAAsB,SAAtB,CAA7B;AACA,wBAAQ,OAAR;AACH,aAHD;AAIH;AACD,aAAK,eAAL,CAAqB,IAArB;AACA,aAAK,MAAL,GAAc,IAAd;AACA,aAAK,MAAL,GAAc,IAAd;AACH,KArBD;AAsBM,mCAAN,UAAa,MAAb,EAA2C;;;;AACvC,sCAAO,IAAI,OAAJ,CAAiB,UAAC,OAAD,EAAU,MAAV,EAAgB;AACpC,4BAAK,gBAAL,CAAsB,YAAtB,CAAmC;AAC/B,mCAAW,QAAK,OAAL,CAAa,gBADO;AAE/B,sCAAc,QAAK,OAAL,CAAa,SAFI;AAG/B,kCAAU,QAAK,OAAL,CAAa,SAAb,CAAuB,IAHF;AAI/B,+BAAO,QAAK,OAAL,CAAa,SAAb,CAAuB;AAJC,qBAAnC;AAMA,4BAAK,WAAL,CAAiB,WAAjB,CAA6B,QAAK,SAAlC,EAA6C,MAA7C,EAAqD,QAAK,YAAL,CAAkB,IAAlB,CAAuB,OAAvB,CAArD,EAAmF;AAC/E,4BAAG,OAAO,WAAV,EAAuB;AACnB,oCAAK,gBAAL,CAAsB,QAAtB,CAA+B;AAC3B,2CAAW,QAAK,OAAL,CAAa,gBADG;AAE3B,8CAAc,QAAK,OAAL,CAAa,SAFA;AAG3B,0CAAU,QAAK,OAAL,CAAa,SAAb,CAAuB,IAHN;AAI3B,uCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB;AAJH,6BAA/B;AAMA,mCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,SAA9B,KAA4C,UAA5C,IAA0D,QAAK,OAAL,CAAa,SAAb,CAAuB,SAAvB,EAA1D;AACH,yBARD,MAQO;AACH,oCAAK,gBAAL,CAAsB,WAAtB,CAAkC;AAC9B,2CAAW,QAAK,OAAL,CAAa,gBADM;AAE9B,8CAAc,QAAK,OAAL,CAAa,SAFG;AAG9B,0CAAU,QAAK,OAAL,CAAa,SAAb,CAAuB,IAHH;AAI9B,uCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB;AAJA,6BAAlC;AAMA,mCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,UAA9B,KAA6C,UAA7C,IAA2D,QAAK,OAAL,CAAa,SAAb,CAAuB,UAAvB,EAA3D;AACH;AACD,gCAAQ,EAAR;AACH,qBAnBD,EAmBG,KAnBH,CAmBS,UAAC,GAAD,EAAI;AACT;AACA,gCAAQ,KAAR,CAAc,IAAI,KAAJ,IAAa,GAA3B;AACA,4BAAG,OAAO,WAAV,EAAuB;AACnB,oCAAK,gBAAL,CAAsB,QAAtB,CAA+B;AAC3B,2CAAW,QAAK,OAAL,CAAa,gBADG;AAE3B,8CAAc,QAAK,OAAL,CAAa,SAFA;AAG3B,0CAAU,QAAK,OAAL,CAAa,SAAb,CAAuB,IAHN;AAI3B,uCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB;AAJH,6BAA/B;AAMA,mCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,SAA9B,KAA4C,UAA5C,IAA0D,QAAK,OAAL,CAAa,SAAb,CAAuB,SAAvB,EAA1D;AACH,yBARD,MAQO;AACH,oCAAK,gBAAL,CAAsB,WAAtB,CAAkC;AAC9B,2CAAW,QAAK,OAAL,CAAa,gBADM;AAE9B,8CAAc,QAAK,OAAL,CAAa,SAFG;AAG9B,0CAAU,QAAK,OAAL,CAAa,SAAb,CAAuB,IAHH;AAI9B,uCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB;AAJA,6BAAlC;AAMA,mCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,UAA9B,KAA6C,UAA7C,IAA2D,QAAK,OAAL,CAAa,SAAb,CAAuB,UAAvB,EAA3D;AACH;AACD,+BAAO,GAAP;AACH,qBAxCD;AAyCH,iBAhDM,CAAP;;;AAiDH,KAlDK;AAmDQ,0CAAd;;;;AACI,sCAAO,IAAI,OAAJ,CAAiB,UAAC,OAAD,EAAU,MAAV,EAAgB;AACpC,wBAAI,IAAJ;AACA,wBAAG,OAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,OAA9B,KAA0C,UAA7C,EAAyD;AACrD,+BAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,OAAvB,EAAP;AACH,qBAFD,MAEO,IAAG,OAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,QAAvB,CAAP,KAA4C,UAA/C,EAA2D;AAC9D,+BAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,QAAvB,GAAP;AACH,qBAFM,MAEA;AACH,+BAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,cAAvB,CAAP;AACH;AACD,wBAAG,QAAK,QAAL,CAAc,IAAd,CAAH,EAAwB;AACpB;AACA,gCAAK,OAAL,CAAa,MAAb,CAAoB,aAApB,CAAkC,WAAlC,EAA8C,OAA9C,EAAuD,IAAvD,EACK,IADL,CACU,UAAC,IAAD,EAAK;AACP,oCAAQ,KAAK,IAAb;AACH,yBAHL,EAGO,KAHP,CAGa,UAAC,GAAD,EAAI;AACT,mCAAO,GAAP;AACH,yBALL;AAMH,qBARD,MAQO;AACH,gCAAQ,IAAR;AACH;AACJ,iBApBM,CAAP;;;AAqBH,KAtBa;AAuBA,yCAAd,UAA2B,OAA3B,EAAyD;;;;AACrD,sCAAO,IAAI,OAAJ,CAAiB,UAAC,OAAD,EAAU,MAAV,EAAgB;AACpC,wBAAI;AACA,+BAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,OAA9B,KAA0C,UAA1C,YAA+D,QAAK,OAAL,CAAa,SAAb,CAAuB,OAAvB,EAA/D;AACA,gCAAK,aAAL,GAAqB,IAArB,CAA0B,UAAC,IAAD,EAAK;AAC3B,oCAAK,MAAL,GAAc,QAAK,MAAnB;AACA,oCAAK,SAAL,GAAiB,IAAjB;AACA,gCAAG,QAAQ,KAAX,EAAkB;AACd,wCAAK,MAAL,CAAY,QAAK,OAAL,CAAa,SAAb,CAAuB,KAAnC,EAA0C,QAAQ,KAAlD;AACH;AACD,gCAAG,QAAQ,IAAX,EAAiB;AACb,wCAAK,MAAL,CAAY,QAAK,OAAL,CAAa,SAAzB,EAAoC,QAAQ,IAA5C;AACH;AACD;AACA,mCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,oBAA9B,KAAuD,UAAvD,IAAqE,QAAK,OAAL,CAAa,SAAb,CAAuB,oBAAvB,CAA4C,QAAK,SAAjD,CAArE;AACA,gCAAM,YAAY,QAAK,aAAL,CAAmB,MAAnB,CAA0B,QAAK,SAA/B,EAA0C,QAAK,MAA/C,EAAuD,QAAK,OAAL,CAAa,SAApE,EAA+E;AAC7F,0CAAU,QAAK,OAAL,CAAa,QADsE;AAE7F,0CAAU,QAAK,OAAL,CAAa,IAFsE;AAG7F,2CAAW,QAAK;AAH6E,6BAA/E,CAAlB;AAKA;AACA,mCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,mBAA9B,KAAsD,UAAtD,IAAoE,QAAK,OAAL,CAAa,SAAb,CAAuB,mBAAvB,CAA2C,SAA3C,CAApE;AACA,mCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,aAA9B,KAAgD,UAAhD,IAA8D,QAAK,OAAL,CAAa,SAAb,CAAuB,aAAvB,EAA9D;AACA;AACA,gCAAM,eAAqC,EAA3C;AACA,gCAAI,gBAAgB,KAApB;AACA,sCAAU,QAAV,CAAmB,GAAnB,CAAuB,UAAC,GAAD,EAAsB,KAAtB,EAAkC;AACrD,oCAAG,IAAI,MAAJ,KAAe,QAAf,IAA2B,IAAI,MAAJ,KAAe,QAA1C,IAAsD,IAAI,MAAJ,KAAe,MAArE,IAA+E,IAAI,MAAJ,KAAe,YAAjG,EAA+G;AAC3G,oDAAgB,IAAhB;AACH;AACD,6CAAa,IAAb,CAAkB;AACd,wCAAI,mBAAmB,KADT;AAEd,4CAAQ;AACJ,gDAAQ,QAAK,OAAL,CAAa,SADjB;AAEJ,8CAAK,GAFD;AAGJ,oDAAY;AAHR;AAFM,iCAAlB;AAQH,6BAZD;AAaA,gCAAG,CAAC,aAAJ,EAAmB;AACf,gDAAgB,UAAU,cAAV,IAA4B,UAAU,cAAV,CAAyB,MAAzB,GAAkC,CAA9E;AACH;AACD,oCAAK,eAAL,GAtC2B,CAsCH;AACxB,oCAAK,oBAAL,CAA0B,UAAU,cAApC,EAvC2B,CAuC0B;AACrD,4DAAc,YAAd,EAA4B,UAAC,MAAD,EAAS,MAAT,EAAe;AACvC,oCAAI,UAAc,OAAO,UAAP,GAAoB,OAAO,UAAP,CAAkB,OAAtC,GAAgD,IAAlE;AACA,oCAAG,OAAO,EAAP,KAAc,iBAAjB,EAAoC;AAChC,8CAAe,QAAK,OAAL,CAAa,OAA5B;AACH;AACD,uCAAO,QAAK,gBAAL,CAAsB;AACzB,+CAAW,OAAO,MADO;AAEzB,mDAAa,aAFY;AAGzB,6CAAO,OAHkB;AAIzB,0CAAM,OAAO,IAJY;AAKzB,gDAAY,OAAO;AALM,iCAAtB,CAAP;AAOH,6BAZD,EAYG;AACC,gDAAgB;AADjB,6BAZH,EAcG,IAdH,CAcQ;AACJ,wCAAQ,EAAR;AACH,6BAhBD,EAgBG,KAhBH,CAgBS,UAAC,GAAD,EAAI;AACT,uCAAO;AACH,6CAAS,IAAI,OADV;AAEH,2CAAO,QAAK,QAAL,CAAc,IAAI,SAAlB,IAA+B,IAAI,SAAJ,CAAc,KAA7C,GAAqD,IAAI,KAF7D;AAGH,gDAAY,IAAI;AAHb,iCAAP;AAKH,6BAtBD;AAuBA,oCAAK,MAAL,GAAc,SAAd,CA/D2B,CA+DF;AACzB,oCAAK,OAAL,CAAa,SAAb,CAAuB,IAAvB,GAA8B,SAA9B;AACH,yBAjED,EAiEG,KAjEH,CAiES,UAAC,GAAD,EAAI;AACT,mCAAO,GAAP;AACH,yBAnED;AAoEH,qBAtED,CAsEE,OAAM,CAAN,EAAS;AACP;AACA,gCAAQ,KAAR,CAAc,CAAd;AACA,+BAAO;AACH,qCAAS,EAAE,OADR;AAEH,wCAAY;AAFT,yBAAP;AAIH;AACJ,iBA/EM,CAAP;;;AAgFH,KAjFa;AAkFd;;;AAGQ,4CAAR,UAAwB,WAAxB,EAA6C;AACzC,aAAK,QAAL,CAAc,cAAd,CAA6B,KAAK,OAAL,CAAa,QAA1C,EAAoD,WAApD;AACH,KAFO;AAGM,8CAAd,UAAgC,KAAhC,EAA2C,KAA3C,EAA0D;;;;AACtD,sCAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAU,MAAV,EAAgB;AAC/B,wBAAG,QAAK,QAAL,CAAc,KAAd,CAAH,EAAyB;AACrB,4BAAM,YAAY,QAAK,OAAL,CAAa,SAA/B;AACA,4BAAM,YAAY,OAAO,IAAP,CAAY,KAAZ,CAAlB;AACA,4BAAI,cAAc,KAAlB;AACA,4BAAG,UAAU,KAAb,EAAoB;AAChB,iCAAkB,mCAAlB,EAAkB,uBAAlB,EAAkB,IAAlB,EAA6B;AAAzB,oCAAM,OAAI,eAAV;AACA,oCAAG,QAAK,QAAL,CAAc,MAAM,IAAN,CAAd,KAA8B,QAAK,QAAL,CAAc,UAAU,KAAV,CAAgB,IAAhB,CAAd,CAAjC,EAAuE;AACnE,wCAAG,CAAC,QAAK,OAAL,CAAa,MAAM,IAAN,CAAb,EAA0B,UAAU,KAAV,CAAgB,IAAhB,CAA1B,CAAJ,EAAsD;AAClD,sDAAc,IAAd;AACA;AACH;AACJ,iCALD,MAKO;AACH,wCAAG,MAAM,IAAN,MAAgB,UAAU,KAAV,CAAgB,IAAhB,CAAnB,EAA0C;AACtC,sDAAc,IAAd;AACA;AACH;AACJ;AACJ;AACJ,yBAdD,MAcO;AACH,0CAAc,IAAd;AACH;AACD,4BAAG,WAAH,EAAgB;AACZ,oCAAK,MAAL,CAAY;AACR,6CAAa,KADL;AAER,uCAAK;AAFG,6BAAZ,EAGG,IAHH,CAGQ;AACJ,wCAAQ,EAAR;AACH,6BALD,EAKG,KALH,CAKS,UAAC,GAAD,EAAI;AACT,uCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,QAAvB,CAAP,KAA4C,UAA5C,IAA0D,QAAK,OAAL,CAAa,SAAb,CAAuB,QAAvB,EAAiC,GAAjC,CAA1D;AACA,uCAAO,GAAP;AACH,6BARD;AASH,yBAVD,MAUO;AACH,oCAAQ,EAAR;AACH;AACJ,qBAlCD,MAkCO;AACH,8BAAM,IAAI,KAAJ,CAAU,4DAAV,CAAN;AACH;AACJ,iBAtCM,CAAP;;;AAuCH,KAxCa;AAyCd;;;;;;AAMc,6CAAd,UAA+B,IAA/B,EAAuC;;;;AACnC,sCAAO,IAAI,OAAJ,CAAiB,UAAC,OAAD,EAAU,MAAV,EAAgB;AACpC;AACA,4BAAQ,IAAR,CAAa,8DAAb;AACA,wBAAG,QAAK,QAAL,CAAc,IAAd,CAAH,EAAwB;AACpB,4BAAM,YAAY,QAAK,OAAL,CAAa,SAA/B;AACA,4BAAM,WAAW,OAAO,IAAP,CAAY,IAAZ,CAAjB;AACA,4BAAI,cAAc,KAAlB;AACA,6BAAkB,iCAAlB,EAAkB,sBAAlB,EAAkB,IAAlB,EAA4B;AAAxB,gCAAM,OAAI,cAAV;AACA,gCAAG,QAAK,QAAL,CAAc,KAAK,IAAL,CAAd,KAA6B,QAAK,QAAL,CAAc,UAAU,IAAV,CAAd,CAAhC,EAAgE;AAC5D,oCAAG,CAAC,QAAK,OAAL,CAAa,KAAK,IAAL,CAAb,EAAyB,UAAU,IAAV,CAAzB,CAAJ,EAA+C;AAC3C,kDAAc,IAAd;AACA;AACH;AACJ,6BALD,MAKO;AACH,oCAAG,KAAK,IAAL,MAAe,UAAU,IAAV,CAAlB,EAAmC;AAC/B,kDAAc,IAAd;AACA;AACH;AACJ;AACJ;AACD,4BAAG,WAAH,EAAgB;AACZ,oCAAK,MAAL,CAAY,QAAK,OAAL,CAAa,SAAzB,EAAoC,IAApC;AACA,oCAAK,MAAL,CAAY;AACR,sCAAI,IADI;AAER,6CAAa;AAFL,6BAAZ,EAGG,IAHH,CAGQ;AACJ,wCAAQ,EAAR;AACH,6BALD,EAKG,KALH,CAKS,UAAC,GAAD,EAAI;AACT,uCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,QAAvB,CAAP,KAA4C,UAA5C,IAA0D,QAAK,OAAL,CAAa,SAAb,CAAuB,QAAvB,EAAiC,GAAjC,CAA1D;AACA,uCAAO,GAAP;AACH,6BARD;AASH,yBAXD,MAWO;AACH,oCAAQ,EAAR;AACH;AACJ,qBA/BD,MA+BO;AACH,8BAAM,IAAI,KAAJ,CAAU,4DAAV,CAAN;AACH;AACJ,iBArCM,CAAP;;;AAsCH,KAvCa;AAwCN,6CAAR,UAAyB,OAAzB,EAA2D;AAA3D;AACI,YAAM,YAAwB,QAAQ,SAAtC;AAAA,YACI,OAAwB,QAAQ,IADpC;AAAA,YAEI,aAA8B,QAAQ,UAF1C;AAAA,YAGI,UAAmC,QAAQ,OAH/C;AAIA,eAAO,IAAI,OAAJ,CAAiB,UAAC,OAAD,EAAU,MAAV,EAAgB;AACpC,gBAAI;AACA,oBAAM,cAAY,4BAAlB;AACA,oBAAM,aAAa,YAAU,UAAV,IAAwB,EAA3C;AACA,qBAAK,MAAL,GAAc,KAAd;AACA,oBAAG,QAAK,OAAL,CAAa,KAAK,OAAlB,CAAH,EAA+B;AAC3B,2BAAO;AACH,iCAAS,4DADN;AAEH,oCAAY;AAFT,qBAAP;AAIH,iBALD,MAKO;AACH,wBAAM,gBAAgB,QAAK,cAAL,CAAoB,KAAK,OAAzB,KAAqC,WAAW,KAAK,OAAhB,CAA3D;AACA,wBAAG,OAAO,aAAP,KAAyB,UAA5B,EAAwC;AACpC,gCAAK,mBAAL,CAAyB;AACrB,2CAAa,aADQ;AAErB,uCAAS,SAFY;AAGrB,2CAAe,QAAQ,aAHF;AAIrB,kCAAI,IAJiB;AAKrB,wCAAU;AALW,yBAAzB,EAMG,IANH,CAMQ;AACJ,oCAAQ;AACJ,yCAAS,QAAK,uBAAL,CAA6B,IAA7B;AADL,6BAAR;AAGH,yBAVD,EAUG,KAVH,CAUS,UAAC,GAAD,EAAI;AACT,mCAAO;AACH,yCAAS,IAAI,OADV;AAEH,uCAAO,QAAK,QAAL,CAAc,IAAI,SAAlB,IAA+B,IAAI,SAAJ,CAAc,KAA7C,GAAqD,IAAI,KAF7D;AAGH,4CAAY,IAAI;AAHb,6BAAP;AAKH,yBAhBD;AAiBH,qBAlBD,MAkBO;AACH;AACA;AACA,4BAAI,kBAAgB,KAAK,cAAL,IAAuB,KAAK,cAAL,CAAoB,MAApB,GAA6B,CAAxE;AACA,4BAAG,KAAK,MAAL,KAAgB,QAAnB,EAA6B;AACzB;AACA,oCAAK,gBAAL,CAAsB,SAAtB,EAAgC,IAAhC,EAAqC,UAArC,EAAiD,OAAjD;AACA,8CAAgB,IAAhB;AACH,yBAJD,MAIO,IAAG,KAAK,MAAL,KAAgB,QAAnB,EAA6B;AAChC,gCAAG,QAAK,KAAL,CAAW,KAAK,GAAhB,CAAH,EAAyB;AACrB,wCAAK,cAAL,CAAoB,MAApB,CAA2B,KAAK,GAAhC,EAAqC,IAArC;AACH,6BAFD,MAEO;AACH,oCAAG,KAAK,OAAL,KAAiB,MAApB,EAA4B;AACtB,yCAAK,GAAL,CAA0B,WAA1B,GAAwC,KAAK,SAA7C;AACL,iCAFD,MAEO;AACH;AACA,qCAAC,KAAK,GAAN,IAAa,QAAK,gBAAL,CAAsB,SAAtB,EAAiC,IAAjC,EAAuC,UAAvC,EAAmD,OAAnD,CAAb;AACH;AACJ;AACJ,yBAXM,MAWA,IAAG,KAAK,MAAL,KAAgB,MAAnB,EAA2B;AAC9B,oCAAK,QAAL,CAAc,SAAd,EAAyB,IAAzB,EAA+B,UAA/B;AACA,8CAAgB,IAAhB;AACH,yBAHM,MAGA,IAAG,KAAK,MAAL,KAAgB,YAAnB,EAAiC;AACpC,oCAAK,QAAL,CAAc,SAAd,EAAyB,IAAzB,EAA+B,UAA/B;AACA,8CAAgB,IAAhB;AACA,oCAAK,cAAL,CAAoB,MAApB,CAA2B,KAAK,GAAhC,EAAoD,IAApD;AACH,yBAJM,MAIA,IAAG,KAAK,MAAL,KAAgB,QAAnB,EAA6B;AAChC,gCAAG,CAAC,KAAK,GAAT,EAAc;AACV,wCAAK,gBAAL,CAAsB,SAAtB,EAAiC,IAAjC,EAAuC,UAAvC,EAAmD,OAAnD;AACH;AACJ,yBAJM,MAIA,IAAG,KAAK,MAAL,KAAgB,QAAnB,EAA6B;AAChC,8CAAgB,IAAhB;AACH;AACD,4BAAG,CAAC,eAAJ,EAAmB;AACf,8CAAgB,QAAQ,aAAxB;AACH;AACD,4BAAG,KAAK,MAAL,KAAgB,QAAnB,EAA6B;AACxB,iCAAK,GAAL,CAAiB,IAAjB,GAAwB,KAAK,IAA7B;AACA,iCAAK,GAAL,CAAiB,SAAjB,GAA6B,QAAK,OAAL,CAAa,QAA1C;AACD,gCAAG,CAAC,QAAK,OAAL,CAAa,KAAK,KAAL,CAAW,EAAxB,CAAJ,EAAiC;AAC7B,wCAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,KAAK,KAAL,CAAW,EAAtC,IAA4C,KAAK,GAAjD;AACH;AACD,oCAAK,oBAAL,CAA0B,IAA1B;AACA,gCAAG,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,IAAb,KAAsB,MAAzC,EAAiD;AAC5C,qCAAK,GAAL,CAAyB,SAAzB,GAAqC,KAAK,SAA1C;AACD,wCAAQ;AACJ,6CAAS,KAAK;AADV,iCAAR;AAGH,6BALD,MAKO;AACH,oCAAG,KAAK,QAAL,IAAiB,KAAK,QAAL,CAAc,MAAd,GAAuB,CAA3C,EAA8C;AAC1C;AACA,wCAAM,iBAAqC,EAA3C;AACA,yCAAK,QAAL,CAAc,GAAd,CAAkB,UAAC,QAAD,EAA2B,KAA3B,EAAuC;AACrD,uDAAa,IAAb,CAAkB;AACd,gDAAI,mBAAmB,KADT;AAEd,oDAAQ;AACJ,wDAAQ,KAAK,GADT;AAEJ,sDAAM,QAFF;AAGJ,4DAAY;AAHR;AAFM,yCAAlB;AAQH,qCATD;AAUA,oEAAc,cAAd,EAA4B,UAAC,EAAD,EAAK,MAAL,EAAW;AACnC,+CAAO,QAAK,gBAAL,CAAsB;AACzB,uDAAW,OAAO,MADO;AAEzB,2DAAe,eAFU;AAGzB,kDAAM,OAAO,IAHY;AAIzB,wDAAY,OAAO;AAJM,yCAAtB,CAAP;AAMH,qCAPD,EAOG;AACC,wDAAgB;AADjB,qCAPH,EASG,IATH,CASQ;AACJ,gDAAQ;AACJ,2DAAe,eADX;AAEJ,qDAAS,KAAK;AAFV,yCAAR;AAIH,qCAdD,EAcG,KAdH,CAcS,UAAC,GAAD,EAAI;AACT,+CAAO;AACH,qDAAS,IAAI,OADV;AAEH,mDAAO,QAAK,QAAL,CAAc,IAAI,SAAlB,IAA+B,IAAI,SAAJ,CAAc,KAA7C,GAAqD,IAAI,KAF7D;AAGH,wDAAY,IAAI;AAHb,yCAAP;AAKH,qCApBD;AAqBH,iCAlCD,MAkCO;AACH,4CAAQ;AACJ,uDAAe,eADX;AAEJ,iDAAS,KAAK;AAFV,qCAAR;AAIH;AACJ;AACJ,yBAtDD,MAsDO;AACH;AACA,gCAAG,KAAK,MAAL,KAAgB,QAAnB,EAA6B;AACzB;AACA;AACA;AACA,oCAAG,KAAK,GAAR,EAAa;AACT,yCAAK,GAAL,CAAS,aAAT,IAA0B,KAAK,GAAL,CAAS,aAAT,CAAuB,WAAvB,CAAmC,KAAK,GAAxC,CAA1B;AACH;AACD,wCAAK,gBAAL,CAAsB,IAAtB;AACH;AACD,gCAAG,CAAC,QAAK,OAAL,CAAa,KAAK,KAAL,CAAW,EAAxB,CAAJ,EAAiC;AAC7B,uCAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,KAAK,KAAL,CAAW,EAAtC,CAAP,CAD6B,CACqB;AACrD;AACD,oCAAQ;AACJ,+CAAe,eADX;AAEJ,yCAAS,KAAK;AAFV,6BAAR;AAIH;AACJ;AACD;AACA,4BAAK,oBAAL,CAA0B,KAAK,cAA/B;AACH;AACJ,aA9ID,CA8IE,OAAO,CAAP,EAAU;AACR,uBAAO;AACH,+BAAW,CADR;AAEH,6BAAS,EAAE,OAFR;AAGH,gCAAY;AAHT,iBAAP;AAKH;AACJ,SAtJM,CAAP;AAuJH,KA5JO;AA6JA,gDAAR,UAA4B,OAA5B,EAA6D;AAA7D;AACI,YAAM,gBAAqB,QAAQ,aAAnC;AAAA,YACI,YAAwB,QAAQ,SADpC;AAAA,YAEI,OAAwB,QAAQ,IAFpC;AAAA,YAGI,aAA8B,QAAQ,UAH1C;AAIA,eAAO,IAAI,OAAJ,CAAiB,UAAC,OAAD,EAAU,MAAV,EAAgB;AACpC,gBAAM,UAAU,QAAK,UAAL,CAAgB,IAAhB,EAAsB,UAAtB,CAAhB;AACA,gBAAM,gBAAgB,QAAK,gBAA3B;AACA,gBAAM,iBAAiB,SAAjB,cAAiB,CAAC,OAAD,EAAsB,KAAtB,EAA8C,eAA9C,EAAyE;AAC5F,oBAAM,QAAQ,EAAd;AACA,wBAAQ,OAAR,CAAgB,OAAhB,GAA0B,eAA1B;AACA,wBAAK,MAAL,CAAY,KAAZ,EAAmB,QAAQ,OAAR,CAAgB,SAAhB,CAA0B,KAA7C,EAAoD,IAApD;AACA,wBAAK,MAAL,CAAY,KAAZ,EAAmB,MAAM,WAAzB,EAAsC,IAAtC;AACA,8BAAc,YAAd,CAA2B;AACvB,+BAAW,aADY;AAEvB,kCAAc,QAAQ,OAAR,CAAgB,SAFP;AAGvB,8BAAU,IAHa;AAIvB,2BAAK;AAJkB,iBAA3B;AAMA;AACA,uBAAO,QAAQ,OAAR,CAAgB,SAAhB,CAA0B,iBAAjC,KAAuD,UAAvD,IAAqE,QAAQ,OAAR,CAAgB,SAAhB,CAA0B,iBAA1B,CAA4C,KAA5C,EAAmD,QAAQ,OAAR,CAAgB,SAAhB,CAA0B,KAA7E,CAArE;AACH,aAbD;AAcA,iBAAK,QAAL,GAAgB;AACZ,6BAAa;AADD,aAAhB;AAGA,gBAAG,KAAK,MAAL,KAAgB,QAAnB,EAA6B;AACzB,oBAAM,OAAa,cAAe,IAAlC;AACA,oBAAM,QAAQ,KAAK,KAAnB;AACA,8BAAc,UAAd,CAAyB;AACrB,+BAAW,aADU;AAErB,kCAAc,IAFO;AAGrB,8BAAU,IAHW;AAIrB,2BAAK;AAJgB,iBAAzB;AAMA;AACA,oBAAM,YAAY,eAAe,QAAK,IAAL,EAAjC;AACA,oBAAM,cAAY,QAAK,OAAL,CAAa,SAA/B;AACA,oBAAI,YAAS,MAAb;AACA,oBAAG,SAAS,qCAAZ,EAAwC;AACpC;AACA,gCAAY,IAAI,aAAJ,CAAkB,KAAlB,CAAZ;AACH,iBAHD,MAGO;AACH,wBAAM,cAAY;AACd,iCAAS,EADK;AAEd,qCAAa,EAFC;AAGd,sCAAc,EAHA;AAId,mCAAW,EAJG;AAKd,kCAAU;AALI,qBAAlB;AAOA;AACA,gCAAY;AACR,6BAAK,EADG;AAER,+BAAK,KAFG;AAGR,kCAAU,KAAK,OAHP;AAIR;AACA,mCAAW,aALH;AAMR;AACA,gCAAQ;AACJ,iDAAU,WAAV,IAAuB;AACnB,4CAAY,aADO;AAEnB,4CAAY,SAFO;AAGnB,uCAAO,IAHY;AAInB,8CAAc,CAJK;AAKnB,2CAAS,WALU;AAMnB,kDAAkB,CANC;AAOnB,mDAAmB,CAPA;AAQnB,gDAAgB,CARG;AASnB,+CAAe;AATI,6BAAvB;AAWA,iDAAU,WAAV,IAAyB,WAAzB;AACA,mCAAO,KAAK,WAAL,EAAkB,IAAlB,CAAuB,IAAvB,EAA6B,KAAK,KAAlC,CAAP;AACH,yBArBO;AAsBR,sEAAkB,QAAlB,EAA+B;AAC1B,iCAAa,KAAb,GAAqB,QAArB;AACD,0CAAc,gBAAd,CAA+B;AAC3B,2CAAW,aADgB;AAE3B,8CAAc,IAFa;AAG3B,0CAAU,IAHiB;AAI3B,uCAAO;AAJoB,6BAA/B;AAMH;AA9BO,qBAAZ;AAgCH;AACD,oBAAM,YAAU,IAAI,WAAJ,CAAgB;AAC5B,8BAAU,KAAK,QADa;AAE5B,+BAAS,SAFmB;AAG5B,sCAAkB,aAHU;AAI5B,+BAAS,SAJmB;AAK5B,2BAAO,QAAK,QALgB;AAM5B,+BAAW,QAAK,OAAL,CAAa,SANI;AAO5B,8BAAU,QAAK,OAAL,CAAa,QAAK,OAAL,CAAa,QAA1B,IAAsC,SAAtC,GAAkD,QAAK,OAAL,CAAa,QAAb,GAAwB,GAAxB,GAA8B,SAP9D;AAQ5B,0BAAM,KAAK,IARiB;AAS5B,6BAAS,QAAK,uBAAL,CAA6B,OAA7B,CATmB;AAU5B,mCAAe,QAAK,OAAL,CAAa,aAVA;AAW5B,4BAAQ,QAAK,OAAL,CAAa;AAXO,iBAAhB,CAAhB;AAaA,qBAAK,SAAL,GAAiB,SAAjB;AACA;AACA,wBAAK,gBAAL,CAAsB,SAAtB,IAAmC,SAAnC;AACA,8BAAc,IAAd,CAAmB;AACf,+BAAW,aADI;AAEf,kCAAc,SAFC;AAGf,8BAAU,IAHK;AAIf,2BAAK;AAJU,iBAAnB;AAMA,oBAAG,CAAC,QAAK,OAAL,CAAa,MAAM,EAAnB,CAAJ,EAA4B;AACxB,4BAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,MAAM,EAAjC,IAAuC,SAAvC;AACH;AACD;AACA,0BAAQ,MAAR,CAAe;AACX,iCAAa;AADF,iBAAf,EAEG,IAFH,CAEQ;AACJ,4BAAQ,EAAR;AACH,iBAJD,EAIG,KAJH,CAIS,UAAC,GAAD,EAAI;AACT,2BAAO,GAAP;AACH,iBAND;AAOA,oBAAG,CAAC,QAAK,OAAL,CAAa,KAAK,KAAL,CAAW,EAAxB,CAAJ,EAAiC;AAC7B,4BAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,KAAK,KAAL,CAAW,EAAtC,IAA4C,SAA5C;AACH;AACJ,aA9FD,MA8FO,IAAG,KAAK,MAAL,KAAgB,QAAnB,EAA6B;AAChC,oBAAM,YAAsB,QAAK,gBAAL,CAAsB,KAAK,SAA3B,CAA5B;AACA,oBAAG,SAAH,EAAY;AACR,wBAAM,aAAW,UAAU,QAAQ,GAAlB,GAA+B,IAAhD;AACA,wBAAG,QAAK,sBAAL,CAA4B,IAA5B,CAAH,EAAsC;AAClC;AACA;AACA,kCAAQ,OAAR,CAAgB,QAAhB,GAA2B,KAAK,QAAhC;AACA,kCAAQ,MAAR,CAAe;AACX,yCAAa;AADF,yBAAf,EAEG,OAFH,CAEW;AACP,2CAAe,SAAf,EAAwB,IAAxB,EAA8B,UAA9B;AACA,oCAAQ,EAAR;AACH,yBALD;AAMH,qBAVD,MAUO;AACH,uCAAe,SAAf,EAAwB,IAAxB,EAA8B,UAA9B;AACA,gCAAQ,EAAR;AACH;AACD;AACH,iBAjBD,MAiBO;AACH,4BAAQ,EAAR;AACH;AACJ,aAtBM,MAsBA,IAAG,KAAK,MAAL,KAAgB,MAAnB,EAA2B;AAC9B,wBAAK,qBAAL,CAA2B,SAA3B,EAAsC,IAAtC,EAA4C,UAA5C;AACA,oBAAM,YAAsB,QAAK,gBAAL,CAAsB,KAAK,SAA3B,CAA5B;AACA,oBAAG,QAAK,sBAAL,CAA4B,IAA5B,CAAH,EAAsC;AAClC,wBAAM,aAAW,UAAU,QAAQ,GAAlB,GAA+B,IAAhD;AACA;AACA;AACA,8BAAQ,OAAR,CAAgB,QAAhB,GAA2B,KAAK,QAAhC;AACA,8BAAQ,MAAR,CAAe;AACX,qCAAa;AADF,qBAAf,EAEG,OAFH,CAEW;AACP,uCAAe,SAAf,EAAwB,IAAxB,EAA8B,UAA9B;AACA,gCAAQ,EAAR;AACH,qBALD;AAMH,iBAXD,MAWO;AACH,4BAAQ,EAAR;AACH;AACJ,aAjBM,MAiBA,IAAG,KAAK,MAAL,KAAgB,YAAnB,EAAiC;AACpC,wBAAK,qBAAL,CAA2B,SAA3B,EAAsC,IAAtC,EAA4C,UAA5C;AACA,oBAAM,YAAsB,QAAK,gBAAL,CAAsB,KAAK,SAA3B,CAA5B;AACA,oBAAG,SAAH,EAAY;AACR,wBAAM,aAAW,UAAU,QAAQ,GAAlB,GAA+B,IAAhD;AACA,wBAAG,QAAK,sBAAL,CAA4B,IAA5B,CAAH,EAAsC;AAClC;AACA;AACA,kCAAQ,OAAR,CAAgB,QAAhB,GAA2B,KAAK,QAAhC;AACA,kCAAQ,MAAR,CAAe;AACX,yCAAa;AADF,yBAAf,EAEG,OAFH,CAEW;AACP,2CAAe,SAAf,EAAwB,IAAxB,EAA8B,UAA9B;AACA,oCAAQ,EAAR;AACH,yBALD;AAMH,qBAVD,MAUO;AACH,uCAAe,SAAf,EAAwB,IAAxB,EAA8B,UAA9B;AACA,gCAAQ,EAAR;AACH;AACJ,iBAhBD,MAgBO;AACH,4BAAQ,EAAR;AACH;AACJ,aAtBM,MAsBA,IAAG,KAAK,MAAL,KAAgB,QAAnB,EAA6B;AAChC,oBAAM,UAAsB,QAAK,gBAAL,CAAsB,KAAK,SAA3B,CAA5B;AACA,2BAAW,QAAQ,OAAR,EAAX;AACA,uBAAO,QAAK,gBAAL,CAAsB,KAAK,SAA3B,CAAP;AACA,oBAAG,CAAC,QAAK,OAAL,CAAa,KAAK,KAAL,CAAW,EAAxB,CAAJ,EAAiC;AAC7B,2BAAO,QAAK,OAAL,CAAa,SAAb,CAAuB,GAAvB,CAA2B,KAAK,KAAL,CAAW,EAAtC,CAAP;AACH;AACD,wBAAQ,EAAR;AACH,aARM,MAQA;AACH,oBAAG,QAAK,sBAAL,CAA4B,IAA5B,CAAH,EAAsC;AAClC,wBAAM,UAAsB,QAAK,gBAAL,CAAsB,KAAK,SAA3B,CAA5B;AACA,4BAAQ,OAAR,CAAgB,QAAhB,GAA2B,KAAK,QAAhC;AACA,4BAAQ,MAAR,CAAe;AACX,qCAAa;AADF,qBAAf,EAEG,OAFH,CAEW;AACP,gCAAQ,EAAR;AACH,qBAJD;AAKH,iBARD,MAQO;AACH,4BAAQ,EAAR;AACH;AACJ;AACJ,SApMM,CAAP;AAqMH,KA1MO;AA2MA,mDAAR,UAA+B,IAA/B,EAAmD;AAC/C,YAAG,KAAK,MAAL,KAAgB,QAAnB,EAA6B;AACzB,mBAAO,IAAP;AACH,SAFD,MAEO;AACH,gBAAG,KAAK,QAAL,IAAiB,KAAK,QAAL,CAAc,MAAd,GAAuB,CAA3C,EAA8C;AAC1C,qBAAkB,sBAAK,QAAvB,EAAkB,cAAlB,EAAkB,IAAlB,EAAiC;AAA7B,wBAAM,OAAI,MAAV;AACA,wBAAG,KAAK,sBAAL,CAA4B,IAA5B,CAAH,EAAsC;AAClC,+BAAO,IAAP;AACH;AACJ;AACJ;AACJ;AACJ,KAZO;AAaR;;;;;;AAMQ,qCAAR,UAAiB,SAAjB,EAAwC,IAAxC,EAA8D,UAA9D,EAAwF;AACpF,YAAM,QAAQ,KAAK,IAAL,CAAU,KAAK,IAAL,CAAU,MAAV,GAAmB,CAA7B,CAAd;AACA,YAAM,YAAY,QAAQ,CAA1B;AACA,YAAM,UAAU,WAAW,QAAX,CAAoB,SAApB,CAAhB;AACA,YAAG,OAAH,EAAY;AACR,gBAAM,UAAU,QAAQ,GAAR,CAAY,kBAA5B;AACA,gBAAG,OAAH,EAAY;AACR,0BAAU,YAAV,CAAuB,KAAK,GAA5B,EAAiC,OAAjC;AACH,aAFD,MAEO;AACH,0BAAU,WAAV,CAAsB,KAAK,GAA3B;AACH;AACJ,SAPD,MAOO;AACH;AACA,gBAAG,UAAU,QAAV,CAAmB,MAAnB,GAA4B,CAA/B,EAAkC;AAC9B,0BAAU,YAAV,CAAuB,KAAK,GAA5B,EAAiC,UAAU,QAAV,CAAmB,CAAnB,CAAjC;AACH,aAFD,MAEO;AACH,0BAAU,WAAV,CAAsB,KAAK,GAA3B;AACH;AACJ;AACA,aAAK,GAAL,CAAiB,IAAjB,GAAwB,KAAK,IAA7B;AACJ,KApBO;AAqBA,4CAAR,UAAwB,IAAxB,EAA4C;AACxC,YAAG,KAAK,OAAL,KAAiB,MAApB,EAA4B;AACxB,mBAAO,SAAS,cAAT,CAAwB,KAAK,SAA7B,CAAP;AACH,SAFD,MAEO,IAAG,KAAK,OAAL,KAAiB,MAApB,EAA4B;AAC/B,mBAAO,SAAS,aAAT,CAAuB,KAAK,SAA5B,CAAP;AACH,SAFM,MAEA;AACH,mBAAO,SAAS,aAAT,CAAuB,KAAK,OAA5B,CAAP;AACH;AACJ,KARO;AASA,6CAAR,UAAyB,SAAzB,EAA+C,IAA/C,EAAqE,UAArE,EAAiG,YAAjG,EAAgI;;AAC5H,YAAM,UAAU,KAAK,UAAL,CAAgB,IAAhB,EAAsB,UAAtB,CAAhB;AACA,YAAM,SAAS,KAAK,eAAL,CAAqB,IAArB,CAAf;AACC,eAAe,SAAf,GAA2B,KAAK,SAAhC,CAH2H,CAGhF;AAC5C,YAAG,OAAH,EAAY;AACR;AACA,gBAAI,iBAAiB,QAAQ,GAA7B;AACA,gBAAG,mBAAO,IAAP,gBAAO,MAAP,GAAO,MAAP,WAAS,QAAT,MAAiB,IAAjB,IAAiB,aAAjB,GAAiB,MAAjB,GAAiB,GAAE,WAAnB,KAAkC,CAAC,KAAK,OAAL,CAAa,KAAK,SAAlB,CAAtC,EAAoE;AAChE;AACA;AACA,oBAAM,UAAuB,KAAK,gBAAL,CAAsB,QAAQ,SAA9B,CAA7B;AACA,iCAAiB,QAAQ,UAAR,EAAjB;AACH;AACD,gBAAG,cAAH,EAAmB;AACf,oBAAM,UAAU,eAAe,kBAA/B;AACA,oBAAG,OAAH,EAAY;AACR,8BAAU,YAAV,CAAuB,MAAvB,EAA+B,OAA/B;AACH,iBAFD,MAEO;AACH,8BAAU,WAAV,CAAsB,MAAtB;AACH;AACJ,aAPD,MAOO;AACH;AACA;AACA,oBAAG,UAAU,QAAV,CAAmB,MAAnB,GAA4B,CAA/B,EAAkC;AAC9B,8BAAU,YAAV,CAAuB,MAAvB,EAA+B,UAAU,QAAV,CAAmB,CAAnB,CAA/B;AACH,iBAFD,MAEO;AACH,8BAAU,WAAV,CAAsB,MAAtB;AACH;AACJ;AACJ,SAzBD,MAyBO;AACH,gBAAG,CAAC,YAAJ,EAAkB;AACd;AACA;AACA,oBAAG,UAAU,QAAV,CAAmB,MAAnB,GAA4B,CAA/B,EAAkC;AAC9B,8BAAU,YAAV,CAAuB,MAAvB,EAA+B,UAAU,QAAV,CAAmB,CAAnB,CAA/B;AACH,iBAFD,MAEO;AACH,8BAAU,WAAV,CAAsB,MAAtB;AACH;AACJ,aARD,MAQO;AACH;AACA,oBAAM,eAAe,aAAa,kBAAlC;AACA,oBAAG,YAAH,EAAiB;AACb,8BAAU,YAAV,CAAuB,MAAvB,EAA+B,YAA/B;AACH,iBAFD,MAEO;AACH,8BAAU,WAAV,CAAsB,MAAtB;AACH;AACJ;AACJ;AACD,YAAG,CAAC,MAAD,EAAS,MAAT,EAAiB,OAAjB,CAAyB,KAAK,OAA9B,IAAuC,CAA1C,EAA6C;AACzC;AACA,iBAAK,cAAL,CAAoB,MAApB,CAA2B,MAA3B,EAAkD,IAAlD;AACH;AACD,aAAK,GAAL,GAAW,MAAX;AACH,KArDO;AAsDR;;;;;AAKQ,iDAAR,UAA6B,IAA7B,EAAiD;AAAjD;AACI,YAAM,YAAY,KAAK,MAAL,IAAe,EAAjC;AACA,YAAM,YAAY,OAAO,IAAP,CAAY,KAAK,MAAjB,CAAlB;AACA,YAAG,KAAK,MAAL,IAAe,UAAU,MAAV,GAAmB,CAArC,EAAwC;AACpC,mBAAO,IAAP,CAAY,KAAK,MAAjB,EAAyB,GAAzB,CAA6B,UAAC,SAAD,EAAkB;AAC3C,oBAAM,gBAAgB,KAAK,MAAL,CAAY,SAAZ,CAAtB;AACA,oBAAG,OAAO,aAAP,KAAyB,UAA5B,EAAwC;AACpC;AACA,qBAAC,UAAC,MAAD,EAAyB,OAAzB,EAA0C,SAA1C,EAA6D,WAA7D,EAA4E;AACzE,4BAAM,UAAU,QAAK,QAAL,CAAc,SAAd,CAAwB;AACpC,sCAAU,kBAAC,KAAD,EAAkB;AACxB,oCAAM,WAAQ,sBACP,KADO,GACF,EACR,cAAc,KADN,EAER,MAAM,OAAO,IAFL,EAGR,SAAS,OAAO,OAHR,EADE,CAAd;AAMA,oCAAM,cAAc,UAAS,IAAT,CAAc,WAAd,EAA2B,QAA3B,CAApB;AACA,sCAAM,YAAN,GAAqB,SAAS,YAA9B;AACA,uCAAO,WAAP;AACH,6BAXmC;AAYpC,uCAAW,OAZyB;AAapC,kCAAM,OAAO,IAbuB;AAcpC,uCAAW,QAAK,OAAL,CAAa;AAdY,yBAAxB,CAAhB;AAgBH,qBAjBD,EAiBG,IAjBH,EAiBS,SAjBT,EAiBoB,aAjBpB,EAiBmC,QAAK,OAAL,CAAa,SAjBhD;AAkBH;AACJ,aAvBD;AAwBH;AACJ,KA7BO;AA8BA,uCAAR,UAAmB,IAAnB,EAAyC,UAAzC,EAAmE;AAC/D,YAAM,QAAQ,KAAK,IAAL,CAAU,KAAK,IAAL,CAAU,MAAV,GAAmB,CAA7B,CAAd;AACA,YAAM,YAAY,QAAQ,CAA1B;AACA,YAAM,UAAU,WAAW,QAAX,CAAoB,SAApB,CAAhB;AACA,YAAG,OAAH,EAAY;AACR,gBAAG,QAAQ,MAAR,KAAmB,QAAtB,EAAgC;AAC5B,uBAAO,OAAP;AACH,aAFD,MAEO;AACH,uBAAO,KAAK,UAAL,CAAgB,OAAhB,EAAyB,UAAzB,CAAP;AACH;AACJ;AACJ,KAXO;AAYA,uCAAR,UAAmB,IAAnB,EAAyC,UAAzC,EAAmE;AAC/D,YAAM,QAAQ,KAAK,IAAL,CAAU,KAAK,IAAL,CAAU,MAAV,GAAmB,CAA7B,CAAd;AACA,YAAM,YAAY,QAAQ,CAA1B;AACA,YAAM,UAAU,WAAW,QAAX,CAAoB,SAApB,CAAhB;AACA,YAAG,OAAH,EAAY;AACR,gBAAG,QAAQ,MAAR,KAAmB,QAAtB,EAAgC;AAC5B,uBAAO,OAAP;AACH,aAFD,MAEO;AACH,uBAAO,KAAK,UAAL,CAAgB,OAAhB,EAAyB,UAAzB,CAAP;AACH;AACJ;AACJ,KAXO;AAYR;;;;AAIQ,6CAAR,UAAyB,IAAzB,EAA6C;AAA7C;;AACI,kBAAG,SAAI,IAAJ,aAAI,MAAJ,GAAI,MAAJ,QAAM,QAAT,MAAiB,IAAjB,IAAiB,aAAjB,GAAiB,MAAjB,GAAiB,GAAE,WAAnB,EAAgC;AAC5B,gBAAG,KAAK,gBAAL,CAAsB,KAAK,SAA3B,CAAH,EAA0C;AACrC,qBAAK,gBAAL,CAAsB,KAAK,SAA3B,EAAsD,OAAtD;AACD,uBAAO,KAAK,gBAAL,CAAsB,KAAK,SAA3B,CAAP;AACH;AACJ;AACD,aAAK,MAAL,KAAgB,QAAhB;AACA,aAAK,GAAL,GAAW,IAAX;AACA,aAAK,MAAL,GAAc,IAAd;AACA,aAAK,KAAL,GAAa,EAAb;AACA,YAAG,KAAK,QAAL,IAAiB,KAAK,QAAL,CAAc,MAAd,GAAuB,CAA3C,EAA8C;AAC1C,iBAAK,QAAL,CAAc,GAAd,CAAkB,UAAC,SAAD,EAAU;AACxB,wBAAK,gBAAL,CAAsB,SAAtB;AACH,aAFD;AAGH;AACJ,KAhBO;AAiBR;;;;;AAKQ,iDAAR,UAA6B,WAA7B,EAA2D;;AACvD,YAAG,eAAe,YAAY,MAAZ,GAAqB,CAAvC,EAA0C;AACtC,iBAAoB,uCAApB,EAAoB,yBAApB,EAAoB,IAApB,EAAiC;AAA7B,oBAAM,SAAM,iBAAZ;AACA,oBAAG,CAAC,KAAK,OAAL,CAAa,OAAO,KAAP,CAAa,EAA1B,CAAJ,EAAmC;AAC/B,2BAAO,KAAK,OAAL,CAAa,SAAb,CAAuB,KAAvB,CAA6B,OAAO,KAAP,CAAa,EAA1C,CAAP;AACH;AACD,0BAAG,WAAM,IAAN,eAAM,MAAN,GAAM,MAAN,UAAQ,QAAX,MAAmB,IAAnB,IAAmB,aAAnB,GAAmB,MAAnB,GAAmB,GAAE,WAArB,EAAkC;AAC9B,wBAAM,UAAuB,KAAK,gBAAL,CAAsB,OAAO,SAA7B,CAA7B;AACA,+BAAW,QAAQ,OAAR,EAAX;AACA,2BAAO,KAAK,gBAAL,CAAsB,OAAO,SAA7B,CAAP;AACH,iBAJD,MAIO;AACH,wBAAG,OAAO,GAAV,EAAe;AACX,+BAAO,GAAP,CAAW,aAAX,IAA4B,OAAO,GAAP,CAAW,aAAX,CAAyB,WAAzB,CAAqC,OAAO,GAA5C,CAA5B;AACA;AACA;AACA;AACH;AACJ;AACJ;AACJ;AACJ,KApBO;AAqBR;;;;;AAKQ,kDAAR,UAA8B,SAA9B,EAAqD,IAArD,EAA2E,UAA3E,EAAsG;;AAClG;AACA;AACA,YAAM,UAAuB,KAAK,gBAAL,CAAsB,KAAK,SAA3B,CAA7B;AACA,YAAM,UAAU,KAAK,UAAL,CAAgB,IAAhB,EAAsB,UAAtB,CAAhB;AACA,YAAI,eAAe,QAAQ,GAA3B;AACA,YAAG,mBAAO,IAAP,gBAAO,MAAP,GAAO,MAAP,WAAS,QAAT,MAAiB,IAAjB,IAAiB,aAAjB,GAAiB,MAAjB,GAAiB,GAAE,WAAnB,KAAkC,CAAC,KAAK,OAAL,CAAa,QAAQ,SAArB,CAAtC,EAAuE;AACnE,2BAAY,MAAiB,KAAK,gBAAL,CAAsB,QAAQ,SAA9B,CAAjB,MAA0D,IAA1D,IAA0D,aAA1D,GAA0D,MAA1D,GAA0D,GAAE,WAAF,EAAtE;AACH;AACD,YAAG,YAAH,EAAiB;AACb,gBAAM,eAAe,QAAQ,MAAR,CAAe,QAAf,CAAwB,MAA7C;AACA,gBAAI,YAAY,eAAe,CAA/B;AACA;AACA;AACA,mBAAM,aAAa,CAAnB,EAAsB;AAClB,oBAAM,UAAU,QAAQ,MAAR,CAAe,QAAf,CAAwB,SAAxB,CAAhB;AACA,oBAAG,QAAQ,MAAR,KAAmB,QAAtB,EAAgC;AAC5B,8BAAU,YAAV,CAAuB,QAAQ,GAA/B,EAAoC,YAApC;AACA,mCAAe,QAAQ,GAAvB,CAF4B,CAEA;AAC/B;AACD,6BAAa,CAAb;AACH;AACJ,SAbD,MAaO;AACH;AACA,oBAAQ,MAAR,CAAe,QAAf,CAAwB,GAAxB,CAA4B,UAAC,QAAD,EAAyB;AACjD,oBAAG,SAAS,MAAT,KAAoB,QAAvB,EAAiC;AAC7B;AACA,8BAAU,WAAV,CAAsB,SAAS,GAA/B;AACH;AACJ,aALD;AAMH;AACJ,KA/BO;AAgCA,oDAAR,UAAgC,IAAhC,EAAoD;AAChD,YAAG,IAAH,EAAS;AACL,gBAAG,CAAC,KAAK,OAAL,CAAa,KAAK,SAAlB,CAAJ,EAAkC;AAC9B,oBAAM,UAAsB,KAAK,gBAAL,CAAsB,KAAK,SAA3B,CAA5B;AACA,oBAAG,OAAH,EAAY;AACR,2BAAO,QAAQ,UAAR,EAAP;AACH;AACJ,aALD,MAKO;AACH,uBAAO,KAAK,GAAZ;AACH;AACJ;AACJ,KAXO;AAz7BR,gBADC,uBAAU,8BAAV,EAAyB,eAAzB,CACD,E,0BAAuB,8B,CAAvB,G,qBAAA,E,eAAA,E,KAAqC,CAArC;AAEA,gBADC,uBAAU,4BAAV,CACD,E,0BAAwB,4B,CAAxB,G,qBAAA,E,gBAAA,E,KAAoC,CAApC;AAEA,gBADC,uBAAU,wBAAV,CACD,E,0BAAqB,wB,CAArB,G,qBAAA,E,aAAA,E,KAAiC,CAAjC;AAIA,gBADC,uBAAU,kCAAV,CACD,E,0BAAwB,kC,CAAxB,G,qBAAA,E,gBAAA,E,KAAyC,CAAzC;AAEA,gBADC,uBAAU,kCAAV,CACD,E,0BAA0B,kC,CAA1B,G,qBAAA,E,kBAAA,E,KAA2C,CAA3C;AA27BJ;AAAC,CAx8BD,CAAiC,mBAAjC;QAAa,W,GAAA,W;;;;;;;;;;;;;;;;ACtDb;;AAEA;;;;;;;;;;;AAGA;AAAA,iCA+CC;AA9CG;;;;;AAKA,kDAAO,GAAP,EAAwB,IAAxB,EAA4C;AACxC,YAAG,KAAK,OAAL,KAAiB,MAApB,EAA4B;AACxB,gBAAI,WAAJ,GAAkB,KAAK,SAAvB;AACH,SAFD,MAEO;AACH,gBAAM,gBAAc,KAAK,MAAL,KAAgB,QAAhB,GAA2B,KAAK,KAAhC,GAAwC,KAAK,WAAjE;AACA,gBAAM,WAAS,SAAS,IAAT,CAAc,IAAI,OAAlB,CAAf;AACA,gBAAG,aAAH,EAAgB;AACZ,uBAAO,IAAP,CAAY,aAAZ,EAAyB,GAAzB,CAA6B,UAAC,OAAD,EAAgB;AACzC,wBAAM,YAAY,cAAY,OAAZ,CAAlB;AACA,wBAAG,aAAa,IAAb,CAAkB,OAAlB,CAAH,EAA+B;AAC3B,4BAAI,YAAJ,CAAiB,OAAjB,EAA0B,YAAY,SAAZ,GAAwB,IAAlD;AACC,4BAAY,OAAZ,GAAsB,SAAtB;AACJ,qBAHD,MAGO,IAAG,UAAU,IAAV,CAAe,OAAf,CAAH,EAA4B;AAC/B,4BAAI,KAAJ,CAAU,OAAV,GAAoB,YAAY,OAAZ,GAAsB,MAA1C;AACH,qBAFM,MAEA,IAAG,UAAU,IAAV,CAAe,OAAf,CAAH,EAA4B;AAC/B,4BAAI,KAAJ,CAAU,OAAV,GAAoB,YAAY,cAAZ,GAA6B,MAAjD;AACH,qBAFM,MAEA,IAAG,UAAU,IAAV,CAAe,OAAf,CAAH,EAA4B;AAC/B,4BAAG,QAAH,EAAW;AACP,gCAAG,uBAAuB,IAAvB,CAA4B,SAA5B,CAAH,EAA2C;AACvC,sCAAM,IAAI,KAAJ,CAAU,oDAAV,CAAN;AACH,6BAFD,MAEO;AACH,oCAAI,YAAJ,CAAiB,OAAjB,EAA0B,SAA1B;AACH;AACJ;AACJ,qBARM,MAQA;AACH,4BAAI,YAAJ,CAAiB,OAAjB,EAA0B,SAA1B;AACH;AACJ,iBApBD;AAqBH;AACD,gBAAG,QAAH,EAAW;AACP,oBAAG,0BAAM,OAAN,CAAc,KAAK,KAAL,CAAW,IAAzB,CAAH,EAAmC;AAC/B,wBAAI,YAAJ,CAAiB,MAAjB,EAAyB,qBAAzB;AACH;AACJ;AACD,gBAAG,KAAK,WAAR,EAAqB;AACjB,qBAAqB,sBAAK,WAA1B,EAAqB,cAArB,EAAqB,IAArB,EAAuC;AAAnC,wBAAM,UAAO,MAAb;AACA,wBAAI,eAAJ,CAAoB,OAApB;AACH;AACJ;AACJ;AACJ,KAxCD;AANS,uBAAgB,YAD5B,4BAAW,kBAAX,CAC4B,GAAhB,gBAAgB,CAAhB;AA+Cb;AAAC,CA/CD;QAAa,gB,GAAA,gB;;;;;;;;;;;;;;ACLb;;;;;;;;;;;;;;;;;;;;;;AAyBA;;;;;AAKA;AAAiC;AAAjC;AAAA;AAEY,0BAAiB,EAAjB;;AAmFX;AAlFG,kDAAY,SAAZ,EAA+B,OAA/B,EAAgE,cAAhE,EAA+F,cAA/F,EAAwH;AAAxH;AACI,eAAO,IAAI,OAAJ,CAAiB,UAAC,OAAD,EAAU,MAAV,EAAgB;AACpC,gBAAM,WAAW,uBAAuB,MAAK,IAAL,EAAxC;AACA,gBAAG,CAAC,MAAK,SAAL,CAAe,SAAf,CAAJ,EAA+B;AAC3B,sBAAK,SAAL,CAAe,SAAf,IAA4B;AACxB,gCAAY,EADY;AAExB,kCAAc,KAFU;AAGxB,wCAAoB,EAHI;AAIxB,qCAAiB,CAAC,CAJM;AAKxB,4BAAQ;AALgB,iBAA5B;AAOH;AACD,kBAAK,SAAL,CAAe,SAAf,EAA0B,QAA1B,GAAqC,cAArC;AACA,kBAAK,SAAL,CAAe,SAAf,EAA0B,UAA1B,CAAqC,IAArC,CAAiE;AAC7D,0BAAQ,QADqD;AAE7D,0BAAU,KAFmD;AAG7D,yBAAO,OAHsD;AAI7D,wBAAM,MAJuD;AAK7D,yBAAO;AALsD,aAAjE;AAOA,kBAAK,UAAL,CAAgB,SAAhB;AACH,SApBM,CAAP;AAqBH,KAtBD;AAuBQ,uCAAR,UAAmB,SAAnB,EAAoC;AAApC;AACI,YAAM,gBAAwC,KAAK,SAAL,CAAe,SAAf,CAA9C;AACA,YAAG,CAAC,cAAc,YAAlB,EAAgC;AAC5B;AACA;AACA,gBAAM,eAAe,cAAc,UAAd,CAAyB,MAA9C;AACA,gBAAG,eAAe,CAAlB,EAAqB;AACjB;AACA,oBAAM,cAAc,EAApB;AACA,oBAAM,aAAa,EAAnB;AACA,qBAAI,IAAI,IAAE,eAAe,CAAzB,EAA2B,IAAE,cAAc,eAA3C,EAA2D,GAA3D,EAAgE;AAC5D,wBAAG,CAAC,cAAc,UAAd,CAAyB,CAAzB,EAA4B,QAAhC,EAA0C;AACtC;AACA;AACA,4BAAM,YAAY,cAAc,UAAd,CAAyB,CAAzB,CAAlB;AACA,6BAAK,MAAL,CAAY,WAAZ,EAAyB,UAAU,OAAV,CAAkB,KAA3C;AACA,6BAAK,MAAL,CAAY,UAAZ,EAAwB,UAAU,OAAV,CAAkB,IAA1C;AACA,sCAAc,kBAAd,CAAiC,IAAjC,CAAsC,CAAtC;AACA,sCAAc,UAAd,CAAyB,CAAzB,EAA4B,QAA5B,GAAuC,IAAvC;AACH;AACJ;AACD,8BAAc,eAAd,GAAgC,eAAe,CAA/C;AACA,8BAAc,YAAd,GAA6B,IAA7B;AACA,8BAAc,MAAd,CAAqB;AACjB,0BAAM,UADW;AAEjB,2BAAO;AAFU,iBAArB,EAGG,IAHH,CAGQ;AACJ;AACA,0BAAK,kBAAL,CAAwB,SAAxB,EAAmC,KAAnC;AACH,iBAND,EAMG,KANH,CAMS,UAAC,GAAD,EAAI;AACT,0BAAK,kBAAL,CAAwB,SAAxB,EAAmC,IAAnC,EAAyC,GAAzC;AACH,iBARD;AASH;AACJ;AACJ,KAlCO;AAmCA,+CAAR,UAA2B,SAA3B,EAA8C,KAA9C,EAA0D,SAA1D,EAAyE;AACrE,YAAM,gBAAwC,KAAK,SAAL,CAAe,SAAf,CAA9C;AACA,YAAG,iBAAiB,cAAc,UAAlC,EAA8C;AAC1C;AACA,gBAAM,WAAW,cAAc,UAAd,CAAyB,MAAzB,KAAoC,cAAc,kBAAd,CAAiC,MAAtF;AACA,gBAAG,QAAH,EAAa;AACT;AACA,8BAAc,YAAd,GAA6B,KAA7B;AACA,qBAAoB,+BAAc,UAAlC,EAAoB,cAApB,EAAoB,IAApB,EAA8C;AAA1C,wBAAM,SAAM,MAAZ;AACA,wBAAG,KAAH,EAAU;AACN,+BAAO,MAAP,CAAc,SAAd;AACH,qBAFD,MAEO;AACH,+BAAO,OAAP,CAAe,EAAf;AACH;AACJ;AACD;AACA,uBAAO,cAAc,QAArB,KAAkC,UAAlC,IAAgD,cAAc,QAAd,EAAhD;AACH,aAZD,MAYO;AACH;AACA,8BAAc,YAAd,GAA6B,KAA7B;AACA,qBAAK,UAAL,CAAgB,SAAhB;AACH;AACJ;AACJ,KAvBO;AA5DD,4BAAoB,aAApB;AAoFX;AAAC,CArFD,CAAiC,mBAAjC;QAAa,W,GAAA,W;;;;;;;;;;;;;;;AC9Bb;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcA,IAAM,UAAU,SAAV,OAAU,CAAC,KAAD,EAAY,OAAZ,EAAmB;AAC/B,QAAM,YAAY,qBAAS,OAAT,EAAkB,QAAlB,CAAlB;AACA,QAAM,YAAY,qBAAS,OAAT,EAAkB,KAAlB,CAAlB;AACA,UAAM,IAAN,GAAa,MAAM,IAAN,GAAa,SAA1B;AACA,WAAO,iHAAP;AACH,CALD;AAgDA;AAAqC;AAArC;AAAA;AASI,sBAAQ;AACJ,kBAAM,EADF;AAEJ,mBAAO,CAFH;AAGJ,iBAAK,KAHD;AAIJ,sBAAU,EAJN;AAKJ,sBAAU;AALN,SAAR;;AA4DH;AAnDG;AACI,aAAI,IAAI,IAAE,CAAV,EAAY,IAAE,CAAd,EAAgB,GAAhB,EAAqB;AACjB,iBAAK,KAAL,CAAW,QAAX,CAAoB,IAApB,CAAyB;AACrB,uBAAO,SAAS,CADK;AAErB,uBAAO;AAFc,aAAzB;AAIH;AACJ,KAPD;AAQA;AACI,aAAK,KAAL,CAAW,YAAX,CAAwB;AACpB,kBAAM,cADc;AAEpB,kBAAO,IAAI,IAAJ,EAAD,CAAa,OAAb,GAAuB,QAAvB,KAAoC,WAFtB;AAGpB,mBAAO,KAAK,KAAL,CAAW,KAAX,GAAmB;AAHN,SAAxB;AAKA,gBAAQ,GAAR,CAAY,eAAZ;AACH,KAPD;AAQA,0CAAQ,GAAR,EAA6B;AACzB,gBAAQ,GAAR,CAAY,IAAI,KAAhB,EAAuB,IAAI,MAA3B,EAAmC,IAAI,QAAvC,EAAiD,IAAI,SAArD;AACH,KAFD;AAGA,oDAAkB,KAAlB,EAAuB;AACnB,YAAG,MAAM,OAAN,KAAkB,KAAK,KAAL,CAAW,IAAhC,EAAsC;AAClC,iBAAK,QAAL,CAAc;AACV,sBAAM,MAAM;AADF,aAAd;AAGH;AACJ,KAND;AAOA;AACI,YAAM,QAAQ,KAAK,GAAL,CAAS,MAAT,CAAd;AACA,YAAG,KAAK,KAAL,CAAW,QAAd,EAAwB;AACpB,iBAAK,CAAL,CAAO,QAAP,CAAgB,KAAhB;AACA,iBAAK,QAAL,CAAc;AACV,0BAAU;AADA,aAAd;AAGH,SALD,MAKO;AACH,iBAAK,CAAL,CAAO,OAAP,CAAe,KAAf;AACA,iBAAK,QAAL,CAAc;AACV,0BAAU;AADA,aAAd;AAGH;AAEJ,KAdD;AAeA;AACI,eAAO,2nBAAP;AAQH,KATD;AA1DO,uBAAW;AACd,eAAO;AACH,kBAAM,2BAAU;AADb,SADO;AAId,sBAAc;AACV,kBAAM,2BAAU,MAAV,CAAiB;AADb;AAJA,KAAX;AAgBP,gBADC,2BAAU,kBAAV,CACD,E,0BAAW,kB,CAAX,G,iBAAA,E,GAAA,E,KAAoB,CAApB;AAjBiB,cAAO,YAxC3B,wCAAiB;AACd,kBAAU,UADI;AAEd,oBAAY;AACR,qBAAS,OADD;AAER,oBAAQ;AAFA,SAFE;AAMd,iBAAQ;AACJ,6BAAiB,yBAAC,KAAD,EAAY,GAAZ,EAAmB;AAChC,uBAAO,EAAC,SAAS,IAAI,QAAJ,CAAa,KAAb,EAAmB,cAAnB,KAAsC,UAAhD,EAAP;AACH,aAHG;AAIJ,gCAAoB,4BAAC,QAAD,EAAS;AAAK,uBAAC;AAC/B,kCAAc,sBAAC,IAAD,EAAK;AAAK,+BAAC,SAAD,IAAC,CAAD;AAAgB;AADT,iBAAD;AAEhC,aANE;AAOJ,sBAAU,CACN;AACI,sBAAM,MADV;AAEI,0BAAU,kBAAC,KAAD,EAAQ,MAAR,EAAc;AACpB,4BAAO,OAAO,IAAd;AACI,6BAAK,MAAL;AACI,mCAAO;AACH,yCAAS;AADN,6BAAP;AAGJ,6BAAK,cAAL;AAAqB;AACjB,wCAAQ,GAAR,CAAY,mBAAZ;AACA,6DACO,KADP,GACY,EACR,SAAS,OAAO,IADR,EADZ;AAIH;AACG;AACI,mCAAO;AACH,yCAAS,IADN;AAEH,2CAAW;AAFR,6BAAP;AAbZ;AAkBH;AArBL,aADM;AAPN;AANM,KAAjB,CAwC2B,GAAP,OAAO,CAAP;AAqErB;AAAC,CArED,CAAqC,oBAArC;kBAAqB,O;;;;;;;;;;;;;;;;AC5Dd,IAAM,gCAAY,SAAZ,SAAY,CAAY,QAAZ,EAA0C;AAC/D,QAAM,eAAoB,6BAAa,OAAb,CAA1B;AACA,QAAM,YAA2B,6BAAa,WAAb,CAAjC;AACA,QAAM,YAAiB,6BAAa,gBAAb,CAAvB;AACA,QAAG,CAAC,SAAJ,EAAe;AACX,cAAM,IAAI,KAAJ,CAAU,qCAAV,CAAN;AACH;AACD,QAAG,CAAC,UAAU,SAAV,CAAoB,SAApB,CAAJ,EAAoC;AAChC,YAAG,OAAO,QAAP,KAAoB,UAAvB,EAAmC;AAC/B,kBAAM,IAAI,KAAJ,CAAU,yDAAV,CAAN;AACH;AACD,kBAAU,SAAV,CAAoB,SAApB,IAAiC;AAC7B,sBAAQ,QADqB;AAE7B,6BAAiB;AAFY,SAAjC;AAIA,YAAG,OAAO,aAAa,QAApB,KAAiC,UAApC,EAAgD;AAC5C,yBAAa,QAAb,GAAwB;AACpB;AACA,qBAAI,IAAM,IAAV,IAAkB,UAAU,SAA5B,EAAuC;AACnC,wBAAI;AACA,4BAAM,KAAK,UAAU,SAAV,CAAoB,IAApB,CAAX;AACA,+BAAO,EAAP,KAAc,UAAd,IAA4B,IAA5B;AACH,qBAHD,CAGE,OAAO,CAAP,EAAU;AACR;AACA,gCAAQ,KAAR,CAAc,CAAd;AACH;AACJ;AACJ,aAXD;AAYH;AACD,qBAAa,YAAb,IAA6B,QAA7B;AACH;AACD,iCAAa,gBAAb,EAA+B,YAAY,CAA3C;AACH,CAhCM,C;;;;;;;;;;;;;;;;ACLA,IAAM,8BAAW,SAAX,QAAW,CAAC,QAAD,EAAmB,SAAnB,EAAkC;AACtD,QAAM,eAAoB,6BAAa,OAAb,CAA1B;AACA,QAAM,YAA2B,6BAAa,WAAb,CAAjC;AACA,QAAM,gBAAqB,6BAAa,eAAb,CAA3B;AACA,QAAG,CAAC,SAAJ,EAAe;AACX,cAAM,IAAI,KAAJ,CAAU,oCAAV,CAAN;AACH;AACD,QAAG,CAAC,UAAU,QAAV,CAAmB,aAAnB,CAAJ,EAAuC;AACnC,YAAM,kBAAuB,UAAC,GAAD,EAAU,KAAV,EAAgC,UAAhC,EAAiD,SAAjD,EAAkE;AAC3F,mBAAO,UAAC,QAAD,EAAa;AAChB,oBAAM,cAAc,MAAM,QAAN,CAAe,UAAf,CAApB;AACA,oBAAG,KAAK,SAAL,CAAe,YAAY,KAA3B,MAAsC,KAAK,SAAL,CAAe,QAAf,CAAzC,EAAmE;AAC/D,wBAAM,cAAc,EAApB;AACA,gCAAY,SAAZ,IAAyB,QAAzB;AACA,0BAAM,QAAN,CAAe,UAAf,EAA2B,KAA3B,GAAmC,QAAnC;AACA,wBAAI,QAAJ,CAAa,WAAb;AACH;AACJ,aARD;AASH,SAV2B,CAUzB,YAVyB,EAUX,SAVW,EAUA,aAVA,EAUe,QAVf,CAA5B;AAWA,YAAM,WAAY,UAAC,KAAD,EAAQ,KAAR,EAAa;AAC3B,mBAAO;AACH,oBAAM,cAAc,MAAM,QAAN,CAAe,KAAf,CAApB;AACA,uBAAO,YAAY,KAAnB;AACH,aAHD;AAIH,SALgB,CAKd,SALc,EAKH,aALG,CAAjB;AAMA,kBAAU,QAAV,CAAmB,aAAnB,IAAoC;AAChC,mBAAO,SADyB;AAEhC,sBAAQ,QAFwB;AAGhC;AACA,sBAAU,eAJsB;AAKhC,sBAAQ;AALwB,SAApC;AAOA,YAAG,CAAC,aAAa,KAAjB,EAAwB;AACpB,yBAAa,KAAb,GAAqB,EAArB;AACH;AACD,qBAAa,KAAb,CAAmB,QAAnB,IAA+B,SAA/B;AACA,qCAAa,eAAb,EAA8B,gBAAgB,CAA9C;AACA,eAAO,CAAC,SAAD,EAAY,eAAZ,EAA6B,QAA7B,CAAP;AACH,KA/BD,MA+BO;AACH,qCAAa,eAAb,EAA8B,gBAAgB,CAA9C;AACA,eAAO,CACH,UAAU,QAAV,CAAmB,aAAnB,EAAkC,KAD/B,EAEH,UAAU,QAAV,CAAmB,aAAnB,EAAkC,QAF/B,EAGH,UAAU,QAAV,CAAmB,aAAnB,EAAkC,QAH/B,CAAP;AAKH;AACJ,CA9CM,C;;;;;;;;;;;;;;;;ACHP;;AAUO,IAAM,oCAAc,SAAd,WAAc,CAAC,QAAD,EAAqB,OAArB,EAAyD;AAChF,QAAM,eAAoB,6BAAa,OAAb,CAA1B;AACA,QAAM,YAA2B,6BAAa,WAAb,CAAjC;AACA,QAAM,YAAiB,6BAAa,kBAAb,CAAvB;AACA,QAAG,CAAC,SAAJ,EAAe;AACX,cAAM,IAAI,KAAJ,CAAU,oCAAV,CAAN;AACH;AACD,QAAG,CAAC,UAAU,WAAV,CAAsB,SAAtB,CAAJ,EAAsC;AAClC,YAAM,eAAoB,UAAC,GAAD,EAAU,KAAV,EAAgC,UAAhC,EAAiD,QAAjD,EAAmE,UAAnE,EAAuF;AAC7G;AACA,gBAAM,cAAe,SAAf,WAAe;AACjB,oBAAM,eAAe,MAAM,WAAN,CAAkB,UAAlB,CAArB;AACA,oBAAM,OAAO,aAAa,SAAb,IAA0B,EAAvC;AACA,oBAAM,UAAU,SAAhB;AACA,oBAAG,QAAQ,KAAK,MAAL,GAAc,CAAzB,EAA4B;AACxB,wBAAI,YAAY,KAAhB;AACA,wBAAG,QAAQ,MAAR,KAAmB,KAAK,MAA3B,EAAmC;AAC/B,oCAAY,IAAZ;AACH,qBAFD,MAEO;AACH;AACA,6BAAI,IAAM,GAAV,IAAiB,IAAjB,EAAuB;AACnB,gCAAM,MAAM,KAAK,GAAL,CAAZ;AACA,gCAAG,CAAC,0BAAM,OAAN,CAAc,GAAd,EAAmB,QAAQ,GAAR,CAAnB,CAAJ,EAAsC;AAClC,4CAAY,IAAZ;AACA;AACH;AACJ;AACJ;AACD,wBAAG,SAAH,EAAc;AACV,4BAAM,WAAW,WAAW,KAAX,CAAiB,IAAjB,EAAuB,OAAvB,CAAjB;AACA,8BAAM,WAAN,CAAkB,UAAlB,EAA8B,KAA9B,GAAsC,QAAtC;AACA,8BAAM,WAAN,CAAkB,UAAlB,EAA8B,SAA9B,GAA0C,OAA1C;AACA,+BAAO,QAAP;AACH,qBALD,MAKO;AACH,+BAAO,aAAa,KAApB;AACH;AACJ,iBAtBD,MAsBO;AACH,wBAAM,WAAW,WAAW,KAAX,CAAiB,IAAjB,EAAuB,OAAvB,CAAjB;AACA,0BAAM,WAAN,CAAkB,UAAlB,EAA8B,KAA9B,GAAsC,QAAtC;AACA,2BAAO,QAAP;AACH;AACJ,aA/BD;AAgCA,gBAAG,CAAC,0BAAM,OAAN,CAAc,QAAd,CAAJ,EAA6B;AACzB,oBAAI,QAAJ,IAAgB,WAAhB;AACH;AACD,mBAAO,WAAP;AACH,SAtCwB,CAsCtB,YAtCsB,EAsCR,SAtCQ,EAsCG,SAtCH,EAsCc,YAAO,IAAP,gBAAO,MAAP,GAAO,MAAP,WAAS,IAtCvB,EAsC6B,QAtC7B,CAAzB;AAuCA,kBAAU,WAAV,CAAsB,SAAtB,IAAmC;AAC/B,uBAAW,YAAO,IAAP,gBAAO,MAAP,GAAO,MAAP,WAAS,SADW;AAE/B,sBAAU,YAFqB;AAG/B,mBAAO,YAAO,IAAP,gBAAO,MAAP,GAAO,MAAP,WAAS;AAHe,SAAnC;AAKA,qCAAa,kBAAb,EAAiC,YAAY,CAA7C;AACA,eAAO,CAAC,YAAO,IAAP,gBAAO,MAAP,GAAO,MAAP,WAAS,SAAV,EAAqB,YAArB,CAAP;AACH,KA/CD,MA+CO;AACH,qCAAa,kBAAb,EAAiC,YAAY,CAA7C;AACA,eAAO,CAAC,UAAU,WAAV,CAAsB,SAAtB,EAAiC,KAAlC,EAAyC,UAAU,WAAV,CAAsB,SAAtB,EAAiC,QAA1E,CAAP;AACH;AACJ,CA1DM,C;;;;;;;;;;;;;;;;ACVP;;AAEO,IAAM,sCAAe,SAAf,YAAe,CAAC,QAAD,EAAmB,SAAnB,EAAsC;AAC9D,QAAM,YAAiB,6BAAa,YAAb,CAAvB;AACA,QAAM,YAA2B,6BAAa,WAAb,CAAjC;AACA,QAAM,YAAiB,6BAAa,mBAAb,CAAvB;AACA,QAAM,eAAoB,6BAAa,OAAb,CAA1B;AACA,QAAG,CAAC,SAAJ,EAAe;AACX,cAAM,IAAI,KAAJ,CAAU,oCAAV,CAAN;AACH;AACD,QAAG,0BAAM,OAAN,CAAc,QAAd,CAAH,EAA4B;AACxB,cAAM,IAAI,KAAJ,CAAU,oDAAV,CAAN;AACH;AACD,QAAG,CAAC,UAAU,YAAV,CAAuB,SAAvB,CAAJ,EAAuC;AACnC,YAAM,uBAAwB,UAAC,UAAD,EAAkB,GAAlB,EAAyB;AACnD,mBAAO,UAAC,YAAD,EAAuB;AAC1B,2BAAW,cAAX,CAA0B,QAA1B,IAAsC,YAAtC;AACH,aAFD;AAGH,SAJ4B,CAI1B,SAJ0B,EAIf,YAJe,CAA7B;AAKA,YAAG,CAAC,UAAU,cAAV,CAAyB,QAAzB,CAAJ,EAAwC;AACpC,sBAAU,cAAV,CAAyB,QAAzB,IAAqC,SAArC;AACH;AACD,kBAAU,YAAV,CAAuB,SAAvB,IAAoC,oBAApC;AACA,qCAAa,mBAAb,EAAkC,YAAY,CAA9C;AACA,eAAO,oBAAP;AACH,KAZD,MAYO;AACH,qCAAa,mBAAb,EAAkC,YAAY,CAA9C;AACA,eAAO,UAAU,YAAV,CAAuB,SAAvB,CAAP;AACH;AACJ,CA3BM,C;;;;;;;;;;;;;;;;ACDP;;;;AAIO,IAAM,4BAAU,SAAV,OAAU,CAAC,EAAD,EAAW;AAC9B,QAAM,eAAoB,6BAAa,OAAb,CAA1B;AACA,QAAM,YAA2B,6BAAa,WAAb,CAAjC;AACA,QAAM,YAAiB,6BAAa,cAAb,CAAvB;AACA,QAAG,CAAC,SAAJ,EAAe;AACX,cAAM,IAAI,KAAJ,CAAU,oCAAV,CAAN;AACH;AACD,QAAG,CAAC,UAAU,OAAV,CAAkB,SAAlB,CAAJ,EAAkC;AAC9B,YAAM,aAAc,UAAC,GAAD,EAAW,MAAX,EAAyB;AACzC,mBAAO;AACH,uBAAO,IAAI,GAAJ,CAAQ,MAAR,CAAP;AACH,aAFD;AAGH,SAJkB,CAIhB,YAJgB,EAIF,EAJE,CAAnB;AAKA,kBAAU,OAAV,CAAkB,SAAlB,IAA+B,UAA/B;AACA,qCAAa,cAAb,EAA6B,YAAY,CAAzC;AACA,eAAO,YAAP;AACH,KATD,MASO;AACH,qCAAa,cAAb,EAA6B,YAAY,CAAzC;AACA,eAAO,UAAU,OAAV,CAAkB,SAAlB,GAAP;AACH;AACJ,CApBM,C;;;;;;;;;;;;;;;;ACLP;;AAEA,SAAS,OAAT,CAAiB,GAAjB,EAA8B,EAA9B,EAA4C,MAA5C,EAAsD;AAClD,QAAG,MAAM,OAAO,EAAP,KAAc,UAAvB,EAAmC;AAC/B,WAAG,GAAH,EAAQ,MAAR;AACH,KAFD,MAEO;AACH;AACA,gBAAQ,KAAR,CAAc,GAAd,EAAmB,MAAnB;AACH;AACJ;AAED,SAAS,sBAAT,CAAgC,WAAhC,EAAqD,KAArD,EAA4F;AACxF,aAAS,OAAT,CAAiB,KAAjB,EAA6B,OAA7B,EAA6D;AACzD,YAAM,QAAc,QAAS,IAA7B;AACA,YAAM,YAAmC,UAAU,OAAV,GAAoB;AACzD,mBAAO;AADkD,SAA7D;AAGA,YAAI,WAAW,IAAf;AACA,gBAAO,KAAP;AACI,iBAAK,8BAAiB,KAAtB;AAA6B;AACzB,+BAAW,kCAAX;AACA;AACH;AACD,iBAAK,8BAAiB,UAAtB;AAAkC;AAC9B,+BAAW,uCAAX;AACA;AACH;AACD,iBAAK,8BAAiB,cAAtB;AAAsC;AAClC,+BAAW,2CAAX;AACA;AACH;AAZL;AAcA,kBAAU,OAAV,GAAoB,IAApB;AACA,YAAG,OAAO,QAAP,KAAoB,UAAvB,EAAmC;AAC/B,gBAAG,CAAC,SAAS,KAAT,EAAsB,QAAS,QAA/B,EAAyC,SAAzC,CAAD,IAAwD,UAAU,SAAlE,IAA+E,UAAU,IAA5F,EAAkG;AAC9F,oBAAM,QAAQ,OAAO,SAAP,CAAiB,QAAjB,CAA0B,IAA1B,CAA+B,KAA/B,CAAd;AACA,oBAAM,eAAa,EAAnB;AACA,sBAAM,GAAN,CAAU,UAAC,UAAD,EAAe;AACrB,iCAAW,IAAX,CAAgB,WAAW,IAA3B;AACH,iBAFD;AAGA,oBAAM,gBAAgB,aAAW,IAAX,CAAgB,GAAhB,CAAtB;AACA,wBAAQ,yEAAgB,KAAhB,GAAqB,GAArB,GAAyB,aAAzB,GAAsC,wCAAtC,GAAiD,KAAjD,GAAsD,QAA9D,EAAoE,UAAU,QAAQ,KAAlB,GAA0B,IAA9F,EAAqG,KAArG;AACA,uBAAO,KAAP;AACH;AACJ,SAXD,MAWO;AACH,oBAAQ,QAAM,gBAAd,EAAiC,UAAU,QAAQ,KAAlB,GAA0B,IAA3D,EAAkE,KAAlE;AACA,mBAAO,KAAP;AACH;AACD,eAAO,IAAP;AACH;AACD;AACM,YAAS,UAAT,GAAsB,UAAS,KAAT,EAAqB,OAArB,EAAqD;AAC7E,YAAG,UAAU,SAAV,IAAuB,UAAU,IAAjC,IAA0C,OAAO,KAAP,KAAiB,QAAjB,IAA6B,MAAM,MAAN,IAAc,CAAxF,EAA6F;AACzF,gBAAM,SAAS,sBAAf;AACA,uBAAW,OAAO,QAAQ,KAAf,KAAyB,UAApC,IAAkD,QAAQ,KAAR,CAAc,MAAd,CAAlD;AACA,mBAAO,KAAP;AACH,SAJD,MAIO;AACH,mBAAO,QAAQ,KAAR,EAAe,OAAf,CAAP;AACH;AACJ,KARK;AASA,YAAS,UAAT,CAAoB,IAApB,GAA2B,WAA3B;AACN,aAAS,uBAAT,CAAiC,aAAjC,EAAwD,QAAxD,EAAiG;AAC7F,YAAG,CAAC,QAAD,IAAa,SAAS,MAAT,IAAiB,CAAjC,EAAoC;AAChC,kBAAM,IAAI,KAAJ,CAAU,sBAAV,CAAN;AACH,SAFD,MAEO;AACG,oBAAS,QAAT,GAAoB,QAApB;AACA,oBAAS,IAAT,GAAgB,aAAhB;AACN,mBAAO,OAAP;AACH;AACJ;AACD,WAAyB,wBAAwB,WAAxB,EAAqC,KAArC,CAAzB;AACH;AAEM,IAAM,kDAAqB,sBAA3B,C;;;;;;;;;;;;;;;;AC1EP;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWA,IAAM,WAAW,wBAAS;AACtB,YAAQ;AAAM;AAAuD;AAD/C,CAAT,CAAjB;AAIA,IAAM,cAAc,wBAAS;AACzB,YAAQ;AAAM;AAA6D,KADlD;AAEzB,aAAS;AAAM;AAAuB;AAFb,CAAT,CAApB;AA4CA;AAA8B;AAC1B,sBAAY,KAAZ,EAAoC;AAApC,oBACI,kBAAM,KAAN,KAAY,IADhB;AAEI,cAAK,KAAL,GAAa;AACT,qBAAS,MAAM;AADN,SAAb;;AAGH;AACD,qDAAkB,KAAlB,EAA0C;AACtC,gBAAQ,GAAR,CAAY,WAAZ,EAAyB,MAAM,OAA/B;AACA,aAAK,QAAL,CAAc;AACV,qBAAS,MAAM;AADL,SAAd;AAGH,KALD;AAMA;AACI,aAAK,KAAL,CAAW,aAAX,CAAyB;AACrB,kBAAM,SADe;AAErB;AACA,kBAAM,iBAAkB,IAAI,IAAJ,EAAD,CAAa,OAAb;AAHF,SAAzB;AAKH,KAND;AAOA;AACI,eAAO,0LAAP;AAKH,KAND;AApBS,eAAQ,YAvCpB,wCAAiB;AACd,kBAAU,UADI;AAEd,oBAAY;AACR,sBAAQ,QADA;AAER,yBAAW;AAFH,SAFE;AAMd,iBAAS;AACL,6BAAiB,yBAAC,KAAD,EAAM;AACnB,oCACO,MAAM,GADb;AAGH,aALI;AAML;AACA,gCAAoB,4BAAC,QAAD,EAAS;AAAK,uBAAC;AAC/B,mCAAe,uBAAC,IAAD,EAAK;AAAK,+BAAC,SAAD,IAAC,CAAD;AAAgB;AADV,iBAAD;AAEhC,aATG;AAUL,sBAAU,CACN;AACI,sBAAM,KADV;AAEI;AACA,0BAAU,kBAAC,KAAD,EAAQ,MAAR,EAAc;AACpB,4BAAO,OAAO,IAAd;AACI,6BAAK,SAAL;AAAgB;AACZ,6DACO,KADP,GACY,EACR,SAAS,OAAO,IADR,EADZ;AAIH;AACD;AAAS;AACL,uCAAO;AACH,6CAAS;AADN,iCAAP;AAGH;AAXL;AAaH;AAjBL,aADM;AAVL;AANK,KAAjB,CAuCoB,E,yCAAA,GAAR,QAAQ,CAAR;AA2Bb;AAAC,CA3BD,CAA8B,oBAA9B;QAAa,Q,GAAA,Q;;kBA6BE,UAAC,KAAD,EAAM;AACX,aAA2B,qBAAS,OAAT,EAAkB,IAAlB,CAA3B;AAAA,QAAC,UAAD;AAAA,QAAK,WAAQ,KAAb;AAAA,QAAe,WAAQ,KAAvB;AACA,aAAmB,qBAAS,SAAT,EAAoB,KAApB,CAAnB;AAAA,QAAC,UAAD;AAAA,QAAK,aAAU,KAAf;AACA,aAAiB,qBAAS,OAAT,EAAkB,MAAM,KAAxB,CAAjB;AAAA,QAAC,UAAD;AAAA,QAAK,WAAQ,KAAb;AACN,4BAAY;AACR,iBAAS,aAAa,CAAtB;AACA,mBAAW,IAAX;AACH,KAHD,EAGG;AACC,cAAM;AADP,KAHH;AAMA,0BAAe,UAAC,IAAD,EAAO,EAAP,EAAc;YAAN,QAAK,Q;AACxB,iBAAS,MAAM,KAAf;AACA,eAAO;AACH,oBAAQ,GAAR,CAAY,mBAAZ,EAAiC,MAAjC;AACH,SAFD;AAGH,KALD;AAMA,WAAO,4TAAP;AAUH,C;;;;;;;;;;;;;;;;ACpHD;;AAQA,IAAM,iBAAiB,SAAjB,cAAiB;AACnB,WAAO,s+CAAP;AAcH,CAfD;AAgBA,IAAM,eAAe,SAAf,YAAe,CAAC,EAAD,EAAgC;QAA9B,UAAO,U;QAAE,aAAU,a;QAAE,WAAQ,W;AAC1C,aAAsB,qBAAS,YAAT,EAAuB;AAC/C,iBAAO,OADwC;AAE/C,kBAAQ,QAFuC;AAG/C,oBAAU;AAHqC,KAAvB,CAAtB;AAAA,QAAC,UAAD;AAAA,QAAK,gBAAa,KAAlB;AAKN,0BAAU,UAAC,IAAD,EAAO,EAAP,EAAgB;YAAP,QAAK,Q;AACpB,YAAG,SAAS,kBAAZ,EAAgC;AAC5B,0BAAc;AACV,yBAAU,MAAc,OADd;AAEV,0BAAW,MAAc,QAFf;AAGV,4BAAa,MAAc;AAHjB,aAAd;AAKH;AACJ,KARD;AASA,WAAO,gGAAP;AACH,CAhBD;AAiBO,IAAM,8BAAW,SAAX,QAAW,CAAC,OAAD,EAA6B;AACjD,WAAO;AACG,iBAAkB,qBAAS,QAAT,EAAmB,KAAnB,CAAlB;AAAA,YAAC,UAAD;AAAA,YAAK,YAAS,KAAd;AACE,oBAAU,qBAAS,YAAT,EAAuB,mBAAmB,0BAAM,IAAN,EAA1C,EAAL,CAAK,CAAV;AACF,iBAAkB,qBAAS,YAAT,EAAuB;AAC3C,qBAAS,IADkC;AAE3C,uBAAW,KAFgC;AAG3C,wBAAY;AAH+B,SAAvB,CAAlB;AAAA,YAAC,UAAD;AAAA,YAAK,YAAS,KAAd;AAKN,YAAM,kBAAkB,yBAAa,gBAAb,EAA+B,QAAQ,OAAR,IAAmB,cAAlD,CAAxB;AACA,iCAAa,WAAb,EAA0B,QAAQ,KAAR,IAAiB,YAA3C;AACA,iCAAa,SAAb,EAAwB,QAAQ,OAAR,IAAmB,cAA3C;AACA,6BAAS,WAAT,EAAsB,QAAQ,SAA9B;AACA,8BAAU,UAAC,IAAD,EAAK;AACX,gBAAG,SAAS,UAAZ,EAAwB;AACpB,oBAAG,OAAO,QAAQ,MAAf,KAA0B,UAA7B,EAAyC;AACrC,4BAAQ,MAAR,GAAiB,IAAjB,CAAsB,UAAC,IAAD,EAAS;AAC3B,4BAAG,KAAK,YAAL,KAAsB,OAAO,KAAK,OAAZ,KAAwB,UAAjD,EAA6D;AACzD,gCAAM,gBAAe,KAAK,OAA1B;AACA,4CAAgB,aAAhB;AACA,sCAAU;AACN,2CAAW;AADL,6BAAV;AAGH,yBAND,MAMO;AACH,sCAAU;AACN,yCAAS,uDADH;AAEN,2CAAW;AAFL,6BAAV;AAIH;AACD,kCAAU,IAAV;AACA;AACA;AACA;AACA;AACH,qBAlBD,EAkBG,KAlBH,CAkBS,UAAC,GAAD,EAAI;AACT;AACA,gCAAQ,KAAR,CAAc,GAAd;AACA,kCAAU;AACN,qCAAS,+BAA+B,IAAI,OADtC;AAEN,uCAAW;AAFL,yBAAV;AAIA,kCAAU,IAAV;AACH,qBA1BD;AA2BH;AACJ;AACJ,SAhCD;AAiCA,eAAO,sZAAP;AAKH,KAlDD;AAmDH,CApDM,C;;;;;;;;;;;;;;;;AC1CP;;AASA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAeA;AACA,0CAAyB,sBAAS,2BAAT,CAAzB,EAAoD,0BAApD,EAAoE,6BAApE;AAKA;AAAmC;AAwB/B,2BAAY,KAAZ,EAAyC;AAAzC,oBACI,kBAAM,KAAN,KAAY,IADhB;AAEI,cAAK,eAAL,CAAqB,QAArB,GAAgC,MAAM,QAAtC;AACA,cAAK,eAAL,CAAqB,QAArB,GAAgC,MAAM,QAAtC;AACA,gBAAO,MAAM,SAAb;AACI,iBAAK,gBAAL;AACI,sBAAK,eAAL,CAAqB,SAArB,GAAiC,cAAjC;AACA;AACJ,iBAAK,cAAL;AACI,sBAAK,eAAL,CAAqB,SAArB,GAAiC,YAAjC;AACA;AACJ,iBAAK,eAAL;AACI,oBAAG,OAAO,MAAM,aAAb,KAA+B,UAAlC,EAA8C;AAC1C,0BAAK,eAAL,CAAqB,SAArB,GAAkD,IAAI,MAAM,aAAV,EAAlD;AACH,iBAFD,MAEO;AACH,0BAAM,IAAI,KAAJ,CAAU,2DAAV,CAAN;AACH;AACD;AACJ;AACI,sBAAK,eAAL,CAAqB,SAArB,GAAiC,cAAjC;AAfR;AAiBA;AACA,gBAAQ,GAAR,CAAY,qBAAZ;;AACH;AACD;AACI,6CAAoB,0BAApB,EAAoC,6BAApC;AACA,mDAA0B,KAAK,eAA/B;AACA,aAAK,gBAAL;AACH,KAJD;AAKA;AACI,YAAI,YAAY,KAAK,KAAL,CAAW,QAAX,IAAuB,EAAvC;AACA;AACA,YAAG,KAAK,eAAL,CAAqB,QAAxB,EAAkC;AAC9B,gBAAI,eAAe,KAAK,eAAL,CAAqB,SAArB,CAA+B,OAA/B,CAAuC,KAAK,eAAL,CAAqB,WAA5D,CAAnB;AACA,gBAAG,CAAC,KAAK,OAAL,CAAa,YAAb,CAAJ,EAAgC;AAC5B,qBAAK,eAAL,CAAqB,SAArB,GAAiC,KAAK,KAAL,CAAW,YAAX,CAAjC;AACA,+BAAe,IAAf;AACH;AACJ;AACD,aAAK,SAAL,CAAe,SAAf,EAA0B,KAAK,eAAL,CAAqB,SAA/C,EAA0D,IAA1D;AACA,oBAAY,IAAZ;AACA,aAAK,eAAL,CAAqB,QAArB,GAAgC,IAAhC,CAZJ,CAY0C;AACtC,eAAO,KAAK,eAAL,CAAqB,QAA5B;AACH,KAdD;AAeA;AACI,eAAO,aAAP;AACH,KAFD;AAGQ,wCAAR,UAAkB,OAAlB,EAAgC,SAAhC,EAAgD,OAAhD,EAA+D;AAA/D;AACI,YAAI,KAAK,UAAL,CAAgB,OAAhB,CAAJ,EAA8B;AAC1B,gBAAM,YAAY,QAAQ,SAAR,EAAmB;AACjC,sBAAM;AAD2B,aAAnB,CAAlB;AAGA,gBAAM,iBAAe,QAAQ,OAAR,CAAgB,KAAhB,EAAuB,EAAvB,CAArB;AACA,mBAAO,KAAK,eAAL,CAAqB,YAArB,CAAkC,cAAlC,CAAP;AACA,mBAAO,cAAP,CAAsB,KAAK,eAAL,CAAqB,YAA3C,EAAyD,cAAzD,EAAuE;AACnE,8BAAc,IADqD;AAEnE,4BAAY,IAFuD;AAGnE,qBAAK;AACD,2BAAO,OAAP;AACH,iBALkE;AAMnE,qBAAK;AACD;AACA,4BAAQ,KAAR,CAAc,uEAAmB,cAAnB,GAA+B,GAA7C,EAAkD,OAAlD;AACH;AATkE,aAAvE;AAWA,gBAAG,cAAc,SAAd,IAA2B,SAAS,SAAvC,EAAkD;AAC9C;AACA,wBAAQ,KAAR,CAAc,wCAAwC,cAAtD;AACH,aAHD,MAGO;AACH,qBAAK,gBAAL,CAAsB,SAAtB;AACA,uBAAO,SAAP;AACH;AACJ,SAxBD,MAwBO;AACH,mBAAO,IAAP,CAAY,OAAZ,EAAqB,GAArB,CAAyB,UAAC,MAAD,EAAe;AACpC,oBAAG,CAAC,UAAU,MAAV,CAAJ,EAAuB;AACnB,8BAAU,MAAV,IAAoB,EAApB;AACH;AACD,oBAAM,SAAS,MAAK,SAAL,CACX,QAAQ,MAAR,CADW,EAEX,UAAU,MAAV,CAFW,EAGV,CAAC,MAAK,OAAL,CAAa,OAAb,CAAD,GAAyB,CAAC,OAAD,EAAU,MAAV,EAAkB,IAAlB,CAAuB,GAAvB,CAAzB,GAAuD,MAH7C,CAAf;AAKA,oBAAG,MAAH,EAAW;AACP,0BAAK,sBAAL,CAA4B,SAA5B,EAAuC,MAAvC,EAA+C,MAA/C;AACH;AACJ,aAZD;AAaH;AACJ,KAxCO;AAyCA,+CAAR,UAAyB,UAAzB,EAAwC;AAAxC;AACI,YAAG,KAAK,QAAL,CAAc,UAAd,CAAH,EAA8B;AAC1B,mBAAO,IAAP,CAAY,UAAZ,EAAwB,GAAxB,CAA4B,UAAC,QAAD,EAAc;AACtC,iBAAC,UAAC,QAAD,EAAgB,UAAhB,EAA+B;AAC5B,wBAAG,MAAK,QAAL,CAAc,UAAd,CAAH,EAA8B;AAC1B,8BAAK,gBAAL,CAAsB,UAAtB;AACH;AACD,2BAAO,cAAP,CAAsB,UAAtB,EAAkC,QAAlC,EAA4C;AACxC,sCAAc,IAD0B;AAExC,oCAAY,IAF4B;AAGxC,6BAAK;AACD,mCAAO,UAAP;AACH,yBALuC;AAMxC,6BAAK;AACD;AACA,oCAAQ,KAAR,CAAc,sEAAkB,QAAhC,EAA4C,UAA5C;AACH;AATuC,qBAA5C;AAWH,iBAfD,EAeG,QAfH,EAea,WAAW,QAAX,CAfb;AAgBH,aAjBD;AAkBH;AACJ,KArBO;AA/GD,6BAA4C;AAC/C,kBAAU;AACN,yBAAa,qBADP;AAEN,kBAAM,2BAAU;AAFV,SADqC;AAK/C,uBAAe;AACX,yBAAa,wBADF;AAEX,kBAAM,2BAAU;AAFL,SALgC;AAS/C,kBAAU;AACN,0BAAc,EADR;AAEN,yBAAa,aAFP;AAGN,kBAAM,2BAAU,MAAV,CAAiB;AAHjB,SATqC;AAc/C,mBAAW;AACP,0BAAc,gBADP;AAEP,yBAAa,WAFN;AAGP,kBAAM,2BAAU,UAAV,CAAqB,CAAC,gBAAD,EAAmB,cAAnB,EAAmC,eAAnC,CAArB,EAA0E;AAHzE;AAdoC,KAA5C;AAsBP,gBADC,uBAAU,2BAAV,CACD,E,0BAAyB,2B,CAAzB,G,uBAAA,E,iBAAA,E,KAAyC,CAAzC;AAvBS,oBAAa,YAHzB,wCAAiB;AACd,kBAAU;AADI,KAAjB,CAGyB,E,yCAAA,GAAb,aAAa,CAAb;AAsIb;AAAC,CAtID,CAAmC,oBAAnC;QAAa,a,GAAA,a","file":"./script/main.min.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"chunks/\" + ({\"1\":\"AsyncApp\",\"2\":\"AsyncRouter\"}[chunkId]||chunkId) + \"_\" + \"f7425797\" + \"_\" + chunkId + \".min.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = this[\"webpackJsonp\"] = this[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 32);\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./BaseModule/Common\"));\n__export(require(\"./BaseModule/StaticCommon\"));\n__export(require(\"./Canvas/Canvas\"));\n__export(require(\"./Animation/MathAnimationApi\"));\n__export(require(\"./BaseModule/QueueCallFun\"));\n//# sourceMappingURL=index.js.map","import \"reflect-metadata\";\r\nimport { addToClassPool } from \"../init/globalUtil\";\r\nimport { createClassFactory } from \"./createClassFactory\";\r\n// tslint:disable:variable-name\r\n\r\nexport const defineReadonlyProperty = (target:any, propertyKey: string, propertyValue: any) => {\r\n    Object.defineProperty(target, propertyKey, {\r\n        configurable: false,\r\n        enumerable: true,\r\n        value: propertyValue,\r\n        writable: false\r\n    });\r\n};\r\n\r\nexport function injectable(className: string): any {\r\n    if(className === undefined || className === null || className.length<=0) {\r\n        throw new Error(\"Injectable注入对象必须设置类名。\");\r\n    }\r\n     // tslint:disable-next-line:variable-name\r\n    return (_constructor:Function) => {\r\n        const paramTypes: Function[] = Reflect.getMetadata(\"design:paramtypes\",_constructor);\r\n        // 已注册\r\n        // tslint:disable-next-line:curly\r\n        addToClassPool(className, _constructor, () => {\r\n            if(paramTypes) {\r\n                for (const val of paramTypes) {\r\n                    // tslint:disable-next-line:curly\r\n                    if (val === _constructor) {\r\n                        throw new Error(\"不能依赖自己\");\r\n                    } else if (elmerData.classPool.indexOf(val) === -1) {\r\n                        throw new Error(`类【${className}】construct参数${val}没有被注册`);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n}\r\n\r\n/**\r\n * 注解初始化类，在全局生成唯一个对象\r\n * @param _constructor 初始化类\r\n * @param classPoolName 全局类唯一识别名称，当类没有使用Injectable时，通过此参数做注册\r\n */\r\nexport function autowired<T>(_constructor:new(...args:any[]) =>T, className?: string, ...argv:any[]): any {\r\n    return (target: any, propertyKey: string): void => {\r\n          target[propertyKey] = createClassFactory(_constructor, {\r\n              argv,\r\n              className\r\n          });\r\n    };\r\n}\r\n","import { StaticCommon as utils } from \"elmer-common\";\n\nexport type TypeHookStore = {\n    useState: any;\n    useCallback: any;\n    useComponent: any;\n    useEffect: any;\n    getNode: any;\n};\n\nexport const wikiState: any = {};\n\nexport const getWikiState = <T>(key: string): T => {\n    const missionId = wikiState[\"missionId\"];\n    const missionObj = wikiState[missionId];\n    return missionObj ? missionObj[key] : null;\n};\n\nexport const setWikiState = (key: string, value:any): void => {\n    const missionId = wikiState[\"missionId\"];\n    let missionObj = wikiState[missionId];\n    if(!missionObj) {\n        missionObj = {};\n        wikiState[missionId] = missionObj;\n    }\n    utils.setValue(missionObj, key, value);\n};\n\nexport const getCurrentMissionId = (): string => {\n    return wikiState[\"missionId\"];\n};\n","const GLOBAL_STATE_KEY_FOR_ELMERUI = \"__elmerUI__\";\r\n\r\nexport const globalVar = () => {\r\n    if(!globalThis[GLOBAL_STATE_KEY_FOR_ELMERUI]) {\r\n        globalThis[GLOBAL_STATE_KEY_FOR_ELMERUI] = {\r\n            classPool: [],\r\n            components: {},\r\n            elmerState: {},\r\n            objPool: {}\r\n        };\r\n    }\r\n    return globalThis[GLOBAL_STATE_KEY_FOR_ELMERUI];\r\n};\r\n/**\r\n * 定义全局状态，通过此方法定义，防止被其他模块定义混乱而被覆盖掉\r\n * @param stateKey  stateKey\r\n * @param stateValue stateValue\r\n * @param ignoreError [boolean] if ignoreError === false then throw error\r\n */\r\nexport const defineGlobalState = (stateKey: string, stateValue: any, ignoreError?: boolean) => {\r\n    const globalState = globalVar();\r\n    if(stateKey !== undefined && stateKey !== null && stateKey.length>0) {\r\n        Object.defineProperty(globalState.elmerState, stateKey, {\r\n            configurable: false,\r\n            enumerable: true,\r\n            value: stateValue,\r\n            writable: false\r\n        });\r\n    } else {\r\n        if(!ignoreError) {\r\n            throw new Error(\"定义全局状态失败，stateKey不能为空！\");\r\n        }\r\n    }\r\n};\r\n\r\nexport const setGlobalState = (stateKey: string, stateValue: any, ignoreError?: boolean) => {\r\n    defineGlobalState(stateKey, stateValue, ignoreError);\r\n};\r\n\r\nexport const getGlobalState = (stateKey: string): any => {\r\n    return globalVar().elmerState[stateKey];\r\n};\r\n/**\r\n * 定义全局变量，保存到window对象\r\n * @param varKey 变量名称\r\n * @param varValue 变量值\r\n */\r\nexport const defineGlobalVar = (varKey:string, varValue: any) => {\r\n    if(varKey !== undefined && varKey !== null && varKey.length>0) {\r\n        Object.defineProperty(globalThis, varKey, {\r\n            configurable: false,\r\n            enumerable: true,\r\n            value: varValue,\r\n            writable: false\r\n        });\r\n    } else {\r\n        throw new Error(\"定义全局状态失败，stateKey不能为空！\");\r\n    }\r\n};\r\n\r\nexport const getGlobalVar = (varkey:string): any => {\r\n    return globalThis[varkey];\r\n};\r\n\r\nexport const addToClassPool = (className: string, factory: Function, fn?:Function): void => {\r\n    if(factory) {\r\n        const elmerData = globalVar();\r\n        let hasExists = false;\r\n        factory.prototype.className = className;\r\n        for(const tmpClass of elmerData.classPool) {\r\n            if(tmpClass.prototype.className === className) {\r\n                hasExists = true;\r\n                break;\r\n            }\r\n        }\r\n        if(!hasExists) {\r\n            typeof fn === \"function\" && fn();\r\n            elmerData.classPool.push(factory);\r\n        }\r\n    }\r\n};\r\n// tslint:disable \r\nexport const __extends = (function () {\r\n    const ignorePropKeys = [\"selector\", \"template\", \"model\",\"service\",\"i18n\", \"connect\",\"setData\",\"setState\", \"render\"]; // 忽略属性是不需要继承的组件特殊属性\r\n    const extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) {\r\n            for (var p in b) {\r\n                if (b.hasOwnProperty(p) && ignorePropKeys.indexOf(p)<0){\r\n                    d[p] = b[p];\r\n                }\r\n            }\r\n        };\r\n    return function (d: any, b: any) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n// tslint:enable\r\n","export * from \"./hookUtils\";\nexport * from \"./useEffect\";\nexport * from \"./useState\";\nexport * from \"./useCallback\";\nexport * from \"./useComponent\";\nexport * from \"./getNode\";\n","import { Common } from \"elmer-common\";\nimport { IVirtualElement } from \"elmer-virtual-dom\";\nimport { IElmerEvent } from \"../events/IElmerEvent\";\nimport { IDeclareI18n, IReduxConnect } from \"./IDeclareComponent\";\nimport { IPropCheckRule } from \"../propsValidation\";\nimport { IComponent } from \"./IComponent\";\n\nexport const CONST_CLASS_COMPONENT_FLAG = \"COMPONENT_113df7d2-555c-53a1-30fb-58627fd7\";\n\nexport abstract class Component<P={}, S={}, C={}> extends Common implements IComponent {\n    static flag:string = CONST_CLASS_COMPONENT_FLAG;\n    propType?: {[PT in keyof P]?: IPropCheckRule};\n    parent?: HTMLElement;\n    dom: any;\n    props?: P;\n    state?: S;\n    context?: C;\n    model?: any;\n    service?: any;\n    vdom: IVirtualElement;\n    htmlCode?: string;\n    connect?: IReduxConnect;\n    i18nConfig?: IDeclareI18n;\n    i18nLocale?: string;\n    i18nRegion?: string;\n    i18nRootKey?: string;\n    i18nData?: any;\n    constructor(props: P, context?: C) {\n        super();\n        this.props = props;\n        this.context = context;\n    }\n    public $render?(): any;\n    public $contextData?(context: any): void;\n    public $willReceiveProps?(propData: P, oldProps: P): void;\n    public $init?(): void;\n    public $inject?(): void;\n    public $before?(): void;\n    public $beforeVirtualRender?(dom?: IVirtualElement): void;\n    public $beforeDiff?(dom?: IVirtualElement): void;\n    public $beforeRender?(): boolean;\n    public $afterVirtualRender?(dom?: IVirtualElement): void;\n    public $resize?(event:IElmerEvent): void;\n    public $unMount?(): void;\n    public $didMount?(): void;\n    public $didUpdate?(): void;\n    public $willMount?(): void;\n    /**\n     * 更新数据，触发组件重新渲染(已废弃)\n     * @deprecated\n     * @param data 更新数据\n     * @param argv 其他参数\n     */\n    setData<T>(data: {} & T, ...argv:any[]): Promise<any> {\n        throw new Error(\"Method not implemented.\");\n    }\n    /**\n     * 更新数据，触发组件重新渲染，数据只更新到state属性\n     * @param data 更新数据\n     * @param argv 其他参数\n     * @returns {Promise<any>}\n     */\n    setState<T>(data: T & {[SP in keyof S]?:S[SP]}, ...argv:any[]): Promise<any> {\n        throw new Error(\"Method not implemented.\");\n    }\n}\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elmer_common_1 = require(\"elmer-common\");\nvar ASyntax = /** @class */ (function (_super) {\n    __extends(ASyntax, _super);\n    function ASyntax() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ASyntax.prototype.readVarString = function (str) {\n        var myText = str;\n        var result = \"\";\n        var hasVar = false;\n        if (/^\\s*\"/.test(str)) {\n            var char = String.fromCharCode(255);\n            var nstr = str.replace(/\\\\\"/g, char);\n            var strM = nstr.match(/^\"([\\s\\S\\\\\"^\"]*?)\"/);\n            if (strM) {\n                var varStr = strM[1];\n                var leftStr = str.substr(strM[0].length);\n                result = varStr.split(char).join('\\\"');\n                myText = leftStr.split(char).join('\\\"');\n                hasVar = true;\n            }\n        }\n        else if (/^\\s*'/.test(str)) {\n            var char = String.fromCharCode(255);\n            var nstr = str.replace(/\\\\'/g, char);\n            var strM = nstr.match(/^'([\\s\\S\\\\'^']*?)'/);\n            if (strM) {\n                var varStr = strM[1];\n                var leftStr = str.substr(strM[0].length);\n                result = varStr.split(char).join(\"\\'\");\n                myText = leftStr.split(char).join(\"\\'\");\n                hasVar = true;\n            }\n        }\n        return {\n            code: myText,\n            hasVar: hasVar,\n            var: result\n        };\n    };\n    /**\n     * 运行单行判断脚本\n     * @param code 脚本代码\n     * @param component 当前绑定组件用于读取指定数据\n     * @param optionData 当前绑定过程读取可选数据\n     */\n    ASyntax.prototype.runLimitScript = function (code, component, optionData) {\n        var _this = this;\n        var orChar = String.fromCharCode(255); // 替换符号|| 符号\n        var andChar = String.fromCharCode(254); // 替换 && 符号\n        var xOrChar = String.fromCharCode(253); // 替换 | 符号\n        var xAndChar = String.fromCharCode(252); // 替换 & 符号\n        var varCode = (code || \"\").replace(/^\\s*/, \"\").replace(/\\s*$/, \"\").replace(/\\|\\|/g, orChar).replace(/\\&\\&/g, andChar).replace(/\\|/, xOrChar).replace(/\\&/, xAndChar);\n        var varArr = varCode.split(/[+\\-\\*\\/%\\?\\:]/);\n        var varArrSplitArr = varCode.match(/([+\\-\\*\\/%\\?\\:])/g);\n        var logicChars = {\n            eq: \"==\",\n            gt: \">\",\n            gteq: \">=\",\n            lt: \"<\",\n            lteq: \"<=\",\n            neq: \"!=\",\n            seq: \"===\",\n            sneq: \"!==\"\n        };\n        var missionId = this.guid();\n        var logicVar = {};\n        var logicCodeArr = [];\n        var index = 0;\n        var mIndex = 0;\n        var varBindFunc = function (xcode) {\n            var varKey = missionId + \"_\" + index;\n            var tmpCode = xcode.split(orChar).join(\"||\").split(andChar).join(\"&&\").split(xOrChar).join(\"|\").split(xAndChar).join(\"&\");\n            if (tmpCode === \"||\" || tmpCode === \"&&\" || tmpCode === \"|\" || tmpCode === \"&\") {\n                logicCodeArr.push(tmpCode);\n            }\n            else {\n                if (/^\"/.test(tmpCode) && /\"$/.test(tmpCode)) {\n                    logicVar[varKey] = tmpCode.replace(/^\"/, \"\").replace(/\"$/, \"\");\n                    logicCodeArr.push(\"obj[\\\"\" + varKey + \"\\\"]\");\n                }\n                else if (/^'/.test(tmpCode) && /'$/.test(tmpCode)) {\n                    logicVar[varKey] = tmpCode.replace(/^'/, \"\").replace(/'$/, \"\");\n                    logicCodeArr.push(\"obj[\\\"\" + varKey + \"\\\"]\");\n                }\n                else if (logicChars[tmpCode]) {\n                    logicCodeArr.push(logicChars[tmpCode]);\n                }\n                else if (/true/i.test(tmpCode) || /false/i.test(tmpCode)) {\n                    logicCodeArr.push(tmpCode);\n                }\n                else if (/^[0-9]{1,}$/.test(tmpCode)) {\n                    logicCodeArr.push(parseInt(tmpCode, 10));\n                }\n                else if (/^[0-9]{1,}\\.[0-9]{1,}$/.test(tmpCode)) {\n                    logicCodeArr.push(parseFloat(tmpCode));\n                }\n                else {\n                    if (tmpCode !== \" \") {\n                        var optionValue = optionData ? _this.getValue(optionData, tmpCode) : undefined;\n                        logicVar[varKey] = undefined === optionValue ? _this.getValue(component, tmpCode) : optionValue;\n                        logicCodeArr.push(\"obj[\\\"\" + varKey + \"\\\"]\");\n                    }\n                }\n            }\n            index += 1;\n        };\n        varArr.map(function (xcode) {\n            var tmpCode = xcode.replace(/^\\s{1,}/, \"\").replace(/\\s{1,}$/, \"\");\n            var tmpSplitArr = tmpCode.split(\" \");\n            if (tmpSplitArr && tmpSplitArr.length > 1) {\n                tmpSplitArr.map(function (itemCode) {\n                    varBindFunc(itemCode);\n                });\n            }\n            else {\n                varBindFunc(tmpCode);\n            }\n            if (varArrSplitArr && !_this.isEmpty(varArrSplitArr[mIndex]) && varArrSplitArr[mIndex] !== \" \") {\n                logicCodeArr.push(varArrSplitArr[mIndex]); // 将分割语句字符还原回去\n            }\n            mIndex += 1;\n        });\n        var runCode = logicCodeArr.join(\" \");\n        var runFunc = new Function(\"obj\", \"return \" + runCode + \";\");\n        return runFunc(logicVar);\n    };\n    return ASyntax;\n}(elmer_common_1.Common));\nexports.ASyntax = ASyntax;\n//# sourceMappingURL=ASyntax.js.map","import { autoInit as autoInitFn  } from \"./createClassFactory\";\r\nimport { autowired as Autowired, injectable as injectableFn } from \"./injectable\";\r\n\r\nexport const autowired = Autowired;\r\n/**\r\n * Injectable 命名不规范，将要弃用\r\n * Duplicate todo\r\n */\r\nexport const injectable = injectableFn;\r\n// export const globalClassFactory = GlobalClassFactory;\r\nexport const autoInit = autoInitFn;\r\n\r\nexport default {\r\n    title: \"Injectable\",\r\n    version: \"1.0.1\"\r\n};\r\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./BaseModule/Common\"));\n__export(require(\"./BaseModule/StaticCommon\"));\n__export(require(\"./Canvas/Canvas\"));\n__export(require(\"./Animation/MathAnimationApi\"));\n__export(require(\"./BaseModule/QueueCallFun\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.REDUX_REDUCER_DEFINE_STATE_KEY = \"ReduxReducerDefined\";\nexports.REDUX_GLOBAL_STATE_KEY = \"ReduxStateData\";\nexports.REDUX_GLOBAL_LISTEN_KEY = \"ReduxStateListener\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar StaticCommon = /** @class */ (function () {\n    function StaticCommon() {\n    }\n    StaticCommon.getType = function (val) {\n        return Object.prototype.toString.call(val);\n    };\n    StaticCommon.isString = function (val) {\n        return StaticCommon.getType(val) === \"[object String]\";\n    };\n    StaticCommon.isObject = function (val) {\n        return StaticCommon.getType(val) === \"[object Object]\";\n    };\n    StaticCommon.isArray = function (val) {\n        return StaticCommon.getType(val) === \"[object Array]\";\n    };\n    StaticCommon.isNumeric = function (val) {\n        return !isNaN(val);\n    };\n    StaticCommon.isDOM = function (val) {\n        return /^(\\[object\\s*)HTML([a-zA-Z]*)(Element\\])$/.test(StaticCommon.getType(val));\n    };\n    StaticCommon.isSVGDOM = function (val) {\n        return /^\\[object\\sSVG([a-zA-Z]*)Element\\]$/.test(StaticCommon.getType(val));\n    };\n    StaticCommon.isFunction = function (val) {\n        return StaticCommon.getType(val) === \"[object Function]\";\n    };\n    StaticCommon.isNodeList = function (val) {\n        return StaticCommon.getType(val) === \"[object NodeList]\";\n    };\n    StaticCommon.isRegExp = function (val) {\n        return StaticCommon.getType(val) === \"[object RegExp]\";\n    };\n    StaticCommon.isEmpty = function (val) {\n        return val === undefined || val === null || (StaticCommon.isString(val) && val.length <= 0);\n    };\n    StaticCommon.isPromise = function (val) {\n        return StaticCommon.getType(val) === \"[object Promise]\";\n    };\n    StaticCommon.isGlobalObj = function (val) {\n        return this.getType(val) === \"[object global]\";\n    };\n    // tslint:disable-next-line:no-shadowed-variable\n    StaticCommon.isEqual = function (a, b) {\n        if (a === b) {\n            return a !== 0 || 1 / a === 1 / b;\n        }\n        if (a == null || b == null) {\n            return a === b;\n        }\n        var classNameA = StaticCommon.getType(a), classNameB = StaticCommon.getType(b);\n        if (classNameA !== classNameB) {\n            return false;\n        }\n        else {\n            switch (classNameA) {\n                case \"[object RegExp]\":\n                case \"[object String]\":\n                    return \"\" + a === \"\" + b;\n                case \"[object Number]\":\n                    if (+a !== +a) {\n                        return +b !== +b;\n                    }\n                    return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n                case \"[object Date]\":\n                case \"[object Boolean]\":\n                    return +a === +b;\n            }\n            if (classNameA === \"[object Object]\") {\n                var propsA = Object.getOwnPropertyNames(a), propsB = Object.getOwnPropertyNames(b);\n                if (propsA.length !== propsB.length) {\n                    return false;\n                }\n                else {\n                    for (var i = 0; i < propsA.length; i++) {\n                        var propName = propsA[i];\n                        if (a[propName] !== b[propName]) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n            }\n            if (classNameA === \"[object Array]\") {\n                return a.toString() === b.toString();\n            }\n        }\n    };\n    StaticCommon.sleepCall = function (fn, timeout, obj) {\n        if (typeof fn === \"function\") {\n            // let handler: number | null | undefined = null;\n            var tim = timeout || 200;\n            var sleep = function () {\n                if (obj) {\n                    fn.call(obj);\n                }\n                else {\n                    fn();\n                }\n                // handler !== null && clearTimeout(handler);\n            };\n            setTimeout(sleep, tim);\n        }\n    };\n    StaticCommon.getValue = function (data, key, defaultValue) {\n        var keyValue = key !== undefined && key !== null ? key : \"\";\n        if (/\\./.test(keyValue)) {\n            var keyArr = keyValue.split(\".\");\n            var isFind = false;\n            var index = 0;\n            var keyStr = \"\";\n            var tmpData = data;\n            while (index <= keyArr.length - 1) {\n                keyStr = keyArr[index];\n                isFind = index === keyArr.length - 1;\n                if (StaticCommon.isArray(tmpData) && StaticCommon.isNumeric(keyStr)) {\n                    keyStr = parseInt(keyStr, 10);\n                }\n                if (!isFind) {\n                    var nextKey = keyArr[keyArr.length - 1];\n                    if (StaticCommon.isArray(tmpData) || StaticCommon.isObject(tmpData) || StaticCommon.isGlobalObj(tmpData)) {\n                        //\n                        tmpData = tmpData[keyStr];\n                    }\n                    if (tmpData && index === keyArr.length - 2) {\n                        if (nextKey === \"key\") {\n                            tmpData = tmpData.key;\n                            isFind = true;\n                        }\n                        else if (nextKey === \"length\") {\n                            tmpData = tmpData.length;\n                            isFind = true;\n                        }\n                    }\n                }\n                else {\n                    tmpData = tmpData ? tmpData[keyStr] : undefined;\n                }\n                if (isFind) {\n                    break;\n                }\n                index++;\n            }\n            return isFind ? (undefined !== tmpData ? tmpData : defaultValue) : defaultValue;\n        }\n        else {\n            var rResult = data ? data[keyValue] : undefined;\n            return data ? (undefined !== rResult ? rResult : defaultValue) : defaultValue;\n        }\n    };\n    /**\n     * 给指定对象设置属性值\n     * @param data 设置属性值对象\n     * @param key 设置属性key,属性key有多层可使用.区分\n     * @param value 设置属性值\n     * @param fn 自定义设置值回调\n     */\n    StaticCommon.setValue = function (data, key, value, fn) {\n        var isUpdate = false;\n        if (!StaticCommon.isObject(data)) {\n            throw new Error(\"The parameter of data is not a object\");\n        }\n        if (StaticCommon.isEmpty(key)) {\n            throw new Error(\"The key can not be an empty string\");\n        }\n        if (!StaticCommon.isEmpty(value)) {\n            var keyArr = key.split(\".\");\n            var keyLen = keyArr.length;\n            var index = 0;\n            var tmpData = data;\n            while (index < keyLen) {\n                var cKey = keyArr[index];\n                if (index < keyLen - 1) {\n                    // 不是最后一个节点\n                    if (!StaticCommon.isEmpty(tmpData[cKey])) {\n                        if (StaticCommon.isObject(tmpData[cKey])) {\n                            tmpData = tmpData[cKey];\n                        }\n                        else {\n                            throw new Error(\"Can not set value to attribute of \" + cKey);\n                        }\n                    }\n                    else {\n                        tmpData[cKey] = {};\n                        tmpData = tmpData[cKey];\n                    }\n                }\n                else {\n                    // 要更新数据的节点\n                    if (typeof fn === \"function\") {\n                        fn(tmpData, cKey, value);\n                    }\n                    else {\n                        tmpData[cKey] = value;\n                    }\n                    isUpdate = true;\n                }\n                index++;\n            }\n        }\n        return isUpdate;\n    };\n    /**\n     * 获取随机ID\n     */\n    StaticCommon.getRandomID = function () {\n        var now = new Date();\n        var year = now.getFullYear().toString(), month = now.getMonth() + 1 < 10 ? \"0\" + (now.getMonth() + 1).toString() : (now.getMonth() + 1).toString(), date = now.getDate() < 10 ? \"0\" + now.getDate().toString() : now.getDate().toString(), hour = now.getHours() < 10 ? [\"0\", now.getHours()].join(\"\") : now.getHours().toString(), minute = now.getMinutes() < 10 ? [\"0\", now.getMinutes()].join(\"\") : now.getMinutes().toString(), second = now.getSeconds() < 10 ? [\"0\", now.getSeconds()].join(\"\") : now.getSeconds().toString(), reSecond = now.getMilliseconds();\n        var randValue = parseInt((Math.random() * 9999 + 1000).toString(), 10);\n        return [year, month, date, hour, minute, second, reSecond, randValue].join(\"\");\n    };\n    /**\n     * 字符串有连接符-将自动转换成已首字母大写\n     * @param val 转换文本\n     * @param firstUpperCase 是否大写\n     */\n    StaticCommon.toHumpStr = function (val, firstUpperCase) {\n        if (!this.isEmpty(val)) {\n            var vStr = val.replace(/(^\\-)|(\\-$)/, \"\");\n            var vArr = vStr.split(\"-\");\n            for (var i = 0; i < vArr.length; i++) {\n                if ((i === 0 && firstUpperCase) || i > 0) {\n                    vArr[i] = vArr[i].substr(0, 1).toUpperCase() + vArr[i].substr(1);\n                }\n            }\n            return vArr.join(\"\");\n        }\n        else {\n            return val;\n        }\n    };\n    StaticCommon.humpToStr = function (val) {\n        if (!this.isEmpty(val)) {\n            var vStr = val.substr(0, 1).toLowerCase() + val.substr(1);\n            var rStr = vStr.replace(/([A-Z])/g, function ($1) {\n                return \"-\" + $1.toLowerCase();\n            });\n            return rStr;\n        }\n        return val;\n    };\n    StaticCommon.extend = function (desc, src, setReadOnly, ignoreKeys) {\n        if (!setReadOnly) {\n            if (this.isObject(desc) && this.isObject(src)) {\n                if (Object.assign) {\n                    Object.assign(desc, src);\n                }\n                else {\n                    // tslint:disable-next-line:forin\n                    for (var key in src) {\n                        if (!ignoreKeys || ignoreKeys.indexOf(key) < 0) {\n                            desc[key] = src[key];\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (this.isObject(desc) && this.isObject(src)) {\n                // tslint:disable-next-line:forin\n                for (var key in src) {\n                    if (!ignoreKeys || ignoreKeys.indexOf(key) < 0) {\n                        // 已经存在的属性需要使用delete删除，防止redine error问题\n                        if (desc.hasOwnProperty(key)) {\n                            delete desc[key];\n                        }\n                        this.defineReadOnlyProperty(desc, key, src[key]);\n                    }\n                }\n            }\n        }\n        return desc;\n    };\n    StaticCommon.merge = function (obj1, obj2) {\n        var result = {};\n        if (obj1 && !obj2) {\n            result = obj1;\n        }\n        else if (!obj1 && obj2) {\n            result = obj2;\n        }\n        else if (obj1 && obj2) {\n            if (this.isObject(obj1)) {\n                // tslint:disable-next-line:forin\n                for (var key in obj1) {\n                    result[key] = obj1[key];\n                }\n            }\n            if (this.isObject(obj2)) {\n                for (var sKey in obj2) {\n                    if (!result.hasOwnProperty(sKey)) {\n                        result[sKey] = obj2[sKey];\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    /**\n     * 将字符串转转换成对应的数据类型，遇到true|false转换成bool类型，遇到数字文本转换成数字类型数据\n     * @param data 要转换的数据\n     */\n    StaticCommon.val = function (data) {\n        if (this.isString(data)) {\n            if (!isNaN(data)) {\n                return (data.indexOf(\".\") >= 0 ? parseFloat(data) : parseInt(data, 10));\n            }\n            else {\n                return (/^(true|false)$/.test(data) ? Boolean(data) : data);\n            }\n        }\n        else {\n            return data;\n        }\n    };\n    StaticCommon.defineReadOnlyProperty = function (obj, propertyKey, propertyValue) {\n        (function (paramObj, paramPropertyKey, paramPropertyValue) {\n            paramObj && Object.defineProperty(paramObj, paramPropertyKey, {\n                configurable: true,\n                enumerable: true,\n                value: paramPropertyValue,\n                writable: false\n            });\n        })(obj, propertyKey, propertyValue);\n    };\n    StaticCommon.launchFullscreen = function (element) {\n        if (element.requestFullscreen) {\n            // tslint:disable-next-line: no-floating-promises\n            element.requestFullscreen();\n        }\n        else if (element[\"mozRequestFullScreen\"]) {\n            element[\"mozRequestFullScreen\"]();\n        }\n        else if (element[\"webkitRequestFullscreen\"]) {\n            element[\"webkitRequestFullscreen\"]();\n        }\n        else if (element[\"msRequestFullscreen\"]) {\n            element[\"msRequestFullscreen\"]();\n        }\n    };\n    StaticCommon.exitFullscreen = function () {\n        if (document.exitFullscreen) {\n            // tslint:disable-next-line: no-floating-promises\n            document.exitFullscreen();\n        }\n        else if (document[\"mozCancelFullScreen\"]) {\n            document[\"mozCancelFullScreen\"]();\n        }\n        else if (document[\"webkitExitFullscreen\"]) {\n            document[\"webkitExitFullscreen\"]();\n        }\n    };\n    StaticCommon.isFullScreen = function () {\n        return document[\"isFullScreen\"] || document[\"mozIsFullScreen\"] || document[\"webkitIsFullScreen\"];\n    };\n    StaticCommon.guid = function () {\n        var S4 = function () {\n            // tslint:disable-next-line: no-bitwise\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substr(1);\n        };\n        return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4());\n    };\n    StaticCommon.getUri = function (queryString) {\n        var str = !StaticCommon.isEmpty(queryString) ? queryString : (location.search || \"\");\n        var strArr = [];\n        var result = {};\n        str = str.replace(/^\\?/, \"\").replace(/\\#[\\s\\S]*$/, \"\");\n        strArr = str.split(\"&\");\n        // tslint:disable-next-line: forin\n        for (var key in strArr) {\n            var tmpItem = strArr[key] || \"\";\n            var tmpM = tmpItem.match(/^\\s*([\\S]*)\\s*=\\s*([\\S]*)$/);\n            if (tmpM) {\n                result[tmpM[1]] = tmpM[2];\n            }\n        }\n        return result;\n    };\n    StaticCommon.getQuery = function (key, queryString) {\n        return StaticCommon.getUri(queryString)[key];\n    };\n    /**\n     * 获取字符串字节长度\n     * @param {string|number} val 输入字符串\n     */\n    StaticCommon.strLen = function (val) {\n        var str = val.toString();\n        var len = 0;\n        for (var i = 0; i < str.length; i++) {\n            var c = str.charCodeAt(i);\n            if (c > 255) {\n                len += 2;\n            }\n            else {\n                len += 1;\n            }\n        }\n        return len;\n    };\n    return StaticCommon;\n}());\nexports.StaticCommon = StaticCommon;\nexports.defineReadonlyProperty = function (target, propertyKey, propertyValue) {\n    Object.defineProperty(target, propertyKey, {\n        configurable: false,\n        enumerable: true,\n        value: propertyValue,\n        writable: false\n    });\n};\nexports.getEnvFromCommand = function (commandList) {\n    var env = \"Prod\";\n    if (commandList && commandList.length > 0) {\n        for (var i = 0; i < commandList.length; i++) {\n            var tmpCommand = commandList[i];\n            var tmpMatch = tmpCommand.match(/^\\-\\-env\\=([a-z0-9]{1,})$/i);\n            if (tmpMatch) {\n                env = tmpMatch[1];\n            }\n            else {\n                var lMatch = tmpCommand.match(/^\\-env\\=([a-z0-9]{1,})$/i);\n                if (lMatch) {\n                    env = lMatch[1];\n                }\n            }\n        }\n    }\n    return env;\n};\nexports.getCommand = function (command, cmdKey) {\n    var result;\n    var findKey = false;\n    var findValue = false;\n    var keyReg = /^[\\-]{1,}/;\n    var keyValueReg = /^([a-z0-9]{1,})\\=/i;\n    var isCmdKey = /^[\\-]{1,}/.test(cmdKey);\n    if (command && command.length > 0) {\n        for (var i = 0; i < command.length; i++) {\n            var cmd = command[i];\n            if (isCmdKey) {\n                if (cmd === cmdKey) {\n                    if (!keyReg.test(command[i + 1])) {\n                        result = command[i + 1] === undefined ? null : command[i + 1];\n                        findValue = i + 1 < command.length;\n                        break;\n                    }\n                }\n            }\n            else {\n                if (!keyReg.test(cmd)) {\n                    var keyMatchValue = cmd.match(keyValueReg);\n                    if (keyMatchValue && keyMatchValue[1] === cmdKey) {\n                        result = cmd.replace(keyValueReg, \"\");\n                        findValue = true;\n                        break;\n                    }\n                    else {\n                        if (cmd === cmdKey && !keyReg.test(command[i - 1])) {\n                            findKey = true;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return findValue ? result : (findKey ? true : result);\n};\n//# sourceMappingURL=StaticCommon.js.map","import { StaticCommon } from \"elmer-common\";\r\nimport \"reflect-metadata\";\r\nimport { globalVar } from \"../init/globalUtil\";\r\n\r\nexport type TypeAutowiredOptions = {\r\n    className?: string;\r\n    argv?: any[]\r\n};\r\n// 实例化工厂\r\n// tslint:disable-next-line:variable-name\r\nexport function createClassFactory<T>(_constructor: new(...args:any[]) =>T, options?: string | TypeAutowiredOptions):T {\r\n    const elmerData = globalVar();\r\n    let className = _constructor.prototype.className || (_constructor as any).className;\r\n\r\n    const paramTypes:Function[] = Reflect.getMetadata(\"design:paramtypes\",_constructor);\r\n    let argv: any[] = [];\r\n    let classPoolName;\r\n    if(StaticCommon.isEmpty(className)) {\r\n        if(!StaticCommon.isEmpty(options)) {\r\n            if(StaticCommon.isString(options)) {\r\n                className = options;\r\n                classPoolName = options;\r\n            } else {\r\n                className = options.className;\r\n                classPoolName = options.className;\r\n            }\r\n        }\r\n    }\r\n    if(!StaticCommon.isEmpty(options) && StaticCommon.isObject(options)) {\r\n        argv = options.argv || [];\r\n    }\r\n    if(!StaticCommon.isEmpty(classPoolName)) {\r\n        if(!elmerData.classPool[classPoolName]) {\r\n            elmerData.classPool[classPoolName] = _constructor;\r\n        }\r\n    }\r\n    if(StaticCommon.isEmpty(className)) {\r\n        className = _constructor[\"className\"];\r\n    }\r\n    if(!elmerData.objPool[className]) {\r\n        // 参数实例化\r\n        const paramInstance = Object.prototype.toString.call(paramTypes) === \"[object Array]\" ? paramTypes.map((val:Function) => {\r\n            // 依赖的类必须全部进行注册\r\n            if(elmerData.classPool.indexOf(val) === -1) {\r\n                throw new Error(`${val}没有被注册[${className}]`);\r\n            } else {\r\n                return createClassFactory(val as any);\r\n            }\r\n        }) : [];\r\n        const obj = new _constructor(...paramInstance, ...argv);\r\n        elmerData.objPool[className] = obj;\r\n        return obj;\r\n    } else {\r\n        return elmerData.objPool[className];\r\n    }\r\n}\r\n\r\nexport const autoInit = createClassFactory;\r\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar StaticCommon = /** @class */ (function () {\n    function StaticCommon() {\n    }\n    StaticCommon.getType = function (val) {\n        return Object.prototype.toString.call(val);\n    };\n    StaticCommon.isString = function (val) {\n        return StaticCommon.getType(val) === \"[object String]\";\n    };\n    StaticCommon.isObject = function (val) {\n        return StaticCommon.getType(val) === \"[object Object]\";\n    };\n    StaticCommon.isArray = function (val) {\n        return StaticCommon.getType(val) === \"[object Array]\";\n    };\n    StaticCommon.isNumeric = function (val) {\n        return !isNaN(val);\n    };\n    StaticCommon.isDOM = function (val) {\n        return /^(\\[object\\s*)HTML([a-zA-Z]*)(Element\\])$/.test(StaticCommon.getType(val));\n    };\n    StaticCommon.isSVGDOM = function (val) {\n        return /^\\[object\\sSVG([a-zA-Z]*)Element\\]$/.test(StaticCommon.getType(val));\n    };\n    StaticCommon.isFunction = function (val) {\n        return StaticCommon.getType(val) === \"[object Function]\";\n    };\n    StaticCommon.isNodeList = function (val) {\n        return StaticCommon.getType(val) === \"[object NodeList]\";\n    };\n    StaticCommon.isRegExp = function (val) {\n        return StaticCommon.getType(val) === \"[object RegExp]\";\n    };\n    StaticCommon.isEmpty = function (val) {\n        return val === undefined || val === null || (StaticCommon.isString(val) && val.length <= 0);\n    };\n    StaticCommon.isPromise = function (val) {\n        return StaticCommon.getType(val) === \"[object Promise]\";\n    };\n    StaticCommon.isGlobalObj = function (val) {\n        return this.getType(val) === \"[object global]\";\n    };\n    // tslint:disable-next-line:no-shadowed-variable\n    StaticCommon.isEqual = function (a, b) {\n        if (a === b) {\n            return a !== 0 || 1 / a === 1 / b;\n        }\n        if (a == null || b == null) {\n            return a === b;\n        }\n        var classNameA = StaticCommon.getType(a), classNameB = StaticCommon.getType(b);\n        if (classNameA !== classNameB) {\n            return false;\n        }\n        else {\n            switch (classNameA) {\n                case \"[object RegExp]\":\n                case \"[object String]\":\n                    return \"\" + a === \"\" + b;\n                case \"[object Number]\":\n                    if (+a !== +a) {\n                        return +b !== +b;\n                    }\n                    return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n                case \"[object Date]\":\n                case \"[object Boolean]\":\n                    return +a === +b;\n            }\n            if (classNameA === \"[object Object]\") {\n                var propsA = Object.getOwnPropertyNames(a), propsB = Object.getOwnPropertyNames(b);\n                if (propsA.length !== propsB.length) {\n                    return false;\n                }\n                else {\n                    for (var i = 0; i < propsA.length; i++) {\n                        var propName = propsA[i];\n                        if (a[propName] !== b[propName]) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n            }\n            if (classNameA === \"[object Array]\") {\n                return a.toString() === b.toString();\n            }\n        }\n    };\n    StaticCommon.sleepCall = function (fn, timeout, obj) {\n        if (typeof fn === \"function\") {\n            // let handler: number | null | undefined = null;\n            var tim = timeout || 200;\n            var sleep = function () {\n                if (obj) {\n                    fn.call(obj);\n                }\n                else {\n                    fn();\n                }\n                // handler !== null && clearTimeout(handler);\n            };\n            setTimeout(sleep, tim);\n        }\n    };\n    StaticCommon.getValue = function (data, key, defaultValue) {\n        var keyValue = key !== undefined && key !== null ? key : \"\";\n        if (/\\./.test(keyValue)) {\n            var keyArr = keyValue.split(\".\");\n            var isFind = false;\n            var index = 0;\n            var keyStr = \"\";\n            var tmpData = data;\n            while (index <= keyArr.length - 1) {\n                keyStr = keyArr[index];\n                isFind = index === keyArr.length - 1;\n                if (StaticCommon.isArray(tmpData) && StaticCommon.isNumeric(keyStr)) {\n                    keyStr = parseInt(keyStr, 10);\n                }\n                if (!isFind) {\n                    var nextKey = keyArr[keyArr.length - 1];\n                    if (StaticCommon.isArray(tmpData) || StaticCommon.isObject(tmpData) || StaticCommon.isGlobalObj(tmpData)) {\n                        //\n                        tmpData = tmpData[keyStr];\n                    }\n                    if (tmpData && index === keyArr.length - 2) {\n                        if (nextKey === \"key\") {\n                            tmpData = tmpData.key;\n                            isFind = true;\n                        }\n                        else if (nextKey === \"length\") {\n                            tmpData = tmpData.length;\n                            isFind = true;\n                        }\n                    }\n                }\n                else {\n                    tmpData = tmpData ? tmpData[keyStr] : undefined;\n                }\n                if (isFind) {\n                    break;\n                }\n                index++;\n            }\n            return isFind ? (undefined !== tmpData ? tmpData : defaultValue) : defaultValue;\n        }\n        else {\n            var rResult = data ? data[keyValue] : undefined;\n            return data ? (undefined !== rResult ? rResult : defaultValue) : defaultValue;\n        }\n    };\n    /**\n     * 给指定对象设置属性值\n     * @param data 设置属性值对象\n     * @param key 设置属性key,属性key有多层可使用.区分\n     * @param value 设置属性值\n     * @param fn 自定义设置值回调\n     */\n    StaticCommon.setValue = function (data, key, value, fn) {\n        var isUpdate = false;\n        if (!StaticCommon.isObject(data)) {\n            throw new Error(\"The parameter of data is not a object\");\n        }\n        if (StaticCommon.isEmpty(key)) {\n            throw new Error(\"The key can not be an empty string\");\n        }\n        if (!StaticCommon.isEmpty(value)) {\n            var keyArr = key.split(\".\");\n            var keyLen = keyArr.length;\n            var index = 0;\n            var tmpData = data;\n            while (index < keyLen) {\n                var cKey = keyArr[index];\n                if (index < keyLen - 1) {\n                    // 不是最后一个节点\n                    if (!StaticCommon.isEmpty(tmpData[cKey])) {\n                        if (StaticCommon.isObject(tmpData[cKey])) {\n                            tmpData = tmpData[cKey];\n                        }\n                        else {\n                            throw new Error(\"Can not set value to attribute of \" + cKey);\n                        }\n                    }\n                    else {\n                        tmpData[cKey] = {};\n                        tmpData = tmpData[cKey];\n                    }\n                }\n                else {\n                    // 要更新数据的节点\n                    if (typeof fn === \"function\") {\n                        fn(tmpData, cKey, value);\n                    }\n                    else {\n                        tmpData[cKey] = value;\n                    }\n                    isUpdate = true;\n                }\n                index++;\n            }\n        }\n        return isUpdate;\n    };\n    /**\n     * 获取随机ID\n     */\n    StaticCommon.getRandomID = function () {\n        var now = new Date();\n        var year = now.getFullYear().toString(), month = now.getMonth() + 1 < 10 ? \"0\" + (now.getMonth() + 1).toString() : (now.getMonth() + 1).toString(), date = now.getDate() < 10 ? \"0\" + now.getDate().toString() : now.getDate().toString(), hour = now.getHours() < 10 ? [\"0\", now.getHours()].join(\"\") : now.getHours().toString(), minute = now.getMinutes() < 10 ? [\"0\", now.getMinutes()].join(\"\") : now.getMinutes().toString(), second = now.getSeconds() < 10 ? [\"0\", now.getSeconds()].join(\"\") : now.getSeconds().toString(), reSecond = now.getMilliseconds();\n        var randValue = parseInt((Math.random() * 9999 + 1000).toString(), 10);\n        return [year, month, date, hour, minute, second, reSecond, randValue].join(\"\");\n    };\n    /**\n     * 字符串有连接符-将自动转换成已首字母大写\n     * @param val 转换文本\n     * @param firstUpperCase 是否大写\n     */\n    StaticCommon.toHumpStr = function (val, firstUpperCase) {\n        if (!this.isEmpty(val)) {\n            var vStr = val.replace(/(^\\-)|(\\-$)/, \"\");\n            var vArr = vStr.split(\"-\");\n            for (var i = 0; i < vArr.length; i++) {\n                if ((i === 0 && firstUpperCase) || i > 0) {\n                    vArr[i] = vArr[i].substr(0, 1).toUpperCase() + vArr[i].substr(1);\n                }\n            }\n            return vArr.join(\"\");\n        }\n        else {\n            return val;\n        }\n    };\n    StaticCommon.humpToStr = function (val) {\n        if (!this.isEmpty(val)) {\n            var vStr = val.substr(0, 1).toLowerCase() + val.substr(1);\n            var rStr = vStr.replace(/([A-Z])/g, function ($1) {\n                return \"-\" + $1.toLowerCase();\n            });\n            return rStr;\n        }\n        return val;\n    };\n    StaticCommon.extend = function (desc, src, setReadOnly, ignoreKeys) {\n        if (!setReadOnly) {\n            if (this.isObject(desc) && this.isObject(src)) {\n                if (Object.assign) {\n                    Object.assign(desc, src);\n                }\n                else {\n                    // tslint:disable-next-line:forin\n                    for (var key in src) {\n                        if (!ignoreKeys || ignoreKeys.indexOf(key) < 0) {\n                            desc[key] = src[key];\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (this.isObject(desc) && this.isObject(src)) {\n                // tslint:disable-next-line:forin\n                for (var key in src) {\n                    if (!ignoreKeys || ignoreKeys.indexOf(key) < 0) {\n                        // 已经存在的属性需要使用delete删除，防止redine error问题\n                        if (desc.hasOwnProperty(key)) {\n                            delete desc[key];\n                        }\n                        this.defineReadOnlyProperty(desc, key, src[key]);\n                    }\n                }\n            }\n        }\n        return desc;\n    };\n    StaticCommon.merge = function (obj1, obj2) {\n        var result = {};\n        if (obj1 && !obj2) {\n            result = obj1;\n        }\n        else if (!obj1 && obj2) {\n            result = obj2;\n        }\n        else if (obj1 && obj2) {\n            if (this.isObject(obj1)) {\n                // tslint:disable-next-line:forin\n                for (var key in obj1) {\n                    result[key] = obj1[key];\n                }\n            }\n            if (this.isObject(obj2)) {\n                for (var sKey in obj2) {\n                    if (!result.hasOwnProperty(sKey)) {\n                        result[sKey] = obj2[sKey];\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    /**\n     * 将字符串转转换成对应的数据类型，遇到true|false转换成bool类型，遇到数字文本转换成数字类型数据\n     * @param data 要转换的数据\n     */\n    StaticCommon.val = function (data) {\n        if (this.isString(data)) {\n            if (!isNaN(data)) {\n                return (data.indexOf(\".\") >= 0 ? parseFloat(data) : parseInt(data, 10));\n            }\n            else {\n                return (/^(true|false)$/.test(data) ? Boolean(data) : data);\n            }\n        }\n        else {\n            return data;\n        }\n    };\n    StaticCommon.defineReadOnlyProperty = function (obj, propertyKey, propertyValue) {\n        (function (paramObj, paramPropertyKey, paramPropertyValue) {\n            paramObj && Object.defineProperty(paramObj, paramPropertyKey, {\n                configurable: true,\n                enumerable: true,\n                value: paramPropertyValue,\n                writable: false\n            });\n        })(obj, propertyKey, propertyValue);\n    };\n    StaticCommon.launchFullscreen = function (element) {\n        if (element.requestFullscreen) {\n            // tslint:disable-next-line: no-floating-promises\n            element.requestFullscreen();\n        }\n        else if (element[\"mozRequestFullScreen\"]) {\n            element[\"mozRequestFullScreen\"]();\n        }\n        else if (element[\"webkitRequestFullscreen\"]) {\n            element[\"webkitRequestFullscreen\"]();\n        }\n        else if (element[\"msRequestFullscreen\"]) {\n            element[\"msRequestFullscreen\"]();\n        }\n    };\n    StaticCommon.exitFullscreen = function () {\n        if (document.exitFullscreen) {\n            // tslint:disable-next-line: no-floating-promises\n            document.exitFullscreen();\n        }\n        else if (document[\"mozCancelFullScreen\"]) {\n            document[\"mozCancelFullScreen\"]();\n        }\n        else if (document[\"webkitExitFullscreen\"]) {\n            document[\"webkitExitFullscreen\"]();\n        }\n    };\n    StaticCommon.isFullScreen = function () {\n        return document[\"isFullScreen\"] || document[\"mozIsFullScreen\"] || document[\"webkitIsFullScreen\"];\n    };\n    StaticCommon.guid = function () {\n        var S4 = function () {\n            // tslint:disable-next-line: no-bitwise\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substr(1);\n        };\n        return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4());\n    };\n    StaticCommon.getUri = function (queryString) {\n        var str = !StaticCommon.isEmpty(queryString) ? queryString : (location.search || \"\");\n        var strArr = [];\n        var result = {};\n        str = str.replace(/^\\?/, \"\").replace(/\\#[\\s\\S]*$/, \"\");\n        strArr = str.split(\"&\");\n        // tslint:disable-next-line: forin\n        for (var key in strArr) {\n            var tmpItem = strArr[key] || \"\";\n            var tmpM = tmpItem.match(/^\\s*([\\S]*)\\s*=\\s*([\\S]*)$/);\n            if (tmpM) {\n                result[tmpM[1]] = tmpM[2];\n            }\n        }\n        return result;\n    };\n    StaticCommon.getQuery = function (key, queryString) {\n        return StaticCommon.getUri(queryString)[key];\n    };\n    /**\n     * 获取字符串字节长度\n     * @param {string|number} val 输入字符串\n     */\n    StaticCommon.strLen = function (val) {\n        var str = val.toString();\n        var len = 0;\n        for (var i = 0; i < str.length; i++) {\n            var c = str.charCodeAt(i);\n            if (c > 255) {\n                len += 2;\n            }\n            else {\n                len += 1;\n            }\n        }\n        return len;\n    };\n    return StaticCommon;\n}());\nexports.StaticCommon = StaticCommon;\nexports.defineReadonlyProperty = function (target, propertyKey, propertyValue) {\n    Object.defineProperty(target, propertyKey, {\n        configurable: false,\n        enumerable: true,\n        value: propertyValue,\n        writable: false\n    });\n};\nexports.getEnvFromCommand = function (commandList) {\n    var env = \"Prod\";\n    if (commandList && commandList.length > 0) {\n        for (var i = 0; i < commandList.length; i++) {\n            var tmpCommand = commandList[i];\n            var tmpMatch = tmpCommand.match(/^\\-\\-env\\=([a-z0-9]{1,})$/i);\n            if (tmpMatch) {\n                env = tmpMatch[1];\n            }\n            else {\n                var lMatch = tmpCommand.match(/^\\-env\\=([a-z0-9]{1,})$/i);\n                if (lMatch) {\n                    env = lMatch[1];\n                }\n            }\n        }\n    }\n    return env;\n};\nexports.getCommand = function (command, cmdKey) {\n    var result;\n    var findKey = false;\n    var findValue = false;\n    var keyReg = /^[\\-]{1,}/;\n    var keyValueReg = /^([a-z0-9]{1,})\\=/i;\n    var isCmdKey = /^[\\-]{1,}/.test(cmdKey);\n    if (command && command.length > 0) {\n        for (var i = 0; i < command.length; i++) {\n            var cmd = command[i];\n            if (isCmdKey) {\n                if (cmd === cmdKey) {\n                    if (!keyReg.test(command[i + 1])) {\n                        result = command[i + 1] === undefined ? null : command[i + 1];\n                        findValue = i + 1 < command.length;\n                        break;\n                    }\n                }\n            }\n            else {\n                if (!keyReg.test(cmd)) {\n                    var keyMatchValue = cmd.match(keyValueReg);\n                    if (keyMatchValue && keyMatchValue[1] === cmdKey) {\n                        result = cmd.replace(keyValueReg, \"\");\n                        findValue = true;\n                        break;\n                    }\n                    else {\n                        if (cmd === cmdKey && !keyReg.test(command[i - 1])) {\n                            findKey = true;\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return findValue ? result : (findKey ? true : result);\n};\n//# sourceMappingURL=StaticCommon.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ReduxGlobalStateKeys_1 = require(\"./ReduxGlobalStateKeys\");\n/**\n * 初始化全局变量保存Redux管理数据\n * @param getGlobalState 获取全局对象用于保存数据\n * @param defineGlobalState 定义全局对象保存数据，当前方法会调用几次defineGlobalState传入key初始化数据结构\n */\nexports.defineReduxProvider = function (getGlobalState, defineGlobalState) {\n    var dataID = ReduxGlobalStateKeys_1.REDUX_GLOBAL_STATE_KEY;\n    var listenerID = ReduxGlobalStateKeys_1.REDUX_GLOBAL_LISTEN_KEY;\n    var reduxState = {\n        listener: null,\n        state: null\n    };\n    if (!getGlobalState(dataID)) {\n        reduxState.listener = {};\n        reduxState.state = {};\n        defineGlobalState(dataID, reduxState.state); // 保存单纯的state数据\n        defineGlobalState(listenerID, reduxState.listener); // 保存subscribe挂载对象，在数据变化时触发组件的Change事件\n        dataID = null;\n        listenerID = null;\n    }\n    else {\n        reduxState.state = getGlobalState(dataID);\n        reduxState.listener = getGlobalState(listenerID);\n    }\n    return reduxState;\n};\n","import { globalVar } from \"../init/globalUtil\";\nimport { IDeclareComponentOptions } from \"./IDeclareComponent\";\n\nconst formatSelector = (selectorName: string): string => {\n    let dName = selectorName.replace(/([A-Z])/g, \"-$1\").replace(/^([a-z])/i, \"-$1\").toLowerCase();\n    dName = /^\\-/.test(dName) ? dName : \"-\" + dName;\n    dName = \"eui\" + dName;\n    return dName;\n};\n\nconst registerComponent = (widgets: object | Function, domName?: string) => {\n    const register = (widgetFactory: Function, domNameValue?: string) => {\n        // tslint:disable-next-line:no-shadowed-variable\n        const domName = widgetFactory.toString();\n        const fMatch = domName.match(/^function\\s*([a-z0-9_\\-]*)\\s*\\(/i);\n        const elmerData = globalVar();\n        if (fMatch) {\n            let dName = fMatch[1];\n            dName = domNameValue && domNameValue.length>0 ? domNameValue :  dName;\n            dName = formatSelector(dName);\n            const saveData = elmerData.components || {};\n            if (!saveData[dName]) {\n                Object.defineProperty(widgetFactory, \"selector\", {\n                    configurable: false,\n                    enumerable: true,\n                    value: dName,\n                    writable: false\n                });\n                Object.defineProperty(elmerData.components, dName, {\n                    configurable: false,\n                    enumerable: true,\n                    value: widgetFactory,\n                    writable: false\n                });\n            }\n        } else {\n            throw new Error(\"未定义组件名称!\");\n        }\n    };\n    if (typeof widgets === \"object\") {\n        Object.keys(widgets).map((wKey) => {\n            const factory = (<any>widgets)[wKey];\n            if (typeof factory === \"function\") {\n                register(factory, wKey);\n            } else {\n                throw new Error(`The register component ${wKey} must be a function`);\n            }\n        });\n    } else if (typeof widgets === \"function\") {\n        register(widgets, domName);\n    } else {\n        throw new Error(\"The Register component is muse be a constructor or a object\");\n    }\n};\n\nconst defineReadonlyProperty = (target:any, propertyKey: string, propertyValue: any) => {\n    Object.defineProperty(target, propertyKey, {\n        configurable: false,\n        enumerable: true,\n        value: propertyValue,\n        writable: false\n    });\n};\n/**\n * 定义组件，挂载到全局变量\n * @param options\n * @deprecated - 即将弃用此方法,为兼容旧代码\n */\nexport const declareComponent = (options: IDeclareComponentOptions): Function =>\n    // tslint:disable-next-line:typedef\n    // tslint:disable-next-line:variable-name\n    (__contructor: Function): void => {\n        __contructor.prototype.selector = formatSelector(options.selector || \"\");\n        // 使用defineReadonlyProperty定义属性，防止用户自定义方法重复定义\n        defineReadonlyProperty(__contructor.prototype, \"injectModel\", options.model);\n        defineReadonlyProperty(__contructor.prototype, \"injectService\", options.service);\n        defineReadonlyProperty(__contructor.prototype, \"connect\", options.connect);\n        defineReadonlyProperty(__contructor.prototype, \"i18nConfig\", options.i18n);\n        defineReadonlyProperty(__contructor.prototype, \"template\", options.template);\n        options.components && defineReadonlyProperty(__contructor.prototype, \"components\", options.components);\n        if (options.template?.fromLoader) {\n            defineReadonlyProperty(__contructor.prototype, \"render\", (function (): any {\n                return this.htmlCode;\n            }).bind({ htmlCode: options.template.htmlCode }));\n        }\n        registerComponent(__contructor, options.selector);\n    };\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./HtmlParse\"));\n__export(require(\"./IVirtualElement\"));\n__export(require(\"./VirtualRender/VirtualRender\"));\n__export(require(\"./VirtualRender/VirtualRenderDiff\"));\n__export(require(\"./VirtualRender/VirtualNode\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elmer_common_1 = require(\"elmer-common\");\nvar VirtualRenderDiff = /** @class */ (function (_super) {\n    __extends(VirtualRenderDiff, _super);\n    function VirtualRenderDiff() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Diff运算，指定dom查找在旧dom树中的位置，并对比将要做的操作\n     * @param {object} event diff参数\n     * @param {IVirtualElement} event.dom 要做diff运算的节点\n     */\n    VirtualRenderDiff.prototype.diff = function (event) {\n        var oldParentDom = event.oldParentDom;\n        var result = {\n            matchDom: null,\n            matchIndex: event.lastMatchIndex\n        };\n        // 设置有key值的dom，只要对key和tagName做判断即可\n        // 当旧节点树没有子节点时，则保留新dom节点的状态，不做任何判断\n        if (oldParentDom && oldParentDom.children && oldParentDom.children.length > 0) {\n            for (var diffIndex = 0; diffIndex < oldParentDom.children.length; diffIndex++) {\n                var tmpOld = oldParentDom.children[diffIndex];\n                if (!tmpOld.isDiff) {\n                    var checkResult = this.sameNode(event.dom, tmpOld);\n                    if (checkResult.sameNode) {\n                        if (event.dom.status !== \"DELETE\") {\n                            if (event.lastMatchIndex > diffIndex) {\n                                if (tmpOld.status !== \"DELETE\") {\n                                    event.dom.status = checkResult.hasChange ? \"MOVEUPDATE\" : \"MOVE\";\n                                }\n                                else {\n                                    event.dom.status = \"APPEND\";\n                                }\n                            }\n                            else {\n                                // 当匹配上的旧节点是DELETE状态的时候，真实dom是匹配不上的，所以需要更改为Append状态\n                                // 当旧节点不是DELETE状态是才能根据实际情况定义修改状态为UPDATE或则NORMAL\n                                event.dom.status = tmpOld.status !== \"DELETE\" ? checkResult.hasChange ? \"UPDATE\" : \"NORMAL\" : \"APPEND\";\n                            }\n                            if (checkResult.hasChange) {\n                                event.dom.changeAttrs = checkResult.updateProps;\n                                event.dom.deleteAttrs = checkResult.deleteProps;\n                            }\n                        }\n                        result.matchDom = tmpOld;\n                        result.matchIndex = diffIndex;\n                        event.dom.dom = tmpOld.dom;\n                        event.dom.virtualID = tmpOld.virtualID; // 保留旧的虚拟dom id方便查询旧节点\n                        event.dom.tagAttrs = tmpOld.tagAttrs;\n                        tmpOld.isDiff = true;\n                        // 已经match上的dom节点标记起来，防止相似节点被重复引用\n                        break;\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    /**\n     * 计算两个字符串的相似度\n     * @param s 比较字符串\n     * @param t 比较字符串\n     * @param toFixed 计算结果保留小数位数\n     */\n    VirtualRenderDiff.prototype.similar = function (s, t, toFixed) {\n        if (this.isString(s) && this.isString(t) && s.length === 0 && t.length === 0) {\n            return 1;\n        }\n        if (!s || !t) {\n            return 0;\n        }\n        var l = s.length > t.length ? s.length : t.length;\n        var n = s.length;\n        var m = t.length;\n        var d = [];\n        var f = toFixed || 3;\n        var i, j, si, tj, cost;\n        // tslint:disable-next-line: curly\n        if (n === 0)\n            return m;\n        // tslint:disable-next-line: curly\n        if (m === 0)\n            return n;\n        for (i = 0; i <= n; i++) {\n            d[i] = [];\n            d[i][0] = i;\n        }\n        for (j = 0; j <= m; j++) {\n            d[0][j] = j;\n        }\n        for (i = 1; i <= n; i++) {\n            si = s.charAt(i - 1);\n            for (j = 1; j <= m; j++) {\n                tj = t.charAt(j - 1);\n                if (si === tj) {\n                    cost = 0;\n                }\n                else {\n                    cost = 1;\n                }\n                d[i][j] = this.min(d[i - 1][j] + 1, d[i][j - 1] + 1, d[i - 1][j - 1] + cost);\n            }\n        }\n        var res = (1 - d[n][m] / l);\n        return parseFloat(res.toFixed(f));\n    };\n    VirtualRenderDiff.prototype.min = function (a, b, c) {\n        return a < b ? (a < c ? a : c) : (b < c ? b : c);\n    };\n    VirtualRenderDiff.prototype.sameNode = function (newDom, oldDom) {\n        var _this = this;\n        var result = {\n            deleteProps: [],\n            hasChange: false,\n            sameNode: false,\n            similarPercent: 0,\n            updateProps: {}\n        };\n        if (newDom.tagName === oldDom.tagName) {\n            if (!this.isEmpty(newDom.props.key) && !this.isEmpty(oldDom.props.key)) {\n                // 当key不为空时需要key相等才算是相同节点\n                if (newDom.props.key === oldDom.props.key) {\n                    result.sameNode = true;\n                    result.similarPercent = 1;\n                }\n            }\n            else if (this.isEmpty(newDom.props.key) && this.isEmpty(oldDom.props.key)) {\n                // 当key都为空时，只要tagName相同即认为是相同的节点\n                // innerHTML相似度达到80以上才算做相同节点\n                var smpercent = 0;\n                if (!/^text$/i.test(newDom.tagName)) {\n                    // 非文本节点走一下判断\n                    if (newDom.children.length === oldDom.children.length) {\n                        // 当两个节点的属性都是空的，为了进一步确定是否是同一个节点，取子节点的tagName做判断就行，不考虑更下一层，否则过于复杂\n                        // 由于是边渲染边做diff运算，新节点的子节点还没有渲染所以有数据绑定的属性和旧节点相差很大，只需要判断结构是否相同就行\n                        var insm = this.compareChildrenStructure(newDom, oldDom);\n                        var attrsm = this.similar(newDom.attrCode, oldDom.attrCode);\n                        // 子节点数量一致的时候通过innerHTML的相似度和属性的相似度来判断\n                        // 当没有设置任何属性值时用innerHTML的相似度来判断\n                        // 当设置有属性时通过属性相似度和innerHTML的相似度哪个大取哪个\n                        if (!this.isEmpty(newDom.attrCode)) {\n                            smpercent = Math.max(insm, attrsm);\n                        }\n                        else {\n                            smpercent = insm;\n                        }\n                    }\n                    else {\n                        // 子节点数量不一致，判断属性即可，不考虑innerHTML的判断，子节点数量不一致基本可判定未不相同的节点\n                        smpercent = this.similar(newDom.attrCode, oldDom.attrCode);\n                    }\n                }\n                else {\n                    // 文本节点对比InnerHTML\n                    smpercent = newDom.innerHTML === oldDom.innerHTML ? 1 : 0.9;\n                }\n                // const smpercent = !/^text$/i.test(newDom.tagName) ? this.similar(newDom.attrCode, oldDom.attrCode) : this.similar(newDom.innerHTML, oldDom.innerHTML);\n                // // 当两个节点tagName相同，并且都是text节点的时候需要对比innerHTML属性，text节点没有attributes\n                result.sameNode = smpercent >= 0.85;\n                result.similarPercent = smpercent;\n            }\n            if (result.sameNode) { // 判断为同一个节点时才对属性做判断，不是同一个节点直接下移判断\n                if (newDom.tagName !== \"text\") {\n                    var newProps_1 = (newDom.props || {});\n                    var oldProps_1 = (oldDom.props || {});\n                    var newPropsKeys_1 = Object.keys(newProps_1);\n                    var oldPropsKeys = Object.keys(oldProps_1);\n                    var updateProps_1 = {};\n                    oldPropsKeys.map(function (tmpKey) {\n                        if (newPropsKeys_1.indexOf(tmpKey) >= 0) {\n                            // 新，旧节点都有此属性时，属性值不同更新属性为新节点属性旧节点属性丢弃\n                            // 新旧节点属性值相等，从updateProps属性删除\n                            if (_this.isObject(newProps_1[tmpKey]) && _this.isObject(newProps_1[tmpKey])) {\n                                // 两个属性值都是Object对象，使用isEqual比较\n                                if (!_this.isEqual(newProps_1[tmpKey], oldProps_1[tmpKey])) {\n                                    // 当两个属性值不相等时不需要做更新, 将变化的属性更新到update list\n                                    result.hasChange = true;\n                                    updateProps_1[tmpKey] = newProps_1[tmpKey];\n                                }\n                            }\n                            else if (!_this.isObject(newProps_1[tmpKey]) && !_this.isObject(newProps_1[tmpKey])) {\n                                // 两个属性值都不是Object时直接使用===做比较， 其中一个是Object,另一个不是Object,即不相等，默认放置在要更新的对象上\n                                if (newProps_1[tmpKey] !== oldProps_1[tmpKey]) {\n                                    // 当两个属性值相等时不需要做更新\n                                    result.hasChange = true;\n                                    updateProps_1[tmpKey] = newProps_1[tmpKey];\n                                }\n                            }\n                        }\n                        else {\n                            // 旧节点属性不在新节点属性列表中，需要添加至要删除的属性列表中\n                            result.hasChange = true;\n                            result.deleteProps.push(tmpKey);\n                        }\n                    });\n                    result.updateProps = updateProps_1;\n                }\n                else {\n                    if (result.similarPercent !== 1) {\n                        result.hasChange = true;\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    /**\n     * 取第一层子节点进一步判断是否为同一个节点，不考虑更下一层\n     * @param vdom 判断节点\n     */\n    VirtualRenderDiff.prototype.compareChildrenStructure = function (newDom, oldDom) {\n        if (newDom.children.length === oldDom.children.length) {\n            if (newDom.children.length > 0) {\n                for (var i = 0; i < newDom.children.length; i++) {\n                    if (newDom.children[i].tagName !== oldDom.children[i].tagName) {\n                        return 0;\n                    }\n                }\n                return 1;\n            }\n            else {\n                // 当两个节点的子节点都是空的时候可以认为是相同结构\n                return 1;\n            }\n        }\n        else {\n            return 0;\n        }\n    };\n    return VirtualRenderDiff;\n}(elmer_common_1.Common));\nexports.VirtualRenderDiff = VirtualRenderDiff;\n//# sourceMappingURL=VirtualRenderDiff.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.strToFunc = function (funCode) {\n    return (new Function(\"return \" + funCode))();\n};\nexports.funcToStr = function (func) {\n    return typeof func === \"function\" ? func.toString() : \"\";\n};\nexports.onmessage = function (e) {\n    var msgData = e.data;\n    var msgType = msgData.type;\n    var elmer = self[\"elmer\"];\n    var dataType = Object.prototype.toString.call(msgData.data);\n    var tmpFn;\n    try {\n        if (msgType === \"InitObject\") {\n            self[msgData.globalName] = self[\"workerDataToObject\"](msgData.data);\n            elmer.sendMsg({\n                id: msgData.id,\n                message: \"success\",\n                statusCode: 200,\n                type: msgType\n            });\n            return;\n        }\n        else if (msgType === \"InitFunction\") {\n            self[msgData.globalName] = self[\"strToFunc\"](msgData.data);\n            elmer.sendMsg({\n                id: msgData.id,\n                message: \"success\",\n                statusCode: 200,\n                type: msgType\n            });\n            return;\n        }\n        else if (msgType === \"CallObjMethod\" || msgType === \"CallMethod\") {\n            var objKey = msgData.obj;\n            var callbackName = msgData.method;\n            var selfFunc = void 0;\n            if (msgType === \"CallObjMethod\") {\n                var runCode = \"var fn = \" + objKey + \".\" + callbackName + \";\\r\\n\";\n                if (dataType === \"[object Array]\") {\n                    runCode += \"return fn.apply(\" + objKey + \", argv);\\r\\n\";\n                }\n                else {\n                    runCode += \"return fn(argv);\\r\\n\";\n                }\n                selfFunc = new Function(\"argv\", runCode);\n            }\n            else {\n                if (dataType === \"[object Array]\") {\n                    selfFunc = new Function('argv', \"return \" + callbackName + \".apply(self, argv);\");\n                }\n                else {\n                    selfFunc = new Function('argv', \"return \" + callbackName + \"(argv);\");\n                }\n            }\n            if (typeof selfFunc === \"function\") {\n                var callResult = selfFunc(msgData.data);\n                elmer.sendMsg({\n                    data: callResult,\n                    id: msgData.id,\n                    message: \"\",\n                    statusCode: 200,\n                    type: msgType\n                });\n            }\n            else {\n                elmer.sendMsg({\n                    id: msgData.id,\n                    message: tmpFn === undefined ? \"The calling method is not defined\" : \"The specified object is not a function\",\n                    type: \"CallObjMethod\"\n                });\n            }\n            return;\n        }\n    }\n    catch (e) {\n        console.error(e);\n        elmer.sendMsg({\n            data: undefined,\n            error: e,\n            id: msgData.id,\n            message: e.message,\n            statusCode: 500,\n            type: msgType\n        });\n    }\n};\nexports.objectToWorkerData = function (obj) {\n    var result = {\n        data: {},\n        funcData: {}\n    };\n    if (typeof obj === \"object\") {\n        for (var key in obj) {\n            if (typeof obj[key] === \"function\") {\n                result.funcData[key] = obj[key].toString();\n            }\n            else {\n                result.data[key] = obj[key];\n            }\n        }\n    }\n    return result;\n};\nexports.objectToWorkerCode = function (obj, className) {\n    var innerObjKey = className + (new Date()).format(\"YYYYMMDDHisms\");\n    var result = \"(function(){\\r\\n\";\n    result += \"    function \" + className + \"(){};\\r\\n\";\n    if (typeof obj === \"object\") {\n        var _loop_1 = function (key) {\n            var tmpValue = obj[key];\n            var tmpType = Object.prototype.toString.call(tmpValue);\n            if (typeof tmpValue === \"function\") {\n                var code = tmpValue.toString();\n                result += \"    \" + className + \".prototype.\" + key + \" = \" + code + \";\\r\\n\";\n            }\n            else if (tmpType === \"[object RegExp]\") {\n                var regCode = tmpValue.toString();\n                result += \"    \" + className + \".prototype.\" + key + \" = \" + regCode + \";\\r\\n\";\n            }\n            else if (tmpType === \"[object Array]\") {\n                var tmpResult_1 = [];\n                tmpValue.map(function (tmpItem) {\n                    if (Object.prototype.toString.call(tmpItem) === \"[object RegExp]\") {\n                        tmpResult_1.push(tmpItem.toString());\n                    }\n                    else {\n                        tmpResult_1.push(JSON.stringify(tmpItem));\n                    }\n                });\n                result += \"    \" + className + \".prototype.\" + key + \" = [\" + tmpResult_1.join(\",\") + \"];\\r\\n\";\n            }\n            else {\n                result += \"    \" + className + \".prototype.\" + key + \" = \" + JSON.stringify(obj[key]) + \";\\r\\n\";\n            }\n        };\n        for (var key in obj) {\n            _loop_1(key);\n        }\n    }\n    result += \"    var \" + innerObjKey + \" = new \" + className + \"();\\r\\n\";\n    result += \"    return \" + innerObjKey + \";\\r\\n\";\n    result += \"})();\\r\\n\";\n    result = result.replace(/\\sthis\\./g, [\" \", innerObjKey, \".\"].join(\"\"))\n        .replace(/\\!this\\./g, [\"!\", innerObjKey, \".\"].join(\"\"))\n        .replace(/([\\(\\&\\|\\=\\;])this\\./g, [\"$1\", innerObjKey, \".\"].join(\"\"));\n    return result;\n};\nexports.classToWorkerCode = function (func) {\n    var coreCode = func.toString().replace(/^function\\s[a-z0-9\\_]{1,}\\s*\\(/i, \"\");\n    var defineName = func.name;\n    var code = \"(function(){\\r\\n\";\n    code += \"    function \" + defineName + \"(\" + coreCode + \";\\r\\n\";\n    Object.keys(func).map(function (funcKey) {\n        var fCode = func[funcKey];\n        if (typeof fCode === \"object\") {\n            fCode = JSON.stringify(fCode, null, 4);\n        }\n        else if (typeof fCode === \"function\") {\n            fCode = fCode.toString();\n        }\n        code += \"    \" + defineName + \".\" + funcKey + \" = \" + fCode + \";\\r\\n\";\n    });\n    code += \"    return \" + defineName + \";\\r\\n\";\n    code += \"})();\";\n    return code;\n};\nexports.workerDataToObject = function (eventData) {\n    var result = {};\n    if (eventData) {\n        if (eventData.data) {\n            for (var key in eventData.data) {\n                result[key] = eventData.data[key];\n            }\n        }\n        if (eventData.funcData) {\n            for (var key in eventData.funcData) {\n                result[key] = self[\"strToFunc\"](eventData.funcData[key]);\n            }\n        }\n    }\n    return result;\n};\nexports.__spreadArrays = function () {\n    var il = arguments.length;\n    var s = 0;\n    for (var z = 0; z < il; z++) {\n        s += arguments[z].length;\n    }\n    var r = Array(s);\n    for (var k = 0, i = 0; i < il; i++) {\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n            r[k] = a[j];\n        }\n    }\n    return r;\n};\n","import { ElmerAnimation, TypeAnimationChangeEvent, TypeElmerAnimationType } from \"../animation/ElmerAnimation\";\r\nimport animationMethod, { TypeAnimationProperty } from \"../animation/ElmerAnimationProperty\";\r\nimport { EventNames } from \"../events/EventNames\";\r\nimport { injectable } from \"../inject/index\";\r\nimport { autowired } from \"../inject/injectable\";\r\nimport { ElmerDomEvent } from \"./ElmerDomEvent\";\r\nimport { ElmerDomQuery, IElmerDomSelector } from \"./ElmerDomQuery\";\r\n\r\ntype TypeAnimationOption = {\r\n    type: TypeElmerAnimationType;\r\n    from?: TypeAnimationProperty;\r\n    to: TypeAnimationProperty;\r\n    duration: number;\r\n    beginTime?: number;\r\n    dom:HTMLElement;\r\n    optionA?: number;\r\n    optionP?: number;\r\n    optionS?: number;\r\n    onStart?():void;\r\n    onFinish?():void;\r\n};\r\n\r\ntype TypeAnimationOptions = {\r\n    duration: number;\r\n    beginTime?: number;\r\n    options: TypeAnimationOption[];\r\n    onStart?():void;\r\n    onFinish?():void;\r\n};\r\n\r\ntype TypeAnimationParam = {[P in Exclude<keyof TypeAnimationOptions, \"options\">]?:TypeAnimationOptions[P]} & {\r\n    type?: TypeElmerAnimationType\r\n};\r\n\r\ntype TypeShowAnimationParam = TypeAnimationParam & { display?: string };\r\n\r\nexport interface IElmerDOM {\r\n    supportCss3: boolean;\r\n    attr(dom: HTMLElement|Node|Element, attrName: any, attrValue?: any):any;\r\n    addClass(dom:HTMLElement|NodeList, className: String):void;\r\n    byId(id:string, dom?: HTMLElement|null): Element|HTMLElement;\r\n    contains(parent: HTMLElement | Element | Node, node: HTMLElement | Element | Node):Function;\r\n    css(dom: NodeList|HTMLElement, key: any, value?: string|number): void;\r\n    query(queryString: string, dom?: HTMLElement | Node): NodeList;\r\n    width(dom: HTMLElement):number;\r\n    height(dom: HTMLElement):number;\r\n    on(dom: HTMLElement|NodeList, eventName:string, callBack:Function):void;\r\n    removeClass(dom: HTMLElement|NodeList, className:string):void;\r\n    removeEvent(dom: HTMLElement|NodeList, eventName: String, callBack?:Function):void;\r\n    support(key:string):boolean;\r\n}\r\n\r\nexport interface IElmerDOMEvent {\r\n    eventName: string;\r\n    handler: Function;\r\n    listener?:EventListenerObject;\r\n}\r\n\r\n@injectable(\"ElmerDOM\")\r\nexport class ElmerDOM extends ElmerDomQuery {\r\n    bindEvents:string[] = EventNames;\r\n    supportCss3: boolean = false;\r\n    contains:Function;\r\n    listener: any[] = [];\r\n\r\n    @autowired(ElmerDomEvent)\r\n    private eventObj: ElmerDomEvent;\r\n    constructor() {\r\n        super();\r\n        this.supportCss3 =this.support(\"transform\");\r\n        this.contains = document.documentElement !== null && document.documentElement.contains ?\r\n        (parent:any, node:any)=> {\r\n            return parent !== node && parent.contains(node);\r\n        } :\r\n        (parent:any, checkNode: any)=> {\r\n            let node = checkNode;\r\n            while(node && node.parentNode) {\r\n                if(node === parent) {\r\n                    return true;\r\n                } else {\r\n                    node = node.parentNode;\r\n                }\r\n            }\r\n            return false;\r\n        };\r\n    }\r\n\r\n    /**\r\n     * 判断浏览器是否支持指定的css样式\r\n     * @param {String} key css样式名称\r\n     */\r\n    support(key:string):boolean {\r\n        const prefix = [\"webkit\",\"moz\",\"ms\",\"o\"];\r\n        if(!this.isEmpty(key)) {\r\n            const prePropertyKey = key.substr(0,1).toUpperCase() + key.substr(1);\r\n            for(let i=0;i<prefix.length;i++) {\r\n                const myKey = prefix[i] + prePropertyKey;\r\n                if(document.body && (<any>document.body.style)[myKey] !== undefined) {\r\n                    return true;\r\n                }\r\n            }\r\n            return document.body && (<any>document.body.style)[key] !== undefined;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    byId(id:string, dom?: HTMLElement|Element|null): Element|HTMLElement|null {\r\n        if(this.isDOM(dom) && dom !== undefined && dom !== null) {\r\n            return dom.querySelector(\"#\"+id);\r\n        } else {\r\n            return document.getElementById(id);\r\n        }\r\n    }\r\n    query(queryString: string, dom?: HTMLElement | null): NodeList {\r\n        if(this.isDOM(dom) && dom !== undefined && dom !== null ) {\r\n            return dom.querySelectorAll(queryString) || new NodeList();\r\n        } else {\r\n            return document.querySelectorAll(queryString) || new NodeList();\r\n        }\r\n    }\r\n    width(dom: HTMLElement):number {\r\n        return this.isDOM(dom) ? dom.clientWidth : 0;\r\n    }\r\n    height(dom: HTMLElement):number {\r\n        return this.isDOM(dom) ? dom.clientHeight : 0;\r\n    }\r\n    css(dom: NodeList|HTMLElement|HTMLElement[], key: any, value?: string|number): void {\r\n        if(this.isDOM(dom)) {\r\n            this.setCss(dom, key, value);\r\n        } else if(this.getType(dom) === \"[object NodeList]\" || this.getType(dom) === \"[object Array]\") {\r\n            (<NodeList>dom).forEach((tmpDom:HTMLElement) => {\r\n                this.setCss(tmpDom, key,value);\r\n            });\r\n        }\r\n    }\r\n    setCss(dom:HTMLElement, key: any, value?: string|number): void {\r\n        if(dom) {\r\n            if(this.isString(key)) {\r\n                if((<any>dom)[\"style\"][key] !== undefined) {\r\n                    const cssValue: string = <string>(this.isNumeric(value) && key !== \"opacity\" ? value + \"px\" : value);\r\n                    dom.style.setProperty(key, cssValue);\r\n                }\r\n            } else if(this.isObject(key)) {\r\n                for(const csskey in key) {\r\n                    if(!this.isEmpty(key[csskey])) {\r\n                        const convertCssKeys = [\"left\", \"top\", \"right\", \"bottom\", \"width\", \"height\", \"fontSize\",\r\n                            \"borderWidth\",\"borderLeftWidth\",\"borderTopWidth\", \"borderRightWidth\",\"borderBottomWidth\",\r\n                            \"marginLeft\", \"marginTop\", \"marginRight\", \"marginBottom\", \"paddingLeft\", \"paddingTop\", \"paddingRight\", \"paddingBottom\"];\r\n                        const setCssValue: string = <string>(this.isNumeric(key[csskey]) && convertCssKeys.indexOf(csskey) >= 0 ? key[csskey] + \"px\" : key[csskey]);\r\n                        dom.style.setProperty(this.humpToStr(csskey), setCssValue);\r\n                    } else {\r\n                        dom.style.setProperty(this.humpToStr(csskey), null);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    setCss3(dom:HTMLElement, key: string, value?:string|number): void {\r\n        if(!this.isEmpty(key)) {\r\n            const profillKey = key.substr(0,1).toUpperCase() + key.substr(1);\r\n            this.setCss(dom, key, value);\r\n            this.setCss(dom, \"webkit\" + profillKey, value);\r\n            this.setCss(dom, \"moz\" + profillKey, value);\r\n            this.setCss(dom, \"ms\" + profillKey, value);\r\n            this.setCss(dom, \"o\" + profillKey, value);\r\n        }\r\n    }\r\n    getCss3(key: string,value: string): string {\r\n        const calcReg = /^calc\\(/i;\r\n        const supportPrefix = [\"webkit\",\"moz\",\"ms\",\"o\"];\r\n        let result = \"\";\r\n        if(calcReg.test(value)) {\r\n            supportPrefix.map((tmpPrefix: string) => {\r\n                result += `${key}:-${tmpPrefix}-${value};`;\r\n            });\r\n            result += `${key}:${value}`;\r\n        } else {\r\n            supportPrefix.map((tmpPrefix: string) => {\r\n                result += `-${tmpPrefix}-${key}:${value};`;\r\n            });\r\n            result += `${key}:${value};`;\r\n        }\r\n        return result;\r\n    }\r\n    hasClass(dom:HTMLElement, className: string): boolean {\r\n        if(this.isDOM(dom)) {\r\n            if(dom.classList && dom.classList.contains) {\r\n                return dom.classList.contains(className);\r\n            } else {\r\n                const tmpClassName = (dom.className || \"\").replace(/\\s\\s/g,\" \");\r\n                const tmpClassArr = tmpClassName.split(\" \");\r\n                return tmpClassArr.indexOf(className) >=0;\r\n            }\r\n        }\r\n    }\r\n    attr(dom: HTMLElement|Node|Element, attrName: any, attrValue?: any): any {\r\n        if(this.isDOM(dom)) {\r\n            if(attrValue !== undefined) {\r\n                dom.setAttribute(attrName, attrValue);\r\n            } else {\r\n                if(!this.isObject(attrName)) {\r\n                    const v:string|null = dom.getAttribute(attrName);\r\n                    return this.isNumeric(v) && v !==null ? (v.indexOf(\".\")<0 ? parseInt(v, 10) : parseFloat(v)) : v;\r\n                } else {\r\n                    Object.keys(attrName).map((tmpAttrName: string) => {\r\n                        dom.setAttribute(tmpAttrName, attrName[tmpAttrName]);\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    addClass(dom:HTMLElement|NodeList|HTMLElement[], className: string): void {\r\n        if(this.isDOM(dom) && !this.isEmpty(className)) {\r\n            this.updateDomClassName(dom, className, true);\r\n        } else if(this.getType(dom) === \"[object NodeList]\" || this.getType(dom) === \"[object Array]\") {\r\n            const domList:NodeList = (<NodeList>dom);\r\n            domList.forEach((item:Node)=> {\r\n                this.updateDomClassName(<HTMLElement>item, className, true);\r\n            });\r\n        }\r\n    }\r\n    removeClass(dom: HTMLElement|NodeList|HTMLElement[], className:string):void {\r\n        if(this.getType(dom) === \"[object NodeList]\" || this.getType(dom) === \"[object Array]\") {\r\n            (<NodeList>dom).forEach((item: Node)=> {\r\n                this.updateDomClassName(<HTMLElement>item, className, false);\r\n            });\r\n        } else {\r\n            this.updateDomClassName(<HTMLElement>dom, className, false);\r\n        }\r\n    }\r\n    on(dom:any | HTMLElement, eventName:string, callBack:Function, options?: AddEventListenerOptions):void {\r\n        this.addEvent(dom, eventName, callBack, options);\r\n    }\r\n    addEvent(dom: any | HTMLElement, eventName: string, callBack: Function, options?: AddEventListenerOptions): void {\r\n        if(this.isDOM(dom) || this.getType(dom) === \"[object Window]\") {\r\n            const eventListener:IElmerDOMEvent[] = (<any>dom).eventListeners || [];\r\n            const profillEventName = \"on\" + eventName;\r\n            const eventData:IElmerDOMEvent = {\r\n                eventName,\r\n                handler: callBack\r\n            };\r\n            if(this.bindEvents.indexOf(eventName)>=0) {\r\n                // 使用addEventListener方法绑定事件\r\n                if(dom.addEventListener) {\r\n                    if(options) {\r\n                        (<any>dom).addEventListener(eventName, callBack, options);\r\n                    } else {\r\n                        (<any>dom).addEventListener(eventName, callBack);\r\n                    }\r\n                } else {\r\n                    if(options) {\r\n                        (<any>dom).attachEvent(profillEventName, callBack, options);\r\n                    } else {\r\n                        (<any>dom).attachEvent(profillEventName, callBack);\r\n                    }\r\n                }\r\n            } else {\r\n                // 特殊事件直接绑定\r\n                if(dom[eventName]) {\r\n                    dom[eventName] = callBack;\r\n                } else {\r\n                   dom[profillEventName] = callBack;\r\n                }\r\n            }\r\n            eventListener.push(eventData);\r\n            (<any>dom).eventListeners = eventListener;\r\n        }\r\n    }\r\n    removeEvent(dom:any | HTMLElement, eventName:string, callBack: Function, options?: any):void {\r\n        if(this.isDOM(dom)) {\r\n            const eventListeners:IElmerDOMEvent[] = (<any>dom).eventListeners || [];\r\n            if(eventListeners && eventListeners.length>0) {\r\n                eventListeners.map((tmpListener:IElmerDOMEvent,index: number) => {\r\n                    if(tmpListener.eventName === eventName && callBack === tmpListener.handler ) {\r\n                        if(this.bindEvents.indexOf(tmpListener.eventName)>=0) {\r\n                            if(dom.removeEventListener) {\r\n                                (<any>dom).removeEventListener(tmpListener.eventName,tmpListener.handler);\r\n                            } else {\r\n                                if((<any>dom).detachEvent) {\r\n                                    (<any>dom).detachEvent(\"on\" + tmpListener.eventName, tmpListener.handler);\r\n                                }\r\n                            }\r\n                        } else {\r\n                            (<any>dom)[tmpListener.eventName] = null;\r\n                        }\r\n                        delete eventListeners[index];\r\n                    }\r\n                });\r\n                (<any>dom).eventListeners = eventListeners;\r\n            } else {\r\n                if(dom.removeEventListener) {\r\n                    dom.removeEventListener(eventName, <any>callBack, options);\r\n                } else if((<any>dom).detachEvent) {\r\n                    (<any>dom).detachEvent(\"on\" + eventName, callBack, options);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    unbind(dom: HTMLElement): void {\r\n        if(this.isDOM(dom)) {\r\n            const eventListeners:IElmerDOMEvent[] = (<any>dom).eventListeners || [];\r\n            eventListeners.map((tmpListener:IElmerDOMEvent,index: number) => {\r\n                if(this.bindEvents.indexOf(tmpListener.eventName)>=0) {\r\n                    if(dom.removeEventListener) {\r\n                        (<any>dom).removeEventListener(tmpListener.eventName,tmpListener.handler);\r\n                    } else {\r\n                        if((<any>dom).detachEvent) {\r\n                            (<any>dom).detachEvent(\"on\" + tmpListener.eventName, tmpListener.handler);\r\n                        }\r\n                    }\r\n                }\r\n                delete eventListeners[index];\r\n            });\r\n            (<any>dom).eventListeners = null;\r\n        }\r\n    }\r\n    getMaxWidth(domList:HTMLElement[]|NodeList): number {\r\n        let maxWidth = 0;\r\n        if(domList) {\r\n            if(this.isNodeList(domList)) {\r\n                domList.forEach((tmpDom:HTMLElement) => {\r\n                    let tmpWidth = tmpDom.clientWidth;\r\n                    if(tmpWidth>maxWidth) {\r\n                        maxWidth = tmpWidth;\r\n                    }\r\n                    tmpWidth = null;\r\n                });\r\n            } else {\r\n                domList.map((tmpDom:HTMLElement) => {\r\n                    let tmpWidth = tmpDom.clientWidth;\r\n                    if(tmpWidth>maxWidth) {\r\n                        maxWidth = tmpWidth;\r\n                    }\r\n                    tmpWidth = null;\r\n                });\r\n            }\r\n        }\r\n        return maxWidth;\r\n    }\r\n    find(dom:HTMLElement, selector: string): HTMLElement[] {\r\n        const regs:IElmerDomSelector[] = this.getSelectors(selector) || [];\r\n        const result:HTMLElement[] = [];\r\n        regs.map((tmpSelector:IElmerDomSelector) => {\r\n            const tmpDoms = this.queryInDom(dom, tmpSelector);\r\n            if(tmpDoms.length>0) {\r\n                result.push(...tmpDoms);\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n    animation(options:TypeAnimationOption): ElmerAnimation {\r\n        if(this.isDOM(options.dom)) {\r\n            return new ElmerAnimation({\r\n                beginTime: options.beginTime,\r\n                data: [{\r\n                    beginTime: options.beginTime,\r\n                    dom: options.dom,\r\n                    duration: options.duration,\r\n                    from: options.from,\r\n                    onFinish: options.onFinish,\r\n                    onStart: options.onStart,\r\n                    to: options.to,\r\n                    type: options.type || \"Linear\"\r\n                }],\r\n                duration: options.duration,\r\n                onChange: this.onAnimationChange.bind(this)\r\n            });\r\n        } else {\r\n            throw new Error(\"Animation dom must be an HtmlElement\");\r\n        }\r\n    }\r\n    animations(animationData: TypeAnimationOptions):ElmerAnimation {\r\n        return new ElmerAnimation({\r\n            beginTime: animationData.beginTime,\r\n            data: animationData.options,\r\n            duration: animationData.duration,\r\n            onBegin: animationData.onStart,\r\n            onChange: this.onAnimationChange.bind(this),\r\n            onEnd: animationData.onFinish\r\n        });\r\n    }\r\n    show(dom:HTMLElement, options?: TypeAnimationParam): void {\r\n        const nDuration = options ? options.duration || 300 : 300;\r\n        this.css(dom, {\r\n            display: \"\",\r\n            opacity: 0\r\n        });\r\n        this.animation({\r\n            dom,\r\n            duration: nDuration,\r\n            from: {\r\n                opacity: 0\r\n            },\r\n            to: {\r\n                opacity: 1\r\n            },\r\n            type: options && !this.isEmpty(options.type) ? options.type : \"Linear\",\r\n            // tslint:disable-next-line: object-literal-sort-keys\r\n            onStart: options ? options.onStart : null,\r\n            onFinish: (): void => {\r\n                this.css(dom, {\r\n                    display: \"\",\r\n                    opacity: 1\r\n                });\r\n                options && typeof options.onFinish === \"function\" && options.onFinish();\r\n            }\r\n        });\r\n    }\r\n    hide(dom:HTMLElement, options?: TypeAnimationParam): void {\r\n        const nDuration = options ? options.duration || 300 : 300;\r\n        this.css(dom, {\r\n            display: \"\",\r\n            opacity: 1\r\n        });\r\n        // tslint:disable: object-literal-sort-keys\r\n        this.animation({\r\n            dom,\r\n            duration: nDuration,\r\n            from: {\r\n                opacity: 1\r\n            },\r\n            to: {\r\n                opacity: 0\r\n            },\r\n            type: options && !this.isEmpty(options.type) ? options.type : \"Linear\",\r\n            onStart: options ? options.onStart : null,\r\n            onFinish: (): void => {\r\n                this.css(dom, {\r\n                    display: \"none\",\r\n                    opacity: 1\r\n                });\r\n                options && typeof options.onFinish === \"function\" && options.onFinish();\r\n            }\r\n        });\r\n        // tslint:enable: object-literal-sort-keys\r\n    }\r\n    slideIn(dom:HTMLElement, options?: TypeShowAnimationParam): void {\r\n        let attrHeight = this.attr(dom, \"data-animation-height\") || \"\";attrHeight = attrHeight.replace(/[a-z]*$/i, \"\").replace(/\\%/g,\"\");\r\n        let attrHeightValue = /^[0-9\\.]{1,}$/.test(attrHeight) ? attrHeight : 0;\r\n        let domHeight:number = attrHeightValue > 0 ? attrHeightValue : dom.clientHeight;\r\n        let from:TypeAnimationProperty = {\r\n            height: 0,\r\n            opacity: 1\r\n        };\r\n        let to:TypeAnimationProperty = {\r\n            height: domHeight,\r\n            opacity: 1\r\n        };\r\n        let dValue = animationMethod.converAnimationProperty(animationMethod.readWillChangeCssDefaultData(dom, from, to));\r\n        this.css(dom, {\r\n            display: options && !this.isEmpty(options.display) ? options.display : \"\",\r\n            opacity: \"1\",\r\n        });\r\n        if(to.height === 0) {\r\n            to.height = dom.clientHeight;\r\n        }\r\n        this.css(dom, \"height\", 0);\r\n        this.animation({\r\n            dom,\r\n            duration: options ? (options.duration || 300) : 300,\r\n            from,\r\n            to,\r\n            type: options ? options.type : \"Linear\",\r\n            // tslint:disable-next-line: object-literal-sort-keys\r\n            onFinish: () => {\r\n                this.css(dom, {\r\n                    height: dValue.height,\r\n                    opacity: 1\r\n                });\r\n                options && typeof options.onFinish === \"function\" && options.onFinish();\r\n            }\r\n        });\r\n        dValue = null;\r\n        to = null;\r\n        from = null;\r\n        domHeight = null;\r\n        attrHeightValue = null;\r\n    }\r\n    slideOut(dom:HTMLElement, options?: TypeShowAnimationParam): void {\r\n        const domHeight:number = dom.clientHeight;\r\n        const from:TypeAnimationProperty = {\r\n            height: domHeight,\r\n            opacity: 1\r\n        };\r\n        const to:TypeAnimationProperty = {\r\n            height: 0,\r\n            opacity: 0.5\r\n        };\r\n        const dValue = animationMethod.converAnimationProperty(animationMethod.readWillChangeCssDefaultData(dom, from, to));\r\n        this.animation({\r\n            dom,\r\n            duration: options ? (options.duration || 300) : 300,\r\n            from,\r\n            to,\r\n            type: options ? options.type : \"Linear\",\r\n            // tslint:disable-next-line: object-literal-sort-keys\r\n            onFinish: () => {\r\n                this.css(dom, {\r\n                    display: \"none\",\r\n                    opacity: 1,\r\n                    // tslint:disable-next-line: object-literal-sort-keys\r\n                    height: dValue.height\r\n                });\r\n                this.attr(dom, \"data-animation-height\", dValue.height);\r\n                options && typeof options.onFinish === \"function\" && options.onFinish();\r\n            }\r\n        });\r\n    }\r\n    private onAnimationChange(evt:TypeAnimationChangeEvent): void {\r\n        // console.log(evt.value);\r\n        this.css(evt.dom, evt.value);\r\n    }\r\n    private queryInDom(dom:HTMLElement, selector:IElmerDomSelector): HTMLElement[] {\r\n        let resultDoms:HTMLElement[] = [];\r\n        if(selector.mode === \">\") {\r\n            // 查询当前节点的第一级子节点\r\n            dom.childNodes.forEach((tmpChildNode:Node, index:number) => {\r\n                if(this.matchQueryNode(<HTMLElement>tmpChildNode, selector.type, selector.value, index)) {\r\n                    if(selector.child) {\r\n                        let tmpChildDoms:HTMLElement[] = this.queryInDom(<HTMLElement>tmpChildNode, selector.child);\r\n                        if(tmpChildDoms && tmpChildDoms.length>0) {\r\n                            resultDoms.push(...tmpChildDoms);\r\n                        }\r\n                        tmpChildDoms = null;\r\n                    } else {\r\n                        resultDoms.push(<HTMLElement>tmpChildNode);\r\n                    }\r\n                }\r\n            });\r\n        } else if(selector.mode === \"+\") {\r\n            // 查询和当前同一级，第一个出现的节点\r\n            let nextElement = this.getNextSilbingElement(dom,selector.type, selector.value);\r\n            if(nextElement) {\r\n                if(selector.child) {\r\n                    resultDoms = this.queryInDom(nextElement, selector.child);\r\n                } else {\r\n                    resultDoms = [nextElement];\r\n                }\r\n                nextElement = null;\r\n            }\r\n        } else if(this.isEmpty(selector.mode)) {\r\n            let tmpElements:HTMLElement[] = null;\r\n            let tmpResult = this.getElementsBySelectValue(dom, selector.type, selector.value);\r\n            let filterType= tmpResult.filterType;\r\n            let filter    = tmpResult.filter;\r\n            tmpElements = tmpResult.elements;\r\n            if(tmpElements && tmpElements.length>0) {\r\n                tmpElements.forEach((tmpElement: HTMLElement) => {\r\n                    if(filterType === \".\") {\r\n                        if(this.hasClass(tmpElement, filter)) {\r\n                            if(selector.child) {\r\n                                resultDoms.push(...this.queryInDom(tmpElement, selector.child));\r\n                            } else {\r\n                                resultDoms.push(tmpElement);\r\n                            }\r\n                        }\r\n                    } else if(filterType === \":\") {\r\n                        // 暂不支持，先完成基本组件功能，以后在升级， 此处使用插件模式做判断，以便于扩展判断条件\r\n                        // if(this.mDomModel.filterCheck(tmpElement, filter)) {\r\n                        //     if(selector.child) {\r\n                        //         resultDoms.push(...this.queryInDom(tmpElement, selector.child));\r\n                        //     } else {\r\n                        //         resultDoms.push(tmpElement);\r\n                        //     }\r\n                        // }\r\n                    } else if(this.isEmpty(filterType)) {\r\n                        if(selector.child) {\r\n                            resultDoms.push(...this.queryInDom(tmpElement, selector.child));\r\n                        } else {\r\n                            resultDoms.push(tmpElement);\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            tmpResult = null;\r\n            tmpElements = null;\r\n            filter = null;\r\n            filterType = null;\r\n        }\r\n        return resultDoms;\r\n    }\r\n    private getElementsBySelectValue(parent:HTMLElement, selectorType: string, selectorValue: string): any {\r\n        let tagName = selectorValue.replace(/(\\.|\\:|\\:\\:).*$/,\"\");\r\n        let filter  = /^.*(\\.|\\:|\\:\\:)/.test(selectorValue) ? selectorValue.replace(/^.*(\\.|\\:|\\:\\:)/,\"\") : \"\";\r\n        let filterType = selectorValue.substr(tagName.length, selectorValue.length-tagName.length-filter.length);\r\n        const result:HTMLElement[] = [];\r\n        if(this.isEmpty(selectorType)) {\r\n            parent.querySelectorAll(tagName).forEach((tmpElement) => {\r\n                result.push(<HTMLElement>tmpElement);\r\n            });\r\n        } else if(selectorType === \".\" || selectorType === \"#\") {\r\n            parent.querySelectorAll(\"*\").forEach((tmpElement:HTMLElement) => {\r\n                if(selectorType === \".\") {\r\n                    if(this.hasClass(tmpElement, tagName)) {\r\n                        result.push(tmpElement);\r\n                    }\r\n                } else if(selectorType === \"#\") {\r\n                    if(tmpElement.id === tagName) {\r\n                        result.push(tmpElement);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        tagName = null;\r\n        filter = null;\r\n        filterType = null;\r\n        return {\r\n            elements  : result || [],\r\n            filter,\r\n            filterType,\r\n        };\r\n    }\r\n    private getNextSilbingElement(dom: HTMLElement,queryType:string, querySelector: string):HTMLElement {\r\n        const nextElement = dom.nextElementSibling;\r\n        if(nextElement) {\r\n            if(this.matchQueryNode(<HTMLElement>nextElement, queryType, querySelector, 0)) {\r\n                return <HTMLElement>nextElement;\r\n            } else {\r\n                return this.getNextSilbingElement(<HTMLElement>nextElement,queryType, querySelector);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    private matchQueryNode(dom:HTMLElement, queryType: string, querySelector: string, index: number = 0): boolean {\r\n        const tmpReg = /^([a-z0-9][a-z0-9\\-_]*)/;\r\n        const tmpMatch = querySelector.match(tmpReg);\r\n        if(tmpMatch) {\r\n            const checkValue = tmpMatch[1];\r\n            if(this.isEmpty(queryType)) {\r\n                return dom.tagName.toLowerCase() === checkValue.toLowerCase();\r\n            } else if(queryType === \".\") {\r\n                return this.hasClass(dom, checkValue);\r\n            } else if(queryType === \"#\") {\r\n                return dom.id === checkValue;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * 更新dom的className，此写法为兼容低版本不支持classList\r\n     * @param dom 更新dom元素\r\n     * @param className 样式名\r\n     * @param isAdd 是否为添加，否则删除\r\n     */\r\n    private updateDomClassName(dom:HTMLElement, className: string, isAdd: boolean): void {\r\n        if(this.isDOM(dom) && !this.isEmpty(className)) {\r\n            if(dom.classList) {\r\n                if(isAdd) {\r\n                    !dom.classList.contains(className) && dom.classList.add(className);\r\n                } else {\r\n                    dom.classList.contains(className) && dom.classList.remove(className);\r\n                }\r\n            } else {\r\n                const tmpClassName = (dom.className || \"\").replace(/\\s\\s/g, \" \");\r\n                let tmpClassArr = tmpClassName.split(\" \");\r\n                let hasChanged = false;\r\n                const tmpClassIndex = tmpClassArr.indexOf(className);\r\n                if(isAdd) {\r\n                    if(tmpClassIndex<0) {\r\n                        tmpClassArr.push(className);\r\n                        hasChanged = true;\r\n                    }\r\n                } else {\r\n                    if(tmpClassIndex>0) {\r\n                        const newClassArr = [];\r\n                        for(let i=0;i<tmpClassArr.length;i++) {\r\n                            if(tmpClassArr[i] !== className && !this.isEmpty(tmpClassArr[i])) {\r\n                                newClassArr.push(tmpClassArr[i]);\r\n                            } else {\r\n                                hasChanged = true;\r\n                            }\r\n                        }\r\n                        tmpClassArr = newClassArr;\r\n                    }\r\n                }\r\n                if(hasChanged) {\r\n                    dom.className = tmpClassArr.join(\" \");\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { StaticCommon } from \"elmer-common\";\nimport colorData from \"./ElmerColorMapping\";\n\nexport type TypeAnimationProperty = {\n    left?: number|string;\n    top?: number|string;\n    width?: number|string;\n    height?: number|string;\n    margin?: number|string;\n    marginLeft?: number|string;\n    marginTop?: number|string;\n    marginRight?: number|string;\n    marginBottom?: number|string;\n    paddingLeft?: number|string;\n    paddingTop?: number|string;\n    paddingRight?: number|string;\n    paddingBottom?: number|string;\n    padding?: number|string;\n    borderWidth?: number|string;\n    borderLeftWidth?: number|string;\n    borderTopWidth?: number|string;\n    borderRightWidth?: number|string;\n    borderBottomWidth?: number|string;\n    borderColor?: string;\n    borderLeftColor?: string;\n    borderTopColor?: string;\n    borderRightColor?: string;\n    borderBottomColor?: string;\n    backgroundColor?: string;\n    color?: string;\n    fontSize?: string;\n    opacity?: number;\n    transformTranslate?: number|string;\n    transformTranslate3d?: number|string;\n    transformTranslateX?: number|string;\n    transformTranslateY?: number|string;\n    transformTranslateZ?: number|string;\n    transformScale?: number|string;\n    transformScale3d?: number|string;\n    transformScaleX?: number|string;\n    transformScaleY?: number|string;\n    transformScaleZ?: number|string;\n    transformRotate?: number|string;\n    transformRotate3d?: number|string;\n    transformRotateX?: number|string;\n    transformRotateY?: number|string;\n    transformRotateZ?: number|string;\n    transformSkew?: number|string;\n    transformSkewX?: number|string;\n    transformSkewY?: number|string;\n};\ntype TypeAnimationTransformPropertyKeys = \"transformTranslate\" | \"transformTranslate3d\" | \"transformTranslateX\" | \"transformTranslateY\" | \"transformTranslateZ\" |\n    \"transformScalc\"  | \"transformScalc3d\"  | \"transformScalcX\"  | \"transformScalcY\"    | \"transformScalcZ\" |\n    \"transformRotate\" | \"transformRotate3d\" | \"transformRotateX\" | \"transformRotateY\"   | \"transformRotateZ\" |\n    \"transformSkew\"   | \"transformSkewX\"    | \"transformSkewY\";\n\nexport type TypeAnimationCssRule = {\n    [P in Exclude<keyof TypeAnimationProperty, TypeAnimationTransformPropertyKeys>]: TypeAnimationProperty[P]\n} & {\n    transform?: string;\n    webkitTransform?: string;\n    mozTransform?: string;\n    msTransform?: string;\n    oTransform?: string;\n};\n\nexport type TypeAnimationContext = {\n    cssKey?: string;\n    unit?: string;\n    value1Unit?: string;\n    value2Unit?: string;\n    value3Unit?: string;\n    value4Unit?: string;\n    value1?: number | string | number[] | string[];\n    value2?: number | string | number[] | string[];\n    value3?: number | string | number[] | string[];\n    value4?: number | string | number[] | string[];\n};\n\nexport type TypeAnimationPropertyData = {[P in keyof TypeAnimationProperty]:TypeAnimationContext };\n\nconst rgbToHex = (r:number, g:number, b:number):string => {\n    // tslint:disable-next-line: no-bitwise\n    const hex = ((r<<16) | (g<<8) | b).toString(16);\n    return \"#\" + new Array(Math.abs(hex.length-7)).join(\"0\") + hex;\n};\n\nconst hexToRgb = (hex: string): number[] => {\n    const rgb: number[] = [];\n    let hexStr = hex || \"#fff\";\n    let alph = \"\";\n    if(hexStr.length>=9) {\n        alph = hexStr.substr(7,2);\n    }\n    if(hexStr.length<6) {\n        hexStr = \"#\" + (hexStr.replace(/^#/,\"\")).repeat(3);\n        hexStr = hexStr.substr(0, 7);\n    }\n    for (let i = 1; i < 7; i += 2) {\n        const mData = hexStr.slice(i, i + 2);\n        rgb.push(parseInt(mData, 16));\n    }\n    if(!StaticCommon.isEmpty(alph)) {\n        rgb.push(parseInt(alph, 16));\n    }\n    return rgb;\n};\nconst gradient = (startColor:string, endColor:string, step) => {\n    // 将 hex 转换为rgb\n    const sColor = hexToRgb(startColor),\n        eColor = hexToRgb(endColor);\n\n    // 计算R\\G\\B每一步的差值\n    const rStep = (eColor[0] - sColor[0]) / step,\n    gStep = (eColor[1] - sColor[1]) / step,\n    bStep = (eColor[2] - sColor[2]) / step;\n\n    const gradientColorArr = [];\n    for (let i = 0; i < step; i++) {\n        // 计算每一步的hex值\n        gradientColorArr.push(rgbToHex(parseInt((rStep * i + sColor[0]).toString(), 10), parseInt((gStep * i + sColor[1]).toString(), 10), parseInt((bStep * i + sColor[2]).toString(), 10)));\n    }\n    return gradientColorArr;\n};\n\nconst rgbToNums = (rgbStr: string) => {\n    const rgbMatch = rgbStr.match(/^\\s*rgb\\(([0-9]*)\\s*\\,\\s*([0-9]*)\\s*\\,\\s*([0-9]*)\\s*\\)\\s*/);\n    const rgbaMatch = rgbStr.match(/^\\s*rgba\\(([0-9]*)\\s*\\,\\s*([0-9]*)\\s*\\,\\s*([0-9]*)\\s*\\,\\s*([0-9]*)\\s*\\)\\s*/);\n    const result:number[] = [];\n    if(rgbaMatch) {\n        result.push(parseInt(rgbaMatch[1], 10));\n        result.push(parseInt(rgbaMatch[2], 10));\n        result.push(parseInt(rgbaMatch[3], 10));\n        result.push(parseInt(rgbaMatch[4], 10));\n    } else {\n        if(rgbMatch) {\n            result.push(parseInt(rgbMatch[1], 10));\n            result.push(parseInt(rgbMatch[2], 10));\n            result.push(parseInt(rgbMatch[3], 10));\n        }\n    }\n    return result;\n};\nconst getTransformValue = (dom:HTMLElement): string => {\n    let result = \"\";\n    if(dom) {\n        result = dom.style.transform || dom.style.webkitTransform || dom.style[\"msTransform\"] || dom.style[\"mozTransform\"] || dom.style[\"oTransform\"] || \"\";\n    }\n    return result;\n};\nexport const isCssEmpty = (cssValue:any):boolean => {\n    return cssValue === undefined || cssValue === null;\n}\nexport const calcPropertyData = (resultData: any, key, value: string | number): void => {\n    const dResult:TypeAnimationContext = {\n        cssKey: key,\n        unit: \"\"\n    };\n    if(/color$/i.test(key)) {\n        dResult.unit = \"\";\n        if(!StaticCommon.isEmpty(value) && StaticCommon.isString(value)) {\n            const mapValue = value.replace(/^\\s*/, \"\").replace(/\\s*$/, \"\").replace(/\\s{2,}/,\" \");\n            const mapList = mapValue.split(\" \");\n            if(mapList.length>0) {\n                if(!isCssEmpty(colorData[mapList[0]])) {\n                    mapList[0] = colorData[mapList[0]];\n                }\n                dResult.value1 = /^#/.test(mapList[0]) ? hexToRgb(mapList[0]) : rgbToNums(mapList[0]);\n                if(mapList.length>1) {\n                    if(!isCssEmpty(colorData[mapList[1]])) {\n                        mapList[1] = colorData[mapList[1]];\n                    }\n                    dResult.value2 = /^#/.test(mapList[1]) ? hexToRgb(mapList[1]) : rgbToNums(mapList[1]);\n                    if(mapList.length>2) {\n                        if(!isCssEmpty(colorData[mapList[2]])) {\n                            mapList[2] = colorData[mapList[2]];\n                        }\n                        dResult.value3 = /^#/.test(mapList[2]) ? hexToRgb(mapList[2]) : rgbToNums(mapList[2]);\n                        if(mapList.length>3) {\n                            if(!isCssEmpty(colorData[mapList[3]])) {\n                                mapList[3] = colorData[mapList[3]];\n                            }\n                            dResult.value4 = /^#/.test(mapList[3]) ? hexToRgb(mapList[3]) : rgbToNums(mapList[3]);\n                        }\n                    }\n                }\n            }\n        }\n    } else {\n        if(StaticCommon.isString(value)) {\n            // opacity 是一个特殊的属性，当value为空时值是1 transform: translateX() scale()\n            if(key !== \"opacity\") {\n                const mapValue = value.replace(/^\\s*/, \"\").replace(/\\s*$/, \"\").replace(/\\s{2,}/,\" \");\n                const mapList = /^transform/i.test(key) ? mapValue.split(\",\") : mapValue.split(\" \");\n                for(let i=0;i<mapList.length;i++) {\n                    let tmpValue = mapList[i];\n                    let index = i + 1;\n                    if(!isCssEmpty(tmpValue)) {\n                        if(/^[\\-]{0,1}[0-9\\.]*$/.test(tmpValue)) {\n                            dResult[`value${index}`] = StaticCommon.isNumeric(tmpValue) && StaticCommon.isString(tmpValue) ? parseFloat(tmpValue) : tmpValue;\n                            dResult[`value${index}Unit`] = \"\";\n                        } else if (/^[\\-]{0,1}[0-9\\.]{1,}([a-z]{1,}|%)$/.test(tmpValue)) {\n                            const tmpMatch = tmpValue.match(/^([\\-]{0,1}[0-9]{1,})([a-z]{1,}|%)$/);\n                            if(tmpMatch) {\n                                dResult[`value${index}`] = StaticCommon.isNumeric(tmpMatch[1]) && StaticCommon.isString(tmpMatch[1]) ? parseFloat(tmpMatch[1]) : tmpMatch[1];\n                                dResult[`value${index}Unit`] = tmpMatch[2];\n                            }\n                        }\n                    } else {\n                        if(key === \"opacity\") {\n                            dResult[`value${index}`] = 1;\n                            dResult[`value${index}Unit`] = \"\";\n                        }\n                    }\n                    tmpValue = null;\n                    index = null;\n                }\n            } else {\n                if(/^[0-9\\.]{1,}$/.test(value)) {\n                    dResult.value1 = parseFloat(value);\n                } else {\n                    dResult.value1 = 1;\n                }\n            }\n        } else {\n            dResult.value1 = value;\n        }\n    }\n    resultData[key] = dResult;\n};\n\nexport const calcPropertyConfigData = (configData: TypeAnimationProperty):TypeAnimationPropertyData => {\n    const result = {};\n    if(configData) {\n        // tslint:disable-next-line: forin\n        for(const key in configData) {\n            const cssValue = configData[key];\n            calcPropertyData(result, key, cssValue);\n        }\n    }\n    return result;\n};\n\nexport const readWillChangeCssDefaultData = (dom:HTMLElement, from:TypeAnimationProperty, to:TypeAnimationProperty): TypeAnimationPropertyData => {\n    const resultData = {};\n    const fromObj = from || {};\n    const toObj = to || {};\n    if(dom) {\n        let allKeys = [...Object.keys(fromObj),...Object.keys(toObj)];\n        let transformValue;\n        allKeys.map((toKey:string) => {\n            if(/^transform/i.test(toKey)) {\n                let transKey = toKey.replace(/^transform/i, \"\");\n                transKey = transKey.substr(0,1).toLowerCase() + transKey.substr(1);\n                if(transformValue === undefined || transformValue === null) {\n                    transformValue = getTransformValue(dom);\n                }\n                if(!StaticCommon.isEmpty(transformValue)) {\n                    const valueReg = new RegExp(`${transKey}\\s*\\\\(([0-9a-z,%\\.]*)\\\\)\\s*`, \"i\");\n                    const valueMatch = transformValue.match(valueReg);\n                    if(valueMatch) {\n                        calcPropertyData(resultData, toKey, valueMatch[1]);\n                    } else {\n                        resultData[toKey] = {\n                            unit: \"\",\n                            value1: 0\n                        };\n                    }\n                }\n            } else {\n                let value = dom.style.getPropertyValue(toKey);\n                if(toKey === \"width\") {\n                    if(dom.clientWidth > 0) {\n                        value = dom.clientWidth.toString();\n                    }\n                } else if(toKey === \"height\") {\n                    if(dom.clientHeight>0) {\n                        value = dom.clientHeight.toString();\n                    }\n                }\n                calcPropertyData(resultData, toKey, value);\n            }\n        });\n        allKeys = null;\n    }\n    return resultData;\n};\n\nconst getCssValue = (cssKey: string, value?: any, defaultUnit?: string, valueUnit?: string): string => {\n    if(!isCssEmpty(value)) {\n        if(!/color$/i.test(cssKey)) {\n            if(isCssEmpty(valueUnit)) {\n                if(!isCssEmpty(defaultUnit)) {\n                    return value.toString() + defaultUnit;\n                } else {\n                    return value.toString();\n                }\n            } else {\n                return value.toString() + valueUnit;\n            }\n        } else {\n            if(StaticCommon.isArray(value)) {\n                if(value.length === 3) {\n                    return rgbToHex(value[0], value[1], value[2]);\n                } else if(value.length === 4) {\n                    return `rgba(${value.join(\",\")})`;\n                } else {\n                    return value.join(\" \");\n                }\n            } else {\n                return value;\n            }\n        }\n    } else {\n        return value;\n    }\n};\n\nexport const convertAnimationDataToCssProperty = (animationData: TypeAnimationPropertyData):TypeAnimationCssRule => {\n    const cssResult:any = {};\n    if(animationData) {\n        const transformValues = [];\n        // tslint:disable-next-line: forin\n        for(const cssKey in animationData) {\n            const cssData: TypeAnimationContext = animationData[cssKey];\n            const cssValue = [];\n            const cssValue1 = getCssValue(cssKey, cssData.value1, cssData.unit, cssData.value1Unit);\n            const cssValue2 = getCssValue(cssKey, cssData.value2, cssData.unit, cssData.value2Unit);\n            const cssValue3 = getCssValue(cssKey, cssData.value3, cssData.unit, cssData.value3Unit);\n            const cssValue4 = getCssValue(cssKey, cssData.value4, cssData.unit, cssData.value4Unit);\n            !isCssEmpty(cssValue1) && cssValue.push(cssValue1);\n            !isCssEmpty(cssValue2) && cssValue.push(cssValue2);\n            !isCssEmpty(cssValue3) && cssValue.push(cssValue3);\n            !isCssEmpty(cssValue4) && cssValue.push(cssValue4);\n            if(!/^transform/i.test(cssKey)) {\n                cssResult[cssKey] = cssValue.join(\" \");\n                if(cssKey !== \"opacity\" && /^[0-9\\.]{1,}$/.test(cssResult[cssKey])) {\n                    // 特殊单位的css，目前只发现opacity是不需要设置单位的\n                    cssResult[cssKey] = cssResult[cssKey] + \"px\";\n                }\n            } else if(/^transform/i.test(cssKey)) {\n                let cssKeyValue = cssKey.replace(/^transform/i, \"\");\n                cssKeyValue = cssKeyValue.substr(0,1).toLowerCase() + cssKeyValue.substr(1);\n                transformValues.push(`${cssKeyValue}(${cssValue.join(\",\")})`);\n            }\n        }\n        if(transformValues.length>0) {\n            cssResult[\"transform\"] = transformValues.join(\" \");\n            cssResult[\"webkitTransform\"] = transformValues.join(\" \");\n            cssResult[\"mozTransform\"] = transformValues.join(\" \");\n            cssResult[\"msTransform\"] = transformValues.join(\" \");\n            cssResult[\"oTransform\"] = transformValues.join(\" \");\n        }\n    }\n    return cssResult;\n};\n\nexport default {\n    converAnimationProperty: convertAnimationDataToCssProperty,\n    converOption: calcPropertyConfigData,\n    gradient,\n    hexToRgb,\n    readWillChangeCssDefaultData,\n    rgbToHex,\n};\n","/*! *****************************************************************************\r\nCopyright (C) Microsoft. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\nvar Reflect;\r\n(function (Reflect) {\r\n    // Metadata Proposal\r\n    // https://rbuckton.github.io/reflect-metadata/\r\n    (function (factory) {\r\n        var root = typeof global === \"object\" ? global :\r\n            typeof self === \"object\" ? self :\r\n                typeof this === \"object\" ? this :\r\n                    Function(\"return this;\")();\r\n        var exporter = makeExporter(Reflect);\r\n        if (typeof root.Reflect === \"undefined\") {\r\n            root.Reflect = Reflect;\r\n        }\r\n        else {\r\n            exporter = makeExporter(root.Reflect, exporter);\r\n        }\r\n        factory(exporter);\r\n        function makeExporter(target, previous) {\r\n            return function (key, value) {\r\n                if (typeof target[key] !== \"function\") {\r\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\r\n                }\r\n                if (previous)\r\n                    previous(key, value);\r\n            };\r\n        }\r\n    })(function (exporter) {\r\n        var hasOwn = Object.prototype.hasOwnProperty;\r\n        // feature test for Symbol support\r\n        var supportsSymbol = typeof Symbol === \"function\";\r\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\r\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\r\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\r\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\r\n        var downLevel = !supportsCreate && !supportsProto;\r\n        var HashMap = {\r\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\r\n            create: supportsCreate\r\n                ? function () { return MakeDictionary(Object.create(null)); }\r\n                : supportsProto\r\n                    ? function () { return MakeDictionary({ __proto__: null }); }\r\n                    : function () { return MakeDictionary({}); },\r\n            has: downLevel\r\n                ? function (map, key) { return hasOwn.call(map, key); }\r\n                : function (map, key) { return key in map; },\r\n            get: downLevel\r\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\r\n                : function (map, key) { return map[key]; },\r\n        };\r\n        // Load global or shim versions of Map, Set, and WeakMap\r\n        var functionPrototype = Object.getPrototypeOf(Function);\r\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\r\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\r\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\r\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\r\n        // [[Metadata]] internal slot\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\r\n        var Metadata = new _WeakMap();\r\n        /**\r\n         * Applies a set of decorators to a property of a target object.\r\n         * @param decorators An array of decorators.\r\n         * @param target The target object.\r\n         * @param propertyKey (Optional) The property key to decorate.\r\n         * @param attributes (Optional) The property descriptor for the target key.\r\n         * @remarks Decorators are applied in reverse order.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     Example = Reflect.decorate(decoratorsArray, Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     Object.defineProperty(Example, \"staticMethod\",\r\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\r\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\r\n         *\r\n         *     // method (on prototype)\r\n         *     Object.defineProperty(Example.prototype, \"method\",\r\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\r\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\r\n         *\r\n         */\r\n        function decorate(decorators, target, propertyKey, attributes) {\r\n            if (!IsUndefined(propertyKey)) {\r\n                if (!IsArray(decorators))\r\n                    throw new TypeError();\r\n                if (!IsObject(target))\r\n                    throw new TypeError();\r\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\r\n                    throw new TypeError();\r\n                if (IsNull(attributes))\r\n                    attributes = undefined;\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n                return DecorateProperty(decorators, target, propertyKey, attributes);\r\n            }\r\n            else {\r\n                if (!IsArray(decorators))\r\n                    throw new TypeError();\r\n                if (!IsConstructor(target))\r\n                    throw new TypeError();\r\n                return DecorateConstructor(decorators, target);\r\n            }\r\n        }\r\n        exporter(\"decorate\", decorate);\r\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\r\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\r\n        /**\r\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\r\n         * @param metadataKey The key for the metadata entry.\r\n         * @param metadataValue The value for the metadata entry.\r\n         * @returns A decorator function.\r\n         * @remarks\r\n         * If `metadataKey` is already defined for the target and target key, the\r\n         * metadataValue for that key will be overwritten.\r\n         * @example\r\n         *\r\n         *     // constructor\r\n         *     @Reflect.metadata(key, value)\r\n         *     class Example {\r\n         *     }\r\n         *\r\n         *     // property (on constructor, TypeScript only)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         static staticProperty;\r\n         *     }\r\n         *\r\n         *     // property (on prototype, TypeScript only)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         property;\r\n         *     }\r\n         *\r\n         *     // method (on constructor)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         static staticMethod() { }\r\n         *     }\r\n         *\r\n         *     // method (on prototype)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         method() { }\r\n         *     }\r\n         *\r\n         */\r\n        function metadata(metadataKey, metadataValue) {\r\n            function decorator(target, propertyKey) {\r\n                if (!IsObject(target))\r\n                    throw new TypeError();\r\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\r\n                    throw new TypeError();\r\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\r\n            }\r\n            return decorator;\r\n        }\r\n        exporter(\"metadata\", metadata);\r\n        /**\r\n         * Define a unique metadata entry on the target.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param metadataValue A value that contains attached metadata.\r\n         * @param target The target object on which to define metadata.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\r\n         *\r\n         *     // decorator factory as metadata-producing annotation.\r\n         *     function MyAnnotation(options): Decorator {\r\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\r\n         *     }\r\n         *\r\n         */\r\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\r\n        }\r\n        exporter(\"defineMetadata\", defineMetadata);\r\n        /**\r\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function hasMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"hasMetadata\", hasMetadata);\r\n        /**\r\n         * Gets a value indicating whether the target object has the provided metadata key defined.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\r\n        /**\r\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"getMetadata\", getMetadata);\r\n        /**\r\n         * Gets the metadata value for the provided metadata key on the target object.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getOwnMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"getOwnMetadata\", getOwnMetadata);\r\n        /**\r\n         * Gets the metadata keys defined on the target object or its prototype chain.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns An array of unique metadata keys.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getMetadataKeys(Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getMetadataKeys(target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryMetadataKeys(target, propertyKey);\r\n        }\r\n        exporter(\"getMetadataKeys\", getMetadataKeys);\r\n        /**\r\n         * Gets the unique metadata keys defined on the target object.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns An array of unique metadata keys.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getOwnMetadataKeys(Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getOwnMetadataKeys(target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\r\n        }\r\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\r\n        /**\r\n         * Deletes the metadata entry from the target object with the provided key.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function deleteMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return false;\r\n            if (!metadataMap.delete(metadataKey))\r\n                return false;\r\n            if (metadataMap.size > 0)\r\n                return true;\r\n            var targetMetadata = Metadata.get(target);\r\n            targetMetadata.delete(propertyKey);\r\n            if (targetMetadata.size > 0)\r\n                return true;\r\n            Metadata.delete(target);\r\n            return true;\r\n        }\r\n        exporter(\"deleteMetadata\", deleteMetadata);\r\n        function DecorateConstructor(decorators, target) {\r\n            for (var i = decorators.length - 1; i >= 0; --i) {\r\n                var decorator = decorators[i];\r\n                var decorated = decorator(target);\r\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\r\n                    if (!IsConstructor(decorated))\r\n                        throw new TypeError();\r\n                    target = decorated;\r\n                }\r\n            }\r\n            return target;\r\n        }\r\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\r\n            for (var i = decorators.length - 1; i >= 0; --i) {\r\n                var decorator = decorators[i];\r\n                var decorated = decorator(target, propertyKey, descriptor);\r\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\r\n                    if (!IsObject(decorated))\r\n                        throw new TypeError();\r\n                    descriptor = decorated;\r\n                }\r\n            }\r\n            return descriptor;\r\n        }\r\n        function GetOrCreateMetadataMap(O, P, Create) {\r\n            var targetMetadata = Metadata.get(O);\r\n            if (IsUndefined(targetMetadata)) {\r\n                if (!Create)\r\n                    return undefined;\r\n                targetMetadata = new _Map();\r\n                Metadata.set(O, targetMetadata);\r\n            }\r\n            var metadataMap = targetMetadata.get(P);\r\n            if (IsUndefined(metadataMap)) {\r\n                if (!Create)\r\n                    return undefined;\r\n                metadataMap = new _Map();\r\n                targetMetadata.set(P, metadataMap);\r\n            }\r\n            return metadataMap;\r\n        }\r\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\r\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\r\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n            if (hasOwn)\r\n                return true;\r\n            var parent = OrdinaryGetPrototypeOf(O);\r\n            if (!IsNull(parent))\r\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\r\n            return false;\r\n        }\r\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\r\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return false;\r\n            return ToBoolean(metadataMap.has(MetadataKey));\r\n        }\r\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\r\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\r\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n            if (hasOwn)\r\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\r\n            var parent = OrdinaryGetPrototypeOf(O);\r\n            if (!IsNull(parent))\r\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\r\n            return undefined;\r\n        }\r\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\r\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return undefined;\r\n            return metadataMap.get(MetadataKey);\r\n        }\r\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\r\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\r\n            metadataMap.set(MetadataKey, MetadataValue);\r\n        }\r\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\r\n        function OrdinaryMetadataKeys(O, P) {\r\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\r\n            var parent = OrdinaryGetPrototypeOf(O);\r\n            if (parent === null)\r\n                return ownKeys;\r\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\r\n            if (parentKeys.length <= 0)\r\n                return ownKeys;\r\n            if (ownKeys.length <= 0)\r\n                return parentKeys;\r\n            var set = new _Set();\r\n            var keys = [];\r\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\r\n                var key = ownKeys_1[_i];\r\n                var hasKey = set.has(key);\r\n                if (!hasKey) {\r\n                    set.add(key);\r\n                    keys.push(key);\r\n                }\r\n            }\r\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\r\n                var key = parentKeys_1[_a];\r\n                var hasKey = set.has(key);\r\n                if (!hasKey) {\r\n                    set.add(key);\r\n                    keys.push(key);\r\n                }\r\n            }\r\n            return keys;\r\n        }\r\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\r\n        function OrdinaryOwnMetadataKeys(O, P) {\r\n            var keys = [];\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return keys;\r\n            var keysObj = metadataMap.keys();\r\n            var iterator = GetIterator(keysObj);\r\n            var k = 0;\r\n            while (true) {\r\n                var next = IteratorStep(iterator);\r\n                if (!next) {\r\n                    keys.length = k;\r\n                    return keys;\r\n                }\r\n                var nextValue = IteratorValue(next);\r\n                try {\r\n                    keys[k] = nextValue;\r\n                }\r\n                catch (e) {\r\n                    try {\r\n                        IteratorClose(iterator);\r\n                    }\r\n                    finally {\r\n                        throw e;\r\n                    }\r\n                }\r\n                k++;\r\n            }\r\n        }\r\n        // 6 ECMAScript Data Typ0es and Values\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\r\n        function Type(x) {\r\n            if (x === null)\r\n                return 1 /* Null */;\r\n            switch (typeof x) {\r\n                case \"undefined\": return 0 /* Undefined */;\r\n                case \"boolean\": return 2 /* Boolean */;\r\n                case \"string\": return 3 /* String */;\r\n                case \"symbol\": return 4 /* Symbol */;\r\n                case \"number\": return 5 /* Number */;\r\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\r\n                default: return 6 /* Object */;\r\n            }\r\n        }\r\n        // 6.1.1 The Undefined Type\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\r\n        function IsUndefined(x) {\r\n            return x === undefined;\r\n        }\r\n        // 6.1.2 The Null Type\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\r\n        function IsNull(x) {\r\n            return x === null;\r\n        }\r\n        // 6.1.5 The Symbol Type\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\r\n        function IsSymbol(x) {\r\n            return typeof x === \"symbol\";\r\n        }\r\n        // 6.1.7 The Object Type\r\n        // https://tc39.github.io/ecma262/#sec-object-type\r\n        function IsObject(x) {\r\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\r\n        }\r\n        // 7.1 Type Conversion\r\n        // https://tc39.github.io/ecma262/#sec-type-conversion\r\n        // 7.1.1 ToPrimitive(input [, PreferredType])\r\n        // https://tc39.github.io/ecma262/#sec-toprimitive\r\n        function ToPrimitive(input, PreferredType) {\r\n            switch (Type(input)) {\r\n                case 0 /* Undefined */: return input;\r\n                case 1 /* Null */: return input;\r\n                case 2 /* Boolean */: return input;\r\n                case 3 /* String */: return input;\r\n                case 4 /* Symbol */: return input;\r\n                case 5 /* Number */: return input;\r\n            }\r\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\r\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\r\n            if (exoticToPrim !== undefined) {\r\n                var result = exoticToPrim.call(input, hint);\r\n                if (IsObject(result))\r\n                    throw new TypeError();\r\n                return result;\r\n            }\r\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\r\n        }\r\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\r\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\r\n        function OrdinaryToPrimitive(O, hint) {\r\n            if (hint === \"string\") {\r\n                var toString_1 = O.toString;\r\n                if (IsCallable(toString_1)) {\r\n                    var result = toString_1.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n                var valueOf = O.valueOf;\r\n                if (IsCallable(valueOf)) {\r\n                    var result = valueOf.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n            }\r\n            else {\r\n                var valueOf = O.valueOf;\r\n                if (IsCallable(valueOf)) {\r\n                    var result = valueOf.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n                var toString_2 = O.toString;\r\n                if (IsCallable(toString_2)) {\r\n                    var result = toString_2.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n            }\r\n            throw new TypeError();\r\n        }\r\n        // 7.1.2 ToBoolean(argument)\r\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\r\n        function ToBoolean(argument) {\r\n            return !!argument;\r\n        }\r\n        // 7.1.12 ToString(argument)\r\n        // https://tc39.github.io/ecma262/#sec-tostring\r\n        function ToString(argument) {\r\n            return \"\" + argument;\r\n        }\r\n        // 7.1.14 ToPropertyKey(argument)\r\n        // https://tc39.github.io/ecma262/#sec-topropertykey\r\n        function ToPropertyKey(argument) {\r\n            var key = ToPrimitive(argument, 3 /* String */);\r\n            if (IsSymbol(key))\r\n                return key;\r\n            return ToString(key);\r\n        }\r\n        // 7.2 Testing and Comparison Operations\r\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\r\n        // 7.2.2 IsArray(argument)\r\n        // https://tc39.github.io/ecma262/#sec-isarray\r\n        function IsArray(argument) {\r\n            return Array.isArray\r\n                ? Array.isArray(argument)\r\n                : argument instanceof Object\r\n                    ? argument instanceof Array\r\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\r\n        }\r\n        // 7.2.3 IsCallable(argument)\r\n        // https://tc39.github.io/ecma262/#sec-iscallable\r\n        function IsCallable(argument) {\r\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\r\n            return typeof argument === \"function\";\r\n        }\r\n        // 7.2.4 IsConstructor(argument)\r\n        // https://tc39.github.io/ecma262/#sec-isconstructor\r\n        function IsConstructor(argument) {\r\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\r\n            return typeof argument === \"function\";\r\n        }\r\n        // 7.2.7 IsPropertyKey(argument)\r\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\r\n        function IsPropertyKey(argument) {\r\n            switch (Type(argument)) {\r\n                case 3 /* String */: return true;\r\n                case 4 /* Symbol */: return true;\r\n                default: return false;\r\n            }\r\n        }\r\n        // 7.3 Operations on Objects\r\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\r\n        // 7.3.9 GetMethod(V, P)\r\n        // https://tc39.github.io/ecma262/#sec-getmethod\r\n        function GetMethod(V, P) {\r\n            var func = V[P];\r\n            if (func === undefined || func === null)\r\n                return undefined;\r\n            if (!IsCallable(func))\r\n                throw new TypeError();\r\n            return func;\r\n        }\r\n        // 7.4 Operations on Iterator Objects\r\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\r\n        function GetIterator(obj) {\r\n            var method = GetMethod(obj, iteratorSymbol);\r\n            if (!IsCallable(method))\r\n                throw new TypeError(); // from Call\r\n            var iterator = method.call(obj);\r\n            if (!IsObject(iterator))\r\n                throw new TypeError();\r\n            return iterator;\r\n        }\r\n        // 7.4.4 IteratorValue(iterResult)\r\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\r\n        function IteratorValue(iterResult) {\r\n            return iterResult.value;\r\n        }\r\n        // 7.4.5 IteratorStep(iterator)\r\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\r\n        function IteratorStep(iterator) {\r\n            var result = iterator.next();\r\n            return result.done ? false : result;\r\n        }\r\n        // 7.4.6 IteratorClose(iterator, completion)\r\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\r\n        function IteratorClose(iterator) {\r\n            var f = iterator[\"return\"];\r\n            if (f)\r\n                f.call(iterator);\r\n        }\r\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\r\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\r\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\r\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\r\n        function OrdinaryGetPrototypeOf(O) {\r\n            var proto = Object.getPrototypeOf(O);\r\n            if (typeof O !== \"function\" || O === functionPrototype)\r\n                return proto;\r\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\r\n            // Try to determine the superclass constructor. Compatible implementations\r\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\r\n            // or ensure each class has a valid `constructor` property on its prototype that\r\n            // points back to the constructor.\r\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\r\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\r\n            if (proto !== functionPrototype)\r\n                return proto;\r\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\r\n            var prototype = O.prototype;\r\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\r\n            if (prototypeProto == null || prototypeProto === Object.prototype)\r\n                return proto;\r\n            // If the constructor was not a function, then we cannot determine the heritage.\r\n            var constructor = prototypeProto.constructor;\r\n            if (typeof constructor !== \"function\")\r\n                return proto;\r\n            // If we have some kind of self-reference, then we cannot determine the heritage.\r\n            if (constructor === O)\r\n                return proto;\r\n            // we have a pretty good guess at the heritage.\r\n            return constructor;\r\n        }\r\n        // naive Map shim\r\n        function CreateMapPolyfill() {\r\n            var cacheSentinel = {};\r\n            var arraySentinel = [];\r\n            var MapIterator = (function () {\r\n                function MapIterator(keys, values, selector) {\r\n                    this._index = 0;\r\n                    this._keys = keys;\r\n                    this._values = values;\r\n                    this._selector = selector;\r\n                }\r\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\r\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\r\n                MapIterator.prototype.next = function () {\r\n                    var index = this._index;\r\n                    if (index >= 0 && index < this._keys.length) {\r\n                        var result = this._selector(this._keys[index], this._values[index]);\r\n                        if (index + 1 >= this._keys.length) {\r\n                            this._index = -1;\r\n                            this._keys = arraySentinel;\r\n                            this._values = arraySentinel;\r\n                        }\r\n                        else {\r\n                            this._index++;\r\n                        }\r\n                        return { value: result, done: false };\r\n                    }\r\n                    return { value: undefined, done: true };\r\n                };\r\n                MapIterator.prototype.throw = function (error) {\r\n                    if (this._index >= 0) {\r\n                        this._index = -1;\r\n                        this._keys = arraySentinel;\r\n                        this._values = arraySentinel;\r\n                    }\r\n                    throw error;\r\n                };\r\n                MapIterator.prototype.return = function (value) {\r\n                    if (this._index >= 0) {\r\n                        this._index = -1;\r\n                        this._keys = arraySentinel;\r\n                        this._values = arraySentinel;\r\n                    }\r\n                    return { value: value, done: true };\r\n                };\r\n                return MapIterator;\r\n            }());\r\n            return (function () {\r\n                function Map() {\r\n                    this._keys = [];\r\n                    this._values = [];\r\n                    this._cacheKey = cacheSentinel;\r\n                    this._cacheIndex = -2;\r\n                }\r\n                Object.defineProperty(Map.prototype, \"size\", {\r\n                    get: function () { return this._keys.length; },\r\n                    enumerable: true,\r\n                    configurable: true\r\n                });\r\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\r\n                Map.prototype.get = function (key) {\r\n                    var index = this._find(key, /*insert*/ false);\r\n                    return index >= 0 ? this._values[index] : undefined;\r\n                };\r\n                Map.prototype.set = function (key, value) {\r\n                    var index = this._find(key, /*insert*/ true);\r\n                    this._values[index] = value;\r\n                    return this;\r\n                };\r\n                Map.prototype.delete = function (key) {\r\n                    var index = this._find(key, /*insert*/ false);\r\n                    if (index >= 0) {\r\n                        var size = this._keys.length;\r\n                        for (var i = index + 1; i < size; i++) {\r\n                            this._keys[i - 1] = this._keys[i];\r\n                            this._values[i - 1] = this._values[i];\r\n                        }\r\n                        this._keys.length--;\r\n                        this._values.length--;\r\n                        if (key === this._cacheKey) {\r\n                            this._cacheKey = cacheSentinel;\r\n                            this._cacheIndex = -2;\r\n                        }\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                };\r\n                Map.prototype.clear = function () {\r\n                    this._keys.length = 0;\r\n                    this._values.length = 0;\r\n                    this._cacheKey = cacheSentinel;\r\n                    this._cacheIndex = -2;\r\n                };\r\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\r\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\r\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\r\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\r\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\r\n                Map.prototype._find = function (key, insert) {\r\n                    if (this._cacheKey !== key) {\r\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\r\n                    }\r\n                    if (this._cacheIndex < 0 && insert) {\r\n                        this._cacheIndex = this._keys.length;\r\n                        this._keys.push(key);\r\n                        this._values.push(undefined);\r\n                    }\r\n                    return this._cacheIndex;\r\n                };\r\n                return Map;\r\n            }());\r\n            function getKey(key, _) {\r\n                return key;\r\n            }\r\n            function getValue(_, value) {\r\n                return value;\r\n            }\r\n            function getEntry(key, value) {\r\n                return [key, value];\r\n            }\r\n        }\r\n        // naive Set shim\r\n        function CreateSetPolyfill() {\r\n            return (function () {\r\n                function Set() {\r\n                    this._map = new _Map();\r\n                }\r\n                Object.defineProperty(Set.prototype, \"size\", {\r\n                    get: function () { return this._map.size; },\r\n                    enumerable: true,\r\n                    configurable: true\r\n                });\r\n                Set.prototype.has = function (value) { return this._map.has(value); };\r\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\r\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\r\n                Set.prototype.clear = function () { this._map.clear(); };\r\n                Set.prototype.keys = function () { return this._map.keys(); };\r\n                Set.prototype.values = function () { return this._map.values(); };\r\n                Set.prototype.entries = function () { return this._map.entries(); };\r\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\r\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\r\n                return Set;\r\n            }());\r\n        }\r\n        // naive WeakMap shim\r\n        function CreateWeakMapPolyfill() {\r\n            var UUID_SIZE = 16;\r\n            var keys = HashMap.create();\r\n            var rootKey = CreateUniqueKey();\r\n            return (function () {\r\n                function WeakMap() {\r\n                    this._key = CreateUniqueKey();\r\n                }\r\n                WeakMap.prototype.has = function (target) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\r\n                };\r\n                WeakMap.prototype.get = function (target) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\r\n                };\r\n                WeakMap.prototype.set = function (target, value) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\r\n                    table[this._key] = value;\r\n                    return this;\r\n                };\r\n                WeakMap.prototype.delete = function (target) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                    return table !== undefined ? delete table[this._key] : false;\r\n                };\r\n                WeakMap.prototype.clear = function () {\r\n                    // NOTE: not a real clear, just makes the previous data unreachable\r\n                    this._key = CreateUniqueKey();\r\n                };\r\n                return WeakMap;\r\n            }());\r\n            function CreateUniqueKey() {\r\n                var key;\r\n                do\r\n                    key = \"@@WeakMap@@\" + CreateUUID();\r\n                while (HashMap.has(keys, key));\r\n                keys[key] = true;\r\n                return key;\r\n            }\r\n            function GetOrCreateWeakMapTable(target, create) {\r\n                if (!hasOwn.call(target, rootKey)) {\r\n                    if (!create)\r\n                        return undefined;\r\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\r\n                }\r\n                return target[rootKey];\r\n            }\r\n            function FillRandomBytes(buffer, size) {\r\n                for (var i = 0; i < size; ++i)\r\n                    buffer[i] = Math.random() * 0xff | 0;\r\n                return buffer;\r\n            }\r\n            function GenRandomBytes(size) {\r\n                if (typeof Uint8Array === \"function\") {\r\n                    if (typeof crypto !== \"undefined\")\r\n                        return crypto.getRandomValues(new Uint8Array(size));\r\n                    if (typeof msCrypto !== \"undefined\")\r\n                        return msCrypto.getRandomValues(new Uint8Array(size));\r\n                    return FillRandomBytes(new Uint8Array(size), size);\r\n                }\r\n                return FillRandomBytes(new Array(size), size);\r\n            }\r\n            function CreateUUID() {\r\n                var data = GenRandomBytes(UUID_SIZE);\r\n                // mark as random - RFC 4122 § 4.4\r\n                data[6] = data[6] & 0x4f | 0x40;\r\n                data[8] = data[8] & 0xbf | 0x80;\r\n                var result = \"\";\r\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\r\n                    var byte = data[offset];\r\n                    if (offset === 4 || offset === 6 || offset === 8)\r\n                        result += \"-\";\r\n                    if (byte < 16)\r\n                        result += \"0\";\r\n                    result += byte.toString(16).toLowerCase();\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\r\n        function MakeDictionary(obj) {\r\n            obj.__ = undefined;\r\n            delete obj.__;\r\n            return obj;\r\n        }\r\n    });\r\n})(Reflect || (Reflect = {}));\r\n//# sourceMappingURL=Reflect.js.map","import { autoInit, injectable  } from \"../inject\";\nimport { ARenderMiddleware, TypeRenderMiddlewareEvent } from \"./ARenderMiddleware\";\nimport { PluginInjectModel } from \"./PluginInjectModel\";\nimport { PluginPropsChecking } from \"./PluginPropsChecking\";\nimport { PluginRedux } from \"./PluginRedux\";\n\n@injectable(\"RenderMiddleware\")\nexport class RenderMiddleware extends ARenderMiddleware {\n    plugins: ARenderMiddleware[] = [];\n    private PluginFactorys:Function[] = [];\n    constructor() {\n        super();\n        this.PluginFactorys = [\n            PluginPropsChecking,\n            PluginRedux,\n            PluginInjectModel\n        ];\n        this.initPlugins();\n    }\n    beforeInit(options: TypeRenderMiddlewareEvent): void {\n        this.callPluginMethod(\"beforeInit\", options);\n    }\n    init(options: TypeRenderMiddlewareEvent): void {\n        this.callPluginMethod(\"init\", options);\n    }\n    didMount(options: TypeRenderMiddlewareEvent): void {\n        this.callPluginMethod(\"didMount\", options);\n    }\n    beforeRender(options: TypeRenderMiddlewareEvent): void {\n        this.callPluginMethod(\"beforeRender\", options);\n    }\n    afterRender(options: TypeRenderMiddlewareEvent): void {\n        this.callPluginMethod(\"afterRender\", options);\n    }\n    beforeUpdate(options: TypeRenderMiddlewareEvent): void {\n        this.callPluginMethod(\"beforeUpdate\", options);\n    }\n    afterUpdate(options: TypeRenderMiddlewareEvent): void {\n        this.callPluginMethod(\"afterUpdate\", options);\n    }\n    destroy(options: TypeRenderMiddlewareEvent): void {\n        this.callPluginMethod(\"destroy\", options);\n    }\n    renderDidMount(): void {\n        this.callPluginMethod(\"renderDidMount\", null);\n    }\n    willReceiveProps?(options: TypeRenderMiddlewareEvent): void {\n        this.callPluginMethod(\"willReceiveProps\", options);\n    }\n    private initPlugins(): void {\n        this.PluginFactorys.map((Plugin) => {\n            this.plugins.push(autoInit(Plugin as any));\n        });\n    }\n    private callPluginMethod(methodName: keyof ARenderMiddleware, options: TypeRenderMiddlewareEvent): void {\n        this.plugins.map((plugin) => {\n            try {\n                typeof plugin[methodName] === \"function\" && plugin[methodName](options);\n            } catch(err) {\n                // tslint:disable-next-line: no-console\n                console.error(err);\n            }\n        });\n        if([\"init\", \"inject\", \"didMount\", \"didUpdate\", \"willReceiveProps\", \"destroy\"].indexOf(methodName) >= 0) {\n            if(typeof options?.componentObj[\"$useEffect\"] === \"function\") {\n                const destoryFn = options?.componentObj[\"$useEffect\"](methodName, {\n                    props: options?.props,\n                    state: options?.componentObj?.state\n                });\n                if(methodName === \"destroy\") {\n                    typeof destoryFn === \"function\" && destoryFn();\n                }\n            }\n        }\n    }\n}\n","import { IVirtualElement } from \"elmer-virtual-dom\";\nimport { Component } from \"../component/Component\";\n\nexport type TypeRenderMiddlewareEvent = {\n    componentObj?: Component;\n    Component: Function;\n    nodeData: IVirtualElement;\n    props: any;\n};\n\nexport abstract class ARenderMiddleware {\n    /**\n     * 初始化组件前回调\n     * @param options - 参数\n     */\n    abstract beforeInit?(options: TypeRenderMiddlewareEvent): void;\n    /**\n     * 组件初始化后执行的方法\n     */\n    abstract init?(options: TypeRenderMiddlewareEvent):void;\n    /**\n     * 第一次渲染结束\n     * @param options - 更新参数\n     */\n    abstract didMount?(options: TypeRenderMiddlewareEvent): void;\n    /**\n     * 渲染前回调，所有渲染都调用此方法\n     * @param options \n     */\n    abstract beforeRender?(options: TypeRenderMiddlewareEvent): void;\n    /**\n     * 渲染后回调\n     * @param options - 更新参数\n     */\n    abstract afterRender?(options: TypeRenderMiddlewareEvent): void;\n    /**\n     * 更新前执行方法，可以在此方法zeng'jia\n     * @param options - 更新参数\n     */\n    abstract beforeUpdate?(options: TypeRenderMiddlewareEvent): void;\n    /**\n     * 更新结束后执行回调\n     * @param options - 更新参数\n     */\n    abstract afterUpdate?(options: TypeRenderMiddlewareEvent): void;\n    /**\n     * 接收到数据变化\n     * @param options - 更新参数\n     */\n    abstract willReceiveProps?(options: TypeRenderMiddlewareEvent): void;\n    /**\n     * 销毁组件\n     * @param options - 更新参数\n     */\n    abstract destroy?(options: TypeRenderMiddlewareEvent): void;\n    abstract renderDidMount?(): void;\n}\n","import { ARenderMiddleware, TypeRenderMiddlewareEvent } from \"./ARenderMiddleware\";\n// tslint:disable: no-empty\nexport class RenderMiddlewarePlugin extends ARenderMiddleware {\n    beforeInit?(options: TypeRenderMiddlewareEvent): void {}\n    init?(options: TypeRenderMiddlewareEvent): void {}\n    beforeRender?(options: TypeRenderMiddlewareEvent): void {}\n    afterRender?(options: TypeRenderMiddlewareEvent): void {}\n    beforeUpdate?(options: TypeRenderMiddlewareEvent): void {}\n    afterUpdate?(options: TypeRenderMiddlewareEvent): void {}\n    destroy?(options: TypeRenderMiddlewareEvent): void {}\n    didMount?(options: TypeRenderMiddlewareEvent): void {}\n    willReceiveProps?(options: TypeRenderMiddlewareEvent): void {}\n    /**\n     * 整个dom树第一次渲染结束事件\n     */\n    renderDidMount?(): void;\n}\n// tslint:enable: no-empty\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./context/defineContext\"));\n__export(require(\"./context/getContext\"));\n__export(require(\"./redux/connect\"));\n__export(require(\"./redux/createReducer\"));\n__export(require(\"./redux/defineReduxProvider\"));\n__export(require(\"./redux/ReduxController\"));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ReduxGlobalStateKeys_1 = require(\"./ReduxGlobalStateKeys\");\nexports.createReducer = function (getGlobalState, defineGlobalState, nodeKey, reducer) {\n    var defineReducerObject = {};\n    if (!getGlobalState(ReduxGlobalStateKeys_1.REDUX_REDUCER_DEFINE_STATE_KEY)) {\n        defineGlobalState(ReduxGlobalStateKeys_1.REDUX_REDUCER_DEFINE_STATE_KEY, defineReducerObject);\n    }\n    else {\n        defineReducerObject = getGlobalState(ReduxGlobalStateKeys_1.REDUX_REDUCER_DEFINE_STATE_KEY);\n    }\n    defineReducerObject[nodeKey] = reducer;\n};\n/**\n * This function already use in reduxController, don't need user call it agin\n * @param constroller [ReduxController]\n */\nexports.attachReducerToController = function (controller) {\n    var reducerObj = controller.getGlobalState(ReduxGlobalStateKeys_1.REDUX_REDUCER_DEFINE_STATE_KEY) || {};\n    if (reducerObj) {\n        Object.keys(reducerObj).map(function (nodeKey) {\n            controller.setValue(controller.reducers, nodeKey, reducerObj[nodeKey]);\n        });\n    }\n    return reducerObj;\n};\nexports.defineStateOperateAction = function (controller, getGlobalState, defineGlobalState) {\n    if (controller) {\n        controller.getGlobalState = getGlobalState;\n        controller.defineGlobalState = defineGlobalState;\n    }\n};\nexports.defineReducer = function (controller, nodeKey, reducer) {\n    exports.createReducer(controller.getGlobalState, controller.defineGlobalState, nodeKey, reducer);\n};\n","\r\nimport { createParamChecker } from \"./paramChecker\";\r\nimport { createTypeChecker,EnumCheckerTypes,  IDataTypeChecker } from \"./typeChecker\";\r\n\r\nexport interface IPropCheckRule {\r\n    rule: IDataTypeChecker | Function;\r\n    defaultValue?: any;\r\n    description?: string;\r\n    propertyKey?: string;\r\n    stateKey?: string;\r\n}\r\n\r\n// tslint:disable:variable-name\r\n\r\nconst string: IDataTypeChecker  = createTypeChecker(EnumCheckerTypes.string);\r\nconst number: IDataTypeChecker  = createTypeChecker(EnumCheckerTypes.number);\r\nconst array: IDataTypeChecker   = createTypeChecker(EnumCheckerTypes.array);\r\nconst boolean: IDataTypeChecker = createTypeChecker(EnumCheckerTypes.boolean);\r\nconst object: IDataTypeChecker  = createTypeChecker(EnumCheckerTypes.object);\r\nconst func: IDataTypeChecker    = createTypeChecker(EnumCheckerTypes.func);\r\nconst any: IDataTypeChecker     = createTypeChecker(EnumCheckerTypes.any);\r\nconst date: IDataTypeChecker    = createTypeChecker(EnumCheckerTypes.date);\r\nconst bool: IDataTypeChecker    = createTypeChecker(EnumCheckerTypes.bool);\r\n\r\nconst oneOf = (types:Array<Function|IDataTypeChecker>): IDataTypeChecker => {\r\n    return createParamChecker(EnumCheckerTypes.oneOf, types);\r\n};\r\n\r\nconst oneValueOf = (enumValues: any[]): IDataTypeChecker => {\r\n    return createParamChecker(EnumCheckerTypes.oneValueOf, enumValues);\r\n};\r\n\r\nconst enumValueOf = (enumValue: any): IDataTypeChecker => {\r\n    return createParamChecker(EnumCheckerTypes.oneEnumValueOf, enumValue);\r\n};\r\n\r\nexport const propTypes = {\r\n    any,\r\n    array,\r\n    bool,\r\n    boolean,\r\n    date,\r\n    enumValueOf,\r\n    func,\r\n    number,\r\n    object,\r\n    oneOf,\r\n    oneValueOf,\r\n    string\r\n};\r\nexport const PropTypes = propTypes;\r\n// tslint:enable:variable-name\r\n","import {\r\n    anyValidator,\r\n    arrayValidator,\r\n    booleanValidator,\r\n    dateValidator,\r\n    funcValidator,\r\n    numberValidator,\r\n    objectValidator,\r\n    stringValidator\r\n} from \"./validators/dataTypeValidators\";\r\n\r\nexport enum EnumCheckerTypes {\r\n    string  = \"string\",\r\n    number  = \"number\",\r\n    array   = \"array\",\r\n    any     = \"any\",\r\n    boolean = \"boolean\",\r\n    bool    = \"bool\",\r\n    date    = \"date\",\r\n    func    = \"func\",\r\n    object  = \"object\",\r\n    oneOf   = \"oneOf\",\r\n    oneValueOf  = \"oneValueOf\",\r\n    oneEnumValueOf = \"oneEnumValueOf\"\r\n}\r\n\r\nexport interface IDataTypeChecker extends Function {\r\n    isRequired?: Function;\r\n}\r\nexport interface IDataTypeCheckerOption {\r\n    error: Function;\r\n    silence?: boolean;\r\n}\r\nfunction createRequiredChecker(type: string, validate: Function):Function {\r\n    // tslint:disable-next-line:only-arrow-functions\r\n    const factory = function(value: any, options: IDataTypeCheckerOption): any {\r\n        return validate(value, options);\r\n    };\r\n    (<any>factory).isRequired = ((value: any,options: IDataTypeCheckerOption) => {\r\n        if(value === undefined || value === null) {\r\n            const errMsg = \"属性值不能为undefined或null\";\r\n            options && typeof options.error === \"function\" && options.error(errMsg);\r\n            return false;\r\n        }\r\n        return factory(value, options);\r\n    }).bind({factory});\r\n    (<any>factory).type = type;\r\n    (<any>factory).isRequired.type = type;\r\n    return factory;\r\n}\r\nfunction createDataTypeChecker(type:string): Function {\r\n    function onError(msg: string, fn: Function): void {\r\n        if(fn && typeof fn === \"function\") {\r\n            fn(msg);\r\n        } else {\r\n            // tslint:disable-next-line:no-console\r\n            console.error(msg);\r\n        }\r\n    }\r\n    function dataTypeChecker(value: any, options:IDataTypeCheckerOption): boolean {\r\n        let validate: Function = null;\r\n        const checkType: EnumCheckerTypes = this.type;\r\n        switch(checkType) {\r\n            case EnumCheckerTypes.string: {\r\n                validate = stringValidator;\r\n                break;\r\n            }\r\n            case EnumCheckerTypes.number: {\r\n                validate = numberValidator;\r\n                break;\r\n            }\r\n            case EnumCheckerTypes.boolean: {\r\n                validate = booleanValidator;\r\n                break;\r\n            }\r\n            case EnumCheckerTypes.bool: {\r\n                validate = booleanValidator;\r\n                break;\r\n            }\r\n            case EnumCheckerTypes.array: {\r\n                validate = arrayValidator;\r\n                break;\r\n            }\r\n            case EnumCheckerTypes.object: {\r\n                validate = objectValidator;\r\n                break;\r\n            }\r\n            case EnumCheckerTypes.func: {\r\n                validate = funcValidator;\r\n                break;\r\n            }\r\n            case EnumCheckerTypes.any: {\r\n                validate = anyValidator;\r\n                break;\r\n            }\r\n            case EnumCheckerTypes.date: {\r\n                validate = dateValidator;\r\n                break;\r\n            }\r\n        }\r\n        if(typeof validate === \"function\") {\r\n            if(!validate(value, options) && value !== undefined && value !== null) {\r\n                const lType = Object.prototype.toString.call(value);\r\n                !options.silence && onError(`参数类型不匹配,定义类型[${checkType}]，传入值类型${lType}。` + options, (options ? options.error : null));\r\n                return false;\r\n            }\r\n        } else {\r\n            !options.silence && onError(checkType+\"未定义validate方法。\", (options ? options.error : null));\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    return createRequiredChecker(type, dataTypeChecker.bind({type}));\r\n}\r\n\r\nexport const createTypeChecker:any = <any>createDataTypeChecker;\r\n","import { IDataTypeCheckerOption } from \"../typeChecker\";\r\n\r\nconst getDataType = (value: any) => {\r\n    return Object.prototype.toString.call(value);\r\n};\r\nexport const anyValidator = (): boolean => {\r\n    return true;\r\n};\r\n\r\nexport const stringValidator = (value: any, options: any): boolean => {\r\n    return typeof value === \"string\";\r\n};\r\n\r\nexport const arrayValidator = (value: any): boolean => {\r\n    return getDataType(value) === \"[object Array]\";\r\n};\r\n\r\nexport const numberValidator = (value: any): boolean => {\r\n    return getDataType(value) === \"[object Number]\";\r\n};\r\n\r\nexport const booleanValidator = (value: any): boolean => {\r\n    return getDataType(value) === \"[object Boolean]\";\r\n};\r\n\r\nexport const objectValidator = (value: any): boolean => {\r\n    return getDataType(value) === \"[object Object]\";\r\n};\r\n\r\nexport const funcValidator = (value: any): boolean => {\r\n    return getDataType(value) === \"[object Function]\";\r\n};\r\n\r\nexport const dateValidator = (value: any): boolean => {\r\n    return getDataType(value) === \"[object Date]\";\r\n};\r\n\r\nexport const oneOfValidator = (value: any, typeCheckers: Function[], options:IDataTypeCheckerOption): boolean => {\r\n    if(getDataType(typeCheckers) === \"[object Array]\") {\r\n        // tslint:disable-next-line:forin\r\n        for(let tmpKey=0;tmpKey<typeCheckers.length;tmpKey++) {\r\n            const tmpChecker = typeCheckers[tmpKey];\r\n            if(tmpChecker(value, options)) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n};\r\n\r\nexport const oneValueOfValidator = (value: any, checkEnumValues: any[], options:IDataTypeCheckerOption): boolean => {\r\n    return checkEnumValues && checkEnumValues.length>0 ? checkEnumValues.indexOf(value) >= 0 : false;\r\n};\r\n\r\nexport const oneEnumValueOfValidator = (value: any, checkEnumObj: any) => {\r\n    if(getDataType(checkEnumObj) === \"[object Object]\") {\r\n        for(const key in checkEnumObj) {\r\n            if(checkEnumObj[key] === value) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    return false;\r\n};\r\n","import { IElmerEvent } from \"../src/events/IElmerEvent\";\nimport { ElmerUI } from \"../src/render/ElmerUI\";\nimport \"./DemoApp\";\nimport \"../src/widget/redux/ReduxProvider\";\n\nconst ui = new ElmerUI();\n\nui.onReady(() => {\n    const exampleApp = {\n        title: \"for new framework testting\",\n        version: \"20201205\",\n        state: {\n            count: 0,\n            testData: [],\n            visible: false\n        },\n        onClick: function(evt:IElmerEvent) {\n            evt.cancelBubble = true;\n            this.setState({\n                count: this.state.count + 1\n            });\n        },\n        onPress: function(evt) {\n            console.log(\"onMouseDown\", evt);\n        },\n        onVisibleClick: function() {\n            const myVisible = !this.state.visible;\n            this.setState({\n                visible: myVisible\n            });\n        },\n        onInput: function(evt) {\n            console.log(evt);\n        },\n        onButtonClick: function() {\n            const oldData = JSON.parse(JSON.stringify(exampleApp.state.testData));\n            oldData.push({\n                title: \"demo\" + oldData.length,\n                value: oldData.length\n            });\n            this.setState({\n                testData: oldData\n            });\n        },\n        // tslint:disable-next-line: object-literal-sort-keys\n        render:() => {\n            return \"<eui-redux-provider>\\n    <div>\\n        <li>\\n            <div et:click=\\\"onClick\\\">\\n                <span data-value='app' data-label='for test'>ClickEventA{{version}}</span>\\n            </div>\\n        </li>\\n        <li><span>B{{title}}</span></li>\\n        <label id=\\\"testDom\\\" data-value=\\\"haha\\\" if=\\\"{{state.visible}}\\\">测试显示隐藏</label>\\n        <li><span>E{{version}}</span></li>\\n        <button et:click=\\\"onButtonClick\\\" id=\\\"keyTest\\\">Update State{{state.count}}</button>\\n        <forEach data=\\\"state.testData\\\" item=\\\"demo\\\" index=\\\"mapKey\\\">\\n            <input key=\\\"App_{{mapKey}}\\\" type=\\\"text\\\" value=\\\"{{demo.title}}\\\"/>\\n        </forEach>\\n        <button et:click=\\\"onVisibleClick\\\" style=\\\"display:block;\\\">{{state.visible ? '显示' : '隐藏'}}</button>\\n        <textarea  et:input=\\\"onInput\\\" style=\\\"display:block;\\\">测试</textarea>\\n        <div>\\n            <eui-demo-app time=\\\"{{state.count}}\\\">\\n                <div><button>Dingo</button></div>\\n            </eui-demo-app>\\n        </div>\\n        <header>Hello world</header>\\n        <div data-type=\\\"html\\\">\\n            <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" width=\\\"48px\\\" height=\\\"60px\\\" viewBox=\\\"0 0 24 30\\\" style=\\\"enable-background:new 0 0 50 50\\\" xml:space=\\\"preserve\\\">\\n                <rect x=\\\"0\\\" y=\\\"9.22656\\\" width=\\\"4\\\" height=\\\"12.5469\\\" fill=\\\"#FF6700\\\">\\n                    <animate attributeName=\\\"height\\\" attributeType=\\\"XML\\\" values=\\\"5;21;5\\\" begin=\\\"0s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\"></animate>\\n                    <animate attributeName=\\\"y\\\" attributeType=\\\"XML\\\" values=\\\"13; 5; 13\\\" begin=\\\"0s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\"></animate>\\n                </rect>\\n                <rect x=\\\"10\\\" y=\\\"5.22656\\\" width=\\\"4\\\" height=\\\"20.5469\\\" fill=\\\"#FF6700\\\">\\n                    <animate attributeName=\\\"height\\\" attributeType=\\\"XML\\\" values=\\\"5;21;5\\\" begin=\\\"0.15s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\"></animate>\\n                    <animate attributeName=\\\"y\\\" attributeType=\\\"XML\\\" values=\\\"13; 5; 13\\\" begin=\\\"0.15s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\"></animate>\\n                </rect>\\n                <rect x=\\\"20\\\" y=\\\"8.77344\\\" width=\\\"4\\\" height=\\\"13.4531\\\" fill=\\\"#FF6700\\\">\\n                    <animate attributeName=\\\"height\\\" attributeType=\\\"XML\\\" values=\\\"5;21;5\\\" begin=\\\"0.3s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\"></animate>\\n                    <animate attributeName=\\\"y\\\" attributeType=\\\"XML\\\" values=\\\"13; 5; 13\\\" begin=\\\"0.3s\\\" dur=\\\"0.6s\\\" repeatCount=\\\"indefinite\\\"></animate>\\n                </rect>\\n            </svg>\\n        </div>\\n    </div>\\n</eui-redux-provider>\";\n        }\n    };\n    console.time(\"DemoApp\");\n    console.timeLog(\"DemoApp\", \"start render\");\n    ui.render(document.getElementById(\"app\"), exampleApp);\n    console.timeEnd(\"DemoApp\");\n});\n","// tslint:disable-next-line: ordered-imports\nimport { Common } from \"elmer-common\";\nimport { HtmlParse } from \"elmer-virtual-dom\";\nimport { ElmerWorker } from \"elmer-worker\";\nimport { Component } from \"../component/Component\";\nimport { ElmerDOM } from \"../domEvent/ElmerDom\";\nimport { ElmerEvent } from \"../events/ElmerEvent\";\nimport EventInWorker from \"../events/EventInWorker\";\nimport { autowired } from \"../inject/injectable\";\nimport { RenderMiddleware } from \"../middleware/RenderMiddleware\";\nimport \"../polyfill\";\nimport { ElmerRender, TypeUIRenderOptions } from \"./ElmerRender\";\n\nexport class ElmerUI extends Common {\n\n    @autowired(ElmerDOM)\n    private $:ElmerDOM;\n    @autowired(ElmerWorker, \"ElmerWorker\", {\n        elmerEvent: new EventInWorker(),\n        htmlParse: new HtmlParse()\n    })\n    private worker: ElmerWorker;\n    @autowired(RenderMiddleware)\n    private middleware: RenderMiddleware;\n\n    // 虚拟事件处理模块，只在最顶层做事件监听，减少对dom的操作\n    private eventObj: ElmerEvent;\n\n    private missionId: string;\n\n    constructor() {\n        super();\n        this.eventObj = new ElmerEvent(this.worker);\n        this.missionId = \"__RenderMission__\" + this.guid();\n    }\n\n    onReady(fn:Function): void {\n        this.$.addEvent(window, \"load\", fn);\n    }\n    render(target:HTMLElement, rootApp:any, options?:TypeUIRenderOptions): ElmerRender {\n        // elmer\n        const entryComponent = rootApp || {};\n        const ignorePropKeys = [\"selector\", \"template\", \"model\",\"service\",\"i18n\", \"connect\",\"setData\",\"setState\", \"render\",\n            \"$after\", \"$onPropsChanged\", \"$afterVirtualRender\", \"$beforeVirtualRender\",\"$init\",\n            \"$inject\", \"$before\", \"$resize\", \"$dispose\"];\n        const defaultProps = entryComponent.props || {};\n        if(typeof entryComponent.$render !== \"function\" && typeof entryComponent.render !== \"function\") {\n            entryComponent.$render = () => {\n                return options ? options.htmlCode : \"<span>Missing render lifecycle method in rootApp object.</span>\";\n            };\n        }\n        entryComponent.selector = \"RootNode\";\n        this.extend(entryComponent, Component.prototype, true, ignorePropKeys);\n        this.defineReadOnlyProperty(entryComponent, \"props\", defaultProps);\n        const renderObj = new ElmerRender({\n            children: [],\n            component: entryComponent,\n            componentFactory: null,\n            container: target,\n            event: this.eventObj,\n            missionId: this.missionId,\n            nodePath: \"rootNode\",\n            path: [0],\n            renderOptions: options,\n            worker: this.worker\n        });\n        renderObj.render({\n            firstRender: true\n        }).then(() => {\n            this.middleware.renderDidMount();\n        }).catch((err) => {\n            typeof entryComponent[\"$error\"] === \"function\" && entryComponent[\"$error\"](err);\n        });\n        return renderObj;\n    }\n    dispose(): void {\n        this.eventObj.dispose();\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar StaticCommon_1 = require(\"./StaticCommon\");\nvar Common = /** @class */ (function () {\n    function Common() {\n    }\n    Common.prototype.getType = function (val) {\n        return Object.prototype.toString.call(val);\n    };\n    Common.prototype.isString = function (val) {\n        return this.getType(val) === \"[object String]\";\n    };\n    Common.prototype.isObject = function (val) {\n        return this.getType(val) === \"[object Object]\";\n    };\n    Common.prototype.isArray = function (val) {\n        return this.getType(val) === \"[object Array]\";\n    };\n    Common.prototype.isNumeric = function (val) {\n        return !isNaN(val);\n    };\n    Common.prototype.isDOM = function (val) {\n        return /^(\\[object\\s*)HTML([a-zA-Z]*)(Element\\])$/.test(this.getType(val));\n    };\n    Common.prototype.isSVGDOM = function (val) {\n        return /^\\[object\\sSVG([a-zA-Z]*)Element\\]$/.test(this.getType(val));\n    };\n    Common.prototype.isFunction = function (val) {\n        return this.getType(val) === \"[object Function]\";\n    };\n    Common.prototype.isNodeList = function (val) {\n        return this.getType(val) === \"[object NodeList]\";\n    };\n    Common.prototype.isRegExp = function (val) {\n        return this.getType(val) === \"[object RegExp]\";\n    };\n    Common.prototype.isEmpty = function (val) {\n        return val === undefined || val === null || (this.isString(val) && val.length <= 0);\n    };\n    // tslint:disable-next-line:no-shadowed-variable\n    Common.prototype.isEqual = function (a, b) {\n        if (a === b) {\n            return a !== 0 || 1 / a === 1 / b;\n        }\n        if (a == null || b == null) {\n            return a === b;\n        }\n        var classNameA = this.getType(a), classNameB = this.getType(b);\n        if (classNameA !== classNameB) {\n            return false;\n        }\n        else {\n            switch (classNameA) {\n                case \"[object RegExp]\":\n                case \"[object String]\":\n                    return \"\" + a === \"\" + b;\n                case \"[object Number]\":\n                    if (+a !== +a) {\n                        return +b !== +b;\n                    }\n                    return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n                case \"[object Date]\":\n                case \"[object Boolean]\":\n                    return +a === +b;\n            }\n            if (classNameA === \"[object Object]\") {\n                var propsA = Object.getOwnPropertyNames(a), propsB = Object.getOwnPropertyNames(b);\n                if (propsA.length !== propsB.length) {\n                    return false;\n                }\n                else {\n                    for (var i = 0; i < propsA.length; i++) {\n                        var propName = propsA[i];\n                        if (a[propName] !== b[propName]) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n            }\n            if (classNameA === \"[object Array]\") {\n                return a.toString() === b.toString();\n            }\n        }\n    };\n    Common.prototype.sleepCall = function (fn, timeout, obj) {\n        if (typeof fn === \"function\") {\n            // let handler: number | null | undefined = null;\n            var tim = timeout || 200;\n            var sleep = function () {\n                if (obj) {\n                    fn.call(obj);\n                }\n                else {\n                    fn();\n                }\n                // handler !== null && clearTimeout(handler);\n            };\n            setTimeout(sleep, tim);\n        }\n    };\n    Common.prototype.getValue = function (data, key, defaultValue) {\n        return StaticCommon_1.StaticCommon.getValue(data, key, defaultValue);\n    };\n    /**\n     * 给指定对象设置属性值\n     * @param data 设置属性值对象\n     * @param key 设置属性key,属性key有多层可使用.区分\n     * @param value 设置属性值\n     * @param fn 自定义设置值回调\n     */\n    Common.prototype.setValue = function (data, key, value, fn) {\n        return StaticCommon_1.StaticCommon.setValue(data, key, value, fn);\n    };\n    /**\n     * 获取随机ID\n     */\n    Common.prototype.getRandomID = function () {\n        var now = new Date();\n        var year = now.getFullYear().toString(), month = now.getMonth() + 1 < 10 ? \"0\" + (now.getMonth() + 1).toString() : (now.getMonth() + 1).toString(), date = now.getDate() < 10 ? \"0\" + now.getDate().toString() : now.getDate().toString(), hour = now.getHours() < 10 ? [\"0\", now.getHours()].join(\"\") : now.getHours().toString(), minute = now.getMinutes() < 10 ? [\"0\", now.getMinutes()].join(\"\") : now.getMinutes().toString(), second = now.getSeconds() < 10 ? [\"0\", now.getSeconds()].join(\"\") : now.getSeconds().toString(), reSecond = now.getMilliseconds();\n        var randValue = parseInt((Math.random() * 9999 + 1000).toString(), 10);\n        return [year, month, date, hour, minute, second, reSecond, randValue].join(\"\");\n    };\n    /**\n     * 字符串有连接符-将自动转换成已首字母大写\n     * @param val 转换文本\n     * @param firstUpperCase 是否大写\n     */\n    Common.prototype.toHumpStr = function (val, firstUpperCase) {\n        if (!this.isEmpty(val)) {\n            var vStr = val.replace(/(^\\-)|(\\-$)/, \"\");\n            var vArr = vStr.split(\"-\");\n            for (var i = 0; i < vArr.length; i++) {\n                if ((i === 0 && firstUpperCase) || i > 0) {\n                    vArr[i] = vArr[i].substr(0, 1).toUpperCase() + vArr[i].substr(1);\n                }\n            }\n            return vArr.join(\"\");\n        }\n        else {\n            return val;\n        }\n    };\n    Common.prototype.humpToStr = function (val) {\n        if (!this.isEmpty(val)) {\n            var vStr = val.substr(0, 1).toLowerCase() + val.substr(1);\n            var rStr = vStr.replace(/([A-Z])/g, function ($1) {\n                return \"-\" + $1.toLowerCase();\n            });\n            return rStr;\n        }\n        return val;\n    };\n    Common.prototype.extend = function (desc, src, setReadOnly, ignoreKeys) {\n        if (!setReadOnly) {\n            if (this.isObject(desc) && this.isObject(src)) {\n                if (Object.assign) {\n                    Object.assign(desc, src);\n                }\n                else {\n                    // tslint:disable-next-line:forin\n                    for (var key in src) {\n                        if (!ignoreKeys || ignoreKeys.indexOf(key) < 0) {\n                            desc[key] = src[key];\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (this.isObject(desc) && this.isObject(src)) {\n                // tslint:disable-next-line:forin\n                for (var key in src) {\n                    if (!ignoreKeys || ignoreKeys.indexOf(key) < 0) {\n                        // 已经存在的属性需要使用delete删除，防止redine error问题\n                        if (desc.hasOwnProperty(key)) {\n                            delete desc[key];\n                        }\n                        this.defineReadOnlyProperty(desc, key, src[key]);\n                    }\n                }\n            }\n        }\n        return desc;\n    };\n    Common.prototype.merge = function (obj1, obj2) {\n        var result = {};\n        if (obj1 && !obj2) {\n            result = obj1;\n        }\n        else if (!obj1 && obj2) {\n            result = obj2;\n        }\n        else if (obj1 && obj2) {\n            if (this.isObject(obj1)) {\n                // tslint:disable-next-line:forin\n                for (var key in obj1) {\n                    result[key] = obj1[key];\n                }\n            }\n            if (this.isObject(obj2)) {\n                for (var sKey in obj2) {\n                    if (!result.hasOwnProperty(sKey)) {\n                        result[sKey] = obj2[sKey];\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    /**\n     * 将字符串转转换成对应的数据类型，遇到true|false转换成bool类型，遇到数字文本转换成数字类型数据\n     * @param data 要转换的数据\n     */\n    Common.prototype.val = function (data) {\n        if (this.isString(data)) {\n            if (!isNaN(data)) {\n                return (data.indexOf(\".\") >= 0 ? parseFloat(data) : parseInt(data, 10));\n            }\n            else {\n                return (/^(true|false)$/.test(data) ? Boolean(data) : data);\n            }\n        }\n        else {\n            return data;\n        }\n    };\n    Common.prototype.defineReadOnlyProperty = function (obj, propertyKey, propertyValue) {\n        (function (paramObj, paramPropertyKey, paramPropertyValue) {\n            paramObj && Object.defineProperty(paramObj, paramPropertyKey, {\n                configurable: true,\n                enumerable: true,\n                value: paramPropertyValue,\n                writable: false\n            });\n        })(obj, propertyKey, propertyValue);\n    };\n    Common.prototype.launchFullscreen = function (element) {\n        if (element.requestFullscreen) {\n            // tslint:disable-next-line: no-floating-promises\n            element.requestFullscreen();\n        }\n        else if (element[\"mozRequestFullScreen\"]) {\n            element[\"mozRequestFullScreen\"]();\n        }\n        else if (element[\"webkitRequestFullscreen\"]) {\n            element[\"webkitRequestFullscreen\"]();\n        }\n        else if (element[\"msRequestFullscreen\"]) {\n            element[\"msRequestFullscreen\"]();\n        }\n    };\n    Common.prototype.exitFullscreen = function () {\n        if (document.exitFullscreen) {\n            // tslint:disable-next-line: no-floating-promises\n            document.exitFullscreen();\n        }\n        else if (document[\"mozCancelFullScreen\"]) {\n            document[\"mozCancelFullScreen\"]();\n        }\n        else if (document[\"webkitExitFullscreen\"]) {\n            document[\"webkitExitFullscreen\"]();\n        }\n    };\n    Common.prototype.isFullScreen = function () {\n        return document[\"isFullScreen\"] || document[\"mozIsFullScreen\"] || document[\"webkitIsFullScreen\"];\n    };\n    Common.prototype.guid = function () {\n        var S4 = function () {\n            // tslint:disable-next-line: no-bitwise\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substr(1);\n        };\n        return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4());\n    };\n    Common.prototype.getUri = function () {\n        return StaticCommon_1.StaticCommon.getUri();\n    };\n    Common.prototype.getQuery = function (key) {\n        return StaticCommon_1.StaticCommon.getQuery(key);\n    };\n    return Common;\n}());\nexports.Common = Common;\n//# sourceMappingURL=Common.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Canvas = /** @class */ (function () {\n    function Canvas() {\n        this.doRemoveAnimationList = [];\n        // tslint:disable-next-line: variable-name\n        var _this = this;\n        // tslint:disable: only-arrow-functions\n        this.requestAnimationFrame = window.requestAnimationFrame ||\n            window[\"webkitRequestAnimationFrame\"] ||\n            window[\"mozRequestAnimationFrame\"] ||\n            function (callback) {\n                var currTime = new Date().getTime();\n                var timeToCall = Math.max(0, 16.7 - (currTime - _this.lastTime));\n                var id = window.setTimeout(function () {\n                    callback(currTime + timeToCall);\n                }, timeToCall);\n                _this.lastTime = currTime + timeToCall;\n                return id;\n            };\n        this.cancelAnimationFrame = window.cancelAnimationFrame ||\n            window[\"webkitCancelAnimationFrame\"] ||\n            window[\"mozCancelAnimationFrame\"] ||\n            function (id) {\n                clearTimeout(id);\n            };\n        // tslint:enable: only-arrow-functions\n    }\n    Canvas.prototype.startAnimation = function (callBack, targetObj) {\n        var self = this;\n        // tslint:disable-next-line: only-arrow-functions\n        return (function (fn, obj) {\n            var handler;\n            // tslint:disable-next-line: only-arrow-functions\n            var animation = function () {\n                var mIndex = self.doRemoveAnimationList.indexOf(handler);\n                if (mIndex < 0) {\n                    fn.apply(obj, arguments);\n                    return self.requestAnimationFrame.call(window, animation);\n                }\n                else {\n                    self.doRemoveAnimationList.splice(mIndex, 1);\n                }\n                mIndex = null;\n            };\n            handler = self.requestAnimationFrame.call(window, animation);\n            return handler;\n        })(callBack, targetObj);\n    };\n    Canvas.prototype.stopAnimation = function (handler) {\n        this.cancelAnimationFrame.call(window, handler);\n        this.doRemoveAnimationList.push(handler);\n    };\n    return Canvas;\n}());\nexports.Canvas = Canvas;\n//# sourceMappingURL=Canvas.js.map","\"use strict\";\n// tslint:disable: jsdoc-format\n/**\n * currentTime : 当前时间\n * beginValue  : 开始值\n * changeValue : 变化值\n * duration    : 动画过程时间\n**/\n// tslint:enable: jsdoc-format\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// tslint:disable: object-literal-sort-keys no-parameter-reassignment\nexports.MathAnimationApi = {\n    /**\n     * 匀速变化\n     * @param currentTime [number] 当前时间\n     * @param beginning [number] 开始变化的值\n     * @param changeValue [number] 变化的值\n     * @param duration [number] 动画总的时间\n     * @returns number\n     */\n    Linear: function (currentTime, beginValue, changeValue, duration) {\n        return changeValue * currentTime / duration + beginValue;\n    },\n    /**\n     * 二次平方缓动\n     */\n    Quad: {\n        /**\n         * 二次平方缓动easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            currentTime /= duration;\n            return changeValue * Math.pow(currentTime, 2) + beginValue;\n        },\n        /**\n         * 二次平方缓动easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime /= duration;\n            return -changeValue * currentTime * (currentTime - 2) + beginValue;\n        },\n        /**\n         * 二次平方缓动easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            if (currentTime / 2 < 1) {\n                return changeValue / 2 * Math.pow(currentTime, 2) + beginValue;\n            }\n            else {\n                currentTime = currentTime - 1;\n                return -changeValue / 2 * (currentTime * (currentTime - 2) - 1) + beginValue;\n            }\n        }\n    },\n    /**\n     * 三次方缓动效\n     */\n    Cubic: {\n        /**\n         * 三次方缓动easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            return changeValue * Math.pow(currentTime, 3) + beginValue;\n        },\n        /**\n         * 三次方缓动easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration - 1;\n            return changeValue * (Math.pow(currentTime, 3) + 1) + beginValue;\n        },\n        /**\n         * 三次方缓动easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            if (currentTime / 2 < 1) {\n                return changeValue / 2 * Math.pow(currentTime, 3) + beginValue;\n            }\n            else {\n                currentTime = currentTime - 2;\n                return changeValue / 2 * (Math.pow(currentTime, 3) + 2) + beginValue;\n            }\n        }\n    },\n    /**\n     * 四次方缓动效果\n     */\n    Quart: {\n        /**\n         * 四次方缓动easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            return changeValue * Math.pow(currentTime, 4) + beginValue;\n        },\n        /**\n         * 四次方缓动easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration - 1;\n            return -changeValue * (Math.pow(currentTime, 4) - 1) + beginValue;\n        },\n        /**\n         * 四次方缓动easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            if (currentTime / 2 < 1) {\n                return changeValue / 2 * Math.pow(currentTime, 4) + beginValue;\n            }\n            else {\n                currentTime -= 2;\n                return -changeValue / 2 * (Math.pow(currentTime, 4) - 2) + beginValue;\n            }\n        }\n    },\n    /**\n     * 五次方缓动效果\n     */\n    Quint: {\n        /**\n         * 四次方缓动easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            currentTime /= duration;\n            return changeValue * Math.pow(currentTime, 5) + beginValue;\n        },\n        /**\n         * 四次方缓动easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration - 1;\n            return changeValue * (Math.pow(currentTime, 5) + 1) + beginValue;\n        },\n        /**\n         * 四次方缓动easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            if (currentTime / 2 < 1) {\n                return changeValue / 2 * Math.pow(currentTime, 5) + beginValue;\n            }\n            else {\n                currentTime -= 2;\n                return changeValue / 2 * (Math.pow(currentTime, 5) + 2) + beginValue;\n            }\n        }\n    },\n    /**\n     * 正弦缓动效果\n     */\n    Sine: {\n        /**\n         * 正弦缓动效果easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            return -changeValue * Math.cos(currentTime / duration * (Math.PI / 2)) + changeValue + beginValue;\n        },\n        /**\n         * 正弦缓动效果easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            return changeValue * Math.sin(currentTime / duration * (Math.PI / 2)) + beginValue;\n        },\n        /**\n         * 正弦缓动效果easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            return -changeValue / 2 * (Math.cos(Math.PI * currentTime / duration) - 1) + beginValue;\n        }\n    },\n    /**\n     * 指数缓动效果\n     */\n    Expo: {\n        /**\n         * 指数缓动效果easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            return (currentTime === 0) ? beginValue : changeValue * Math.pow(2, 10 * (currentTime / duration - 1)) + beginValue;\n        },\n        /**\n         * 指数缓动效果easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            return currentTime === duration ? beginValue + changeValue : changeValue * (-Math.pow(2, -10 * currentTime / duration) + 1) + beginValue;\n        },\n        /**\n         * 指数缓动效果easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            if (currentTime === 0) {\n                return beginValue;\n            }\n            if (currentTime === duration) {\n                return beginValue + changeValue;\n            }\n            currentTime /= duration;\n            if (currentTime / 2 < 1) {\n                return changeValue / 2 * Math.pow(2, 10 * (currentTime - 1)) + beginValue;\n            }\n            else {\n                currentTime -= 1;\n                return changeValue / 2 * (-Math.pow(2, -10 * currentTime) + 2) + beginValue;\n            }\n        }\n    },\n    /**\n     * 圆形缓动效果\n     */\n    Circle: {\n        /**\n         * 圆形缓动效果easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            return -changeValue * (Math.sqrt(1 - Math.pow(currentTime, 2)) - 1) + beginValue;\n        },\n        /**\n         * 圆形缓动效果easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration - 1;\n            return changeValue * Math.sqrt(1 - Math.pow(currentTime, 2)) + beginValue;\n        },\n        /**\n         * 圆形缓动效果easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            if (currentTime / 2 < 1) {\n                return -changeValue / 2 * (Math.sqrt(1 - Math.pow(currentTime, 2)) - 1) + beginValue;\n            }\n            else {\n                currentTime -= 2;\n                return changeValue / 2 + (Math.sqrt(1 - Math.pow(currentTime, 2)) + 1) + beginValue;\n            }\n        }\n    },\n    /**\n     * 指衰减正弦曲线缓动函数\n     */\n    Elastic: {\n        /**\n         * 指衰减正弦曲线缓动easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param a [number] undefined\n         * @param p [number] undefined\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration, a, p) {\n            var s;\n            if (currentTime === 0) {\n                return beginValue;\n            }\n            currentTime /= duration;\n            if (currentTime === 1) {\n                return beginValue + changeValue;\n            }\n            if (typeof p === \"undefined\") {\n                p = duration * 0.3;\n            }\n            if (!a || a < Math.abs(changeValue)) {\n                s = p / 4;\n                a = changeValue;\n            }\n            else {\n                s = p / (2 * Math.PI) * Math.asin(changeValue / a);\n            }\n            return -(a * Math.pow(2, 10 * (currentTime -= 1)) * Math.sin((currentTime * duration - s) * (2 * Math.PI) / p)) + beginValue;\n        },\n        /**\n         * 指衰减正弦曲线缓动减速easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param a [number] undefined\n         * @param p [number] undefined\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration, a, p) {\n            var s;\n            if (currentTime === 0) {\n                return beginValue;\n            }\n            currentTime /= duration;\n            if (currentTime === 1) {\n                return beginValue + changeValue;\n            }\n            if (typeof p === \"undefined\") {\n                p = duration * .3;\n            }\n            if (!a || a < Math.abs(changeValue)) {\n                a = changeValue;\n                s = p / 4;\n            }\n            else {\n                s = p / (2 * Math.PI) * Math.asin(changeValue / a);\n            }\n            return (a * Math.pow(2, -10 * currentTime) * Math.sin((currentTime * duration - s) * (2 * Math.PI) / p) + changeValue + beginValue);\n        },\n        /**\n         * 指衰减正弦曲线缓动函先加速后减速easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param a [number] undefined\n         * @param p [number] undefined\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration, a, p) {\n            var s;\n            if (currentTime === 0) {\n                return beginValue;\n            }\n            currentTime /= duration / 2;\n            if (currentTime === 2) {\n                return beginValue + changeValue;\n            }\n            if (typeof p === \"undefined\") {\n                p = duration * (0.3 * 1.5);\n            }\n            if (!a || a < Math.abs(changeValue)) {\n                a = changeValue;\n                s = p / 4;\n            }\n            else {\n                s = p / (2 * Math.PI) * Math.asin(changeValue / a);\n            }\n            if (currentTime < 1) {\n                return -0.5 * (a * Math.pow(2, 10 * (currentTime -= 1)) * Math.sin((currentTime * duration - s) * (2 * Math.PI) / p)) + beginValue;\n            }\n            return a * Math.pow(2, -10 * (currentTime -= 1)) * Math.sin((currentTime * duration - s) * (2 * Math.PI) / p) * .5 + changeValue + beginValue;\n        }\n    },\n    /**\n     * 超过范围的三次方的缓动函数\n     */\n    Back: {\n        /**\n         * 超过范围的三次方的缓动函数easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param s [number] undefined\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration, s) {\n            if (typeof s === \"undefined\") {\n                s = 1.70158;\n            }\n            return changeValue * (currentTime /= duration) * currentTime * ((s + 1) * currentTime - s) + beginValue;\n        },\n        /**\n         * 超过范围的三次方的缓动函数easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param s [number] undefined\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration, s) {\n            if (typeof s === \"undefined\") {\n                s = 1.70158;\n            }\n            return changeValue * ((currentTime = currentTime / duration - 1) * currentTime * ((s + 1) * currentTime + s) + 1) + beginValue;\n        },\n        /**\n         * 超过范围的三次方的缓动函数easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param s [number] undefined\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration, s) {\n            if (typeof s === \"undefined\") {\n                s = 1.70158;\n            }\n            currentTime /= duration / 2;\n            if (currentTime < 1) {\n                return changeValue / 2 * (currentTime * currentTime * (((s *= (1.525)) + 1) * currentTime - s)) + beginValue;\n            }\n            return changeValue / 2 * ((currentTime -= 2) * currentTime * (((s *= (1.525)) + 1) * currentTime + s) + 2) + beginValue;\n        }\n    },\n    /**\n     * 指数衰减的反弹曲线缓动函数\n     */\n    Bounce: {\n        /**\n         * 指数衰减的反弹曲线缓动函数easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            return changeValue - exports.MathAnimationApi.Bounce.easeOut(duration - currentTime, 0, changeValue, duration) + beginValue;\n        },\n        /**\n         * 指数衰减的反弹曲线缓动函数easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime /= duration;\n            if (currentTime < (1 / 2.75)) {\n                return changeValue * (7.5625 * currentTime * currentTime) + beginValue;\n            }\n            else if (currentTime < (2 / 2.75)) {\n                return changeValue * (7.5625 * (currentTime -= (1.5 / 2.75)) * currentTime + .75) + beginValue;\n            }\n            else if (currentTime < (2.5 / 2.75)) {\n                return changeValue * (7.5625 * (currentTime -= (2.25 / 2.75)) * currentTime + .9375) + beginValue;\n            }\n            else {\n                return changeValue * (7.5625 * (currentTime -= (2.625 / 2.75)) * currentTime + .984375) + beginValue;\n            }\n        },\n        /**\n         * 指数衰减的反弹曲线缓动函数easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            if (currentTime < duration / 2) {\n                return exports.MathAnimationApi.Bounce.easeIn(currentTime * 2, 0, changeValue, duration) * .5 + beginValue;\n            }\n            else {\n                return exports.MathAnimationApi.Bounce.easeOut(currentTime * 2 - duration, 0, changeValue, duration) * 0.5 + changeValue * 0.5 + beginValue;\n            }\n        }\n    }\n};\n// tslint:enable: object-literal-sort-keys no-parameter-reassignment\n//# sourceMappingURL=MathAnimationApi.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar StaticCommon_1 = require(\"./StaticCommon\");\nvar callYieldFunc = function (callbackObj) {\n    var result, keys, index, mLen, key, callback, lastKey, _a, _b;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                result = {};\n                if (!callbackObj) return [3 /*break*/, 5];\n                keys = Object.keys(callbackObj);\n                if (!(keys.length > 0)) return [3 /*break*/, 5];\n                index = 0, mLen = keys.length;\n                _c.label = 1;\n            case 1:\n                if (!(index < mLen)) return [3 /*break*/, 5];\n                key = keys[index];\n                callback = callbackObj[key];\n                if (!(typeof callback === \"function\")) return [3 /*break*/, 3];\n                lastKey = keys[index - 1];\n                _a = result;\n                _b = key;\n                return [4 /*yield*/, callback(result[lastKey])];\n            case 2:\n                _a[_b] = _c.sent();\n                return [3 /*break*/, 4];\n            case 3:\n                result[key] = {\n                    statusCode: \"QueueCall_601\",\n                    // tslint:disable-next-line: object-literal-sort-keys\n                    message: \"The \" + key + \"'s fn attribute is not a function\"\n                };\n                _c.label = 4;\n            case 4:\n                index++;\n                return [3 /*break*/, 1];\n            case 5: return [2 /*return*/, result];\n        }\n    });\n};\nexports.queueCallRaceAll = function (paramList, fn, option) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        return [2 /*return*/, new Promise(function (resolve, reject) {\n                if (paramList && paramList.length > 0) {\n                    var allStatus_1 = {};\n                    var allResult_1 = {};\n                    var checkAllStatus_1 = function () {\n                        var hasError = false;\n                        // tslint:disable-next-line: forin\n                        for (var key in allStatus_1) {\n                            if (allStatus_1[key] === \"PENDING\") {\n                                return;\n                            }\n                            if (allStatus_1[key] === \"ERROR\") {\n                                hasError = true;\n                                break;\n                            }\n                        }\n                        if (hasError) {\n                            reject(allResult_1);\n                        }\n                        else {\n                            resolve(allResult_1);\n                        }\n                    };\n                    paramList.map(function (item, index) {\n                        var taskID = \"queueCall\" + index;\n                        allStatus_1[\"queueCall\" + index] = \"PENDING\";\n                        (function (param, taskId) {\n                            var callback = typeof param.fn === \"function\" ? param.fn : fn;\n                            if (typeof callback === \"function\") {\n                                // tslint:disable-next-line: no-inferred-empty-object-type\n                                var callbackResult = callback({\n                                    id: param.id,\n                                    lastKey: null,\n                                    lastResult: null,\n                                    param: param.params,\n                                    result: allResult_1\n                                }, param.params);\n                                if (StaticCommon_1.StaticCommon.isPromise(callbackResult)) {\n                                    callbackResult.then(function (resp) {\n                                        allResult_1[param.id] = resp;\n                                        allStatus_1[taskID] = \"OK\";\n                                        checkAllStatus_1();\n                                    }).catch(function (error) {\n                                        allResult_1[param.id] = {\n                                            statusCode: \"Fail\",\n                                            // tslint:disable-next-line: object-literal-sort-keys\n                                            exception: error,\n                                            message: error.message || error.statusText || \"Unknow error\",\n                                        };\n                                        allStatus_1[taskID] = \"ERROR\";\n                                        checkAllStatus_1();\n                                    });\n                                }\n                                else {\n                                    allResult_1[param.id] = callbackResult;\n                                    allStatus_1[taskID] = \"OK\";\n                                    checkAllStatus_1();\n                                }\n                            }\n                            else {\n                                allResult_1[param.id] = {\n                                    statusCode: \"Fail\",\n                                    // tslint:disable-next-line: object-literal-sort-keys\n                                    message: \"the fn callback is not a function\"\n                                };\n                                checkAllStatus_1();\n                            }\n                        })(item, taskID);\n                    });\n                }\n                else {\n                    resolve();\n                }\n            })];\n    });\n}); };\n/**\n * 按队列调用异步函数或普通函数\n * @param paramList {TypeQueueCallParam[]} 队列参数\n * @param fn 循环调用的方法，如果params.fn 没有设置将会调用fn参数\n */\nexports.queueCallFunc = function (paramList, fn, option) { return __awaiter(void 0, void 0, void 0, function () {\n    var _this = this;\n    return __generator(this, function (_a) {\n        return [2 /*return*/, new Promise(function (resolve, reject) {\n                var doActionData = {};\n                var Result = {};\n                var keyArr = [];\n                var yieldResult = null;\n                var doNext = function (key, lastKey) {\n                    return function () {\n                        var yResult = yieldResult.next(Result[lastKey]);\n                        if (!yResult.done) {\n                            if (yResult.value && typeof yResult.value.toString === \"function\" && yResult.value.toString() === \"[object Promise]\") {\n                                yResult.value.then(function (resp) {\n                                    Result[key] = resp;\n                                    goNext(key);\n                                }).catch(function (err) {\n                                    if (!option || !option.throwException) {\n                                        Result[key] = {\n                                            statusCode: \"QueueCall_602\",\n                                            // tslint:disable-next-line: object-literal-sort-keys\n                                            excpetion: err\n                                        };\n                                        goNext(key);\n                                    }\n                                    else if (option && option.throwException) {\n                                        reject({\n                                            exception: err,\n                                            message: err.message,\n                                            statusCode: \"QueueCall_603\",\n                                        });\n                                    }\n                                });\n                            }\n                            else {\n                                Result[key] = yResult.value;\n                                goNext(key);\n                            }\n                        }\n                        else {\n                            resolve(Result);\n                        }\n                        return yResult;\n                    };\n                };\n                var goNext = function (key) {\n                    var index = keyArr.indexOf(key);\n                    var nextKey = keyArr[index + 1];\n                    doNext(nextKey, key)();\n                };\n                if (StaticCommon_1.StaticCommon.isArray(paramList) && paramList.length > 0) {\n                    paramList.map(function (tParam, index) {\n                        var lastKey = index > 0 && paramList[index - 1] ? paramList[index - 1].id : undefined;\n                        keyArr.push(tParam.id);\n                        doActionData[tParam.id] = (function (options, lKey) {\n                            return function (lstResult) {\n                                var lstKey = lKey;\n                                var paramValue = options.params;\n                                var handler = options.owner || _this;\n                                var operateCallback = typeof options.fn === \"function\" ? options.fn : fn;\n                                // tslint:disable-next-line: variable-name\n                                var _option = {\n                                    id: options.id,\n                                    lastKey: lstKey,\n                                    lastResult: lstResult,\n                                    params: options.params,\n                                    result: Result\n                                };\n                                if (StaticCommon_1.StaticCommon.isArray(paramValue)) {\n                                    paramValue.unshift(_option);\n                                    return operateCallback.apply(handler, paramValue);\n                                }\n                                else {\n                                    return operateCallback.call(handler, _option, paramValue);\n                                }\n                            };\n                        })(tParam, lastKey);\n                        lastKey = null;\n                    });\n                    yieldResult = callYieldFunc(doActionData);\n                    doNext(paramList[0].id, undefined)();\n                }\n                else {\n                    resolve({});\n                }\n            })];\n    });\n}); };\n//# sourceMappingURL=QueueCallFun.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elmer_common_1 = require(\"elmer-common\");\nvar HtmlParse = /** @class */ (function (_super) {\n    __extends(HtmlParse, _super);\n    function HtmlParse() {\n        var _this = _super.call(this) || this;\n        _this.autoCloseTagList = [\n            /^input$/i, /^br$/i, /^hr$/i, /^img$/i, /^meta$/i, /^\\!DOCTYPE$/i\n        ];\n        _this.rootNodes = {};\n        return _this;\n    }\n    HtmlParse.prototype.mergeArray = function (array1, array2) {\n        var resultData = [];\n        if (array1 && array1.length > 0) {\n            array1.map(function (item) {\n                resultData.push(item);\n            });\n        }\n        if (array2 && array2.length > 0) {\n            array2.map(function (item) {\n                resultData.push(item);\n            });\n        }\n        return resultData;\n    };\n    HtmlParse.prototype.parse = function (htmlCode, selector) {\n        var result = {\n            children: [],\n            data: {},\n            events: {},\n            path: [],\n            props: {},\n            status: \"APPEND\",\n            tagName: selector || \"VirtualRoot\"\n        };\n        var nodeId = this.getRandomID();\n        this.rootNodes[nodeId] = result;\n        this.parseNode(htmlCode, result, nodeId, selector);\n        delete this.rootNodes[nodeId];\n        return result;\n    };\n    /**\n     * 根据节点路径查找Node节点\n     * @param rootNode IVirtualElement 根路径ID\n     * @param path Array<number> node路径\n     */\n    HtmlParse.prototype.getNodeByPath = function (rootNode, path) {\n        if (rootNode) {\n            var checkNode = rootNode;\n            var checkIndex = 0;\n            var checkIndexValue = path[checkIndex];\n            while (checkNode && checkNode.children[checkIndexValue]) {\n                checkNode = checkNode.children[checkIndexValue];\n                checkIndex += 1;\n                checkIndexValue = path[checkIndex];\n            }\n            if (checkIndex === path.length) {\n                return checkNode;\n            }\n        }\n        return null;\n    };\n    /**\n     * 解析dom节点\n     * @param htmlCode 解析代码\n     * @param parentNode 父元素\n     * @param rootNodeKey 保存数据ID\n     */\n    HtmlParse.prototype.parseNode = function (htmlCode, parentNode, rootNodeKey, componentName) {\n        if (!this.isEmpty(htmlCode)) {\n            // 将代码前后空格去掉，在做判断，此时可判读开始的代码段是文本还是dom节点，文本内容保留空格，dom节点去除换行符\n            var checkCode = htmlCode.replace(/^([\\r\\n]*)/, \" \");\n            checkCode = checkCode.replace(/^\\s*/, \"\");\n            if (!this.isEmpty(checkCode)) {\n                if (/^\\</.test(checkCode)) {\n                    if (/^(\\<{2,})/.test(checkCode)) {\n                        throw new Error(\"html代码错误有重复的标识符号：<\");\n                    }\n                    else if (/^\\-\\-\\>/.test(checkCode)) {\n                        throw new Error(\"注释标签错误，不允许以结束标签开始。\");\n                    }\n                    else {\n                        if (/^\\<\\!--/.test(checkCode)) {\n                            var commentNode = this.parseComment(checkCode, parentNode);\n                            var leftCode = \"\";\n                            parentNode.children.push(commentNode);\n                            leftCode = checkCode.replace(commentNode.innerHTML, \"\").replace(/^\\<\\!--/, \"\").replace(/^\\-\\-\\>/, \"\");\n                            this.parseNode(leftCode, parentNode, rootNodeKey, componentName);\n                        }\n                        else {\n                            this.parseNextNode(checkCode, parentNode, rootNodeKey, componentName);\n                        }\n                    }\n                }\n                else {\n                    // 解析到文本节点，取出文本，剩余代码文本继续解析\n                    var lStart = htmlCode.indexOf(\"<\");\n                    var txt = lStart > 0 ? htmlCode.substr(0, lStart) : \"\";\n                    var leftHtmlCode = htmlCode.substr(lStart);\n                    parentNode.children.push({\n                        children: [],\n                        events: {},\n                        innerHTML: txt,\n                        isClose: true,\n                        path: this.mergeArray(parentNode.path, [parentNode.children.length]),\n                        props: {},\n                        status: \"APPEND\",\n                        tagName: \"text\"\n                    });\n                    !this.isEmpty(leftHtmlCode) && this.parseNode(leftHtmlCode, parentNode, rootNodeKey, componentName);\n                    lStart = null;\n                    txt = null;\n                    leftHtmlCode = null;\n                }\n            }\n            checkCode = null;\n        }\n    };\n    /**\n     * 解析注释标签，注释标签不能嵌套\n     * @param htmlCode 要解析的代码\n     * @param parentNode 父元素\n     */\n    HtmlParse.prototype.parseComment = function (htmlCode, parentNode) {\n        var endTagIndex = htmlCode.indexOf(\"-->\");\n        var result = {\n            children: [],\n            data: {},\n            events: {},\n            innerHTML: \"\",\n            isClose: true,\n            path: this.mergeArray(parentNode.path, [parentNode.children.length]),\n            props: {},\n            status: \"APPEND\",\n            tagName: \"<!--\"\n        };\n        if (endTagIndex > 0) {\n            var commentCode = htmlCode.substr(0, endTagIndex + 3);\n            if (commentCode.substr(4).indexOf(\"<!--\") > 0) {\n                throw new Error(\"注释标签不允许嵌套\");\n            }\n            if (!this.isEmpty(commentCode)) {\n                commentCode = commentCode.replace(/^\\<\\!--/, \"\").replace(/\\-\\-\\>$/, \"\");\n            }\n            result.innerHTML = commentCode;\n            commentCode = null;\n        }\n        endTagIndex = null;\n        return result;\n    };\n    /**\n     * 解析下一个dom节点\n     * @param htmlCode string 解析代码文本\n     * @param parentNode IVirtualElement 父节点\n     * @param rootNodeKey string 根节点ID\n     */\n    HtmlParse.prototype.parseNextNode = function (htmlCode, parentNode, rootNodeKey, componentName) {\n        var tagReg = /^\\<([a-z0-9\\_\\-]*)\\s/i;\n        var tagNoAttrReg = /^\\<([a-z0-9\\_\\-]*)(([\\/]{0,1}\\>)|\\>)/i;\n        if (tagReg.test(htmlCode) || tagNoAttrReg.test(htmlCode)) {\n            var tagMatch = htmlCode.match(tagReg);\n            if (tagMatch) {\n                var tagName = tagMatch[1];\n                var code = htmlCode.replace(tagReg, \"\");\n                var autoIndex = code.indexOf(\"/>\");\n                var closeIndex = code.indexOf(\">\");\n                var attrCode = autoIndex > 0 && autoIndex < closeIndex ? code.substr(0, autoIndex) : code.substr(0, closeIndex);\n                var mLeftCode = autoIndex > 0 && autoIndex < closeIndex ? code.substr(autoIndex) : code.substr(closeIndex);\n                attrCode = attrCode.replace(/\\r\\n/g, \" \");\n                code = attrCode + mLeftCode;\n                var attrsResult = this.readAttrs(code);\n                var leftCode = attrsResult.htmlCode;\n                var isAutoClose = this.checkAutoClose(leftCode, tagName);\n                var newNode = {\n                    children: [],\n                    data: {},\n                    events: attrsResult.events,\n                    innerHTML: \"\",\n                    isClose: isAutoClose,\n                    path: this.mergeArray(parentNode.path, [parentNode.children.length]),\n                    props: attrsResult.attrs,\n                    status: \"APPEND\",\n                    tagName: tagName\n                };\n                leftCode = leftCode.replace(/^\\>/, \"\").replace(/^\\/\\>/, \"\").replace(/^(\\r\\n)*/, \"\");\n                parentNode.children.push(newNode);\n                if (isAutoClose) {\n                    this.parseNode(leftCode, parentNode, rootNodeKey, componentName);\n                }\n                else {\n                    this.parseNode(leftCode, newNode, rootNodeKey, componentName);\n                }\n                tagName = null;\n                code = null;\n                attrsResult = null;\n                autoIndex = null;\n                closeIndex = null;\n                isAutoClose = null;\n                newNode = null;\n                mLeftCode = null;\n            }\n            else {\n                // 没有属性的标签，示例： <ul />,<img/>\n                var noAttrMatch = htmlCode.match(tagNoAttrReg);\n                if (noAttrMatch) {\n                    var tagName = noAttrMatch[1];\n                    var leftCode = htmlCode.replace(\"<\" + tagName, \"\");\n                    var isAutoClose = this.checkAutoClose(leftCode, tagName);\n                    var newNode = {\n                        children: [],\n                        data: {},\n                        events: {},\n                        innerHTML: \"\",\n                        isClose: isAutoClose,\n                        path: this.mergeArray(parentNode.path, [parentNode.children.length]),\n                        props: {},\n                        status: \"APPEND\",\n                        tagName: tagName\n                    };\n                    leftCode = leftCode.replace(/^\\>/, \"\").replace(/^\\/\\>/, \"\").replace(/^(\\r\\n)*/, \"\");\n                    parentNode.children.push(newNode);\n                    if (isAutoClose) {\n                        this.parseNode(leftCode, parentNode, rootNodeKey, componentName);\n                    }\n                    else {\n                        this.parseNode(leftCode, newNode, rootNodeKey, componentName);\n                    }\n                    tagName = null;\n                    leftCode = null;\n                    isAutoClose = null;\n                    newNode = null;\n                }\n                noAttrMatch = null;\n            }\n        }\n        else {\n            var endTagReg = /^\\<\\/\\s*([a-z0-9\\_\\-]*)\\s*\\>/i;\n            var endTagMatch = htmlCode.match(endTagReg);\n            if (endTagMatch) {\n                var tagName = endTagMatch[1];\n                var leftCode = htmlCode.replace(endTagReg, \"\");\n                if (this.checkEndTag(tagName, leftCode, parentNode)) {\n                    var parentNodePath = JSON.parse(JSON.stringify(parentNode.path));\n                    var nextParentNode = void 0;\n                    parentNodePath.splice(parentNodePath.length - 1, 1);\n                    nextParentNode = this.getNodeByPath(this.rootNodes[rootNodeKey], parentNodePath);\n                    this.parseNode(leftCode, nextParentNode, rootNodeKey, componentName);\n                    parentNode.isClose = true;\n                    nextParentNode = null;\n                    parentNodePath = null;\n                }\n                tagName = null;\n                leftCode = null;\n            }\n            else {\n                if (/^\\s*\\<\\!DOCTYPE/.test(htmlCode)) {\n                    var leftIndex = htmlCode.indexOf(\">\");\n                    var leftCode = leftIndex > 0 ? htmlCode.substr(leftIndex + 1) : \"\";\n                    var newNode = {\n                        children: [],\n                        data: {},\n                        events: {},\n                        innerHTML: \"\",\n                        isClose: true,\n                        path: this.mergeArray(parentNode.path, [parentNode.children.length]),\n                        props: {},\n                        status: \"APPEND\",\n                        tagName: \"!DOCTYPE\"\n                    };\n                    parentNode.children.push(newNode);\n                    this.parseNode(leftCode, parentNode, rootNodeKey, componentName);\n                    leftIndex = null;\n                    leftCode = null;\n                    newNode = null;\n                }\n                else {\n                    throw new Error(\"Html代码错误无效的开始标签\" + htmlCode);\n                }\n            }\n        }\n    };\n    /**\n     * 检查标签是否结束\n     * @param tagName 标签名\n     * @param htmlCode 解析代码\n     * @param parentNode 父元素\n     */\n    HtmlParse.prototype.checkEndTag = function (tagName, htmlCode, parentNode) {\n        var _this = this;\n        if (parentNode.tagName === tagName) {\n            var innerHTML_1 = \"\";\n            parentNode.isClose = true;\n            parentNode.children.map(function (tmpItem) {\n                if (!_this.isEmpty(tmpItem.tagName)) {\n                    var attrHtml = \"\";\n                    var attrArr = [];\n                    if (tmpItem.props) {\n                        // tslint:disable-next-line:forin\n                        for (var key in tmpItem.props) {\n                            var attrValue = tmpItem.props[key];\n                            attrValue = attrValue.replace(/\\\"/g, \"\\\"\");\n                            attrArr.push(key + \"=\\\"\" + attrValue + \"\\\"\");\n                        }\n                    }\n                    attrHtml = attrArr.join(\" \");\n                    if (tmpItem.tagName !== \"text\") {\n                        innerHTML_1 += \"<\" + tmpItem.tagName + \" \" + attrHtml + \">\" + tmpItem.innerHTML + \"</\" + tmpItem.tagName + \">\";\n                    }\n                    else {\n                        innerHTML_1 += tmpItem.innerHTML;\n                    }\n                    attrArr = null;\n                }\n                else {\n                    innerHTML_1 += tmpItem.innerHTML;\n                }\n            });\n            parentNode.innerHTML = innerHTML_1;\n            return true;\n        }\n        return false;\n    };\n    /**\n     * 解析属性\n     * @param htmlCode 解析代码\n     * @param valChar 属性值标识符号\n     * @returns ReadAttrValue 属性值内容\n     */\n    HtmlParse.prototype.readAttrValue = function (htmlCode, valChar) {\n        var result = {\n            htmlCode: htmlCode,\n            value: \"\"\n        };\n        var checkCode = htmlCode;\n        checkCode = valChar === undefined || valChar === null ? htmlCode.replace(/^\\s*/, \"\") : htmlCode;\n        if (checkCode.startsWith(\"'\")) { // 已单引号包含值\n            checkCode = checkCode.substr(1);\n            var splitIndex = checkCode.indexOf(\"\\\\'\");\n            var charIndex = checkCode.indexOf(\"'\");\n            if (splitIndex < charIndex && splitIndex >= 0) {\n                // 单引号内容包含转义的单引号\\'\n                result.value = checkCode.substr(0, splitIndex);\n                checkCode = checkCode.substr(splitIndex + 2);\n                var exResult = !checkCode.startsWith(\"'\") ? this.readAttrValue(checkCode, \"'\") : {\n                    htmlCode: checkCode,\n                    value: \"\"\n                };\n                result.value += \"\\\\'\" + exResult.value;\n                result.htmlCode = exResult.htmlCode;\n                exResult = null;\n            }\n            else {\n                if (charIndex > 0) {\n                    result.value = checkCode.substr(0, charIndex);\n                    result.htmlCode = checkCode.substr(charIndex + 1);\n                }\n                else {\n                    result.value = \"\";\n                    result.htmlCode = checkCode.substr(1);\n                }\n            }\n            splitIndex = null;\n            charIndex = null;\n        }\n        else if (checkCode.startsWith('\"')) {\n            checkCode = checkCode.substr(1);\n            var splitIndex = checkCode.indexOf('\\\\\"');\n            var charIndex = checkCode.indexOf('\"');\n            if (splitIndex < charIndex && splitIndex >= 0) {\n                // 双引号内容包含转义的双引号\\\"\n                result.value = checkCode.substr(0, splitIndex);\n                checkCode = checkCode.substr(splitIndex + 2);\n                var exResult = !checkCode.startsWith('\"') ? this.readAttrValue(checkCode, '\"') : {\n                    htmlCode: checkCode,\n                    value: \"\"\n                };\n                result.value += '\\\\\"' + exResult.value;\n                result.htmlCode = exResult.htmlCode;\n                exResult = null;\n            }\n            else {\n                if (charIndex > 0) {\n                    result.value = checkCode.substr(0, charIndex);\n                    result.htmlCode = checkCode.substr(charIndex + 1);\n                }\n                else {\n                    result.value = \"\";\n                    result.htmlCode = checkCode.substr(1);\n                }\n            }\n            splitIndex = null;\n            charIndex = null;\n        }\n        else {\n            if (valChar === \"'\") {\n                var splitIndex = checkCode.indexOf(\"\\\\'\");\n                var charIndex = checkCode.indexOf(\"'\");\n                if (splitIndex < charIndex && splitIndex >= 0) {\n                    result.value = checkCode.substr(0, splitIndex);\n                    checkCode = checkCode.substr(splitIndex + 2);\n                    var exResult = !checkCode.startsWith(\"'\") ? this.readAttrValue(checkCode, \"'\") : {\n                        htmlCode: checkCode,\n                        value: \"\"\n                    };\n                    result.value += \"\\\\'\" + exResult.value;\n                    result.htmlCode = exResult.htmlCode;\n                    exResult = null;\n                }\n                else {\n                    if (charIndex > 0) {\n                        result.value = checkCode.substr(0, charIndex);\n                        result.htmlCode = checkCode.substr(charIndex + 1);\n                    }\n                    else {\n                        result.value = \"\";\n                        result.htmlCode = checkCode.substr(1);\n                    }\n                }\n            }\n            else if (valChar === '\"') {\n                var splitIndex = checkCode.indexOf('\\\\\"');\n                var charIndex = checkCode.indexOf('\"');\n                if (splitIndex < charIndex && splitIndex >= 0) {\n                    // 双引号内容包含转义的双引号\\\"\n                    result.value = checkCode.substr(0, splitIndex);\n                    checkCode = checkCode.substr(splitIndex + 2);\n                    var exResult = !checkCode.startsWith('\"') ? this.readAttrValue(checkCode, '\"') : {\n                        htmlCode: checkCode,\n                        value: \"\"\n                    };\n                    result.value += '\\\\\"' + exResult.value;\n                    result.htmlCode = exResult.htmlCode;\n                    exResult = null;\n                }\n                else {\n                    if (charIndex > 0) {\n                        result.value = checkCode.substr(0, charIndex);\n                        result.htmlCode = checkCode.substr(charIndex + 1);\n                    }\n                    else {\n                        result.value = \"\";\n                        result.htmlCode = checkCode.substr(1);\n                    }\n                }\n                splitIndex = null;\n                charIndex = null;\n            }\n        }\n        return result;\n    };\n    /**\n     * 读取标签属性\n     * @param htmlCode string 解析代码文本\n     * @return ReadAttrResult 返回属性内容\n     */\n    HtmlParse.prototype.readAttrs = function (htmlCode) {\n        var attrKeyReg = /^([a-z0-9\\-_\\.\\:]{1,})\\s*=/i;\n        var extAttrKeyReg = /^\\.\\.\\.([[a-z0-9\\-_\\.]*)(\\s|\\r\\n)/i;\n        var onlyAttrKeyReg = /^([a-z0-9\\-_\\.\\:]{1,})(\\s|\\r\\n)/i;\n        var checkCode = htmlCode;\n        var result = {\n            attrs: {},\n            events: {},\n            htmlCode: \"\"\n        };\n        checkCode = checkCode.replace(/^[\\r\\n\\s]*/, \"\");\n        while (attrKeyReg.test(checkCode) || extAttrKeyReg.test(checkCode) || onlyAttrKeyReg.test(checkCode)) {\n            if (attrKeyReg.test(checkCode)) {\n                var attrMatch = checkCode.match(attrKeyReg);\n                var attrKey = attrMatch[1];\n                var attrValueResult = void 0;\n                checkCode = checkCode.replace(attrKeyReg, \"\").replace(/^\\s*/, \"\");\n                attrValueResult = this.readAttrValue(checkCode);\n                result.attrs[attrKey] = attrValueResult.value;\n                checkCode = attrValueResult.htmlCode;\n                checkCode = checkCode.replace(/^[\\r\\n\\s]*/, \"\");\n                attrMatch = null;\n                attrKey = null;\n            }\n            else if (extAttrKeyReg.test(checkCode)) {\n                var extAttrMatch = checkCode.match(extAttrKeyReg);\n                result.attrs[\"...\"] = extAttrMatch[1];\n                checkCode = checkCode.replace(extAttrKeyReg, \"\").replace(/^[\\r\\n\\s]*/, \"\");\n                extAttrMatch = null;\n            }\n            else if (onlyAttrKeyReg.test(checkCode)) {\n                var onlyAttrKeyMatch = checkCode.match(onlyAttrKeyReg);\n                result.attrs[onlyAttrKeyMatch[1]] = onlyAttrKeyMatch[1];\n                checkCode = checkCode.replace(onlyAttrKeyReg, \"\").replace(/^[\\r\\n\\s]*/, \"\");\n                onlyAttrKeyMatch = null;\n            }\n        }\n        result.htmlCode = checkCode;\n        attrKeyReg = null;\n        extAttrKeyReg = null;\n        onlyAttrKeyReg = null;\n        return result;\n    };\n    /**\n     * 检查标签是否关闭,匹配关闭节点\n     * @param htmlCode string 检查代码\n     * @param tagName string 标签名称\n     */\n    HtmlParse.prototype.checkAutoClose = function (htmlCode, tagName) {\n        for (var _i = 0, _a = this.autoCloseTagList; _i < _a.length; _i++) {\n            var reg = _a[_i];\n            if (reg.test(tagName)) {\n                return true;\n            }\n        }\n        return /^\\s*\\/\\>/.test(htmlCode);\n    };\n    HtmlParse.className = \"HtmlParse\";\n    return HtmlParse;\n}(elmer_common_1.Common));\nexports.HtmlParse = HtmlParse;\n//# sourceMappingURL=HtmlParse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.VirtualElementOperate = {\n    APPEND: \"APPEND\",\n    DELETE: \"DELETE\",\n    MOVE: \"MOVE\",\n    MOVEUPDATE: \"MOVEUPDATE\",\n    NORMAL: \"NORMAL\",\n    UPDATE: \"UPDATE\"\n};\n//# sourceMappingURL=IVirtualElement.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elmer_common_1 = require(\"elmer-common\");\nvar RenderingSyntax_1 = require(\"../RenderingSyntax\");\nvar VirtualRenderDiff_1 = require(\"./VirtualRenderDiff\");\n/**\n * v2.0.0\n * 新版本VirtualRender合并渲染和diff运算，减少虚拟dom的遍历提升速度\n */\nvar VirtualRender = /** @class */ (function (_super) {\n    __extends(VirtualRender, _super);\n    function VirtualRender(virtualDom) {\n        var _this = _super.call(this) || this;\n        _this.virtualDom = virtualDom;\n        _this.plugin = [];\n        _this.events = {};\n        _this.plugin.push(new RenderingSyntax_1.SyntaxText());\n        _this.plugin.push(new RenderingSyntax_1.SyntaxEvent());\n        _this.plugin.push(new RenderingSyntax_1.SyntaxEM());\n        _this.virtualDiff = new VirtualRenderDiff_1.VirtualRenderDiff();\n        return _this;\n    }\n    VirtualRender.prototype.bind = function (sessionId, type, callback) {\n        var evtId = \"virtualRenderEvent_\" + this.guid();\n        if (!this.events[sessionId]) {\n            this.events[sessionId] = {};\n        }\n        if (!this.events[sessionId][type]) {\n            this.events[sessionId][type] = {};\n        }\n        this.events[sessionId][type][evtId] = callback;\n        return evtId;\n    };\n    VirtualRender.prototype.unBind = function (sessionId, type, eventId) {\n        if (this.events[sessionId]) {\n            if (this.events[sessionId][type]) {\n                delete this.events[sessionId][type][eventId];\n                if (Object.keys(this.events[sessionId][type]).length <= 0) {\n                    delete this.events[sessionId][type];\n                }\n            }\n            if (Object.keys(this.events[sessionId]).length <= 0) {\n                delete this.events[sessionId];\n            }\n        }\n    };\n    VirtualRender.prototype.setVirtualElement = function (virtualDom) {\n        this.virtualDom = virtualDom;\n    };\n    /**\n     * 渲染虚拟dom，并做diff运算标记dom状态\n     * @param domData 新dom树\n     * @param oldDomData 旧dom树\n     * @param component 渲染component对象\n     */\n    VirtualRender.prototype.render = function (domData, oldDomData, component, options) {\n        var renderDom = JSON.parse(JSON.stringify(domData));\n        var beforeEventName = \"onBeforeRender\";\n        if (options && !this.isEmpty(options.sessionId)) {\n            var eventObjKey = options.sessionId + \".\" + beforeEventName;\n            var eventObj = this.getValue(this.events, eventObjKey);\n            if (eventObj) {\n                for (var _i = 0, _a = Object.keys(eventObj); _i < _a.length; _i++) {\n                    var evtId = _a[_i];\n                    var eventCallback = eventObj[evtId];\n                    if (typeof eventCallback === \"function\") {\n                        var event_1 = {\n                            cancelBubble: false,\n                            vdom: renderDom\n                        };\n                        eventCallback(event_1);\n                        if (event_1.cancelBubble) {\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        renderDom.path = options ? (options.rootPath || []) : []; // 设置根节点路径\n        options && options.children && this.replaceContent(renderDom, options.children);\n        this.forEach({\n            component: component,\n            doDiff: oldDomData && oldDomData.children.length > 0,\n            domData: renderDom,\n            oldDomData: oldDomData,\n            optionsData: null,\n            rootPath: options ? (options.rootPath || []) : [],\n            isUserComponent: oldDomData ? !this.isEmpty(oldDomData.virtualID) : false\n        });\n        return renderDom;\n    };\n    /**\n     * 渲染自定义组件在父组件定义的子组件内容\n     * context不能和content[A-Z\\-\\_][A-Za-z0-9]{1,}共同使用,只能选择其一做配置\n     * @param checkItem 检测组件\n     * @param children 父组件定义的子组件内容\n     */\n    VirtualRender.prototype.replaceContent = function (checkItem, children) {\n        // 当前component接收到children的时候才需要执行此方法，为减少循环提升性能\n        if (children && children.length > 0) {\n            var contextWrapperReg = /^context([A-Z\\-\\_][0-9a-zA-Z]{1,})$/;\n            for (var i = 0; i < checkItem.children.length; i++) {\n                var uItem = checkItem.children[i];\n                if (uItem.status !== \"DELETE\") {\n                    // --- 检测Item是否包含Content元素，检测到，替换为children\n                    if (/\\<context\\s*>\\s*\\S*\\<\\/context\\s*\\>/i.test(uItem.innerHTML) ||\n                        /\\<context\\s*\\/\\>/i.test(uItem.innerHTML) ||\n                        uItem.tagName === \"context\" ||\n                        /\\<content\\s*>\\s*\\S*\\<\\/content\\s*\\>/i.test(uItem.innerHTML) ||\n                        /\\<content\\s*\\/\\>/i.test(uItem.innerHTML) ||\n                        uItem.tagName === \"content\" ||\n                        /\\<context[A-Z\\-\\_][0-9a-zA-Z]{1,}\\s*\\/\\>/.test(uItem.innerHTML) ||\n                        /\\<context[A-Z\\-\\_][0-9a-zA-Z]{1,}\\s*\\>\\s*\\S*\\<\\/context[A-Z\\-\\_][0-9a-zA-Z]{1,}\\s*\\>/.test(uItem.innerHTML) ||\n                        contextWrapperReg.test(uItem.tagName)) {\n                        // 检测到当前dom是content元素或者包含content元素，\n                        // 其他dom结构不用再做，\n                        if (uItem.tagName.toLowerCase() === \"content\" || uItem.tagName.toLowerCase() === \"context\") {\n                            var isContextKey = false;\n                            var renderKeyReg = /([A-Z\\-\\_][0-9a-zA-Z]{1,})$/;\n                            for (var j = 0, mLen = children.length; j < mLen; j++) {\n                                var renderKeyMatch = children[j].tagName.match(renderKeyReg);\n                                if (renderKeyMatch) {\n                                    var contextRegKey = \"ChildrenWrapper\" + renderKeyMatch[1];\n                                    if (contextRegKey === children[j].tagName) {\n                                        isContextKey = true;\n                                        break;\n                                    }\n                                    renderKeyMatch = null;\n                                }\n                                children[j].isContent = true;\n                            }\n                            renderKeyReg = null;\n                            if (!isContextKey) {\n                                var sessionId = this.virtualDom.init(checkItem);\n                                this.virtualDom.replaceAt(sessionId, children, i);\n                                this.virtualDom.clear(sessionId);\n                                break;\n                            }\n                        }\n                        else {\n                            var contextMatch = uItem.tagName.match(contextWrapperReg);\n                            if (contextMatch) {\n                                var contextKey = \"ChildrenWrapper\" + contextMatch[1];\n                                for (var j = 0, mLen = children.length; j < mLen; j++) {\n                                    if (contextKey === children[j].tagName) {\n                                        for (var z = 0, zLen = children[j].children.length; z < zLen; z++) {\n                                            children[j].children[z].isContent = true;\n                                        }\n                                        var sessionId = this.virtualDom.init(checkItem);\n                                        this.virtualDom.replaceAt(sessionId, children[j].children, i);\n                                        this.virtualDom.clear(sessionId);\n                                        break;\n                                    }\n                                }\n                            }\n                            else {\n                                // 执行下一层搜索\n                                this.replaceContent(checkItem.children[i], children);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    VirtualRender.prototype.forEach = function (event) {\n        var _a, _b;\n        var optionalData = __assign(__assign({}, event.domData.data), (event.optionsData || {}));\n        var deleteElements = [];\n        // 当前虚拟dom是用户自定义组件时不需要对子元素做diff运算\n        // 有子元素是要传到自定义组件里面的diff运算去做，当前层级组件内不用做diff\n        // virtualID只有在旧dom才会出现，旧dom节点是经过渲染流程以后的数据\n        var isUserComponent = !event.isUserComponent ? (event.oldDomData ? !this.isEmpty(event.oldDomData.virtualID) : false) : true;\n        var hasForEach = false;\n        var hasRenderChange = false;\n        var hasRenderInnerHTML = \"\";\n        var forLen = event.domData.children.length;\n        var lastMatchIndex = 0;\n        // tslint:disable-next-line: forin\n        for (var kIndex = 0; kIndex < forLen; kIndex++) {\n            var dom = event.domData.children[kIndex];\n            if (!/^\\s*script\\s*$/i.test(dom.tagName)) {\n                if (!this.isEmpty(dom.props[\"em:for\"]) && dom.tagName !== \"forEach\") {\n                    // 进入for循环\n                    var forDoms = this.repeatRender(dom, event.component, optionalData);\n                    if (forDoms.length > 0) {\n                        (_a = event.domData.children).splice.apply(_a, __spreadArrays([kIndex, 1], forDoms));\n                        dom = event.domData.children[kIndex];\n                        forLen += forDoms.length - 1;\n                        hasForEach = true;\n                    }\n                    else {\n                        delete event.domData.children[kIndex].props[\"em:for\"];\n                        event.domData.children[kIndex].status = \"DELETE\";\n                    }\n                }\n                if (dom.tagName === \"forEach\") {\n                    // 进入forEach循环\n                    var forEachDoms = this.forEachRender(dom, event.component, optionalData);\n                    if (forEachDoms.length > 0) {\n                        (_b = event.domData.children).splice.apply(_b, __spreadArrays([kIndex, 1], forEachDoms));\n                        dom = event.domData.children[kIndex];\n                        forLen += forEachDoms.length - 1;\n                        hasForEach = true;\n                    }\n                    else {\n                        event.domData.children[kIndex].status = \"DELETE\";\n                    }\n                    hasForEach = true;\n                }\n                dom.path = __spreadArrays(event.domData.path, [kIndex]); // 更新path数据\n                // 先对属性数据绑定，事件绑定，逻辑判断渲染到虚拟dom树\n                if (this.renderAttribute(dom, event.component, __assign(__assign({}, optionalData), (dom.data || {})))) {\n                    // 有绑定内容渲染，更新innerHTML\n                    hasRenderChange = true;\n                }\n                // console.log(dom.tagName, dom.innerHTML);\n                var diffResult = !isUserComponent ? this.virtualDiff.diff({\n                    dom: dom,\n                    domIndex: kIndex,\n                    help: event.component.help,\n                    lastMatchIndex: lastMatchIndex,\n                    oldParentDom: event.oldDomData,\n                    isLastNode: kIndex === forLen - 1\n                }) : {\n                    matchIndex: 0,\n                    matchDom: null\n                };\n                lastMatchIndex = diffResult.matchIndex;\n                // --------进行下一层级的渲染和diff运算\n                if (dom.children.length > 0) {\n                    var myEvent = {\n                        component: event.component,\n                        doDiff: event.doDiff,\n                        domData: dom,\n                        oldDomData: diffResult.matchDom,\n                        optionsData: optionalData,\n                        updateParentPath: hasForEach,\n                        rootPath: event.rootPath,\n                        isUserComponent: isUserComponent\n                    };\n                    var myResult = this.forEach(myEvent);\n                    if (myResult.hasRenderChange) {\n                        // 数据有变化更新innerHTML\n                        dom.innerHTML = myResult.innerHTML;\n                        hasRenderChange = true;\n                    }\n                }\n                var curAttrHtmlCode = dom.attrCode || \"\";\n                hasRenderInnerHTML += !this.isEmpty(hasRenderInnerHTML) ? \"\\r\\n\" : \"\";\n                hasRenderInnerHTML += /^text$/i.test(dom.tagName) ? dom.innerHTML : \"<\" + dom.tagName + \" \" + curAttrHtmlCode + \">\" + dom.innerHTML + \"</\" + dom.tagName + \">\";\n            }\n            else {\n                dom.status = \"DELETE\";\n                dom.children = [];\n                dom.innerHTML = \"Script tags are not allowed in HTML code\";\n                dom.tagName = \"text\";\n                throw new Error(\"Script tags are not allowed in HTML code.[\" + event.component.selector + \"]\");\n            }\n        }\n        // 将没有做过对比的旧节点找出来并标记为删除状态\n        // 如果节点属于自定义组件子节点不标记删除状态，由于子节点没有做diff运算，所有子节点都没有标记为diff状态\n        if (!isUserComponent && event.oldDomData && event.oldDomData.children.length > 0) {\n            event.oldDomData.children.map(function (tmpDom) {\n                // tmpDom.tagAttrs && console.log(tmpDom.tagName, tmpDom.tagAttrs.checked);\n                if (!tmpDom.isDiff) {\n                    tmpDom.status = \"DELETE\";\n                    deleteElements.push(tmpDom);\n                }\n            });\n        }\n        event.domData.deleteElements = deleteElements;\n        return {\n            hasRenderChange: hasRenderChange,\n            innerHTML: hasRenderInnerHTML\n        };\n    };\n    /**\n     * 渲染dom属性，如果有绑定值则返回true,通知上一级渲染有改动，如果没有绑定数据被渲染到dom，则会被标记为Static状态，在做diff时不需要进行比较\n     * @param dom 渲染属性\n     * @param component 渲染组件对象\n     * @param optionalData 组件绑定动态数据\n     */\n    VirtualRender.prototype.renderAttribute = function (dom, component, optionalData) {\n        var hasChange = false;\n        if (dom.tagName !== \"text\") {\n            if (dom.props) {\n                var attributes = [];\n                var dataSet = {};\n                // tslint:disable-next-line: forin\n                for (var attrKey in dom.props) {\n                    var attrValue = dom.props[attrKey];\n                    var newAttrKey = attrKey;\n                    var isEvent = false; // just for current attribute\n                    for (var _i = 0, _a = this.plugin; _i < _a.length; _i++) {\n                        var plugin = _a[_i];\n                        var renderEvent = {\n                            attrKey: attrKey,\n                            break: false,\n                            component: component,\n                            data: optionalData,\n                            target: dom.props[attrKey]\n                        };\n                        var renderResult = plugin.render(renderEvent);\n                        if (renderResult.hasChange) {\n                            attrValue = renderResult.result;\n                            hasChange = true;\n                            if (!this.isEmpty(renderResult.attrKey)) {\n                                newAttrKey = renderResult.attrKey;\n                            }\n                        }\n                        if (renderResult.isEvent) {\n                            isEvent = true;\n                        }\n                        if (renderEvent.break) {\n                            break;\n                        }\n                    }\n                    if (!isEvent) {\n                        if (hasChange) {\n                            // 检测到有数据绑定才需要更新属性值\n                            if (newAttrKey === \"if\") {\n                                // if属性已经被作为是否渲染的标识，不在往外抛出属性\n                                if (attrValue) {\n                                    dom.status = \"APPEND\";\n                                }\n                                else {\n                                    dom.status = \"DELETE\";\n                                }\n                            }\n                            else {\n                                dom.props[newAttrKey] = attrValue;\n                            }\n                            if (newAttrKey !== attrKey || newAttrKey === \"if\") {\n                                delete dom.props[attrKey];\n                            }\n                        }\n                        if (/^data\\-/.test(newAttrKey)) {\n                            dataSet[newAttrKey.replace(/^data\\-/, \"\")] = attrValue;\n                        }\n                        var toCodeAttrValue = undefined === attrValue ? \"undefined\" : (null === attrValue ? \"null\" : attrValue.toString());\n                        !/^if$/.test(newAttrKey) && attributes.push(newAttrKey + \"=\" + JSON.stringify(toCodeAttrValue));\n                    }\n                    else {\n                        var eventName = newAttrKey.replace(/^et\\:/i, \"\");\n                        if (typeof attrValue === \"function\") {\n                            dom.events[eventName] = attrValue.bind(component);\n                        }\n                        delete dom.props[attrKey];\n                    }\n                }\n                dom.dataSet = dataSet;\n                // tslint:disable-next-line: curly\n                dom.attrCode = attributes.join(\" \"); // 临时存储innerHTML，读取值以后即可删除\n            }\n        }\n        else {\n            var result = dom.innerHTML;\n            for (var _b = 0, _c = this.plugin; _b < _c.length; _b++) {\n                var plugin = _c[_b];\n                var renderEvent = {\n                    attrKey: null,\n                    break: false,\n                    component: component,\n                    data: optionalData,\n                    target: result\n                };\n                var renderResult = plugin.render(renderEvent);\n                if (renderResult.hasChange) {\n                    hasChange = true;\n                    result = renderResult.result;\n                }\n                if (renderEvent.break) {\n                    break;\n                }\n            }\n            dom.innerHTML = result;\n        }\n        return hasChange;\n    };\n    /**\n     * 旧语法循环渲染列表\n     * @param dom 渲染dom\n     * @param component 渲染组件对象\n     */\n    VirtualRender.prototype.repeatRender = function (dom, component, optionsData) {\n        var repeatFormula = (dom.props[\"em:for\"] || \"\").replace(/^\\s*/, \"\").replace(/\\s$/, \"\");\n        var forReg = /^let\\s{1,}([a-z0-9]{1,})\\s{1,}in\\s{1,}([a-z0-9\\.\\_\\-]{1,})$/i;\n        var forMatch = repeatFormula.match(forReg);\n        var resultDoms = [];\n        if (forMatch) {\n            var itemKey = forMatch[1];\n            var dataKey = forMatch[2].replace(/^this\\./i, \"\");\n            var repeatData = this.getValue(optionsData, dataKey) || this.getValue(component, dataKey);\n            if (repeatData) {\n                var sessionId = this.virtualDom.init(dom);\n                // tslint:disable-next-line: forin\n                for (var forKey in repeatData) {\n                    var newDom = this.virtualDom.clone(sessionId);\n                    var newItemData = JSON.parse(JSON.stringify(repeatData[forKey]));\n                    newDom.props = __assign({}, dom.props);\n                    delete newDom.props[\"em:for\"];\n                    newItemData.key = forKey;\n                    newDom.data = __assign(__assign({}, newDom.data), optionsData);\n                    newDom.data[itemKey] = newItemData;\n                    newDom.data[\"index\"] = forKey;\n                    resultDoms.push(newDom);\n                }\n                this.virtualDom.clear(sessionId);\n            }\n        }\n        return resultDoms;\n    };\n    /**\n     * 支持新列表渲染标签forEach\n     * @param dom forEach子标签只允许有一个\n     * @param component 渲染组件对象\n     * @param optionsData 组件间传递数据\n     */\n    VirtualRender.prototype.forEachRender = function (dom, component, optionsData) {\n        var dataKey = (dom.props[\"data\"] || \"\").replace(/^\\s*\\{\\{/, \"\").replace(/\\}\\}\\s*$/, \"\").replace(/^\\s*/, \"\").replace(/\\s$/, \"\").replace(/^this\\./i, \"\");\n        var resultDoms = [];\n        var itemKey = dom.props[\"item\"];\n        var indexKey = dom.props[\"index\"];\n        var repeatData = this.getValue(optionsData, dataKey) || this.getValue(component, dataKey);\n        if (repeatData) {\n            var childrenLen_1 = 0;\n            var repeateDom_1 = null;\n            dom.children.map(function (checkDom) {\n                if (checkDom.tagName === \"text\" && checkDom.innerHTML.replace(/[\\r\\n\\s]*/g, \"\").length > 0) {\n                    childrenLen_1 += 1;\n                    repeateDom_1 = checkDom;\n                }\n                else {\n                    if (checkDom.tagName !== \"text\") {\n                        childrenLen_1 += 1;\n                        repeateDom_1 = checkDom;\n                    }\n                }\n            });\n            if (childrenLen_1 !== 1) {\n                throw new Error(\"forEach标签下的一级子标签只能有一个标签,并且不能为空.\");\n            }\n            if (this.isEmpty(repeateDom_1.props.key)) {\n                throw new Error(\"forEach标签下的子标签必须要设置key属性\");\n            }\n            var sessionId = this.virtualDom.init(repeateDom_1);\n            // tslint:disable-next-line: forin\n            for (var forKey in repeatData) {\n                var newDom = this.virtualDom.clone(sessionId);\n                var newItemData = JSON.parse(JSON.stringify(repeatData[forKey]));\n                newDom.data = __assign(__assign({}, newDom.data), optionsData);\n                newDom.props = __assign({}, repeateDom_1.props);\n                newDom.props.key = newDom.props.key + forKey;\n                newDom.data[itemKey] = newItemData;\n                newDom.data[indexKey] = forKey;\n                resultDoms.push(newDom);\n            }\n            this.virtualDom.clear(sessionId);\n        }\n        return resultDoms;\n    };\n    VirtualRender.className = \"VirtualRender\";\n    return VirtualRender;\n}(elmer_common_1.Common));\nexports.VirtualRender = VirtualRender;\n//# sourceMappingURL=VirtualRender.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./SyntaxText\"));\n__export(require(\"./ASyntax\"));\n__export(require(\"./SyntaxEvent\"));\n__export(require(\"./SyntaxEM\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ASyntax_1 = require(\"./ASyntax\");\nvar SyntaxText = /** @class */ (function (_super) {\n    __extends(SyntaxText, _super);\n    function SyntaxText() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SyntaxText.prototype.render = function (event) {\n        var _this = this;\n        if (!/^et\\:/i.test(event.attrKey) && !/em\\:/.test(event.attrKey) && this.isString(event.target)) {\n            var reg = /\\{\\{([^\\\\}]{1,})\\}\\}/g;\n            var callbackReg_1 = /\\{\\{\\s*([a-z0-9_.]{1,})\\(([^\\\\}]{1,})\\)\\s*\\}\\}/i;\n            var defaultReg_1 = /^\\{\\{([\\s\\S]*)\\|([\\s\\S]*)\\}\\}$/;\n            var lambdaReg_1 = /\\{\\{([\\s\\S^\\{^\\}]{1,})\\?([\\s\\S^\\{^\\}]{1,})\\:([\\s\\S^\\{^\\}]{1,})\\}\\}/;\n            var logicReg_1 = /\\s(eq|neq|seq|sneq|lt|gt|lteq|gteq|&&|\\|\\||\\+|\\-|\\*|\\/|\\%)\\s/;\n            var cTxt_1 = event.target.replace(/^\\s*/, \"\").replace(/\\s$/, \"\");\n            var keyMatch = cTxt_1.match(reg);\n            var codeText_1 = event.target;\n            var hasChange_1 = false;\n            if (keyMatch) {\n                keyMatch.map(function (tmpValue) {\n                    var isLogicChecking = logicReg_1.test(tmpValue);\n                    // 普通数据绑定\n                    if (/^\\{\\{\\s*[a-z0-9\\.\\_]{1,}\\s*\\}\\}$/i.test(tmpValue) && !isLogicChecking) {\n                        // 普通数据绑定\n                        var bindKey = tmpValue.replace(/^\\{\\{/, \"\").replace(/\\}\\}$/, \"\");\n                        var optionValue = _this.getValue(event.data, bindKey);\n                        var bindValue = undefined === optionValue || null === optionValue ? _this.getValue(event.component, bindKey) : optionValue;\n                        if (!_this.isFunction(bindValue)) {\n                            codeText_1 = cTxt_1 !== tmpValue ? codeText_1.replace(tmpValue, bindValue) : bindValue;\n                        }\n                        else {\n                            codeText_1 = codeText_1.replace(tmpValue, bindValue());\n                        }\n                        hasChange_1 = true;\n                    }\n                    else if (callbackReg_1.test(tmpValue)) { // 方法调用绑定数据\n                        var callbackMatch = tmpValue.match(callbackReg_1);\n                        if (callbackMatch) {\n                            var callbackId = callbackMatch[1].replace(/^this\\./, \"\");\n                            var params = callbackMatch[2];\n                            var varArr = params.split(\",\");\n                            var action = _this.getValue(event.component, callbackId);\n                            var rStr = \"undefined\";\n                            if (typeof action === \"function\") {\n                                if (varArr && varArr.length > 0) {\n                                    var callbackParams_1 = [];\n                                    varArr.map(function (tmpItem) {\n                                        var varKey = tmpItem.replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\n                                        if ((/^\"/.test(varKey) && /\"$/.test(varKey)) || (/^'/.test(varKey) && /'$/.test(varKey))) {\n                                            // 当前参数为字符类型数据\n                                            callbackParams_1.push(varKey);\n                                        }\n                                        else {\n                                            // 当前参数是变量从component读取数据\n                                            var pV = _this.getValue(event.component, varKey);\n                                            callbackParams_1.push(pV);\n                                        }\n                                    });\n                                    rStr = action.apply(event.component, callbackParams_1);\n                                }\n                                else {\n                                    rStr = action.call(event.component);\n                                }\n                            }\n                            codeText_1 = cTxt_1 !== tmpValue ? codeText_1.replace(tmpValue, rStr) : rStr;\n                            hasChange_1 = true;\n                        }\n                    }\n                    else if (defaultReg_1.test(tmpValue) && !isLogicChecking) {\n                        var df = tmpValue.match(defaultReg_1);\n                        var dVData = /^'/.test(df[2]) && /'$/.test(df[2]) ? df[2].replace(/^'/, \"\").replace(/'$/, \"\") : // 单引号标识的字符串\n                            /^\"/.test(df[2]) && /\"$/.test(df[2]) ? df[2].replace(/^\"/, \"\").replace(/\"$/, \"\") : // 双引号标识的字符串\n                                _this.isNumeric(df[2]) ? (df[2].indexOf(\".\") >= 0 ? parseFloat(df[2]) : parseInt(df[2], 10)) : // 数字类型的数据\n                                    /(true|false)/i.test(df[2]) ? /^true$/.test(df[2]) : _this.getValue(event.component, df[2]); // true/false， 类型数据\n                        var dV = _this.getValue(event.component, df[1]) || dVData;\n                        codeText_1 = cTxt_1 !== tmpValue ? codeText_1.replace(tmpValue, dV) : dV;\n                        hasChange_1 = true;\n                    }\n                    else if (lambdaReg_1.test(tmpValue)) { // Lambda表达式绑定\n                        var lbdM = tmpValue.match(lambdaReg_1);\n                        var condition = _this.runLimitScript(lbdM[1], event.component, event.data);\n                        var lamdbValue = void 0;\n                        if (condition) {\n                            lamdbValue = _this.runLimitScript(lbdM[2], event.component, event.data);\n                        }\n                        else {\n                            lamdbValue = _this.runLimitScript(lbdM[3], event.component, event.data);\n                        }\n                        codeText_1 = cTxt_1 !== tmpValue ? codeText_1.replace(tmpValue, lamdbValue) : lamdbValue;\n                        hasChange_1 = true;\n                    }\n                    else if (isLogicChecking) {\n                        var runScript = tmpValue.replace(/^\\{\\{/, \"\").replace(/\\}\\}$/, \"\");\n                        var logicV = _this.runLimitScript(runScript, event.component, event.data);\n                        codeText_1 = cTxt_1 !== tmpValue ? codeText_1.replace(tmpValue, logicV) : logicV;\n                        hasChange_1 = true;\n                    }\n                });\n            }\n            event.break = hasChange_1;\n            return {\n                attrKey: event.attrKey,\n                hasChange: hasChange_1,\n                result: codeText_1\n            };\n        }\n        else {\n            return {\n                attrKey: null,\n                hasChange: false,\n                result: null\n            };\n        }\n    };\n    return SyntaxText;\n}(ASyntax_1.ASyntax));\nexports.SyntaxText = SyntaxText;\n//# sourceMappingURL=SyntaxText.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ASyntax_1 = require(\"./ASyntax\");\nvar SyntaxEvent = /** @class */ (function (_super) {\n    __extends(SyntaxEvent, _super);\n    function SyntaxEvent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SyntaxEvent.prototype.render = function (event) {\n        if (/^et\\:/i.test(event.attrKey)) {\n            var action = this.getValue(event.component, event.target);\n            event.break = true;\n            return {\n                attrKey: event.attrKey.replace(/^et\\:/i, \"\"),\n                hasChange: typeof action === \"function\",\n                isEvent: true,\n                result: action\n            };\n        }\n        else {\n            return {\n                attrKey: null,\n                hasChange: false,\n                result: null\n            };\n        }\n    };\n    return SyntaxEvent;\n}(ASyntax_1.ASyntax));\nexports.SyntaxEvent = SyntaxEvent;\n//# sourceMappingURL=SyntaxEvent.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ASyntax_1 = require(\"./ASyntax\");\nvar SyntaxEM = /** @class */ (function (_super) {\n    __extends(SyntaxEM, _super);\n    function SyntaxEM() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SyntaxEM.prototype.render = function (event) {\n        if (/^em\\:/i.test(event.attrKey)) {\n            var emValue = this.runLimitScript(event.target, event.component, event.data);\n            event.break = true;\n            return {\n                attrKey: event.attrKey.replace(/^em\\:/i, \"\"),\n                hasChange: true,\n                result: emValue\n            };\n        }\n        else {\n            return {\n                attrKey: null,\n                hasChange: false,\n                result: null\n            };\n        }\n    };\n    return SyntaxEM;\n}(ASyntax_1.ASyntax));\nexports.SyntaxEM = SyntaxEM;\n//# sourceMappingURL=SyntaxEM.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elmer_common_1 = require(\"elmer-common\");\nvar VirtualNode = /** @class */ (function (_super) {\n    __extends(VirtualNode, _super);\n    function VirtualNode() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.nodes = {};\n        return _this;\n    }\n    VirtualNode.prototype.init = function (vdom) {\n        var vId = \"virualNode_\" + this.guid();\n        this.nodes[vId] = vdom;\n        return vId;\n    };\n    VirtualNode.prototype.clear = function (sessionId) {\n        delete this.nodes[sessionId];\n    };\n    /**\n     * 创建一个新的虚拟节点\n     * @param tagName 节点名字\n     * @param props 属性【可选参数】\n     * @param children 子节点【可选参数】\n     */\n    VirtualNode.prototype.create = function (tagName, props, children) {\n        var result = {\n            children: children || [],\n            data: {},\n            events: [],\n            path: [],\n            props: props || {},\n            status: \"APPEND\",\n            tagAttrs: {},\n            tagName: tagName\n        };\n        return result;\n    };\n    VirtualNode.prototype.getNode = function (sessionId) {\n        return this.nodes[sessionId];\n    };\n    VirtualNode.prototype.append = function (sessionId, insertChild) {\n        var vdom = this.nodes[sessionId];\n        if (insertChild && vdom.children) {\n            var pIndex = vdom.children.length;\n            insertChild.path = JSON.parse(JSON.stringify(vdom.path));\n            vdom.children.push(insertChild);\n            this.updatePath(insertChild, vdom.path, pIndex);\n        }\n        else if (insertChild && !vdom.children) {\n            vdom.children = [insertChild];\n        }\n    };\n    VirtualNode.prototype.appendAt = function (sessionId, insertChild, index) {\n        var _this = this;\n        var vdom = this.nodes[sessionId];\n        if (insertChild) {\n            if (!this.isArray(insertChild)) {\n                vdom.children.splice(index, 0, insertChild);\n                this.updatePath(insertChild, vdom.path, index);\n            }\n            else {\n                var insertVE = insertChild;\n                insertVE.map(function (tmpItem, myIndex) {\n                    var insertIndex = index + myIndex;\n                    vdom.children.splice(insertIndex, 0, tmpItem);\n                    _this.updatePath(tmpItem, vdom.path, insertIndex);\n                });\n                insertVE = null;\n            }\n        }\n    };\n    VirtualNode.prototype.replaceAt = function (sessionId, replaceChild, index) {\n        var replaceList = !this.isArray(replaceChild) ? [replaceChild] : replaceChild;\n        if (replaceChild && replaceList.length > 0) {\n            var vdom = this.nodes[sessionId];\n            var newChildren_1 = [];\n            vdom.children[index] = null;\n            for (var i = 0; i < vdom.children.length; i++) {\n                if (i === index) {\n                    replaceList.map(function (item) {\n                        newChildren_1.push(item);\n                    });\n                }\n                else {\n                    newChildren_1.push(vdom.children[i]);\n                }\n            }\n            vdom.children = newChildren_1;\n            if (replaceList.length > 1) {\n                for (var i = index; i < vdom.children.length; i++) {\n                    this.updatePath(vdom.children[i], vdom.path, i);\n                }\n            }\n            this.updateInnerHTML(vdom);\n        }\n    };\n    VirtualNode.prototype.remove = function (sessionId, removeChild) {\n        var vdom = this.nodes[sessionId];\n        var rmIndex = vdom.children.indexOf(removeChild);\n        if (rmIndex >= 0 && rmIndex < vdom.children.length) {\n            vdom.children.splice(rmIndex, 1);\n        }\n        if (rmIndex - 1 < vdom.children.length && rmIndex - 1 >= 0) {\n            for (var i = rmIndex - 1; i < vdom.children.length; i++) {\n                this.updatePath(vdom.children[i], vdom.path, i);\n            }\n        }\n    };\n    VirtualNode.prototype.removeAt = function (sessionId, index) {\n        var vdom = this.nodes[sessionId];\n        vdom.children[index] = null;\n        vdom.children.splice(index, 1);\n        // update those dom's path, those dom's position has been changed after this operation\n        if (index - 1 < vdom.children.length && index - 1 >= 0) {\n            for (var i = index - 1; i < vdom.children.length; i++) {\n                this.updatePath(vdom.children[i], vdom.path, i);\n            }\n        }\n        this.updateInnerHTML(vdom);\n    };\n    VirtualNode.prototype.parent = function (sessionId, findDom) {\n        var path = JSON.parse(JSON.stringify(findDom.path));\n        path.splice(path.length - 1, 1);\n        return this.getElementByPath(sessionId, path);\n    };\n    VirtualNode.prototype.getElementByPath = function (sessionId, path) {\n        if (this.isArray(path) && path.length > 0) {\n            var tmpDom = this.nodes[sessionId];\n            var findDom = true;\n            for (var i = 0; i < path.length; i++) {\n                var tmpPoistion = path[i];\n                tmpDom = tmpDom.children[tmpPoistion];\n                if (!tmpDom) {\n                    findDom = false;\n                    break;\n                }\n            }\n            return findDom ? tmpDom : null;\n        }\n    };\n    /**\n    * 获取前一个节点\n    */\n    VirtualNode.prototype.getPrev = function (session, refDom) {\n        if (refDom) {\n            var parent_1 = this.parent(session, refDom);\n            var index = refDom.path[refDom.path.length - 1];\n            if (parent_1 && index - 1 >= 0 && index - 1 < parent_1.children.length) {\n                for (var i = index - 1; i >= 0; i--) {\n                    var tmpChild = parent_1.children[i];\n                    if (tmpChild.status !== \"DELETE\") {\n                        return tmpChild;\n                    }\n                }\n            }\n        }\n        return null;\n    };\n    VirtualNode.prototype.getNext = function (session, refDom) {\n        if (refDom) {\n            var parent_2 = this.parent(session, refDom);\n            var index = refDom.path[refDom.path.length - 1] + 1;\n            if (index >= 0 && index < parent_2.children.length) {\n                return parent_2.children[index];\n            }\n        }\n        return null;\n    };\n    /**\n    * 复制自身节点元素\n    */\n    VirtualNode.prototype.clone = function (sessionId) {\n        var cloneData = this.getNode(sessionId);\n        var cloneProps = cloneData.props;\n        cloneData.props = {};\n        var newItem = JSON.parse(JSON.stringify(cloneData));\n        newItem.innerHTML = cloneData.innerHTML;\n        newItem.path = JSON.parse(JSON.stringify(cloneData.path));\n        newItem.props = cloneProps;\n        newItem.events = cloneData.events;\n        newItem.dom = cloneData.dom;\n        newItem.data = cloneData.data;\n        return newItem;\n    };\n    VirtualNode.prototype.changeStatus = function (vdom, status) {\n        var _this = this;\n        vdom.status = status;\n        if (vdom.children && vdom.children.length > 0) {\n            vdom.children.map(function (subItem) {\n                _this.changeStatus(subItem, status);\n            });\n        }\n    };\n    VirtualNode.prototype.updateInnerHTML = function (vdom) {\n        if (vdom.children && vdom.children.length > 0) {\n            var code_1 = \"\";\n            vdom.children.map(function (vItem) {\n                code_1 += \"<\" + vItem.tagName + \" \" + vItem.attrCode + \">\" + vItem.innerHTML + \"</\" + vItem.tagName + \">\\r\\n\";\n            });\n            vdom.innerHTML = code_1;\n        }\n    };\n    VirtualNode.prototype.updatePath = function (targetElement, parentPath, position) {\n        var _this = this;\n        var newPath = JSON.parse(JSON.stringify(parentPath));\n        newPath.push(position);\n        targetElement.path = newPath;\n        targetElement.children.map(function (tmpItem, index) {\n            _this.updatePath(tmpItem, newPath, index);\n        });\n        newPath = null;\n    };\n    VirtualNode.className = \"VirtualNode\";\n    return VirtualNode;\n}(elmer_common_1.Common));\nexports.VirtualNode = VirtualNode;\n//# sourceMappingURL=VirtualNode.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar StaticFunc_1 = require(\"./StaticFunc\");\n__export(require(\"./ElmerWorker\"));\n__export(require(\"./EnumMessage\"));\nexports.objectToWorkerCodeFn = StaticFunc_1.objectToWorkerCode;\nexports.objectToWorkerDataFn = StaticFunc_1.objectToWorkerData;\nexports.workerDataToObjectFn = StaticFunc_1.workerDataToObject;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elmer_common_1 = require(\"elmer-common\");\nvar ElmerWorkerCore_1 = require(\"./ElmerWorkerCore\");\nvar StaticFunc_1 = require(\"./StaticFunc\");\nvar ElmerWorker = (function (_super) {\n    __extends(ElmerWorker, _super);\n    function ElmerWorker(props) {\n        var _this = _super.call(this) || this;\n        _this.props = props;\n        _this.listener = {};\n        _this.promiseData = {};\n        _this.createWorker();\n        _this.bindEvent();\n        return _this;\n    }\n    ElmerWorker.prototype.callMethod = function (methodName) {\n        var _this = this;\n        var params = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            params[_i - 1] = arguments[_i];\n        }\n        return new Promise(function (resolve, reject) {\n            var id = _this.getRandomID();\n            _this.sendMsg({\n                data: params,\n                id: id,\n                method: methodName,\n                type: \"CallMethod\"\n            });\n            _this.promiseData[id] = {\n                reject: reject,\n                resolve: resolve\n            };\n        });\n    };\n    ElmerWorker.prototype.callObjMethod = function (objKey, methodName) {\n        var _this = this;\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        return new Promise(function (resolve, reject) {\n            var id = _this.getRandomID();\n            _this.sendMsg({\n                data: params,\n                id: id,\n                method: methodName,\n                obj: objKey,\n                type: \"CallObjMethod\"\n            });\n            _this.promiseData[id] = {\n                reject: reject,\n                resolve: resolve\n            };\n        });\n    };\n    ElmerWorker.prototype.addFunc = function (globalName, fn) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var id = _this.getRandomID();\n            _this.sendMsg({\n                data: StaticFunc_1.funcToStr(fn),\n                globalName: globalName,\n                id: id,\n                type: \"InitFunction\"\n            });\n            _this.promiseData[id] = {\n                reject: reject,\n                resolve: resolve\n            };\n        });\n    };\n    ElmerWorker.prototype.addObject = function (globalName, obj) {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var id = _this.getRandomID();\n            _this.sendMsg({\n                data: StaticFunc_1.objectToWorkerData(obj),\n                globalName: globalName,\n                id: id,\n                type: \"InitObject\"\n            });\n            _this.promiseData[id] = {\n                reject: reject,\n                resolve: resolve\n            };\n        });\n    };\n    ElmerWorker.prototype.dispose = function () {\n        this.worker.terminate();\n        this.worker = null;\n    };\n    ElmerWorker.prototype.on = function (eventName, callBack) {\n        this.listener[eventName] = callBack;\n    };\n    ElmerWorker.prototype.getInitPropsCode = function () {\n        var result = \"\";\n        if (this.props) {\n            for (var key in this.props) {\n                var tmpValue = this.props[key];\n                if (this.isObject(tmpValue)) {\n                    result += \"var \" + key + \" = \" + StaticFunc_1.objectToWorkerCode(this.props[key], key) + \"\\r\\n\";\n                }\n                else if (this.isNumeric(tmpValue)) {\n                    result += \"var \" + key + \" = \" + tmpValue + \";\\r\\n\";\n                }\n                else if (this.isFunction(tmpValue)) {\n                    tmpValue = tmpValue.toString();\n                    result += \"var \" + key + \" = \" + tmpValue + \";\\r\\n\";\n                }\n                else if (this.isArray(tmpValue) || this.isString(tmpValue)) {\n                    tmpValue = JSON.stringify(tmpValue);\n                    result += \"var \" + key + \" = \" + tmpValue + \";\\r\\n\";\n                }\n                else if (this.isRegExp(tmpValue)) {\n                    tmpValue = tmpValue.source;\n                    result += \"var \" + key + \" = \" + tmpValue + \";\\r\\n\";\n                }\n                else {\n                    throw new Error(\"不支持的数据类型\");\n                }\n            }\n        }\n        return result;\n    };\n    ElmerWorker.prototype.createWorker = function () {\n        var myBlob = new Blob([this.initBlobCode()]);\n        this.worker = new Worker(window.URL.createObjectURL(myBlob));\n    };\n    ElmerWorker.prototype.bindEvent = function () {\n        this.worker.addEventListener(\"message\", this.message.bind(this));\n        this.worker.addEventListener(\"error\", this.error.bind(this));\n    };\n    ElmerWorker.prototype.error = function (err) {\n        if (typeof this.listener.message === \"function\") {\n            var eventData = {\n                cancel: false,\n                message: err.message,\n                srcEvent: err\n            };\n            this.listener.message(eventData);\n            if (eventData.cancel) {\n                return;\n            }\n        }\n    };\n    ElmerWorker.prototype.message = function (event) {\n        var data = event.data;\n        var id = data.id;\n        if (typeof this.listener.message === \"function\") {\n            var eventData = {\n                cancel: false,\n                data: event.data,\n                srcEvent: event\n            };\n            this.listener.message(eventData);\n            if (eventData.cancel) {\n                return;\n            }\n        }\n        if (data.type === \"CallMethod\" || data.type === \"CallObjMethod\") {\n            if (this.promiseData[id]) {\n                var methodResponse = data;\n                if (methodResponse.statusCode === 200) {\n                    this.promiseData[id].resolve(methodResponse);\n                }\n                else {\n                    this.promiseData[id].reject(methodResponse);\n                }\n                delete this.promiseData[id];\n            }\n            else {\n                typeof this.listener.callMethodResponse === \"function\" && this.listener.callMethodResponse({\n                    cancel: false,\n                    data: data,\n                    srcEvent: event\n                });\n            }\n        }\n        else if (data.type === \"InitObject\" || data.type === \"InitFunction\") {\n            if (this.promiseData[id]) {\n                var initResponse = data;\n                if (initResponse.statusCode === 200) {\n                    this.promiseData[id].resolve(initResponse);\n                }\n                else {\n                    this.promiseData[id].reject(initResponse);\n                }\n                delete this.promiseData[id];\n            }\n            else {\n                typeof this.listener.initResponse === \"function\" && this.listener.initResponse({\n                    cancel: false,\n                    data: data,\n                    srcEvent: event\n                });\n            }\n        }\n    };\n    ElmerWorker.prototype.sendMsg = function (msg) {\n        this.worker.postMessage(msg);\n    };\n    ElmerWorker.prototype.initBlobCode = function () {\n        var strToFuncCode = StaticFunc_1.strToFunc.toString();\n        var coreCode = StaticFunc_1.objectToWorkerCode(new ElmerWorkerCore_1.ElmerWorkerCore(), \"ElmerWorkerCore\");\n        var staticCode = StaticFunc_1.classToWorkerCode(elmer_common_1.StaticCommon);\n        var code = [];\n        code.push(\"var strToFunc = \" + strToFuncCode);\n        code.push(\"var __spreadArrays = \" + StaticFunc_1.funcToStr(StaticFunc_1.__spreadArrays));\n        code.push(\"var workerDataToObject = \" + StaticFunc_1.funcToStr(StaticFunc_1.workerDataToObject));\n        code.push(\"var utils = \" + staticCode);\n        code.push(\"var elmer = \" + coreCode);\n        code.push(this.getInitPropsCode());\n        code.push(\"onmessage = \" + StaticFunc_1.funcToStr(StaticFunc_1.onmessage));\n        return code.join(\"\\r\\n\");\n    };\n    return ElmerWorker;\n}(elmer_common_1.Common));\nexports.ElmerWorker = ElmerWorker;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ElmerWorkerCore = (function () {\n    function ElmerWorkerCore() {\n    }\n    ElmerWorkerCore.prototype.sendMsg = function (msg) {\n        self[\"postMessage\"](msg);\n    };\n    return ElmerWorkerCore;\n}());\nexports.ElmerWorkerCore = ElmerWorkerCore;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = {};\n","import { Canvas, MathAnimationApi, StaticCommon } from \"elmer-common\";\nimport AnimationMethod,{ isCssEmpty, TypeAnimationContext, TypeAnimationProperty, TypeAnimationPropertyData } from \"./ElmerAnimationProperty\";\n\nexport type TypeElmerAnimationType = \"Linear\" | \"QuadEaseIn\" | \"QuadEaseOut\" | \"QuadEaseInOut\" |\n    \"CubicEaseIn\"     | \"CubicEaseOut\"     | \"CubicEaseInOut\"     |\n    \"QuartEaseIn\"     | \"QuartEaseOut\"     | \"QuartEaseInOut\"     |\n    \"QuintEaseIn\"     | \"QuintEaseOut\"     | \"QuintEaseInOut\"     |\n    \"SineEaseIn\"      | \"SineEaseOut\"      | \"SineEaseInOut\"      |\n    \"ExpoEaseIn\"      | \"ExpoEaseOut\"      | \"ExpoEaseInOut\"      |\n    \"CircleEaseIn\"    | \"CircleEaseOut\"    | \"CircleEaseInOut\"    |\n    \"ElasticEaseIn\"   | \"ElasticEaseOut\"   | \"ElasticEaseInOut\"   |\n    \"BackEaseIn\"      | \"BackEaseOut\"      | \"BackEaseInOut\"      |\n    \"BounceEaseIn\"    | \"BounceEaseOut\"    | \"BounceEaseInOut\"    ;\n\nexport type TypeAnimationChangeEvent = {\n    dom: HTMLElement;\n    value: any;\n    data: TypeAnimationPropertyData\n};\n\nexport type TypeAnimationEndEvent = {\n    from: TypeAnimationPropertyData;\n    to: TypeAnimationPropertyData;\n    default: TypeAnimationPropertyData;\n};\n\nexport type TypeElmerAnimationKeyframe = {\n    duration: number;\n    beginTime?: number;\n    optionA?: number;\n    optionP?: number;\n    optionS?: number;\n    type: TypeElmerAnimationType;\n    from?: TypeAnimationProperty;\n    to:TypeAnimationProperty;\n    dom:HTMLElement;\n    onStart?():void;\n    onChange?(event:TypeAnimationChangeEvent): void;\n    onFinish?(data?:TypeAnimationEndEvent):void;\n};\n\nexport type TypeElmerAnimationContext = {\n    duration: number;\n    dom: HTMLElement;\n    beginTime?: number;\n    optionA?: number;\n    optionP?: number;\n    optionS?: number;\n    type: TypeElmerAnimationType;\n    defaultData: TypeAnimationPropertyData;\n    fromData: TypeAnimationPropertyData;\n    toData: TypeAnimationPropertyData;\n    isBegin?: boolean;\n    onBegin?(data?:any):void;\n    onEnd?(data?:TypeAnimationEndEvent):void;\n    onChange?(event?:TypeAnimationChangeEvent): void;\n};\n\nexport type TypeMathApiParams = {\n    duration: number;\n    currentTime: number;\n    beginValue: number;\n    changeValue: number;\n    optionA?: number;\n    optionP?: number;\n    optionS?: number;\n};\n\nexport type TypeElmerAnimationOptions = {\n    data: TypeElmerAnimationKeyframe[];\n    duration: number;\n    beginTime?: number;\n    onChange?(event:TypeAnimationChangeEvent): void;\n    onBegin?():void;\n    onEnd?(data?:TypeAnimationEndEvent):void;\n};\n\nexport class ElmerAnimation {\n    private cavAnimation:Canvas;\n    private handler: number;\n    private beginTime: number;\n    private timeAnimationCallBack:Function;\n    private animationData: TypeElmerAnimationContext[] = [];\n    constructor(private options: TypeElmerAnimationOptions) {\n        this.cavAnimation = new Canvas();\n        this.calcFrameAttribute();\n        this.start();\n    }\n    start(): void {\n        if(this.options) {\n            typeof this.options.onBegin === \"function\" && this.options.onBegin();\n            this.beginTime = (new Date()).getTime();\n            this.handler = this.cavAnimation.startAnimation(this.animationCallBack, this);\n        }\n    }\n    stop(): void {\n        this.cavAnimation.stopAnimation(this.handler);\n        this.options && typeof this.options.onEnd === \"function\" && this.options.onEnd();\n        this.dispose();\n    }\n    private calcFrameAttribute(): void {\n        const data:TypeElmerAnimationKeyframe[] = this.options.data || [];\n        const animationData: TypeElmerAnimationContext[] = [];\n        data.map((item:TypeElmerAnimationKeyframe) => {\n            animationData.push({\n                beginTime: item.beginTime,\n                defaultData: AnimationMethod.readWillChangeCssDefaultData(item.dom, item.from, item.to),\n                dom: item.dom,\n                duration: item.duration,\n                fromData: AnimationMethod.converOption(item.from),\n                onBegin: item.onStart,\n                onEnd: item.onFinish,\n                optionA: item.optionA,\n                optionP: item.optionP,\n                optionS: item.optionS,\n                toData: AnimationMethod.converOption(item.to),\n                type: item.type,\n            });\n        });\n        this.animationData = animationData;\n    }\n    private dispose(): void {\n        if(this.animationData && this.animationData.length > 0) {\n            this.animationData.map((tmpItem:TypeElmerAnimationContext): void => {\n                typeof tmpItem.onEnd === \"function\" && tmpItem.onEnd({\n                    default: tmpItem.defaultData,\n                    from: tmpItem.fromData,\n                    to: tmpItem.toData,\n                });\n            });\n        }\n        this.animationData = null;\n        this.cavAnimation = null;\n        this.options = null;\n        this.timeAnimationCallBack = null;\n        delete this.animationData;\n        delete this.cavAnimation;\n        delete this.options;\n        delete this.timeAnimationCallBack;\n    }\n    private getTimeAnimationCallBack(animationType:TypeElmerAnimationType): Function {\n        let resultCallBack = null;\n        switch(animationType) {\n            case \"Linear\":\n                resultCallBack = MathAnimationApi.Linear;\n                break;\n            case \"BackEaseIn\":\n                resultCallBack = MathAnimationApi.Back.easeIn;\n                break;\n            case \"BackEaseInOut\":\n                resultCallBack = MathAnimationApi.Back.easeInOut;\n                break;\n            case \"BackEaseOut\":\n                resultCallBack = MathAnimationApi.Back.easeOut;\n                break;\n            case \"BounceEaseIn\":\n                resultCallBack = MathAnimationApi.Bounce.easeIn;\n                break;\n            case \"BounceEaseInOut\":\n                resultCallBack = MathAnimationApi.Bounce.easeInOut;\n                break;\n            case \"BounceEaseOut\":\n                resultCallBack = MathAnimationApi.Bounce.easeOut;\n                break;\n            case \"CircleEaseIn\":\n                resultCallBack = MathAnimationApi.Circle.easeIn;\n                break;\n            case \"CircleEaseInOut\":\n                resultCallBack = MathAnimationApi.Circle.easeInOut;\n                break;\n            case \"CircleEaseOut\":\n                resultCallBack = MathAnimationApi.Circle.easeOut;\n                break;\n            case \"CubicEaseIn\":\n                resultCallBack = MathAnimationApi.Cubic.easeIn;\n                break;\n            case \"CubicEaseInOut\":\n                resultCallBack = MathAnimationApi.Cubic.easeInOut;\n                break;\n            case \"CubicEaseOut\":\n                resultCallBack = MathAnimationApi.Cubic.easeOut;\n                break;\n            case \"ElasticEaseIn\":\n                resultCallBack = MathAnimationApi.Elastic.easeIn;\n                break;\n            case \"ElasticEaseInOut\":\n                resultCallBack = MathAnimationApi.Elastic.easeInOut;\n                break;\n            case \"ElasticEaseOut\":\n                resultCallBack = MathAnimationApi.Elastic.easeOut;\n                break;\n            case \"ExpoEaseIn\":\n                resultCallBack = MathAnimationApi.Expo.easeIn;\n                break;\n            case \"ExpoEaseInOut\":\n                resultCallBack = MathAnimationApi.Expo.easeInOut;\n                break;\n            case \"ExpoEaseOut\":\n                resultCallBack = MathAnimationApi.Expo.easeOut;\n                break;\n            case \"QuadEaseIn\":\n                resultCallBack = MathAnimationApi.Quad.easeIn;\n                break;\n            case \"QuadEaseInOut\":\n                resultCallBack = MathAnimationApi.Quad.easeInOut;\n                break;\n            case \"QuadEaseOut\":\n                resultCallBack = MathAnimationApi.Quad.easeOut;\n                break;\n            case \"QuartEaseIn\":\n                resultCallBack = MathAnimationApi.Quart.easeIn;\n                break;\n            case \"QuartEaseInOut\":\n                resultCallBack = MathAnimationApi.Quart.easeInOut;\n                break;\n            case \"QuartEaseOut\":\n                resultCallBack = MathAnimationApi.Quart.easeOut;\n                break;\n            case \"QuintEaseIn\":\n                resultCallBack = MathAnimationApi.Quint.easeIn;\n                break;\n            case \"QuintEaseInOut\":\n                resultCallBack = MathAnimationApi.Quint.easeInOut;\n                break;\n            case \"QuintEaseOut\":\n                resultCallBack = MathAnimationApi.Quint.easeOut;\n                break;\n            case \"SineEaseIn\":\n                resultCallBack = MathAnimationApi.Sine.easeIn;\n                break;\n            case \"SineEaseInOut\":\n                resultCallBack = MathAnimationApi.Sine.easeInOut;\n                break;\n            case \"SineEaseOut\":\n                resultCallBack = MathAnimationApi.Sine.easeOut;\n                break;\n        }\n        return resultCallBack;\n    }\n    private animationCallBack(): void {\n        let curTime = (new Date()).getTime();\n        let offset = curTime - this.beginTime;\n        if(!this.options) {\n            this.stop();\n        } else {\n            if(offset > this.options.duration) {\n                this.stop();\n            } else {\n                this.animationData.map((itemData:TypeElmerAnimationContext, keyIndex: number) => {\n                    const itemBeginTime = itemData.beginTime || 0;\n                    if(itemBeginTime <= offset && offset <= itemBeginTime + itemData.duration) {\n                        if(!itemData.isBegin) {\n                            itemData.isBegin = true;\n                            typeof itemData.onBegin === \"function\" && itemData.onBegin(itemData);\n                        }\n                        const updateCssProperty = this.calcUpdateProperty(offset, itemData);\n                        typeof this.options.onChange === \"function\" && this.options.onChange({\n                            data: updateCssProperty,\n                            dom: itemData.dom,\n                            value: AnimationMethod.converAnimationProperty(updateCssProperty)\n                        });\n                    } else {\n                        if(offset > itemBeginTime + itemData.duration) {\n                            typeof itemData.onEnd === \"function\" && itemData.onEnd({\n                                default: itemData.defaultData,\n                                from: itemData.fromData,\n                                to: itemData.toData,\n                            });\n                            delete this.animationData[keyIndex];\n                        }\n                    }\n                });\n            }\n        }\n        curTime = null;\n        offset = null;\n    }\n    private calcUpdateProperty(time:number, data: TypeElmerAnimationContext): any {\n        let timeAnimationCallBack = this.getTimeAnimationCallBack(data.type);\n        const updateProperty = {};\n        if(typeof timeAnimationCallBack === \"function\") {\n            Object.keys(data.toData).map((cssKey:string) => {\n                const defaultValue: TypeAnimationContext = data.defaultData[cssKey];\n                const beginValue: TypeAnimationContext = data.fromData[cssKey] || defaultValue;\n                const toValue:TypeAnimationContext = data.toData[cssKey];\n                const toValueData: any[] = [];\n                const beginValueData: any[] = [];\n                const updateValue: any = {};\n                toValueData.push(toValue.value1);\n                toValueData.push(toValue.value2);\n                toValueData.push(toValue.value3);\n                toValueData.push(toValue.value4);\n                beginValueData.push(beginValue.value1);\n                beginValueData.push(beginValue.value2);\n                beginValueData.push(beginValue.value3);\n                beginValueData.push(beginValue.value4);\n                toValueData.map((tmpValue: number|number[], index:number): void => {\n                    const dataIndex = index + 1;\n                    const dataKey = `value${dataIndex}`;\n                    if(!isCssEmpty(tmpValue)) {\n                        let beginValueNum = 0;\n                        if(StaticCommon.isArray(tmpValue)) {\n                            const tmpSplitValues = [];\n                            tmpValue.map((tmpSplitData: number, subIndex:number): void => {\n                                beginValueNum = beginValueData[index][subIndex] || 0;\n                                tmpSplitValues.push(this.calcTimeAnimationResult(time, data.type, timeAnimationCallBack, {\n                                    beginValue: beginValueNum,\n                                    changeValue: tmpSplitData-beginValueNum,\n                                    currentTime: time,\n                                    duration: data.duration,\n                                    optionA: data.optionA,\n                                    optionP: data.optionP,\n                                    optionS: data.optionS\n                                }));\n                            });\n                            updateValue[dataKey] = tmpSplitValues;\n                        } else {\n                            beginValueNum = beginValueData[index] || 0;\n                            updateValue[dataKey] = this.calcTimeAnimationResult(time, data.type, timeAnimationCallBack, {\n                                beginValue: beginValueNum,\n                                changeValue: tmpValue - beginValueNum,\n                                currentTime: time,\n                                duration: data.duration,\n                                optionA: data.optionA,\n                                optionP: data.optionP,\n                                optionS: data.optionS\n                            });\n                        }\n                        updateValue[`value${dataIndex}Unit`] = toValue[`value${dataIndex}Unit`];\n                    }\n                });\n                updateProperty[cssKey] = updateValue;\n            });\n        }\n        timeAnimationCallBack = null;\n        return updateProperty;\n    }\n    private calcTimeAnimationResult(time:number,type:TypeElmerAnimationType,timeAnimationCallBack:Function, options:TypeMathApiParams): number {\n        let result = 0;\n        if(typeof options.beginValue === \"number\" &&  typeof options.changeValue === \"number\" && typeof options.duration === \"number\") {\n            if ([\"ElasticEaseIn\", \"ElasticEaseInOut\", \"ElasticEaseOut\", \"BackEaseIn\", \"BackEaseInOut\", \"BackEaseOut\"].indexOf(type) < 0) {\n                result = timeAnimationCallBack(time, options.beginValue, options.changeValue, options.duration);\n            } else {\n                if ([\"ElasticEaseIn\", \"ElasticEaseInOut\", \"ElasticEaseOut\"].indexOf(type) >= 0) {\n                    result = timeAnimationCallBack(time, options.beginValue, options.changeValue, options.duration, options.optionA, options.optionP);\n                } else if ([\"BackEaseIn\", \"BackEaseInOut\", \"BackEaseOut\"].indexOf(type) >= 0) {\n                    result = timeAnimationCallBack(time, options.beginValue, options.changeValue, options.duration, options.optionS);\n                }\n            }\n        } else {\n            result = undefined;\n        }\n        return result;\n    }\n}\n","// tslint:disable: object-literal-sort-keys\nexport default {\n    maroon: \"#800000\",\n    darkred: \"#8B0000\",\n    brown: \"#A52A2A\",\n    firebrick: \"#B22222\",\n    crimson: \"#DC143C\",\n    red: \"#FF0000\",\n    mediumvioletred: \"#C71585\",\n    palevioletred: \"#D87093\",\n    deeppink: \"#FF1493\",\n    fuchsia:\"#FF00FF\",\n    magenta: \"#FF00FF\",\n    hotpink: \"#FF69B4\",\n    pink: \"#FFC0CB\",\n    lightpink: \"#FFB6C1\",\n    mistyrose: \"#FFE4E1\",\n    lavenderblush: \"#FFF0F5\",\n    indigo: \"#4B0082\",\n    purple: \"#800080\",\n    darkmagenta: \"#8B008B\",\n    darkorchid: \"#9932CC\",\n    blueviolet: \"#8A2BE2\",\n    darkviolet: \"#9400D3\",\n    slateblue: \"#6A5ACD\",\n    mediumpurple: \"#9370DB\",\n    mediumslateblue: \"#7B68EE\",\n    mediumorchid: \"#BA55D3\",\n    violet: \"#EE82EE\",\n    plum: \"#DDA0DD\",\n    thistle: \"#D8BFD8\",\n    lavender: \"#E6E6FA\",\n    saddlebrown: \"#8B4513\",\n    sienna: \"#A0522D\",\n    chocolate: \"#D2691E\",\n    indianred: \"#CD5C5C\",\n    rosybrown: \"#BC8F8F\",\n    lightcorol: \"#F08080\",\n    salmon: \"#FA8072\",\n    lightsalmon: \"#FFA07A\",\n    orangered: \"#FF4500\",\n    tomato: \"#FF6347\",\n    coral: \"#FF7F50\",\n    darkorange: \"#FF8C00\",\n    sandybrown: \"#F4A460\",\n    peru: \"#CD853F\",\n    tan: \"#D2B48C\",\n    burlywood: \"#DEB887\",\n    wheat: \"#F5DEB3\",\n    moccasin: \"#FFE4B5\",\n    navajowhite: \"#FFDEAD\",\n    peachpuff: \"#FFDAB9\",\n    bisque: \"#FFE4C4\",\n    antuquewhite: \"#FAEBD7\",\n    papayawhip: \"#FFEFD5\",\n    cornsilk: \"#FFF8DC\",\n    oldlace: \"#FDF5E6\",\n    linen: \"#FAF0E6\",\n    seashell: \"#FFF5EE\",\n    snow: \"#FFFAFA\",\n    floralwhite: \"#FFFAF0\",\n    ivory: \"#FFFFF0\",\n    mintcream: \"#F5FFFA\",\n    darkgoldenrod: \"#B8860B\",\n    goldenrod: \"#DAA520\",\n    gold: \"#FFD700\",\n    yellow: \"#FFFF00\",\n    darkkhaki: \"#BDB76B\",\n    khaki: \"#F0E68C\",\n    palegoldenrod: \"#EEE8AA\",\n    beige: \"#F5F5DC\",\n    lemonchiffon: \"#FFFACD\",\n    lightgoldenrodyellow: \"#FAFAD2\",\n    lightyellow: \"#FFFFE0\",\n    darkslategray: \"#2F4F4F\",\n    darkolivegreen: \"#556B2F\",\n    olive: \"#808000\",\n    darkgreen: \"#006400\",\n    forestgreen: \"#228B22\",\n    seagreen: \"#2E8B57\",\n    green: \"#008080\",\n    teal: \"#008080\",\n    lightseagreen: \"#20B2AA\",\n    madiumaquamarine: \"#66CDAA\",\n    mediumseagreen: \"#3CB371\",\n    darkseagreen: \"#8FBC8F\",\n    yellowgreen: \"#9ACD32\",\n    limegreen: \"#32CD32\",\n    lime: \"#00FF00\",\n    chartreuse: \"#7FFF00\",\n    lawngreen: \"#7CFC00\",\n    greenyellow: \"#ADFF2F\",\n    mediumspringgreen: \"#00FA9A\",\n    springgreen: \"#00FF7F\",\n    lightgreen: \"#90EE90\",\n    palegreen: \"#98F898\",\n    aquamarine: \"#7FFFD4\",\n    honeydew: \"#F0FFF0\",\n    midnightblue: \"#191970\",\n    navy: \"#000080\",\n    darkblue: \"#00008B\",\n    darkslateblue: \"#483D8B\",\n    mediumblue: \"#0000CD\",\n    royalblue: \"#4169E1\",\n    dodgerblue: \"#1E90FF\",\n    cornflowerblue: \"#6495ED\",\n    deepskyblue: \"#00BFFF\",\n    lightskyblue: \"#87CEFA\",\n    lightsteelblue: \"#B0C4DE\",\n    lightblue: \"#ADD8E6\",\n    steelblue: \"#4682B4\",\n    darkcyan: \"#008B8B\",\n    cadetblue: \"#5F9EA0\",\n    darkturquoise: \"#00CED1\",\n    mediumturquoise: \"#48D1CC\",\n    turquoise: \"#40E0D0\",\n    skyblue: \"#87CECB\",\n    powderblue: \"#B0E0E6\",\n    paleturquoise: \"#AFEEEE\",\n    lightcyan: \"#E0FFFF\",\n    azure: \"#F0FFFF\",\n    aliceblue: \"#F0F8FF\",\n    cyan: \"#00FFFF\",\n    aqua: \"#00FFFF\",\n    black: \"#000000\",\n    dimgray: \"#696969\",\n    gray: \"#808080\",\n    slategray: \"#708090\",\n    lightslategray: \"#778899\",\n    dakgray: \"#A9A9A9\",\n    silver: \"#C0C0C0\",\n    lightgray: \"#D3D3D3\",\n    gainsboro: \"#DCDCDC\",\n    whitesmoke: \"#F5F5F5\",\n    ghostwhite: \"#F8F8FF\",\n    white: \"#FFFFFF\",\n};\n// tslint:endable: object-literal-sort-keys\n","export const EventNames = [\r\n    \"abort\",\r\n    \"activate\",\r\n    \"beforeactivate\",\r\n    \"beforecopy\",\r\n    \"beforecut\",\r\n    \"beforedeactivate\",\r\n    \"beforepaste\",\r\n    \"blur\",\r\n    \"canplay\",\r\n    \"canplaythrough\",\r\n    \"change\",\r\n    \"click\",\r\n    \"contextmenu\",\r\n    \"copy\",\r\n    \"cuechange\",\r\n    \"cut\",\r\n    \"dblclick\",\r\n    \"deactivate\",\r\n    \"drag\",\r\n    \"dragend\",\r\n    \"dragenter\",\r\n    \"dragleave\",\r\n    \"dragover\",\r\n    \"dragstart\",\r\n    \"drop\",\r\n    \"durationchange\",\r\n    \"emptied\",\r\n    \"ended\",\r\n    \"error\",\r\n    \"focus\",\r\n    \"input\",\r\n    \"invalid\",\r\n    \"keydown\",\r\n    \"keypress\",\r\n    \"keyup\",\r\n    \"load\",\r\n    \"loadeddata\",\r\n    \"loadedmetadata\",\r\n    \"loadstart\",\r\n    \"mousedown\",\r\n    \"mouseenter\",\r\n    \"mouseleave\",\r\n    \"mousemove\",\r\n    \"mouseout\",\r\n    \"mouseover\",\r\n    \"mouseup\",\r\n    \"mousewheel\",\r\n    \"MSContentZoom\",\r\n    \"MSManipulationStateChanged\",\r\n    \"paste\",\r\n    \"pause\",\r\n    \"play\",\r\n    \"playing\",\r\n    \"progress\",\r\n    \"ratechange\",\r\n    \"reset\",\r\n    \"scroll\",\r\n    \"seeked\",\r\n    \"seeking\",\r\n    \"select\",\r\n    \"selectstart\",\r\n    \"stalled\",\r\n    \"submit\",\r\n    \"suspend\",\r\n    \"timeupdate\",\r\n    \"volumechange\",\r\n    \"waiting\",\r\n    \"ariarequest\",\r\n    \"command\",\r\n    \"gotpointercapture\",\r\n    \"lostpointercapture\",\r\n    \"MSGestureChange\",\r\n    \"MSGestureDoubleTap\",\r\n    \"MSGestureEnd\",\r\n    \"MSGestureHold\",\r\n    \"MSGestureStart\",\r\n    \"MSGestureTap\",\r\n    \"MSGotPointerCapture\",\r\n    \"MSInertiaStart\",\r\n    \"MSLostPointerCapture\",\r\n    \"MSPointerCancel\",\r\n    \"MSPointerDown\",\r\n    \"MSPointerEnter\",\r\n    \"MSPointerLeave\",\r\n    \"MSPointerMove\",\r\n    \"MSPointerOut\",\r\n    \"MSPointerOver\",\r\n    \"MSPointerUp\",\r\n    \"touchcancel\",\r\n    \"touchend\",\r\n    \"touchmove\",\r\n    \"touchstart\",\r\n    \"webkitfullscreenchange\",\r\n    \"webkitfullscreenerror\",\r\n    \"pointercancel\",\r\n    \"pointerdown\",\r\n    \"pointerenter\",\r\n    \"pointerleave\",\r\n    \"pointermove\",\r\n    \"pointerout\",\r\n    \"pointerover\",\r\n    \"pointerup\",\r\n    \"wheel\",\r\n    \"animationend\",\r\n    \"animationEnd\",\r\n    \"webkitAnimationEnd\",\r\n    \"mozAnimationEnd\",\r\n    \"msAnimationEnd\",\r\n    \"oAnimationEnd\",\r\n    \"transitionend\",\r\n    \"transitionEnd\",\r\n    \"webkitTransitionEnd\",\r\n    \"mozTransitionEnd\",\r\n    \"msTransitionEnd\",\r\n    \"oTransitionEnd\"\r\n];\r\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import { Common } from \"elmer-common\";\r\nimport { injectable } from \"../inject/injectable\";\r\n\r\n@injectable(\"ElmerDomEvent\")\r\nexport class ElmerDomEvent extends Common implements EventListenerObject {\r\n    eventDom: any;\r\n    callBack:Function;\r\n    constructor() {\r\n        super();\r\n    }\r\n    setConfig(dom: HTMLElement, eventHandle: Function): void {\r\n        this.eventDom = dom;\r\n        this.callBack = eventHandle;\r\n    }\r\n    handleEvent():void {\r\n        if(this.isFunction(this.callBack)) {\r\n            const args:any[] = [].slice.call(arguments);\r\n            args.push(this.eventDom);\r\n            this.callBack.apply(this.eventDom, args);\r\n        }\r\n    }\r\n}\r\n","import { Common } from \"elmer-common\";\r\n\r\nexport interface IElmerDomSelector {\r\n    child?: IElmerDomSelector;\r\n    value?: string;\r\n    type?: string;\r\n    mode?: string;\r\n}\r\n\r\nexport class ElmerDomQuery extends Common {\r\n    public getSelectors(selector: string): IElmerDomSelector[] {\r\n        const regs:IElmerDomSelector[] = [];\r\n        if(!this.isEmpty(selector)) {\r\n            const rgs:string[] = selector.split(\",\");\r\n            rgs.map((tmpRegStr: string) => {\r\n                regs.push(this.getSelector(tmpRegStr));\r\n            });\r\n        }\r\n        return regs;\r\n    }\r\n    private getSelector(querySelector: string): any {\r\n        const result: any = {};\r\n        const queryStr = querySelector.replace(/^\\s*/, \"\").replace(/\\s*$/,\"\");\r\n        const prefReg = /^(\\>|\\+)([a-z0-9\\-_\\.#\\[\\]\\s=\\>\\+\\:]*)$/i;\r\n        const prefMatch = queryStr.match(prefReg);\r\n        let leftCode = \"\";\r\n        let nodeQueryStr: string = queryStr;\r\n        let nodeMode = \"\";\r\n        if(prefMatch) {\r\n            // 特殊mode\r\n            nodeQueryStr = prefMatch[2];\r\n            nodeMode = prefMatch[1];\r\n        }\r\n        const queryNodeResult = this.getSelectorNode(nodeQueryStr);\r\n        if(queryNodeResult) {\r\n            result.mode = nodeMode;\r\n            result.type = queryNodeResult.type;\r\n            result.value= queryNodeResult.value;\r\n            leftCode = queryNodeResult.leftCode || \"\";\r\n        }\r\n        leftCode = leftCode.replace(/^\\s*/,\"\").replace(/\\s*$/,\"\");\r\n        if(!this.isEmpty(leftCode) && leftCode.length>0) {\r\n            result.child = this.getSelector(leftCode);\r\n        }\r\n        return result;\r\n    }\r\n    private getSelectorNode(queryStr:string): any {\r\n        const prefReg = /^([\\.#])([a-z0-9][a-z0-9\\-_\\.#\\[\\]\\s=\\>\\+\\:]*)$/i;\r\n        const prefMatch = queryStr.match(prefReg);\r\n        const result: any = {};\r\n        const nodeReg = /^([a-z0-9][a-z0-9\\-_\\[\\]=\\.\\:]*)([\\s\\>\\+])/i;\r\n        const nodeEndReg = /^([a-z0-9][a-z0-9\\-_\\[\\]=\\.\\:]*)\\s*$/i;\r\n        let nodeValueStr = queryStr;\r\n        let pref = \"\";\r\n        if(prefMatch) {\r\n            pref = prefMatch[1];\r\n            nodeValueStr = prefMatch[2];\r\n        }\r\n        const nodeMatch = nodeValueStr.match(nodeReg);\r\n        result.type = pref;\r\n        if(nodeMatch) {\r\n            result.value = nodeMatch[1];\r\n            result.leftCode = nodeValueStr.replace(nodeReg, \"$2\");\r\n        } else {\r\n            const endNodeMatch = nodeValueStr.match(nodeEndReg);\r\n            if(endNodeMatch) {\r\n                result.value = endNodeMatch[0];\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n}\r\n","import { queueCallFunc, StaticCommon as utils, TypeQueueCallParam } from \"elmer-common\";\nimport { ElmerWorker } from \"elmer-worker\";\n\ntype TypeEventIdMapping = {\n    eventId: string;\n    path: number[];\n};\ntype TypeEventData = {\n    eventPathId: string[];\n    handler: Function;\n    listeners: any;\n    paths: TypeEventIdMapping[];\n};\n\ntype TypeSubscribeEvent = {\n    callback: Function;\n    eventName: string;\n    vNodePath: string;\n    path: number[];\n};\ntype TypeEventMapData = {\n    events: any;\n    nodes: any;\n    parent: string;\n    path: number[];\n};\n\nexport class ElmerEvent {\n    private eventListeners: any = {};\n    private worker: ElmerWorker;\n    private sortReady: boolean;\n    private nodeMap: any = {};\n    constructor(worker: ElmerWorker) {\n        this.worker = worker;\n    }\n    /**\n     * mount node to the event object\n     * @param path node path\n     */\n    nodeRegister(nodePath:string, path: number[]): void {\n        const pathReg = /\\.([a-z0-9\\-\\_]{1,})$/i;\n        const pMatch = nodePath.match(pathReg);\n        const parentPath = pMatch ? nodePath.replace(pathReg, \"\") : null;\n        const currentPath = pMatch ? pMatch[1] : nodePath;\n        if(!utils.isEmpty(parentPath)) {\n            const parentPathKey = parentPath.replace(/\\./g, \".nodes.\");\n            const pNode:any = utils.getValue(this.nodeMap, parentPathKey);\n            pNode.nodes[currentPath] = {\n                events: {},\n                nodes: {},\n                parent: \"\",\n                path\n            };\n        } else {\n            this.nodeMap[currentPath] = {\n                events: {},\n                nodes: {},\n                parent: \"\",\n                path\n            };\n        }\n    }\n    /**\n     * 渲染之前调用此方法清除旧的事件监听，渲染的时候将新事件监听重新绑定\n     * 删除节点的时候通过回调从最底层节点开始删除\n     * @param path nodePath\n     * @param deleteNodeMap 是否删除虚拟节点\n     */\n    nodeUnRegister(path: string, deleteNodeMap?: boolean): void {\n        const eventNodePath = path.replace(/\\./g, \".nodes.\");\n        const parentNode = eventNodePath.replace(/\\.[a-z0-9\\-\\_]{1,}$/i,\"\");\n        const nodePath = eventNodePath.match(/\\.([a-z0-9\\-\\_]{1,})$/i);\n        const nodeObj:TypeEventMapData = utils.getValue(this.nodeMap, parentNode);\n        if(nodeObj) {\n            if(nodeObj.events) {\n                Object.keys(nodeObj.events).map((evtName) => {\n                    const handleData = this.eventListeners[evtName];\n                    const eventData:TypeEventData = nodeObj.events[evtName];\n                    if(handleData && eventData.paths) {\n                        const events = handleData.events;\n                        for(const evtData of eventData.paths) {\n                            delete events[evtData.eventId];\n                        }\n                        if(Object.keys(events).length <= 0) {\n                            this.removeEventListen(evtName, handleData.handler);\n                        }\n                        eventData.listeners = {};\n                        eventData.eventPathId = [];\n                        eventData.paths = [];\n                    }\n                });\n            }\n            if(parentNode !== path) {\n                deleteNodeMap && nodePath && delete nodeObj[nodePath[1]];\n            } else {\n                if(deleteNodeMap) {\n                    this.nodeMap[path] = {\n                        events: {},\n                        nodes: {},\n                        parent: \"\",\n                    };\n                }\n            }\n        }\n    }\n    /**\n     * 注册事件监听\n     * @param options 注册事件监听参数\n     */\n    subscribe(options: TypeSubscribeEvent): string {\n        const { path, eventName, callback, vNodePath } = options;\n        const evtId = \"evt_\" + utils.guid();\n        const pathStr = path.join(\",\");\n        const eventNodePath = vNodePath.replace(/\\./g, \".nodes.\");\n        let eventNode = utils.getValue<TypeEventMapData>(this.nodeMap, eventNodePath);\n        if(!utils.isEmpty(eventName)) {\n            if(!eventNode) {\n                this.nodeRegister(vNodePath, path);\n                eventNode = utils.getValue<TypeEventMapData>(this.nodeMap, eventNodePath);\n            }\n            // console.log(eventNode, vNodePath);return;\n            let evtObj:TypeEventData = eventNode.events[eventName];\n            if(!evtObj) {\n                const eventHandler = this.createEventHandler();\n                eventNode.events[eventName] = {\n                    eventPathId: [],\n                    listeners: {},\n                    paths: []\n                };\n                evtObj = eventNode.events[eventName];\n                if(!this.eventListeners[eventName]) {\n                    this.eventListeners[eventName] = {\n                        events: {},\n                        handler: eventHandler\n                    };\n                    this.addEventListener(eventName, eventHandler);\n                }\n            }\n            if(evtObj.eventPathId.indexOf(pathStr)<0) {\n                // 当前path不存在事件监听列表中才能加入列表\n                evtObj.eventPathId.push(pathStr);\n                evtObj.listeners[evtId] = callback;\n                evtObj.paths.push({\n                    eventId: evtId,\n                    path\n                });\n                this.eventListeners[eventName].events[evtId] = {\n                    nodePath: vNodePath\n                };\n            }\n        }\n        return evtId;\n    }\n    unsubscribe(eventName: string, eventId: string): void {\n        // remove event listen\n        if(this.eventListeners[eventName]) {\n            const eventData = this.eventListeners[eventName];\n            const events = eventData.events;\n            const eventHandleData = events[eventId];\n            if(eventHandleData) {\n                const vNodePath = eventHandleData.nodePath;\n                const eventNodePath = vNodePath.replace(/\\./g, \".nodes.\");\n                const eventNodeMap = utils.getValue<TypeEventMapData>(this.nodeMap, eventNodePath);\n                if(eventNodeMap) {\n                    const eventNodeData: TypeEventData = eventNodeMap.events[eventName];\n                    const newPath: string[] = [];\n                    const newPathData: any[] = [];\n                    for(let i=0;i<eventNodeData.paths.length;i++) {\n                        if(eventNodeData.paths[i].eventId !== eventId) {\n                            newPath.push(eventNodeData.paths[i].path.join(\",\"));\n                            newPathData.push(eventNodeData.paths[i]);\n                        }\n                    }\n                    eventNodeData.eventPathId = newPath;\n                    eventNodeData.paths = newPathData;\n                }\n                delete eventData.events[eventId];\n                if(Object.keys(eventData.events).length <= 0) {\n                    this.removeEventListen(eventName, eventData.handler);\n                }\n            }\n        }\n    }\n    dispose(): void {\n        Object.keys(this.eventListeners).map((eventName: string): void => {\n            const evtObj = this.eventListeners[eventName];\n            Object.keys(evtObj).map((evtId: string) => {\n                this.removeEvent(document.body, eventName, evtObj[evtId].callback);\n            });\n            delete this.eventListeners[eventName];\n        });\n        this.eventListeners = {};\n    }\n    private callEventAction(evt:Event, eventName:string, path: number[], vNodePath: string):void {\n        const eventNodePath = vNodePath.replace(/\\./g, \".nodes.\");\n        const eventNode = utils.getValue<TypeEventMapData>(this.nodeMap, eventNodePath);\n        if(eventNode && eventNode.events) {\n            let eventData:TypeEventData = null;\n            // tslint:disable-next-line: forin\n            for(const evtName in eventNode.events) {\n                if(evtName === eventName) {\n                    eventData = eventNode.events[evtName];\n                    break;\n                }\n            }\n            // 当前节点没有事件handler,往上一级执行，一直到最上层元素，或则有事件触发cancelBubble事件属性\n            if(!eventData) {\n                const parentNode = vNodePath.replace(/\\.[a-z0-9\\-\\_]{1,}$/i,\"\");\n                !utils.isEmpty(parentNode) && parentNode !== vNodePath && this.callEventAction(evt, eventName, eventNode.path, parentNode);\n            } else {\n                this.worker.callObjMethod(\"elmerEvent\", \"sortEventId\", eventData.paths, path).then((resp:any) => {\n                    if(/^200$/.test(resp.statusCode)) {\n                        const respData = resp.data || {};\n                        const evtIds:TypeEventIdMapping[] = respData.allPathData || [];\n                        const width = window.innerWidth, height = window.innerHeight, outWidth = window.outerWidth, outHeight = window.outerHeight;\n                        const evtParams: TypeQueueCallParam[] = [];\n                        const curPath:number[] = respData.path;\n                        let isCancelBubble = false;\n                        for(const evtMap of evtIds) {\n                            const bubbleEvent = {\n                                cancelBubble: false,\n                                nativeEvent: evt,\n                                windowRect: {\n                                    height,\n                                    outHeight,\n                                    outWidth,\n                                    width,\n                                }\n                            };\n                            if(eventName !== \"resize\") {\n                                if(evtMap.path && evtMap.path.length <= curPath.length) {\n                                    const forEvtIDS = evtMap.path.join(\",\");\n                                    const compareIDS = curPath.slice(0, evtMap.path.length).join(\",\");\n                                    if(forEvtIDS === compareIDS) {\n                                        const evtCallback = eventData.listeners[evtMap.eventId];\n                                        evtCallback(bubbleEvent, evtParams);\n                                        if(bubbleEvent.cancelBubble) {\n                                            isCancelBubble = true;\n                                            break;\n                                        }\n                                    }\n                                }\n                            } else {\n                                const evtCallback = eventData.listeners[evtMap.eventId];\n                                evtCallback(bubbleEvent, evtParams);\n                            }\n                        }\n                        if(!isCancelBubble) {\n                            const parentNode = vNodePath.replace(/\\.[a-z0-9\\-\\_]{1,}$/i,\"\");\n                            !utils.isEmpty(parentNode) && parentNode !== vNodePath && this.callEventAction(evt, eventName, eventNode.path, parentNode);\n                        }\n                    } else {\n                        throw new Error(`执行事件回调出现错误:${resp.message}`);\n                    }\n                }).catch((error) => {\n                    error[\"from\"] = \"virtual event module\";\n                    throw error;\n                });\n            }\n        }\n    }\n    private createEventHandler(): Function {\n        return (evt:Event) => {\n            const target = evt.target;\n            const path = (target as any).path;\n            const vNodePath = (target as any).vNodePath;\n            const eventName = evt.type;\n            if(!utils.isEmpty(path) && !utils.isEmpty(vNodePath)) {\n                this.callEventAction(evt, eventName, path, vNodePath);\n            }\n        };\n    }\n    private addEventListener(eventName: string, eventCallback: Function): void {\n        if(eventName !== \"resize\") {\n            this.addEvent(document.body,eventName, eventCallback);\n            if(eventName === \"animationEnd\") {\n                this.addEvent(document.body,\"webkitAnimationEnd\", eventCallback);\n                this.addEvent(document.body,\"mozAnimationEnd\", eventCallback);\n                this.addEvent(document.body,\"msAnimationEnd\", eventCallback);\n                this.addEvent(document.body,\"oAnimationEnd\", eventCallback);\n            } else if(eventName === \"transitionEnd\") {\n                this.addEvent(document.body,\"webkitTransitionEnd\", eventCallback);\n                this.addEvent(document.body,\"mozTransitionEnd\", eventCallback);\n                this.addEvent(document.body,\"msTransitionEnd\", eventCallback);\n                this.addEvent(document.body,\"oTransitionEnd\", eventCallback);\n            }\n        } else {\n            this.addEvent(window,eventName, eventCallback);\n        }\n    }\n    private removeEventListen(eventName: string, callback:Function): void {\n        if(eventName !== \"resize\") {\n            this.removeEvent(document.body, eventName, callback);\n            if(eventName === \"animationEnd\") {\n                this.removeEvent(document.body,\"webkitAnimationEnd\", callback);\n                this.removeEvent(document.body,\"mozAnimationEnd\", callback);\n                this.removeEvent(document.body,\"msAnimationEnd\", callback);\n                this.removeEvent(document.body,\"oAnimationEnd\", callback);\n            } else if(eventName === \"transitionEnd\") {\n                this.removeEvent(document.body,\"webkitTransitionEnd\", callback);\n                this.removeEvent(document.body,\"mozTransitionEnd\", callback);\n                this.removeEvent(document.body,\"msTransitionEnd\", callback);\n                this.removeEvent(document.body,\"oTransitionEnd\", callback);\n            }\n        } else {\n            this.removeEvent(window, \"resize\", callback);\n        }\n    }\n    private addEvent(dom:HTMLElement|Window, eventName: string, callback:Function): void {\n        if(dom.addEventListener) {\n            dom.addEventListener(eventName, callback as any, {\n                passive: true\n            });\n        } else if((dom as any).attachEvent) {\n            (dom as any).attachEvent(\"on\" + eventName, callback);\n        }\n    }\n    private removeEvent(dom:HTMLElement|Window, eventName: string, callback:Function): void {\n        if(dom.removeEventListener) {\n            dom.removeEventListener(eventName, callback as any);\n        } else if((dom as any).detachEvent) {\n            (dom as any).detachEvent(\"on\" + eventName, callback);\n        }\n    }\n}\n","export type TypeEventIdMapping = {\n    eventId: string;\n    path: number[];\n};\n\nexport default class EventInWorker {\n    sortEventId(mapData: TypeEventIdMapping[], eventPath: number[]):any {\n        if(self[\"utils\"].isArray(mapData)) {\n            for(let i=0;i<mapData.length;i++) {\n                const checkItem = mapData[i];\n                for(let j=i;j<mapData.length;j++) {\n                    const mapItem = mapData[j];\n                    if(this.isNextPath(checkItem.path, mapItem.path)) {\n                        mapData[i] = mapItem;\n                        mapData[j] = checkItem;\n                    }\n                }\n            }\n            return {\n                allPathData: mapData,\n                path: eventPath\n            };\n        } else {\n            return {\n                allPathData: mapData,\n                path: eventPath\n            };\n        }\n    }\n    isNextPath(path1: number[], path2: number[]): boolean {\n        if(path1.length !== path2.length) {\n            return path1.length > path2.length ? false : true;\n        } else {\n            for(let i=0;i<path1.length;i++) {\n                if(path1[i] !== path2[i]) {\n                    return path1[i] > path2[i];\n                }\n            }\n        }\n    }\n}\n","import { Common } from \"elmer-common\";\r\nimport { createClassFactory } from \"../inject/createClassFactory\";\r\nimport { injectable } from \"../inject/injectable\";\r\nimport { TypeRenderMiddlewareEvent } from \"./ARenderMiddleware\";\r\n\r\n@injectable(\"PluginInjectModel\")\r\nexport class PluginInjectModel extends Common {\r\n    init(options:TypeRenderMiddlewareEvent): void {\r\n        const injectModel = options.Component.prototype.injectModel;\r\n        const injectService = options.Component.prototype.injectService;\r\n        this.inject(options.componentObj, injectModel, \"model\");\r\n        this.inject(options.componentObj, injectService, \"service\", true);\r\n    }\r\n    /**\r\n     *\r\n     * @param target 将模块注入到指定对象上\r\n     * @param models 注入模块\r\n     * @param propertyKey 绑定的属性名称，不设置使用model中的key\r\n     * @param isAutowired 是否使用全局对象\r\n     */\r\n    private inject(target: any, models: object, propertyKey?: string, isAutowired?: boolean): void {\r\n        if(typeof propertyKey === \"string\" && propertyKey.length>0) {\r\n            if(!target[propertyKey]) {\r\n                target[propertyKey] = {};\r\n            }\r\n        }\r\n        if(target && models && Object.keys(models).length>0) {\r\n            Object.keys(models).map((tmpKey) => {\r\n                if(!this.isEmpty(tmpKey)) {\r\n                    const tmpFactory: Function = <Function>models[tmpKey];\r\n                    if(typeof tmpFactory === \"function\") {\r\n                        const tmpObj = !isAutowired ? (new (<any>tmpFactory)(target)) : createClassFactory(<any>tmpFactory);\r\n                        if(!this.isEmpty(propertyKey)) {\r\n                            target[propertyKey][tmpKey] = tmpObj;\r\n                        } else {\r\n                            target[tmpKey] = tmpObj;\r\n                        }\r\n                    } else {\r\n                        // tslint:disable-next-line:no-console\r\n                        console.log(target.className,models);\r\n                        throw new Error(tmpKey + \"注入对象不是function\");\r\n                    }\r\n                } else {\r\n                    throw new Error(\"注入模块必须设置propertyKey\");\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n","import { StaticCommon as utils } from \"elmer-common\";\nimport { Component } from \"../component/Component\";\nimport { IPropCheckRule } from \"../propsValidation\";\nimport { TypeRenderMiddlewareEvent } from \"./ARenderMiddleware\";\nimport { RenderMiddlewarePlugin } from \"./RenderMiddlewarePlugin\";\n\nexport class PluginPropsChecking extends RenderMiddlewarePlugin {\n    init(options: TypeRenderMiddlewareEvent): void {\n        this.checkPropTypes(options.componentObj, options.Component);\n    }\n    private checkPropTypes(targetComponent:Component, ComponentClass:any): void {\n        const propTypes = ComponentClass[\"propType\"] || {};\n        const propKeys = Object.keys(propTypes) || [];\n        if(propKeys.length>0) {\n            this.checkPropTypesCallBack(targetComponent, propTypes);\n        }\n    }\n    private checkPropTypesCallBack(target: any,checkRules: any): void {\n        Object.keys(checkRules).map((tmpKey: any) => {\n            let checkRuleData:IPropCheckRule|Function  = checkRules[tmpKey];\n            if(utils.isFunction(checkRuleData)) {\n                this.doCheckPropType(target, tmpKey, checkRuleData);\n            } else if(utils.isObject(checkRuleData)) {\n                let checkData:IPropCheckRule = checkRuleData;\n                if(utils.isFunction(checkData.rule)) {\n                    this.doCheckPropType(target, tmpKey, <Function>checkData.rule);\n                }\n                // 定义propertyKey 自动mapping值到组件定义属性上\n                if(!utils.isEmpty(checkData.propertyKey)) {\n                    target[checkData.propertyKey] = target.props[tmpKey];\n                }\n                // 定义stateKey自动mapping值到state属性上\n                if(!utils.isEmpty(checkData.stateKey)) {\n                    target.state[checkData.stateKey] = target.props[tmpKey];\n                }\n                checkData = null;\n            }\n            checkRuleData = null;\n        });\n    }\n    /**\n     * 做prop数据类型检查\n     * @param target any 检查component\n     * @param propertyKey prop属性关键词\n     * @param checkCallBack 数据类型检查规则\n     */\n    private doCheckPropType(target: any, propertyKey: string, checkCallBack: Function): void {\n        const propValue = target.props[propertyKey];\n        utils.isFunction(checkCallBack) && checkCallBack(propValue, {\n            error: (msg: any, type:any) => {\n                const tagName = target.humpToStr(target[\"selector\"]);\n                const sMsg = \"组件【\"+tagName+\"】属性【\"+propertyKey+\"】设置错误：\" + msg;\n                // tslint:disable-next-line:no-console\n                console.error(sMsg, type);\n            },\n            propertyName: propertyKey,\n            propertyValue: propValue\n        });\n    }\n}\n","import { StaticCommon as utils } from \"elmer-common\";\nimport { attachReducerToController, defineReducer, ReduxController } from \"elmer-redux\";\nimport { IReduxConnect } from \"../component/IDeclareComponent\";\nimport { defineGlobalState, getGlobalState } from \"../init/globalUtil\";\nimport { autowired, injectable } from \"../inject/injectable\";\nimport { IPropCheckRule } from \"../propsValidation\";\nimport { TypeRenderMiddlewareEvent } from \"./ARenderMiddleware\";\nimport { RenderMiddlewarePlugin } from \"./RenderMiddlewarePlugin\";\n\n@injectable(\"PluginRedux\")\nexport class PluginRedux extends RenderMiddlewarePlugin {\n    @autowired(ReduxController, \"ReduxController\")\n    private reduxController: ReduxController;\n    constructor() {\n        super();\n        this.reduxController.checkInitStateData(getGlobalState, defineGlobalState);\n        this.reduxController.setNotifyCallback([\"$onPropsChanged\", \"$willReceiveProps\"]);\n    }\n    /**\n     * 初始化Component结束事件，再次将被实例化对象挂载到redux\n     * 并获取初始化状态数据\n     * @param options - 生命周期函数事件参数\n     */\n    init(options: TypeRenderMiddlewareEvent): void {\n        // 创建component执行一次\n        const reduxParam = options.Component.prototype.connect;\n        if(reduxParam && (reduxParam.mapStateToProps || reduxParam.mapDispatchToProps)) {\n            this.reduxController.checkInitComponents(options.componentObj, options.Component.prototype.selector, options.nodeData);\n        }\n    }\n    destroy(options: TypeRenderMiddlewareEvent): void {\n         // 从reduxController把已经释放的组件移除引用\n        if(options.componentObj) {\n            this.reduxController.removeComponent((options.componentObj as any).selector, options.nodeData);\n        }\n    }\n    beforeUpdate(options: TypeRenderMiddlewareEvent): void {\n        // 先加载redux中的数据，在进行propsType检查，这样可以使用redux中的数据\n        const reduxProps = this.reduxController.getStateByConnectSelector(options.Component.prototype.selector);\n        const dispatchValue= this.reduxController.getDispatchByConnectSelector(options.Component.prototype.selector);\n        utils.isObject(reduxProps) && utils.extend(options.props, reduxProps, true);\n        utils.isObject(dispatchValue) && utils.extend(options.props, dispatchValue, true);\n        this.setDefaultValue(options.props, (options.Component as any).propType);\n    }\n    /**\n     * 在创建Component前检查是否有做connect动作，将reducer回调挂入redux监听列表\n     * @param options - 执行事件参数\n     */\n    beforeInit?(options: TypeRenderMiddlewareEvent): void {\n        const reduxParam:IReduxConnect = options.Component.prototype.connect;\n        if(reduxParam) {\n            if(reduxParam.reducers && reduxParam.reducers.length > 0) {\n                reduxParam.reducers.map((tmpReducer) => {\n                    if(typeof tmpReducer.callback === \"function\") {\n                        defineReducer(this.reduxController, tmpReducer.name, tmpReducer.callback as any);\n                    } else {\n                        // tslint:disable-next-line: no-console\n                        console.error(\"Redux's reducer callback should be an function\");\n                    }\n                });\n                if(!this.reduxController.reducers) {\n                    this.reduxController.reducers = {};\n                }\n                attachReducerToController(this.reduxController);\n            }\n            if(reduxParam.mapStateToProps || reduxParam.mapDispatchToProps) {\n                // model,service,或自定义模块未定义selector会导致redux.connect失效，默认初始化一个参数\n                if(utils.isEmpty(options.Component.prototype.selector)) {\n                    utils.defineReadOnlyProperty(options.Component.prototype, \"selector\", utils.guid().replace(/\\-/g, \"\"));\n                }\n                // 在初始化Component的时候在做connect操作，防止没有使用的组件但是定义了connect,在declareComponent的时候增加不必要的redux watch\n                this.reduxController.connect(options.Component.prototype.selector, reduxParam.mapStateToProps, reduxParam.mapDispatchToProps);\n                // 执行init_state, 当前动作会触发所有的reducer,后续应限制执行的reducers\n                this.reduxController.dispatch({\n                    type: \"__INIT_STATE__\"\n                });\n                const stateValue = this.reduxController.getStateByConnectSelector(options.Component.prototype.selector);\n                const dispatchValue= this.reduxController.getDispatchByConnectSelector(options.Component.prototype.selector);\n                stateValue && utils.extend(options.props, stateValue, true);\n                dispatchValue && utils.extend(options.props, dispatchValue, true);\n            }\n        }\n        this.setDefaultValue(options.props, (options.Component as any).propType);  // 在创建组件object之前对props做默认值检查\n    }\n    private setDefaultValue(props:any, checkRules: any): void {\n        if(utils.isObject(props) && utils.isObject(checkRules)) {\n            // const propsKey = Object.keys(props);\n            Object.keys(checkRules).map((propKey:string) => {\n                if(utils.isObject(checkRules[propKey])) {\n                    const tmpCheckRule:IPropCheckRule = checkRules[propKey];\n                    if(utils.isEmpty(props[propKey])) {\n                        if(tmpCheckRule.defaultValue !== undefined) {\n                            delete props[propKey];\n                            utils.defineReadOnlyProperty(props, propKey, tmpCheckRule.defaultValue);\n                        }\n                    }\n                    if(typeof tmpCheckRule.rule === \"function\" && tmpCheckRule.rule[\"type\"] === \"number\") {\n                        if(!isNaN(props[propKey]) && utils.isString(props[propKey])) {\n                            const curValue = /\\./.test(props[propKey]) ? parseFloat(props[propKey]) : parseInt(props[propKey], 10);\n                            delete props[propKey];\n                            utils.defineReadOnlyProperty(props, propKey, curValue);\n                        }\n                    }\n                }\n            });\n        }\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elmer_common_1 = require(\"elmer-common\");\nexports.defineContext = function (target, options) {\n    var cOptions = {\n        saveAttrKey: \"contextStore\"\n    };\n    elmer_common_1.StaticCommon.extend(cOptions, options);\n    if (!elmer_common_1.StaticCommon.isEmpty(cOptions.contextData) && !elmer_common_1.StaticCommon.isEmpty(cOptions.saveAttrKey)) {\n        // define context store to target\n        var oldData = target[cOptions.saveAttrKey] || {};\n        var defineData = cOptions.contextData;\n        for (var key in defineData) {\n            if (!oldData[key]) {\n                elmer_common_1.StaticCommon.defineReadOnlyProperty(oldData, key, defineData[key]);\n            }\n            else {\n                // tslint:disable-next-line: no-console\n                console.error(\"Define context error, the property \" + key + \" was existing on target object.\");\n                break;\n            }\n        }\n        if (!target[cOptions.saveAttrKey]) {\n            elmer_common_1.StaticCommon.defineReadOnlyProperty(target, cOptions.saveAttrKey, oldData);\n        }\n        return oldData;\n    }\n    else {\n        // tslint:disable-next-line: no-console\n        console.error(\"saveAttrkey and contextData can not be undefined or null\");\n    }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar StaticCommon_1 = require(\"./StaticCommon\");\nvar Common = /** @class */ (function () {\n    function Common() {\n    }\n    Common.prototype.getType = function (val) {\n        return Object.prototype.toString.call(val);\n    };\n    Common.prototype.isString = function (val) {\n        return this.getType(val) === \"[object String]\";\n    };\n    Common.prototype.isObject = function (val) {\n        return this.getType(val) === \"[object Object]\";\n    };\n    Common.prototype.isArray = function (val) {\n        return this.getType(val) === \"[object Array]\";\n    };\n    Common.prototype.isNumeric = function (val) {\n        return !isNaN(val);\n    };\n    Common.prototype.isDOM = function (val) {\n        return /^(\\[object\\s*)HTML([a-zA-Z]*)(Element\\])$/.test(this.getType(val));\n    };\n    Common.prototype.isSVGDOM = function (val) {\n        return /^\\[object\\sSVG([a-zA-Z]*)Element\\]$/.test(this.getType(val));\n    };\n    Common.prototype.isFunction = function (val) {\n        return this.getType(val) === \"[object Function]\";\n    };\n    Common.prototype.isNodeList = function (val) {\n        return this.getType(val) === \"[object NodeList]\";\n    };\n    Common.prototype.isRegExp = function (val) {\n        return this.getType(val) === \"[object RegExp]\";\n    };\n    Common.prototype.isEmpty = function (val) {\n        return val === undefined || val === null || (this.isString(val) && val.length <= 0);\n    };\n    // tslint:disable-next-line:no-shadowed-variable\n    Common.prototype.isEqual = function (a, b) {\n        if (a === b) {\n            return a !== 0 || 1 / a === 1 / b;\n        }\n        if (a == null || b == null) {\n            return a === b;\n        }\n        var classNameA = this.getType(a), classNameB = this.getType(b);\n        if (classNameA !== classNameB) {\n            return false;\n        }\n        else {\n            switch (classNameA) {\n                case \"[object RegExp]\":\n                case \"[object String]\":\n                    return \"\" + a === \"\" + b;\n                case \"[object Number]\":\n                    if (+a !== +a) {\n                        return +b !== +b;\n                    }\n                    return +a === 0 ? 1 / +a === 1 / b : +a === +b;\n                case \"[object Date]\":\n                case \"[object Boolean]\":\n                    return +a === +b;\n            }\n            if (classNameA === \"[object Object]\") {\n                var propsA = Object.getOwnPropertyNames(a), propsB = Object.getOwnPropertyNames(b);\n                if (propsA.length !== propsB.length) {\n                    return false;\n                }\n                else {\n                    for (var i = 0; i < propsA.length; i++) {\n                        var propName = propsA[i];\n                        if (a[propName] !== b[propName]) {\n                            return false;\n                        }\n                    }\n                    return true;\n                }\n            }\n            if (classNameA === \"[object Array]\") {\n                return a.toString() === b.toString();\n            }\n        }\n    };\n    Common.prototype.sleepCall = function (fn, timeout, obj) {\n        if (typeof fn === \"function\") {\n            // let handler: number | null | undefined = null;\n            var tim = timeout || 200;\n            var sleep = function () {\n                if (obj) {\n                    fn.call(obj);\n                }\n                else {\n                    fn();\n                }\n                // handler !== null && clearTimeout(handler);\n            };\n            setTimeout(sleep, tim);\n        }\n    };\n    Common.prototype.getValue = function (data, key, defaultValue) {\n        return StaticCommon_1.StaticCommon.getValue(data, key, defaultValue);\n    };\n    /**\n     * 给指定对象设置属性值\n     * @param data 设置属性值对象\n     * @param key 设置属性key,属性key有多层可使用.区分\n     * @param value 设置属性值\n     * @param fn 自定义设置值回调\n     */\n    Common.prototype.setValue = function (data, key, value, fn) {\n        return StaticCommon_1.StaticCommon.setValue(data, key, value, fn);\n    };\n    /**\n     * 获取随机ID\n     */\n    Common.prototype.getRandomID = function () {\n        var now = new Date();\n        var year = now.getFullYear().toString(), month = now.getMonth() + 1 < 10 ? \"0\" + (now.getMonth() + 1).toString() : (now.getMonth() + 1).toString(), date = now.getDate() < 10 ? \"0\" + now.getDate().toString() : now.getDate().toString(), hour = now.getHours() < 10 ? [\"0\", now.getHours()].join(\"\") : now.getHours().toString(), minute = now.getMinutes() < 10 ? [\"0\", now.getMinutes()].join(\"\") : now.getMinutes().toString(), second = now.getSeconds() < 10 ? [\"0\", now.getSeconds()].join(\"\") : now.getSeconds().toString(), reSecond = now.getMilliseconds();\n        var randValue = parseInt((Math.random() * 9999 + 1000).toString(), 10);\n        return [year, month, date, hour, minute, second, reSecond, randValue].join(\"\");\n    };\n    /**\n     * 字符串有连接符-将自动转换成已首字母大写\n     * @param val 转换文本\n     * @param firstUpperCase 是否大写\n     */\n    Common.prototype.toHumpStr = function (val, firstUpperCase) {\n        if (!this.isEmpty(val)) {\n            var vStr = val.replace(/(^\\-)|(\\-$)/, \"\");\n            var vArr = vStr.split(\"-\");\n            for (var i = 0; i < vArr.length; i++) {\n                if ((i === 0 && firstUpperCase) || i > 0) {\n                    vArr[i] = vArr[i].substr(0, 1).toUpperCase() + vArr[i].substr(1);\n                }\n            }\n            return vArr.join(\"\");\n        }\n        else {\n            return val;\n        }\n    };\n    Common.prototype.humpToStr = function (val) {\n        if (!this.isEmpty(val)) {\n            var vStr = val.substr(0, 1).toLowerCase() + val.substr(1);\n            var rStr = vStr.replace(/([A-Z])/g, function ($1) {\n                return \"-\" + $1.toLowerCase();\n            });\n            return rStr;\n        }\n        return val;\n    };\n    Common.prototype.extend = function (desc, src, setReadOnly, ignoreKeys) {\n        if (!setReadOnly) {\n            if (this.isObject(desc) && this.isObject(src)) {\n                if (Object.assign) {\n                    Object.assign(desc, src);\n                }\n                else {\n                    // tslint:disable-next-line:forin\n                    for (var key in src) {\n                        if (!ignoreKeys || ignoreKeys.indexOf(key) < 0) {\n                            desc[key] = src[key];\n                        }\n                    }\n                }\n            }\n        }\n        else {\n            if (this.isObject(desc) && this.isObject(src)) {\n                // tslint:disable-next-line:forin\n                for (var key in src) {\n                    if (!ignoreKeys || ignoreKeys.indexOf(key) < 0) {\n                        // 已经存在的属性需要使用delete删除，防止redine error问题\n                        if (desc.hasOwnProperty(key)) {\n                            delete desc[key];\n                        }\n                        this.defineReadOnlyProperty(desc, key, src[key]);\n                    }\n                }\n            }\n        }\n        return desc;\n    };\n    Common.prototype.merge = function (obj1, obj2) {\n        var result = {};\n        if (obj1 && !obj2) {\n            result = obj1;\n        }\n        else if (!obj1 && obj2) {\n            result = obj2;\n        }\n        else if (obj1 && obj2) {\n            if (this.isObject(obj1)) {\n                // tslint:disable-next-line:forin\n                for (var key in obj1) {\n                    result[key] = obj1[key];\n                }\n            }\n            if (this.isObject(obj2)) {\n                for (var sKey in obj2) {\n                    if (!result.hasOwnProperty(sKey)) {\n                        result[sKey] = obj2[sKey];\n                    }\n                }\n            }\n        }\n        return result;\n    };\n    /**\n     * 将字符串转转换成对应的数据类型，遇到true|false转换成bool类型，遇到数字文本转换成数字类型数据\n     * @param data 要转换的数据\n     */\n    Common.prototype.val = function (data) {\n        if (this.isString(data)) {\n            if (!isNaN(data)) {\n                return (data.indexOf(\".\") >= 0 ? parseFloat(data) : parseInt(data, 10));\n            }\n            else {\n                return (/^(true|false)$/.test(data) ? Boolean(data) : data);\n            }\n        }\n        else {\n            return data;\n        }\n    };\n    Common.prototype.defineReadOnlyProperty = function (obj, propertyKey, propertyValue) {\n        (function (paramObj, paramPropertyKey, paramPropertyValue) {\n            paramObj && Object.defineProperty(paramObj, paramPropertyKey, {\n                configurable: true,\n                enumerable: true,\n                value: paramPropertyValue,\n                writable: false\n            });\n        })(obj, propertyKey, propertyValue);\n    };\n    Common.prototype.launchFullscreen = function (element) {\n        if (element.requestFullscreen) {\n            // tslint:disable-next-line: no-floating-promises\n            element.requestFullscreen();\n        }\n        else if (element[\"mozRequestFullScreen\"]) {\n            element[\"mozRequestFullScreen\"]();\n        }\n        else if (element[\"webkitRequestFullscreen\"]) {\n            element[\"webkitRequestFullscreen\"]();\n        }\n        else if (element[\"msRequestFullscreen\"]) {\n            element[\"msRequestFullscreen\"]();\n        }\n    };\n    Common.prototype.exitFullscreen = function () {\n        if (document.exitFullscreen) {\n            // tslint:disable-next-line: no-floating-promises\n            document.exitFullscreen();\n        }\n        else if (document[\"mozCancelFullScreen\"]) {\n            document[\"mozCancelFullScreen\"]();\n        }\n        else if (document[\"webkitExitFullscreen\"]) {\n            document[\"webkitExitFullscreen\"]();\n        }\n    };\n    Common.prototype.isFullScreen = function () {\n        return document[\"isFullScreen\"] || document[\"mozIsFullScreen\"] || document[\"webkitIsFullScreen\"];\n    };\n    Common.prototype.guid = function () {\n        var S4 = function () {\n            // tslint:disable-next-line: no-bitwise\n            return (((1 + Math.random()) * 0x10000) | 0).toString(16).substr(1);\n        };\n        return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4());\n    };\n    Common.prototype.getUri = function () {\n        return StaticCommon_1.StaticCommon.getUri();\n    };\n    Common.prototype.getQuery = function (key) {\n        return StaticCommon_1.StaticCommon.getQuery(key);\n    };\n    return Common;\n}());\nexports.Common = Common;\n//# sourceMappingURL=Common.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Canvas = /** @class */ (function () {\n    function Canvas() {\n        this.doRemoveAnimationList = [];\n        // tslint:disable-next-line: variable-name\n        var _this = this;\n        // tslint:disable: only-arrow-functions\n        this.requestAnimationFrame = window.requestAnimationFrame ||\n            window[\"webkitRequestAnimationFrame\"] ||\n            window[\"mozRequestAnimationFrame\"] ||\n            function (callback) {\n                var currTime = new Date().getTime();\n                var timeToCall = Math.max(0, 16.7 - (currTime - _this.lastTime));\n                var id = window.setTimeout(function () {\n                    callback(currTime + timeToCall);\n                }, timeToCall);\n                _this.lastTime = currTime + timeToCall;\n                return id;\n            };\n        this.cancelAnimationFrame = window.cancelAnimationFrame ||\n            window[\"webkitCancelAnimationFrame\"] ||\n            window[\"mozCancelAnimationFrame\"] ||\n            function (id) {\n                clearTimeout(id);\n            };\n        // tslint:enable: only-arrow-functions\n    }\n    Canvas.prototype.startAnimation = function (callBack, targetObj) {\n        var self = this;\n        // tslint:disable-next-line: only-arrow-functions\n        return (function (fn, obj) {\n            var handler;\n            // tslint:disable-next-line: only-arrow-functions\n            var animation = function () {\n                var mIndex = self.doRemoveAnimationList.indexOf(handler);\n                if (mIndex < 0) {\n                    fn.apply(obj, arguments);\n                    return self.requestAnimationFrame.call(window, animation);\n                }\n                else {\n                    self.doRemoveAnimationList.splice(mIndex, 1);\n                }\n                mIndex = null;\n            };\n            handler = self.requestAnimationFrame.call(window, animation);\n            return handler;\n        })(callBack, targetObj);\n    };\n    Canvas.prototype.stopAnimation = function (handler) {\n        this.cancelAnimationFrame.call(window, handler);\n        this.doRemoveAnimationList.push(handler);\n    };\n    return Canvas;\n}());\nexports.Canvas = Canvas;\n//# sourceMappingURL=Canvas.js.map","\"use strict\";\n// tslint:disable: jsdoc-format\n/**\n * currentTime : 当前时间\n * beginValue  : 开始值\n * changeValue : 变化值\n * duration    : 动画过程时间\n**/\n// tslint:enable: jsdoc-format\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// tslint:disable: object-literal-sort-keys no-parameter-reassignment\nexports.MathAnimationApi = {\n    /**\n     * 匀速变化\n     * @param currentTime [number] 当前时间\n     * @param beginning [number] 开始变化的值\n     * @param changeValue [number] 变化的值\n     * @param duration [number] 动画总的时间\n     * @returns number\n     */\n    Linear: function (currentTime, beginValue, changeValue, duration) {\n        return changeValue * currentTime / duration + beginValue;\n    },\n    /**\n     * 二次平方缓动\n     */\n    Quad: {\n        /**\n         * 二次平方缓动easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            currentTime /= duration;\n            return changeValue * Math.pow(currentTime, 2) + beginValue;\n        },\n        /**\n         * 二次平方缓动easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime /= duration;\n            return -changeValue * currentTime * (currentTime - 2) + beginValue;\n        },\n        /**\n         * 二次平方缓动easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            if (currentTime / 2 < 1) {\n                return changeValue / 2 * Math.pow(currentTime, 2) + beginValue;\n            }\n            else {\n                currentTime = currentTime - 1;\n                return -changeValue / 2 * (currentTime * (currentTime - 2) - 1) + beginValue;\n            }\n        }\n    },\n    /**\n     * 三次方缓动效\n     */\n    Cubic: {\n        /**\n         * 三次方缓动easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            return changeValue * Math.pow(currentTime, 3) + beginValue;\n        },\n        /**\n         * 三次方缓动easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration - 1;\n            return changeValue * (Math.pow(currentTime, 3) + 1) + beginValue;\n        },\n        /**\n         * 三次方缓动easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            if (currentTime / 2 < 1) {\n                return changeValue / 2 * Math.pow(currentTime, 3) + beginValue;\n            }\n            else {\n                currentTime = currentTime - 2;\n                return changeValue / 2 * (Math.pow(currentTime, 3) + 2) + beginValue;\n            }\n        }\n    },\n    /**\n     * 四次方缓动效果\n     */\n    Quart: {\n        /**\n         * 四次方缓动easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            return changeValue * Math.pow(currentTime, 4) + beginValue;\n        },\n        /**\n         * 四次方缓动easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration - 1;\n            return -changeValue * (Math.pow(currentTime, 4) - 1) + beginValue;\n        },\n        /**\n         * 四次方缓动easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            if (currentTime / 2 < 1) {\n                return changeValue / 2 * Math.pow(currentTime, 4) + beginValue;\n            }\n            else {\n                currentTime -= 2;\n                return -changeValue / 2 * (Math.pow(currentTime, 4) - 2) + beginValue;\n            }\n        }\n    },\n    /**\n     * 五次方缓动效果\n     */\n    Quint: {\n        /**\n         * 四次方缓动easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            currentTime /= duration;\n            return changeValue * Math.pow(currentTime, 5) + beginValue;\n        },\n        /**\n         * 四次方缓动easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration - 1;\n            return changeValue * (Math.pow(currentTime, 5) + 1) + beginValue;\n        },\n        /**\n         * 四次方缓动easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            if (currentTime / 2 < 1) {\n                return changeValue / 2 * Math.pow(currentTime, 5) + beginValue;\n            }\n            else {\n                currentTime -= 2;\n                return changeValue / 2 * (Math.pow(currentTime, 5) + 2) + beginValue;\n            }\n        }\n    },\n    /**\n     * 正弦缓动效果\n     */\n    Sine: {\n        /**\n         * 正弦缓动效果easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            return -changeValue * Math.cos(currentTime / duration * (Math.PI / 2)) + changeValue + beginValue;\n        },\n        /**\n         * 正弦缓动效果easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            return changeValue * Math.sin(currentTime / duration * (Math.PI / 2)) + beginValue;\n        },\n        /**\n         * 正弦缓动效果easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            return -changeValue / 2 * (Math.cos(Math.PI * currentTime / duration) - 1) + beginValue;\n        }\n    },\n    /**\n     * 指数缓动效果\n     */\n    Expo: {\n        /**\n         * 指数缓动效果easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            return (currentTime === 0) ? beginValue : changeValue * Math.pow(2, 10 * (currentTime / duration - 1)) + beginValue;\n        },\n        /**\n         * 指数缓动效果easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            return currentTime === duration ? beginValue + changeValue : changeValue * (-Math.pow(2, -10 * currentTime / duration) + 1) + beginValue;\n        },\n        /**\n         * 指数缓动效果easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            if (currentTime === 0) {\n                return beginValue;\n            }\n            if (currentTime === duration) {\n                return beginValue + changeValue;\n            }\n            currentTime /= duration;\n            if (currentTime / 2 < 1) {\n                return changeValue / 2 * Math.pow(2, 10 * (currentTime - 1)) + beginValue;\n            }\n            else {\n                currentTime -= 1;\n                return changeValue / 2 * (-Math.pow(2, -10 * currentTime) + 2) + beginValue;\n            }\n        }\n    },\n    /**\n     * 圆形缓动效果\n     */\n    Circle: {\n        /**\n         * 圆形缓动效果easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            return -changeValue * (Math.sqrt(1 - Math.pow(currentTime, 2)) - 1) + beginValue;\n        },\n        /**\n         * 圆形缓动效果easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration - 1;\n            return changeValue * Math.sqrt(1 - Math.pow(currentTime, 2)) + beginValue;\n        },\n        /**\n         * 圆形缓动效果easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime = currentTime / duration;\n            if (currentTime / 2 < 1) {\n                return -changeValue / 2 * (Math.sqrt(1 - Math.pow(currentTime, 2)) - 1) + beginValue;\n            }\n            else {\n                currentTime -= 2;\n                return changeValue / 2 + (Math.sqrt(1 - Math.pow(currentTime, 2)) + 1) + beginValue;\n            }\n        }\n    },\n    /**\n     * 指衰减正弦曲线缓动函数\n     */\n    Elastic: {\n        /**\n         * 指衰减正弦曲线缓动easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param a [number] undefined\n         * @param p [number] undefined\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration, a, p) {\n            var s;\n            if (currentTime === 0) {\n                return beginValue;\n            }\n            currentTime /= duration;\n            if (currentTime === 1) {\n                return beginValue + changeValue;\n            }\n            if (typeof p === \"undefined\") {\n                p = duration * 0.3;\n            }\n            if (!a || a < Math.abs(changeValue)) {\n                s = p / 4;\n                a = changeValue;\n            }\n            else {\n                s = p / (2 * Math.PI) * Math.asin(changeValue / a);\n            }\n            return -(a * Math.pow(2, 10 * (currentTime -= 1)) * Math.sin((currentTime * duration - s) * (2 * Math.PI) / p)) + beginValue;\n        },\n        /**\n         * 指衰减正弦曲线缓动减速easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param a [number] undefined\n         * @param p [number] undefined\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration, a, p) {\n            var s;\n            if (currentTime === 0) {\n                return beginValue;\n            }\n            currentTime /= duration;\n            if (currentTime === 1) {\n                return beginValue + changeValue;\n            }\n            if (typeof p === \"undefined\") {\n                p = duration * .3;\n            }\n            if (!a || a < Math.abs(changeValue)) {\n                a = changeValue;\n                s = p / 4;\n            }\n            else {\n                s = p / (2 * Math.PI) * Math.asin(changeValue / a);\n            }\n            return (a * Math.pow(2, -10 * currentTime) * Math.sin((currentTime * duration - s) * (2 * Math.PI) / p) + changeValue + beginValue);\n        },\n        /**\n         * 指衰减正弦曲线缓动函先加速后减速easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param a [number] undefined\n         * @param p [number] undefined\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration, a, p) {\n            var s;\n            if (currentTime === 0) {\n                return beginValue;\n            }\n            currentTime /= duration / 2;\n            if (currentTime === 2) {\n                return beginValue + changeValue;\n            }\n            if (typeof p === \"undefined\") {\n                p = duration * (0.3 * 1.5);\n            }\n            if (!a || a < Math.abs(changeValue)) {\n                a = changeValue;\n                s = p / 4;\n            }\n            else {\n                s = p / (2 * Math.PI) * Math.asin(changeValue / a);\n            }\n            if (currentTime < 1) {\n                return -0.5 * (a * Math.pow(2, 10 * (currentTime -= 1)) * Math.sin((currentTime * duration - s) * (2 * Math.PI) / p)) + beginValue;\n            }\n            return a * Math.pow(2, -10 * (currentTime -= 1)) * Math.sin((currentTime * duration - s) * (2 * Math.PI) / p) * .5 + changeValue + beginValue;\n        }\n    },\n    /**\n     * 超过范围的三次方的缓动函数\n     */\n    Back: {\n        /**\n         * 超过范围的三次方的缓动函数easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param s [number] undefined\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration, s) {\n            if (typeof s === \"undefined\") {\n                s = 1.70158;\n            }\n            return changeValue * (currentTime /= duration) * currentTime * ((s + 1) * currentTime - s) + beginValue;\n        },\n        /**\n         * 超过范围的三次方的缓动函数easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param s [number] undefined\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration, s) {\n            if (typeof s === \"undefined\") {\n                s = 1.70158;\n            }\n            return changeValue * ((currentTime = currentTime / duration - 1) * currentTime * ((s + 1) * currentTime + s) + 1) + beginValue;\n        },\n        /**\n         * 超过范围的三次方的缓动函数easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @param s [number] undefined\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration, s) {\n            if (typeof s === \"undefined\") {\n                s = 1.70158;\n            }\n            currentTime /= duration / 2;\n            if (currentTime < 1) {\n                return changeValue / 2 * (currentTime * currentTime * (((s *= (1.525)) + 1) * currentTime - s)) + beginValue;\n            }\n            return changeValue / 2 * ((currentTime -= 2) * currentTime * (((s *= (1.525)) + 1) * currentTime + s) + 2) + beginValue;\n        }\n    },\n    /**\n     * 指数衰减的反弹曲线缓动函数\n     */\n    Bounce: {\n        /**\n         * 指数衰减的反弹曲线缓动函数easeIn\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeIn: function (currentTime, beginValue, changeValue, duration) {\n            return changeValue - exports.MathAnimationApi.Bounce.easeOut(duration - currentTime, 0, changeValue, duration) + beginValue;\n        },\n        /**\n         * 指数衰减的反弹曲线缓动函数easeOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeOut: function (currentTime, beginValue, changeValue, duration) {\n            currentTime /= duration;\n            if (currentTime < (1 / 2.75)) {\n                return changeValue * (7.5625 * currentTime * currentTime) + beginValue;\n            }\n            else if (currentTime < (2 / 2.75)) {\n                return changeValue * (7.5625 * (currentTime -= (1.5 / 2.75)) * currentTime + .75) + beginValue;\n            }\n            else if (currentTime < (2.5 / 2.75)) {\n                return changeValue * (7.5625 * (currentTime -= (2.25 / 2.75)) * currentTime + .9375) + beginValue;\n            }\n            else {\n                return changeValue * (7.5625 * (currentTime -= (2.625 / 2.75)) * currentTime + .984375) + beginValue;\n            }\n        },\n        /**\n         * 指数衰减的反弹曲线缓动函数easeInOut\n         * @param currentTime [number] 当前时间\n         * @param beginning [number] 开始变化的值\n         * @param changeValue [number] 变化的值\n         * @param duration [number] 动画总的时间\n         * @returns number\n         */\n        easeInOut: function (currentTime, beginValue, changeValue, duration) {\n            if (currentTime < duration / 2) {\n                return exports.MathAnimationApi.Bounce.easeIn(currentTime * 2, 0, changeValue, duration) * .5 + beginValue;\n            }\n            else {\n                return exports.MathAnimationApi.Bounce.easeOut(currentTime * 2 - duration, 0, changeValue, duration) * 0.5 + changeValue * 0.5 + beginValue;\n            }\n        }\n    }\n};\n// tslint:enable: object-literal-sort-keys no-parameter-reassignment\n//# sourceMappingURL=MathAnimationApi.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar StaticCommon_1 = require(\"./StaticCommon\");\nvar callYieldFunc = function (callbackObj) {\n    var result, keys, index, mLen, key, callback, lastKey, _a, _b;\n    return __generator(this, function (_c) {\n        switch (_c.label) {\n            case 0:\n                result = {};\n                if (!callbackObj) return [3 /*break*/, 5];\n                keys = Object.keys(callbackObj);\n                if (!(keys.length > 0)) return [3 /*break*/, 5];\n                index = 0, mLen = keys.length;\n                _c.label = 1;\n            case 1:\n                if (!(index < mLen)) return [3 /*break*/, 5];\n                key = keys[index];\n                callback = callbackObj[key];\n                if (!(typeof callback === \"function\")) return [3 /*break*/, 3];\n                lastKey = keys[index - 1];\n                _a = result;\n                _b = key;\n                return [4 /*yield*/, callback(result[lastKey])];\n            case 2:\n                _a[_b] = _c.sent();\n                return [3 /*break*/, 4];\n            case 3:\n                result[key] = {\n                    statusCode: \"QueueCall_601\",\n                    // tslint:disable-next-line: object-literal-sort-keys\n                    message: \"The \" + key + \"'s fn attribute is not a function\"\n                };\n                _c.label = 4;\n            case 4:\n                index++;\n                return [3 /*break*/, 1];\n            case 5: return [2 /*return*/, result];\n        }\n    });\n};\nexports.queueCallRaceAll = function (paramList, fn, option) { return __awaiter(void 0, void 0, void 0, function () {\n    return __generator(this, function (_a) {\n        return [2 /*return*/, new Promise(function (resolve, reject) {\n                if (paramList && paramList.length > 0) {\n                    var allStatus_1 = {};\n                    var allResult_1 = {};\n                    var checkAllStatus_1 = function () {\n                        var hasError = false;\n                        // tslint:disable-next-line: forin\n                        for (var key in allStatus_1) {\n                            if (allStatus_1[key] === \"PENDING\") {\n                                return;\n                            }\n                            if (allStatus_1[key] === \"ERROR\") {\n                                hasError = true;\n                                break;\n                            }\n                        }\n                        if (hasError) {\n                            reject(allResult_1);\n                        }\n                        else {\n                            resolve(allResult_1);\n                        }\n                    };\n                    paramList.map(function (item, index) {\n                        var taskID = \"queueCall\" + index;\n                        allStatus_1[\"queueCall\" + index] = \"PENDING\";\n                        (function (param, taskId) {\n                            var callback = typeof param.fn === \"function\" ? param.fn : fn;\n                            if (typeof callback === \"function\") {\n                                // tslint:disable-next-line: no-inferred-empty-object-type\n                                var callbackResult = callback({\n                                    id: param.id,\n                                    lastKey: null,\n                                    lastResult: null,\n                                    param: param.params,\n                                    result: allResult_1\n                                }, param.params);\n                                if (StaticCommon_1.StaticCommon.isPromise(callbackResult)) {\n                                    callbackResult.then(function (resp) {\n                                        allResult_1[param.id] = resp;\n                                        allStatus_1[taskID] = \"OK\";\n                                        checkAllStatus_1();\n                                    }).catch(function (error) {\n                                        allResult_1[param.id] = {\n                                            statusCode: \"Fail\",\n                                            // tslint:disable-next-line: object-literal-sort-keys\n                                            exception: error,\n                                            message: error.message || error.statusText || \"Unknow error\",\n                                        };\n                                        allStatus_1[taskID] = \"ERROR\";\n                                        checkAllStatus_1();\n                                    });\n                                }\n                                else {\n                                    allResult_1[param.id] = callbackResult;\n                                    allStatus_1[taskID] = \"OK\";\n                                    checkAllStatus_1();\n                                }\n                            }\n                            else {\n                                allResult_1[param.id] = {\n                                    statusCode: \"Fail\",\n                                    // tslint:disable-next-line: object-literal-sort-keys\n                                    message: \"the fn callback is not a function\"\n                                };\n                                checkAllStatus_1();\n                            }\n                        })(item, taskID);\n                    });\n                }\n                else {\n                    resolve();\n                }\n            })];\n    });\n}); };\n/**\n * 按队列调用异步函数或普通函数\n * @param paramList {TypeQueueCallParam[]} 队列参数\n * @param fn 循环调用的方法，如果params.fn 没有设置将会调用fn参数\n */\nexports.queueCallFunc = function (paramList, fn, option) { return __awaiter(void 0, void 0, void 0, function () {\n    var _this = this;\n    return __generator(this, function (_a) {\n        return [2 /*return*/, new Promise(function (resolve, reject) {\n                var doActionData = {};\n                var Result = {};\n                var keyArr = [];\n                var yieldResult = null;\n                var doNext = function (key, lastKey) {\n                    return function () {\n                        var yResult = yieldResult.next(Result[lastKey]);\n                        if (!yResult.done) {\n                            if (yResult.value && typeof yResult.value.toString === \"function\" && yResult.value.toString() === \"[object Promise]\") {\n                                yResult.value.then(function (resp) {\n                                    Result[key] = resp;\n                                    goNext(key);\n                                }).catch(function (err) {\n                                    if (!option || !option.throwException) {\n                                        Result[key] = {\n                                            statusCode: \"QueueCall_602\",\n                                            // tslint:disable-next-line: object-literal-sort-keys\n                                            excpetion: err\n                                        };\n                                        goNext(key);\n                                    }\n                                    else if (option && option.throwException) {\n                                        reject({\n                                            exception: err,\n                                            message: err.message,\n                                            statusCode: \"QueueCall_603\",\n                                        });\n                                    }\n                                });\n                            }\n                            else {\n                                Result[key] = yResult.value;\n                                goNext(key);\n                            }\n                        }\n                        else {\n                            resolve(Result);\n                        }\n                        return yResult;\n                    };\n                };\n                var goNext = function (key) {\n                    var index = keyArr.indexOf(key);\n                    var nextKey = keyArr[index + 1];\n                    doNext(nextKey, key)();\n                };\n                if (StaticCommon_1.StaticCommon.isArray(paramList) && paramList.length > 0) {\n                    paramList.map(function (tParam, index) {\n                        var lastKey = index > 0 && paramList[index - 1] ? paramList[index - 1].id : undefined;\n                        keyArr.push(tParam.id);\n                        doActionData[tParam.id] = (function (options, lKey) {\n                            return function (lstResult) {\n                                var lstKey = lKey;\n                                var paramValue = options.params;\n                                var handler = options.owner || _this;\n                                var operateCallback = typeof options.fn === \"function\" ? options.fn : fn;\n                                // tslint:disable-next-line: variable-name\n                                var _option = {\n                                    id: options.id,\n                                    lastKey: lstKey,\n                                    lastResult: lstResult,\n                                    params: options.params,\n                                    result: Result\n                                };\n                                if (StaticCommon_1.StaticCommon.isArray(paramValue)) {\n                                    paramValue.unshift(_option);\n                                    return operateCallback.apply(handler, paramValue);\n                                }\n                                else {\n                                    return operateCallback.call(handler, _option, paramValue);\n                                }\n                            };\n                        })(tParam, lastKey);\n                        lastKey = null;\n                    });\n                    yieldResult = callYieldFunc(doActionData);\n                    doNext(paramList[0].id, undefined)();\n                }\n                else {\n                    resolve({});\n                }\n            })];\n    });\n}); };\n//# sourceMappingURL=QueueCallFun.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elmer_common_1 = require(\"elmer-common\");\nexports.getContext = function (target, defineRules, saveAttrKey) {\n    var attrKey = !elmer_common_1.StaticCommon.isEmpty(saveAttrKey) ? saveAttrKey : \"contextStore\";\n    var contextData = target[attrKey] || {};\n    var contextResult = {};\n    if (defineRules) {\n        // tslint:disable-next-line: forin\n        for (var key in defineRules) {\n            var dRule = defineRules[key];\n            var dData = elmer_common_1.StaticCommon.getValue(contextData, key);\n            if (dData !== undefined) {\n                contextResult[key] = dData;\n            }\n            if (typeof dRule.rule === \"function\") {\n                if (!dRule.rule(dData)) {\n                    // tslint:disable-next-line: no-console\n                    console.error(key + \"\\u5B9A\\u4E49\\u7C7B\\u578B\\u548CContextStore\\u6570\\u636E\\u4E0D\\u5339\\u914D!\");\n                }\n            }\n        }\n    }\n    return contextResult;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elmer_common_1 = require(\"elmer-common\");\nvar defineReduxProvider_1 = require(\"./defineReduxProvider\");\nvar ReduxGlobalStateKeys_1 = require(\"./ReduxGlobalStateKeys\");\nexports.connect = function (reduxController, Component, mapStateToPropsFn, mapDispatchToPropsFn, getGlobalState, defineGlobalState) {\n    var stateID = ReduxGlobalStateKeys_1.REDUX_GLOBAL_LISTEN_KEY;\n    var stateData = getGlobalState(stateID);\n    var checkSelector = Component.prototype.selector;\n    if (checkSelector !== undefined && checkSelector !== null) {\n        if (!stateData) {\n            var gState = defineReduxProvider_1.defineReduxProvider(getGlobalState, defineGlobalState);\n            stateData = gState.listener;\n            gState = null;\n        }\n        if (!stateData[checkSelector]) {\n            elmer_common_1.defineReadonlyProperty(reduxController.stateWatchs, checkSelector, {\n                mapDispatchToProps: mapDispatchToPropsFn,\n                mapStateToProps: mapStateToPropsFn\n            });\n        }\n    }\n    checkSelector = null;\n    stateID = null;\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar elmer_common_1 = require(\"elmer-common\");\nvar createReducer_1 = require(\"./createReducer\");\nvar defineReduxProvider_1 = require(\"./defineReduxProvider\");\nvar ReduxGlobalStateKeys_1 = require(\"./ReduxGlobalStateKeys\");\nvar ReduxController = /** @class */ (function (_super) {\n    __extends(ReduxController, _super);\n    function ReduxController() {\n        var _this = _super.call(this) || this;\n        _this.stateData = {};\n        _this.stateWatchs = {};\n        _this.reducers = {};\n        _this.reducersData = {};\n        _this.initComponents = [];\n        _this.autoSave = false;\n        _this.saveDataKey = \"ElmerReduxState\";\n        if (!_this.reducers) {\n            _this.reducers = {};\n        }\n        return _this;\n    }\n    ReduxController.prototype.setNotifyCallback = function (callbackNames) {\n        this.notifyCallbackNames = callbackNames;\n    };\n    ReduxController.prototype.checkInitStateData = function (getGlobalState, defineGlobalState) {\n        if (!getGlobalState(ReduxGlobalStateKeys_1.REDUX_GLOBAL_STATE_KEY)) {\n            defineReduxProvider_1.defineReduxProvider(getGlobalState, defineGlobalState);\n        }\n        this.getGlobalState = getGlobalState;\n        this.defineGlobalState = defineGlobalState;\n        this.stateData = !this.stateData ? getGlobalState(ReduxGlobalStateKeys_1.REDUX_GLOBAL_STATE_KEY) : __assign(__assign({}, this.stateData), getGlobalState(ReduxGlobalStateKeys_1.REDUX_GLOBAL_STATE_KEY));\n        this.stateWatchs = !this.stateWatchs ? (getGlobalState(ReduxGlobalStateKeys_1.REDUX_GLOBAL_LISTEN_KEY) || {}) : __assign(__assign({}, this.stateWatchs), (getGlobalState(ReduxGlobalStateKeys_1.REDUX_GLOBAL_LISTEN_KEY) || {}));\n    };\n    ReduxController.prototype.connect = function (selector, mapStateToProps, mapDispatchToProps) {\n        if (!this.isEmpty(selector)) {\n            if (!this.stateWatchs[selector]) {\n                this.defineReadOnlyProperty(this.stateWatchs, selector, {\n                    mapDispatchToProps: mapDispatchToProps,\n                    mapStateToProps: mapStateToProps\n                });\n            }\n        }\n    };\n    /**\n     * 根据做connect操作selector获取state\n     * @param selector string 组件tagName\n     */\n    ReduxController.prototype.getStateByConnectSelector = function (selector) {\n        var stateData = this.getStates();\n        var listenData = this.getWatches();\n        if (Object.keys(listenData).indexOf(selector) >= 0) {\n            var listen = listenData[selector];\n            return typeof listen.mapStateToProps === \"function\" && listen.mapStateToProps.call(this, stateData, this);\n        }\n    };\n    ReduxController.prototype.getDispatchByConnectSelector = function (selector) {\n        var watches = this.getWatches();\n        if (Object.keys(watches).indexOf(selector) >= 0) {\n            var listen = watches[selector];\n            return typeof listen.mapDispatchToProps === \"function\" && listen.mapDispatchToProps.call(this, this.dispatch.bind(this), this);\n        }\n    };\n    ReduxController.prototype.checkInitComponents = function (targetComponent, selector, nodeData) {\n        var keysData = Object.keys(this.getWatches());\n        for (var _i = 0, keysData_1 = keysData; _i < keysData_1.length; _i++) {\n            var tmpKey = keysData_1[_i];\n            if (tmpKey === selector) {\n                if (this.isEmpty(this.initComponents[selector])) {\n                    this.initComponents[selector] = {};\n                }\n                this.initComponents[selector][nodeData.virtualID] = targetComponent;\n                break;\n            }\n        }\n        keysData = null;\n    };\n    ReduxController.prototype.removeComponent = function (selector, nodeData) {\n        if (this.initComponents[selector]) {\n            this.initComponents[selector][nodeData.virtualID] = null;\n            delete this.initComponents[selector][nodeData.virtualID];\n            if (Object.keys(this.initComponents[selector]).length <= 0) {\n                delete this.initComponents[selector];\n            }\n        }\n    };\n    ReduxController.prototype.dispatch = function (pushState, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                return [2 /*return*/, new Promise(function (resolve, reject) {\n                        try {\n                            _this.doDispatch(pushState, options);\n                            if (_this.autoSave) {\n                                _this.saveStore.setItem(_this.saveDataKey, JSON.stringify(_this.stateData));\n                            }\n                            resolve({\n                                message: \"success\",\n                                status: 200,\n                            });\n                        }\n                        catch (e) {\n                            reject({\n                                message: e.message,\n                                stack: e.stack,\n                                status: 500\n                            });\n                        }\n                    })];\n            });\n        });\n    };\n    ReduxController.prototype.getStates = function () {\n        var stateData = !this.stateData ? this.getGlobalState(ReduxGlobalStateKeys_1.REDUX_GLOBAL_STATE_KEY) : __assign(__assign({}, this.stateData), this.getGlobalState(ReduxGlobalStateKeys_1.REDUX_GLOBAL_STATE_KEY));\n        return stateData;\n    };\n    ReduxController.prototype.getWatches = function () {\n        var listeners = !this.stateWatchs ? (this.getGlobalState(ReduxGlobalStateKeys_1.REDUX_GLOBAL_LISTEN_KEY) || {}) : __assign(__assign({}, this.stateWatchs), (this.getGlobalState(ReduxGlobalStateKeys_1.REDUX_GLOBAL_LISTEN_KEY) || {}));\n        return listeners;\n    };\n    ReduxController.prototype.doDispatch = function (pushState, options) {\n        var _this = this;\n        var _a;\n        try {\n            if (!this.isEmpty(pushState) && !this.isEmpty(pushState.type)) {\n                // 这里做dispatch操作\n                var reducers = this.reducers;\n                if (!reducers) {\n                    this.reducers = {};\n                    createReducer_1.attachReducerToController(this);\n                    reducers = this.reducers;\n                }\n                // 如何设置指定的selector或者reducer key, 只将state 推送到对应的reducer处理\n                var allowKeys = ((_a = options) === null || _a === void 0 ? void 0 : _a.reducers) || [];\n                var reducerKeys = Object.keys(reducers);\n                var stateData = this.getStates();\n                var _loop_1 = function (tmpReducerKey) {\n                    if (!allowKeys || allowKeys.length <= 0 || (allowKeys.length > 0 && allowKeys.indexOf(tmpReducerKey) >= 0)) {\n                        var oldData = this_1.getValue(stateData, tmpReducerKey);\n                        var oldStateData = oldData !== undefined && null !== oldData ? JSON.parse(JSON.stringify(oldData)) : oldData;\n                        var checkReducer = this_1.getValue(this_1.reducers, tmpReducerKey);\n                        var newState = checkReducer(oldStateData, pushState, {\n                            extend: this_1.extend\n                        });\n                        if (JSON.stringify(oldData) !== JSON.stringify(newState)) {\n                            // reducer返回结果与state树上的数据不一致时，认为已经更新了\n                            var updateState_1 = {};\n                            for (var _i = 0, _a = Object.keys(newState); _i < _a.length; _i++) {\n                                var stateKey = _a[_i];\n                                (function (defineStateKey, defineStateValue) {\n                                    _this.defineStateValue(defineStateValue);\n                                    Object.defineProperty(updateState_1, defineStateKey, {\n                                        configurable: true,\n                                        enumerable: true,\n                                        get: function () {\n                                            return defineStateValue;\n                                        },\n                                        set: function () {\n                                            // tslint:disable-next-line:no-console\n                                            console.error(\"不允许直接修改Redux数据！\", defineStateKey, defineStateValue);\n                                        }\n                                    });\n                                })(stateKey, newState[stateKey]);\n                            }\n                            this_1.setValue(stateData, tmpReducerKey, updateState_1, function (obj, propertyKey, value) {\n                                if (_this.isObject(obj) && !_this.isEmpty(propertyKey)) {\n                                    if (!_this.isEmpty(value)) {\n                                        delete obj[propertyKey];\n                                    }\n                                    Object.defineProperty(obj, propertyKey, {\n                                        configurable: true,\n                                        enumerable: true,\n                                        get: function () {\n                                            return value || {};\n                                        },\n                                        set: function () {\n                                            // tslint:disable-next-line:no-console\n                                            console.error(\"不允许直接修改Redux数据！\");\n                                        }\n                                    });\n                                }\n                            });\n                            this_1.stateData = stateData;\n                            this_1.checkChangeComponent();\n                            return \"break\";\n                        }\n                    }\n                };\n                var this_1 = this;\n                for (var _i = 0, reducerKeys_1 = reducerKeys; _i < reducerKeys_1.length; _i++) {\n                    var tmpReducerKey = reducerKeys_1[_i];\n                    var state_1 = _loop_1(tmpReducerKey);\n                    if (state_1 === \"break\")\n                        break;\n                }\n                reducerKeys = null;\n            }\n            else {\n                if (pushState && this.isEmpty(pushState.type)) {\n                    throw new Error(\"[ReduxController.dispatch] pushState未指定type属性\");\n                }\n                else {\n                    throw new Error(\"[ReduxController.dispatch] pushState不是object对象\");\n                }\n            }\n        }\n        catch (e) {\n            console.error(e);\n        }\n    };\n    ReduxController.prototype.defineStateValue = function (stateValue) {\n        if (this.isObject(stateValue)) {\n            Object.keys(stateValue).map(function (stateKey) {\n                (function (propsKey, propsValue) {\n                    // remove loop defineState, improve dispatch performence\n                    Object.defineProperty(stateValue, propsKey, {\n                        configurable: true,\n                        enumerable: true,\n                        get: function () {\n                            return propsValue;\n                        },\n                        set: function () {\n                            // tslint:disable-next-line:no-console\n                            console.error(\"\\u4E0D\\u5141\\u8BB8\\u76F4\\u63A5\\u4FEE\\u6539Redux\\u6570\\u636E\\uFF01[\" + stateKey + \"]\", stateValue);\n                        }\n                    });\n                })(stateKey, stateValue[stateKey]);\n            });\n        }\n    };\n    ReduxController.prototype.checkChangeComponent = function () {\n        var watchesData = this.getWatches();\n        var watchKeys = Object.keys(watchesData);\n        for (var _i = 0, watchKeys_1 = watchKeys; _i < watchKeys_1.length; _i++) {\n            var wKey = watchKeys_1[_i];\n            var tmpWatch = watchesData[wKey];\n            if (typeof tmpWatch.mapStateToProps === \"function\") {\n                var mapState = tmpWatch.mapStateToProps.call(this, this.getStates(), this);\n                this.checkChangeForComponent(mapState, wKey);\n                mapState = null;\n            }\n            tmpWatch = null;\n        }\n        watchKeys = null;\n        watchesData = null;\n    };\n    ReduxController.prototype.checkChangeForComponent = function (mapState, selector) {\n        var _this = this;\n        Object.keys(this.initComponents).map(function (tmpSelector) {\n            if (tmpSelector === selector) {\n                // 只对项目mapStateToPros，connect的组件做检查\n                var tmpComponents = _this.initComponents[tmpSelector];\n                var _loop_2 = function (virtualID) {\n                    var tmpComponent = tmpComponents[virtualID];\n                    var checkProps = tmpComponent.props || {};\n                    var hasChanged = false;\n                    for (var mapKey in mapState) {\n                        if (mapState && JSON.stringify(mapState[mapKey]) !== JSON.stringify(checkProps[mapKey])) {\n                            hasChanged = true;\n                            delete checkProps[mapKey];\n                            _this.defineReadOnlyProperty(checkProps, mapKey, mapState[mapKey]);\n                        }\n                    }\n                    if (hasChanged) {\n                        if (_this.notifyCallbackNames && _this.notifyCallbackNames.length > 0) {\n                            // 设置多个callback为了兼容旧版本代码\n                            _this.notifyCallbackNames.map(function (callbackName) {\n                                typeof tmpComponent[callbackName] === \"function\" && tmpComponent[callbackName].call(tmpComponent, checkProps);\n                            });\n                        }\n                    }\n                    tmpComponent = null;\n                    checkProps = null;\n                };\n                // tslint:disable-next-line:forin\n                for (var virtualID in tmpComponents) {\n                    _loop_2(virtualID);\n                }\n                tmpComponents = null;\n            }\n        });\n    };\n    ReduxController.className = \"ReduxController\";\n    return ReduxController;\n}(elmer_common_1.Common));\nexports.ReduxController = ReduxController;\n","if(!String.prototype[\"__defineGetter__\"]) {\r\n    // tslint:disable-next-line:typedef\r\n    String.prototype[\"__defineGetter__\"] = function(color,func) {\r\n        this[color] = func;\r\n    };\r\n}\r\n/*\r\nif(!NodeList.prototype.forEach) {\r\n    NodeList.prototype.forEach = function(callBack:Function, thisArgs?: any): void {\r\n        const self = thisArgs || window;\r\n        for(let i=0;i<this.length;i++) {\r\n            callBack.call(self, this[i], this);\r\n        }\r\n    };\r\n}\r\n */\r\nif(!Date.prototype.format) {\r\n    // tslint:disable-next-line: only-arrow-functions\r\n    Date.prototype.format = function(formatStr: string): string {\r\n        const year = this.getFullYear();\r\n        let month = this.getMonth() + 1;\r\n        let date = this.getDate();\r\n        let hour = this.getHours();\r\n        let minutes = this.getMinutes();\r\n        let second = this.getSeconds();\r\n        const milliseconds = this.getMilliseconds();\r\n        month = month > 9 ? month : \"0\" + month;\r\n        date = date > 9 ? date : \"0\" + date;\r\n        hour = hour > 9 ? hour : \"0\" + hour;\r\n        minutes = minutes > 9 ? minutes : \"0\" + minutes;\r\n        second = second > 9 ? second : \"0\" + second;\r\n        const result = formatStr.replace(/YYYY/g, year)\r\n            .replace(/MM/g, month)\r\n            .replace(/DD/g, date)\r\n            .replace(/H/ig, hour)\r\n            .replace(/i/g, minutes)\r\n            .replace(/ms/g, milliseconds)\r\n            .replace(/s/g, second)\r\n            .replace(/yyyy/g, year)\r\n            .replace(/mm/g, month)\r\n            .replace(/dd/g, date);\r\n        return result;\r\n    };\r\n}\r\n","import { Common, queueCallFunc, TypeQueueCallParam } from \"elmer-common\";\nimport { IVirtualElement, VirtualNode, VirtualRender } from \"elmer-virtual-dom\";\nimport { ElmerWorker } from \"elmer-worker\";\nimport { Component, CONST_CLASS_COMPONENT_FLAG } from \"../component/Component\";\nimport { ElmerEvent } from \"../events/ElmerEvent\";\nimport { IElmerEvent } from \"../events/IElmerEvent\";\nimport { wikiState } from \"../hooks/hookUtils\";\nimport { globalVar } from \"../init/globalUtil\";\nimport { autowired } from \"../inject\";\n// import { InjectComponent } from \"../middleware/InjectComponent\";\nimport { RenderMiddleware } from \"../middleware/RenderMiddleware\";\nimport { ElmerRenderAttrs } from \"./ElmerRenderAttrs\";\nimport { RenderQueue, TypeRenderQueueOptions } from \"./RenderQueue\";\n\nexport type TypeUIRenderOptions = {\n    isRSV?: boolean; // Render first init\n    htmlCode?: string|IVirtualElement;\n};\n\ntype TypeElmerRenderOptions = {\n    component: Component;\n    componentFactory?: Function;\n    container: HTMLElement;\n    children?: IVirtualElement[];\n    renderOptions: TypeUIRenderOptions;\n    userComponents?: Component[];\n    event: ElmerEvent;\n    worker: ElmerWorker;\n    missionId: string;\n    nodePath: string;\n    path: number[];\n    prevDom?: HTMLElement;\n};\n/**\n * 渲染虚拟dom事件参数\n */\ntype TypeVirtualDomRenderEvent = {\n    container: HTMLElement;\n    vdom: IVirtualElement;\n    vdomParent: IVirtualElement;\n    prevDom?:HTMLElement|Text|Comment;\n    hasPathUpdate?: boolean;\n};\n/**\n * 渲染自定义组件事件参数\n */\ntype TypeComponentRenderEvent = {\n    UserComponent: Function;\n    container: HTMLElement;\n    vdom: IVirtualElement;\n    vdomParent: IVirtualElement;\n    hasPathUpdate: boolean;\n};\n\nexport class ElmerRender extends Common {\n\n    @autowired(VirtualRender, \"VirtualRender\")\n    private virtualRender: VirtualRender;\n    @autowired(VirtualNode)\n    private virtualElement: VirtualNode;\n    @autowired(RenderQueue)\n    private renderQueue: RenderQueue;\n    // @autowired(InjectComponent)\n    // private injectComponent: InjectComponent;\n    @autowired(ElmerRenderAttrs)\n    private renderDomAttrs: ElmerRenderAttrs;\n    @autowired(RenderMiddleware)\n    private renderMiddleware: RenderMiddleware;\n\n    private options: TypeElmerRenderOptions; // 当前render传入的参数\n    private sourceDom: IVirtualElement; // 代码节点未渲染过的虚拟dom树\n    private newDom: IVirtualElement; // 新节点渲染过的虚拟dom树\n    private oldDom: IVirtualElement; // 旧dom节点\n    private userComponents: any = {}; // 当前组件引用的自定义组件\n    private eventObj: ElmerEvent; // 事件处理模块，全局只有一个对象，从最顶层往下传递\n    private virtualId: string;\n    private renderComponents: any = {}; // 当前组件下的自定义组件渲染对象\n    constructor(options: TypeElmerRenderOptions) {\n        super();\n        let userComponents = (options.component as any).components || {};\n        const fromParentComponents = options.userComponents || {};\n        if(this.isArray(userComponents)) {\n            // 此处转换为了兼容旧代码\n            // 新版本将使用Object去掉Array的配置 {tagName:Component}, tagName在html代码中调用的标签名字，Component为自定义组件类\n            const covertComponents = {};\n            userComponents.map((componentConfig:any) => {\n                covertComponents[componentConfig.selector] = componentConfig.component;\n            });\n            userComponents = covertComponents;\n        }\n        this.virtualRender.setVirtualElement(this.virtualElement);\n        this.virtualId = this.guid() + \"_\" + (new Date()).getTime().toString(); // 当前自定义组件节点ID\n        this.options = options;\n        this.userComponents = {...userComponents, ...fromParentComponents};\n        this.eventObj = options.event;\n        this.options.component.setState = this.setComponentState.bind(this);\n        this.options.component.setData = this.setComponentData.bind(this); // 当前方法由于需要遍历所有属性影响性能不建议使用，使用setState会更好，兼容旧代码\n        this.options.component.dom = {};\n        typeof this.options?.component?.$init === \"function\" && this.options?.component?.$init();\n        if(typeof this.options.component.$resize === \"function\") {\n            this.eventObj.subscribe({\n                callback: this.options.component.$resize,\n                eventName: \"resize\",\n                path: this.options.path,\n                vNodePath: this.options.nodePath\n            });\n        }\n        this.eventObj.nodeRegister(options.nodePath, this.options.path);\n    }\n    /**\n     * 获取最后一个渲染的真实元素\n     */\n    getLastDom():HTMLElement|null|undefined {\n        if(this.newDom && this.newDom.children) {\n            for(let i=this.newDom.children.length - 1;i>=0;i--) {\n                if(this.newDom.children[i].status !== \"DELETE\") {\n                    return this.newDom.children[i].dom as any;\n                }\n            }\n        }\n    }\n    /**\n     * 获取第一个渲染到browser的元素\n     */\n    getFirstDom():HTMLElement|null|undefined {\n        if(this.newDom && this.newDom.children) {\n            for(let i=0;i<this.newDom.children.length;i--) {\n                if(this.newDom.children[i].status !== \"DELETE\") {\n                    return this.newDom.children[i].dom as any;\n                }\n            }\n        }\n    }\n    destroy(): void {\n        this.renderMiddleware.destroy({\n            Component: this.options.componentFactory,\n            componentObj: this.options.component,\n            nodeData: this.options.component.vdom,\n            props: this.options.component.props\n        });\n        if(this.newDom) {\n            this.newDom.children.map((itemDom:IVirtualElement) => {\n                itemDom?.dom?.parentElement.removeChild(itemDom.dom);\n            });\n        }\n        if(this.renderComponents) {\n            Object.keys(this.renderComponents).map((virtualId: string) => {\n                const vRender = <ElmerRender>this.renderComponents[virtualId];\n                vRender.destroy();\n            });\n        }\n        this.unbindAllEvents(true);\n        this.newDom = null;\n        this.oldDom = null;\n    }\n    async render(option: TypeRenderQueueOptions): Promise<any> {\n        return new Promise<any>((resolve, reject) => {\n            this.renderMiddleware.beforeRender({\n                Component: this.options.componentFactory,\n                componentObj: this.options.component,\n                nodeData: this.options.component.vdom,\n                props: this.options.component.props\n            });\n            this.renderQueue.startAction(this.virtualId, option, this.renderAction.bind(this), () => {\n                if(option.firstRender) {\n                    this.renderMiddleware.didMount({\n                        Component: this.options.componentFactory,\n                        componentObj: this.options.component,\n                        nodeData: this.options.component.vdom,\n                        props: this.options.component.props\n                    });\n                    typeof this.options.component.$didMount === \"function\" && this.options.component.$didMount();\n                } else {\n                    this.renderMiddleware.afterRender({\n                        Component: this.options.componentFactory,\n                        componentObj: this.options.component,\n                        nodeData: this.options.component.vdom,\n                        props: this.options.component.props\n                    });\n                    typeof this.options.component.$didUpdate === \"function\" && this.options.component.$didUpdate();\n                }\n                resolve({});\n            }).catch((err) => {\n                // tslint:disable-next-line: no-console\n                console.error(err.stack || err);\n                if(option.firstRender) {\n                    this.renderMiddleware.didMount({\n                        Component: this.options.componentFactory,\n                        componentObj: this.options.component,\n                        nodeData: this.options.component.vdom,\n                        props: this.options.component.props\n                    });\n                    typeof this.options.component.$didMount === \"function\" && this.options.component.$didMount();\n                } else {\n                    this.renderMiddleware.afterRender({\n                        Component: this.options.componentFactory,\n                        componentObj: this.options.component,\n                        nodeData: this.options.component.vdom,\n                        props: this.options.component.props\n                    });\n                    typeof this.options.component.$didUpdate === \"function\" && this.options.component.$didUpdate();\n                }\n                reject(err);\n            });\n        });\n    }\n    private async getSourceCode():Promise<any> {\n        return new Promise<any>((resolve, reject) => {\n            let vdom:IVirtualElement;\n            if(typeof this.options.component.$render === \"function\") {\n                vdom = this.options.component.$render();\n            } else if(typeof this.options.component[\"render\"] === \"function\") {\n                vdom = this.options.component[\"render\"]();\n            } else {\n                vdom = this.options.component[\"templateCode\"];\n            }\n            if(this.isString(vdom)) {\n                // vdom = this.htmlParse.parse(vdom);\n                this.options.worker.callObjMethod(\"htmlParse\",\"parse\", vdom as any)\n                    .then((resp) => {\n                        resolve(resp.data);\n                    }).catch((err) => {\n                        reject(err);\n                    });\n            } else {\n                resolve(vdom);\n            }\n        });\n    }\n    private async renderAction(options:TypeRenderQueueOptions):Promise<any> {\n        return new Promise<any>((resolve, reject) => {\n            try {\n                typeof this.options.component.$before === \"function\" && typeof this.options.component.$before();\n                this.getSourceCode().then((vdom) => {\n                    this.oldDom = this.newDom;\n                    this.sourceDom = vdom;\n                    if(options.state) {\n                        this.extend(this.options.component.state, options.state);\n                    }\n                    if(options.data) {\n                        this.extend(this.options.component, options.data);\n                    }\n                    // 准备渲染虚拟dom，做数据绑定和diff运算\n                    typeof this.options.component.$beforeVirtualRender === \"function\" && this.options.component.$beforeVirtualRender(this.sourceDom);\n                    const renderDom = this.virtualRender.render(this.sourceDom, this.oldDom, this.options.component, {\n                        children: this.options.children,\n                        rootPath: this.options.path,\n                        sessionId: this.virtualId\n                    });\n                    // this.virtualRender.unBind(this.virtualId, \"onBeforeRender\", renderEventId); // render 结束移除监听事件\n                    typeof this.options.component.$afterVirtualRender === \"function\" && this.options.component.$afterVirtualRender(renderDom);\n                    typeof this.options.component.$beforeRender === \"function\" && this.options.component.$beforeRender();\n                    // 准备渲染数据\n                    const renderParams: TypeQueueCallParam[] = [];\n                    let hasPathUpdate = false;\n                    renderDom.children.map((dom:IVirtualElement, index:number) => {\n                        if(dom.status === \"DELETE\" || dom.status === \"APPEND\" || dom.status === \"MOVE\" || dom.status === \"MOVEUPDATE\") {\n                            hasPathUpdate = true;\n                        }\n                        renderParams.push({\n                            id: \"virtualRender_\" + index,\n                            params: {\n                                parent: this.options.container,\n                                vdom:dom,\n                                vdomParent: renderDom\n                            }\n                        });\n                    });\n                    if(!hasPathUpdate) {\n                        hasPathUpdate = renderDom.deleteElements && renderDom.deleteElements.length > 0;\n                    }\n                    this.unbindAllEvents(); // 清空上一次的注册的事件，重新添加\n                    this.deleteVDomOutOfLogic(renderDom.deleteElements); // 删除dom diff算法计算出需要手动删除的节点\n                    queueCallFunc(renderParams, (option, params):any => {\n                        let prevDom:any = option.lastResult ? option.lastResult.prevDom : null;\n                        if(option.id === \"virtualRender_0\") {\n                            prevDom = <any>this.options.prevDom;\n                        }\n                        return this.renderVirtualDom({\n                            container: params.parent,\n                            hasPathUpdate,\n                            prevDom,\n                            vdom: params.vdom,\n                            vdomParent: params.vdomParent\n                        });\n                    }, {\n                        throwException: true\n                    }).then(() => {\n                        resolve({});\n                    }).catch((err) => {\n                        reject({\n                            message: err.message,\n                            stack: this.isObject(err.exception) ? err.exception.stack : err.stack,\n                            statusCode: err.statusCode\n                        });\n                    });\n                    this.newDom = renderDom; // 渲染结束更新节点到对应的属性\n                    this.options.component.vdom = renderDom;\n                }).catch((err) => {\n                    reject(err);\n                });\n            } catch(e) {\n                // tslint:disable-next-line: no-console\n                console.error(e);\n                reject({\n                    message: e.message,\n                    statusCode: \"T_500\"\n                });\n            }\n        });\n    }\n    /**\n     * 移除所有事件监听\n     */\n    private unbindAllEvents(deleteVNode?: boolean): void {\n        this.eventObj.nodeUnRegister(this.options.nodePath, deleteVNode);\n    }\n    private async setComponentState(state:any, force?: boolean): Promise<any> {\n        return new Promise((resolve, reject) => {\n            if(this.isObject(state)) {\n                const component = this.options.component;\n                const stateKeys = Object.keys(state);\n                let dataChanged = force;\n                if(component.state) {\n                    for(const sKey of stateKeys) {\n                        if(this.isObject(state[sKey]) && this.isObject(component.state[sKey])) {\n                            if(!this.isEqual(state[sKey], component.state[sKey])) {\n                                dataChanged = true;\n                                break;\n                            }\n                        } else {\n                            if(state[sKey] !== component.state[sKey]) {\n                                dataChanged = true;\n                                break;\n                            }\n                        }\n                    }\n                } else {\n                    dataChanged = true;\n                }\n                if(dataChanged) {\n                    this.render({\n                        firstRender: false,\n                        state\n                    }).then(() => {\n                        resolve({});\n                    }).catch((err) => {\n                        typeof this.options.component[\"$error\"] === \"function\" && this.options.component[\"$error\"](err);\n                        reject(err);\n                    });\n                } else {\n                    resolve({});\n                }\n            } else {\n                throw new Error(\"setState action get an wrong data,it\\\"s must be an object!\");\n            }\n        });\n    }\n    /**\n     * 对比当前组件所有属性, 当前方法不建议使用\n     * @deprecated\n     * @param data 对比数据\n     * @param fn 重新渲染结束回调\n     */\n    private async setComponentData(data:any): Promise<any> {\n        return new Promise<any>((resolve, reject) => {\n            // tslint:disable-next-line: no-console\n            console.warn(\"The SetData method is not recommended. Use setState instead。\");\n            if(this.isObject(data)) {\n                const component = this.options.component;\n                const dataKeys = Object.keys(data);\n                let dataChanged = false;\n                for(const sKey of dataKeys) {\n                    if(this.isObject(data[sKey]) && this.isObject(component[sKey])) {\n                        if(!this.isEqual(data[sKey], component[sKey])) {\n                            dataChanged = true;\n                            break;\n                        }\n                    } else {\n                        if(data[sKey] !== component[sKey]) {\n                            dataChanged = true;\n                            break;\n                        }\n                    }\n                }\n                if(dataChanged) {\n                    this.extend(this.options.component, data);\n                    this.render({\n                        data,\n                        firstRender: false\n                    }).then(() => {\n                        resolve({});\n                    }).catch((err) => {\n                        typeof this.options.component[\"$error\"] === \"function\" && this.options.component[\"$error\"](err);\n                        reject(err);\n                    });\n                } else {\n                    resolve({});\n                }\n            } else {\n                throw new Error(\"setState action get an wrong data,it\\\"s must be an object!\");\n            }\n        });\n    }\n    private renderVirtualDom(options: TypeVirtualDomRenderEvent): Promise<any> {\n        const container:HTMLElement = options.container,\n            vdom: IVirtualElement = options.vdom,\n            vdomParent: IVirtualElement = options.vdomParent,\n            prevDom:HTMLElement|Text|Comment = options.prevDom;\n        return new Promise<any>((resolve, reject) => {\n            try {\n                const elmerData = globalVar();\n                const components = elmerData.components || {};\n                vdom.isDiff = false;\n                if(this.isEmpty(vdom.tagName)) {\n                    reject({\n                        message: \"virtual dom node is not correct, missing tagName attribute\",\n                        statusCode: \"VR_404\"\n                    });\n                } else {\n                    const UserComponent = this.userComponents[vdom.tagName] || components[vdom.tagName];\n                    if(typeof UserComponent === \"function\") {\n                        this.renderUserComponent({\n                            UserComponent,\n                            container,\n                            hasPathUpdate: options.hasPathUpdate,\n                            vdom,\n                            vdomParent\n                        }).then(() => {\n                            resolve({\n                                prevDom: this.getPrevDomByVirtualNode(vdom)\n                            });\n                        }).catch((err) => {\n                            reject({\n                                message: err.message,\n                                stack: this.isObject(err.exception) ? err.exception.stack : err.stack,\n                                statusCode: err.statusCode\n                            });\n                        });\n                    } else {\n                        // 渲染浏览器标准元素\n                        // vdom.status === \"NORMAL\"  不需要做任何操作\n                        let hasPathChange = vdom.deleteElements && vdom.deleteElements.length > 0;\n                        if(vdom.status === \"APPEND\") {\n                            // 新增元素\n                            this.vdomAppendRender(container,vdom,vdomParent, prevDom as any);\n                            hasPathChange = true;\n                        } else if(vdom.status === \"UPDATE\") {\n                            if(this.isDOM(vdom.dom)) {\n                                this.renderDomAttrs.render(vdom.dom, vdom);\n                            } else {\n                                if(vdom.tagName === \"text\") {\n                                    ((vdom.dom as any) as Text).textContent = vdom.innerHTML;\n                                } else {\n                                    // vdom.dom对象为undefined或null即为不存在对应的真实dom节点，需要新增\n                                    !vdom.dom && this.vdomAppendRender(container, vdom, vdomParent, prevDom as any);\n                                }\n                            }\n                        } else if(vdom.status === \"MOVE\") {\n                            this.vdomMove(container, vdom, vdomParent);\n                            hasPathChange = true;\n                        } else if(vdom.status === \"MOVEUPDATE\") {\n                            this.vdomMove(container, vdom, vdomParent);\n                            hasPathChange = true;\n                            this.renderDomAttrs.render(vdom.dom as HTMLElement, vdom);\n                        } else if(vdom.status === \"NORMAL\") {\n                            if(!vdom.dom) {\n                                this.vdomAppendRender(container, vdom, vdomParent, prevDom as any);\n                            }\n                        } else if(vdom.status === \"DELETE\") {\n                            hasPathChange = true;\n                        }\n                        if(!hasPathChange) {\n                            hasPathChange = options.hasPathUpdate;\n                        }\n                        if(vdom.status !== \"DELETE\") {\n                            (vdom.dom as any).path = vdom.path;\n                            (vdom.dom as any).vNodePath = this.options.nodePath;\n                            if(!this.isEmpty(vdom.props.id)) {\n                                this.options.component.dom[vdom.props.id] = vdom.dom;\n                            }\n                            this.subscribeEventAction(vdom);\n                            if(vdom.dataSet && vdom.dataSet.type === \"html\") {\n                                (vdom.dom as HTMLElement).innerHTML = vdom.innerHTML;\n                                resolve({\n                                    prevDom: vdom.dom\n                                });\n                            } else {\n                                if(vdom.children && vdom.children.length > 0) {\n                                    // 当status为delete时删除父节点并移除事件监听就行，不需要在对子节点循环删除\n                                    const renderParams: TypeQueueCallParam[] = [];\n                                    vdom.children.map((childDom:IVirtualElement, index:number) => {\n                                        renderParams.push({\n                                            id: \"virtualRender_\" + index,\n                                            params: {\n                                                parent: vdom.dom,\n                                                vdom: childDom,\n                                                vdomParent: vdom\n                                            }\n                                        });\n                                    });\n                                    queueCallFunc(renderParams, ({}, params):any => {\n                                        return this.renderVirtualDom({\n                                            container: params.parent,\n                                            hasPathUpdate: hasPathChange,\n                                            vdom: params.vdom,\n                                            vdomParent: params.vdomParent as any\n                                        });\n                                    }, {\n                                        throwException: true\n                                    }).then(() => {\n                                        resolve({\n                                            hasPathUpdate: hasPathChange,\n                                            prevDom: vdom.dom\n                                        });\n                                    }).catch((err) => {\n                                        reject({\n                                            message: err.message,\n                                            stack: this.isObject(err.exception) ? err.exception.stack : err.stack,\n                                            statusCode: err.statusCode\n                                        });\n                                    });\n                                } else {\n                                    resolve({\n                                        hasPathUpdate: hasPathChange,\n                                        prevDom: vdom.dom\n                                    });\n                                }\n                            }\n                        } else {\n                            // 节点不是删除状态时，children是空， 当前循环到此结束\n                            if(vdom.status === \"DELETE\") {\n                                // 当节点被标记为删除时，移除dom元素，并销毁事件监听和虚拟dom对象\n                                // todo release all user defined component\n                                // 删除事件监听已经在渲染前做删除，不需要在此处做操作\n                                if(vdom.dom) {\n                                    vdom.dom.parentElement && vdom.dom.parentElement.removeChild(vdom.dom);\n                                }\n                                this.deleteVirtualDom(vdom);\n                            }\n                            if(!this.isEmpty(vdom.props.id)) {\n                                delete this.options.component.dom[vdom.props.id]; // 移除当前dom\n                            }\n                            resolve({\n                                hasPathUpdate: hasPathChange,\n                                prevDom: vdom.dom\n                            });\n                        }\n                    }\n                    // 删除不必要的元素，非异步过程不需要等待返回\n                    this.deleteVDomOutOfLogic(vdom.deleteElements);\n                }\n            } catch (e) {\n                reject({\n                    exception: e,\n                    message: e.message,\n                    statusCode: \"RT_500\"\n                });\n            }\n        });\n    }\n    private renderUserComponent(options: TypeComponentRenderEvent):Promise<any> {\n        const UserComponent: any = options.UserComponent,\n            container:HTMLElement = options.container,\n            vdom: IVirtualElement = options.vdom,\n            vdomParent: IVirtualElement = options.vdomParent;\n        return new Promise<any>((resolve, reject) => {\n            const prevDom = this.getPrevDom(vdom, vdomParent);\n            const middlewareObj = this.renderMiddleware;\n            const doUpdateAction = (vRender:ElmerRender, vRDom: IVirtualElement, doUpdatePrevDom:HTMLElement) => {\n                const props = {};\n                vRender.options.prevDom = doUpdatePrevDom;\n                this.extend(props, vRender.options.component.props, true);\n                this.extend(props, vRDom.changeAttrs, true);\n                middlewareObj.beforeUpdate({\n                    Component: UserComponent,\n                    componentObj: vRender.options.component,\n                    nodeData: vdom,\n                    props\n                });\n                // this.injectComponent.beforeUpdateComponent(vRender.options.component, UserComponent, props, vRDom);\n                typeof vRender.options.component.$willReceiveProps === \"function\" && vRender.options.component.$willReceiveProps(props, vRender.options.component.props);\n            };\n            vdom.tagAttrs = {\n                isComponent: true\n            };\n            if(vdom.status === \"APPEND\") {\n                const flag = (<any>UserComponent).flag;\n                const props = vdom.props;\n                middlewareObj.beforeInit({\n                    Component: UserComponent,\n                    componentObj: null,\n                    nodeData: vdom,\n                    props\n                });\n                // this.injectComponent.beforeInitComponent(UserComponent, props, vdom);\n                const virtualId = \"component_\" + this.guid();\n                const missionId = this.options.missionId;\n                let component;\n                if(flag === CONST_CLASS_COMPONENT_FLAG) {\n                    // 类组件\n                    component = new UserComponent(props);\n                } else {\n                    const hookStore = {\n                        getNode: {},\n                        useCallback: {},\n                        useComponent: {},\n                        useEffect: {},\n                        useState: {}\n                    };\n                    // 高阶组件，即是一个函数的静态组件\n                    component = {\n                        dom: {},\n                        props,\n                        selector: vdom.tagName,\n                        // tslint:disable-next-line: object-literal-sort-keys\n                        __factory: UserComponent,\n                        // tslint:disable-next-line: object-literal-shorthand\n                        render: function():any {\n                            wikiState[missionId] = {\n                                _component: UserComponent,\n                                _renderObj: vRender,\n                                _this: this,\n                                getNodeIndex: 0,\n                                hookStore,\n                                useCallbackIndex: 0,\n                                useComponentIndex: 0,\n                                useEffectIndex: 0,\n                                useStateIndex: 0\n                            };\n                            wikiState[\"missionId\"] = missionId;\n                            return this[\"__factory\"].call(this, vdom.props);\n                        },\n                        $willReceiveProps(newProps: any): void {\n                            (this as any).props = newProps;\n                            middlewareObj.willReceiveProps({\n                                Component: UserComponent,\n                                componentObj: this,\n                                nodeData: vdom,\n                                props: newProps\n                            });\n                        }\n                    };\n                }\n                const vRender = new ElmerRender({\n                    children: vdom.children,\n                    component,\n                    componentFactory: UserComponent,\n                    container,\n                    event: this.eventObj,\n                    missionId: this.options.missionId,\n                    nodePath: this.isEmpty(this.options.nodePath) ? virtualId : this.options.nodePath + \".\" + virtualId,\n                    path: vdom.path,\n                    prevDom: this.getPrevDomByVirtualNode(prevDom) as HTMLElement,\n                    renderOptions: this.options.renderOptions,\n                    worker: this.options.worker\n                });\n                vdom.virtualID = virtualId;\n                // this.injectComponent.initComponent(component, UserComponent, vdom);\n                this.renderComponents[virtualId] = vRender;\n                middlewareObj.init({\n                    Component: UserComponent,\n                    componentObj: component,\n                    nodeData: vdom,\n                    props\n                });\n                if(!this.isEmpty(props.id)) {\n                    this.options.component.dom[props.id] = component;\n                }\n                // ---- some thing is doing in init\n                vRender.render({\n                    firstRender: true\n                }).then(() => {\n                    resolve({});\n                }).catch((err) => {\n                    reject(err);\n                });\n                if(!this.isEmpty(vdom.props.id)) {\n                    this.options.component.dom[vdom.props.id] = component;\n                }\n            } else if(vdom.status === \"UPDATE\") {\n                const vRender:ElmerRender = this.renderComponents[vdom.virtualID];\n                if(vRender) {\n                    const rPrevDom = prevDom ? prevDom.dom as any : null;\n                    if(this.checkVirtualNodeChange(vdom)) {\n                        // 如果子节点有变化，先执行render方法往下执行渲染\n                        // 由于触发willReciveProps方法未必会执行渲染动作，所以先执行子节点的渲染在触发willReciveProps事件\n                        vRender.options.children = vdom.children;\n                        vRender.render({\n                            firstRender: false\n                        }).finally(() => {\n                            doUpdateAction(vRender, vdom, rPrevDom);\n                            resolve({});\n                        });\n                    } else {\n                        doUpdateAction(vRender, vdom, rPrevDom);\n                        resolve({});\n                    }\n                    // 预留执行其他方法\n                } else {\n                    resolve({});\n                }\n            } else if(vdom.status === \"MOVE\") {\n                this.moveComponentPosition(container ,vdom, vdomParent);\n                const vRender:ElmerRender = this.renderComponents[vdom.virtualID];\n                if(this.checkVirtualNodeChange(vdom)) {\n                    const rPrevDom = prevDom ? prevDom.dom as any : null;\n                    // 如果子节点有变化，先执行render方法往下执行渲染\n                    // 由于触发willReciveProps方法未必会执行渲染动作，所以先执行子节点的渲染在触发willReciveProps事件\n                    vRender.options.children = vdom.children;\n                    vRender.render({\n                        firstRender: false\n                    }).finally(() => {\n                        doUpdateAction(vRender, vdom, rPrevDom);\n                        resolve({});\n                    });\n                } else {\n                    resolve({});\n                }\n            } else if(vdom.status === \"MOVEUPDATE\") {\n                this.moveComponentPosition(container, vdom, vdomParent);\n                const vRender:ElmerRender = this.renderComponents[vdom.virtualID];\n                if(vRender) {\n                    const rPrevDom = prevDom ? prevDom.dom as any : null;\n                    if(this.checkVirtualNodeChange(vdom)) {\n                        // 如果子节点有变化，先执行render方法往下执行渲染\n                        // 由于触发willReciveProps方法未必会执行渲染动作，所以先执行子节点的渲染在触发willReciveProps事件\n                        vRender.options.children = vdom.children;\n                        vRender.render({\n                            firstRender: false\n                        }).finally(() => {\n                            doUpdateAction(vRender, vdom, rPrevDom);\n                            resolve({});\n                        });\n                    } else {\n                        doUpdateAction(vRender, vdom, rPrevDom);\n                        resolve({});\n                    }\n                } else {\n                    resolve({});\n                }\n            } else if(vdom.status === \"DELETE\") {\n                const vRender:ElmerRender = this.renderComponents[vdom.virtualID];\n                vRender && vRender.destroy();\n                delete this.renderComponents[vdom.virtualID];\n                if(!this.isEmpty(vdom.props.id)) {\n                    delete this.options.component.dom[vdom.props.id];\n                }\n                resolve({});\n            } else {\n                if(this.checkVirtualNodeChange(vdom)) {\n                    const vRender:ElmerRender = this.renderComponents[vdom.virtualID];\n                    vRender.options.children = vdom.children;\n                    vRender.render({\n                        firstRender: false\n                    }).finally(() => {\n                        resolve({});\n                    });\n                } else {\n                    resolve({});\n                }\n            }\n        });\n    }\n    private checkVirtualNodeChange(vdom:IVirtualElement): boolean|null {\n        if(vdom.status !== \"NORMAL\") {\n            return true;\n        } else {\n            if(vdom.children && vdom.children.length > 0) {\n                for(const item of vdom.children) {\n                    if(this.checkVirtualNodeChange(item)) {\n                        return true;\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * 新节点位置变化，需要做移动操作\n     * @param container\n     * @param vdom\n     * @param vdomParent\n     */\n    private vdomMove(container:HTMLElement, vdom:IVirtualElement, vdomParent:IVirtualElement): void {\n        const index = vdom.path[vdom.path.length - 1];\n        const prevIndex = index - 1;\n        const prevDom = vdomParent.children[prevIndex];\n        if(prevDom) {\n            const domNext = prevDom.dom.nextElementSibling;\n            if(domNext) {\n                container.insertBefore(vdom.dom, domNext);\n            } else {\n                container.appendChild(vdom.dom);\n            }\n        } else {\n            // 未找到上一个节点，则任务当前节点为第一个节点\n            if(container.children.length > 0) {\n                container.insertBefore(vdom.dom, container.children[0]);\n            } else {\n                container.appendChild(vdom.dom);\n            }\n        }\n        (vdom.dom as any).path = vdom.path;\n    }\n    private createDomByVdom(vdom:IVirtualElement): HTMLElement|Text|Comment {\n        if(vdom.tagName === \"text\") {\n            return document.createTextNode(vdom.innerHTML);\n        } else if(vdom.tagName === \"<!--\") {\n            return document.createComment(vdom.innerHTML);\n        } else {\n            return document.createElement(vdom.tagName);\n        }\n    }\n    private vdomAppendRender(container:HTMLElement,vdom:IVirtualElement, vdomParent:IVirtualElement, prevSlideDom?: HTMLElement|Text): void {\n        const prevDom = this.getPrevDom(vdom, vdomParent);\n        const newDom = this.createDomByVdom(vdom);\n        (newDom as any).virtualId = this.virtualId; // 给所有需要做事件绑定元素绑定当前层级上虚拟节点id，用于区分不同的节点\n        if(prevDom) {\n            // 查找到前一个节点，需要插入到前一个节点后面，紧跟着上一个节点，防止节点位置错误\n            let prevDomElement = prevDom.dom;\n            if(prevDom?.tagAttrs?.isComponent || !this.isEmpty(vdom.virtualID)) {\n                // 当前组件为自定义组件，需要到virtualComponent查询相近的元素\n                // 防止拿到错误的元素\n                const vRender = <ElmerRender>this.renderComponents[prevDom.virtualID];\n                prevDomElement = vRender.getLastDom();\n            }\n            if(prevDomElement) {\n                const domNext = prevDomElement.nextElementSibling;\n                if(domNext) {\n                    container.insertBefore(newDom, domNext);\n                } else {\n                    container.appendChild(newDom);\n                }\n            } else {\n                // 上一个节点的真实节点不存在时，插入到最前面\n                // 一般这种情况是不会出现的，出现这种情况证明渲染逻辑已经出现问题\n                if(container.children.length > 0) {\n                    container.insertBefore(newDom, container.children[0]);\n                } else {\n                    container.appendChild(newDom);\n                }\n            }\n        } else {\n            if(!prevSlideDom) {\n                // 针对第一层节点的渲染\n                // 查找不到上一个节点，说明当前节点需要插入到第一个位置\n                if(container.children.length > 0) {\n                    container.insertBefore(newDom, container.children[0]);\n                } else {\n                    container.appendChild(newDom);\n                }\n            } else {\n                // 针对第一层节点的渲染, 第一层会渲染拿从上一节点传进来的参考元素\n                const nextSlideDom = prevSlideDom.nextElementSibling;\n                if(nextSlideDom) {\n                    container.insertBefore(newDom, nextSlideDom);\n                } else {\n                    container.appendChild(newDom);\n                }\n            }\n        }\n        if([\"text\", \"<!--\"].indexOf(vdom.tagName)<0) {\n            // 文本节点不需要做事件绑定和属性渲染\n            this.renderDomAttrs.render(newDom as HTMLElement, vdom);\n        }\n        vdom.dom = newDom;\n    }\n    /**\n     * 绑定事件监听\n     * @param dom 真实dom节点\n     * @param vdom 虚拟dom节点数据\n     */\n    private subscribeEventAction(vdom:IVirtualElement): void {\n        const allEvents = vdom.events || {};\n        const eventKeys = Object.keys(vdom.events);\n        if(vdom.events && eventKeys.length > 0) {\n            Object.keys(vdom.events).map((eventName: string): void => {\n                const eventCallback = vdom.events[eventName];\n                if(typeof eventCallback === \"function\") {\n                    // 找到存在的回调函数再做事件监听绑定\n                    ((evtDom: IVirtualElement,evtName: string, callback:Function, componenent:any) => {\n                        const eventId = this.eventObj.subscribe({\n                            callback: (event:IElmerEvent) => {\n                                const newEvent:any = {\n                                    ...event,\n                                    cancelBubble: false,\n                                    data: evtDom.data,\n                                    dataSet: evtDom.dataSet\n                                };\n                                const eventResult = callback.call(componenent, newEvent);\n                                event.cancelBubble = newEvent.cancelBubble;\n                                return eventResult;\n                            },\n                            eventName: evtName,\n                            path: evtDom.path,\n                            vNodePath: this.options.nodePath,\n                        });\n                    })(vdom, eventName, eventCallback, this.options.component);\n                }\n            });\n        }\n    }\n    private getPrevDom(vdom:IVirtualElement, vdomParent:IVirtualElement): IVirtualElement|null {\n        const index = vdom.path[vdom.path.length - 1];\n        const prevIndex = index - 1;\n        const prevDom = vdomParent.children[prevIndex];\n        if(prevDom) {\n            if(prevDom.status !== \"DELETE\") {\n                return prevDom;\n            } else {\n                return this.getPrevDom(prevDom, vdomParent);\n            }\n        }\n    }\n    private getNextDom(vdom:IVirtualElement, vdomParent:IVirtualElement): IVirtualElement|null {\n        const index = vdom.path[vdom.path.length - 1];\n        const nextIndex = index + 1;\n        const nextDom = vdomParent.children[nextIndex];\n        if(nextDom) {\n            if(nextDom.status !== \"DELETE\") {\n                return nextDom;\n            } else {\n                return this.getNextDom(nextDom, vdomParent);\n            }\n        }\n    }\n    /**\n     * 遇到需要删除的节点时，释放所有子节点数据\n     * @param vdom\n     */\n    private deleteVirtualDom(vdom:IVirtualElement): void {\n        if(vdom?.tagAttrs?.isComponent) {\n            if(this.renderComponents[vdom.virtualID]) {\n                (this.renderComponents[vdom.virtualID] as ElmerRender).destroy();\n                delete this.renderComponents[vdom.virtualID];\n            }\n        }\n        vdom.status === \"DELETE\";\n        vdom.dom = null;\n        vdom.events = null;\n        vdom.props = {};\n        if(vdom.children && vdom.children.length > 0) {\n            vdom.children.map((vdomChild) => {\n                this.deleteVirtualDom(vdomChild);\n            });\n        }\n    }\n    /**\n     * 删除通过diff运算检测出在旧dom树存在节点，但是在新dom树没有出现节点的元素\n     * 这种元素在新dom树无法标记，所以需要手动删除\n     * @param deleteVdoms\n     */\n    private deleteVDomOutOfLogic(deleteVdoms: IVirtualElement[]): void {\n        if(deleteVdoms && deleteVdoms.length > 0) {\n            for(const delDom of deleteVdoms) {\n                if(!this.isEmpty(delDom.props.id)) {\n                    delete this.options.component.props[delDom.props.id];\n                }\n                if(delDom?.tagAttrs?.isComponent) {\n                    const dRender = <ElmerRender>this.renderComponents[delDom.virtualID];\n                    dRender && dRender.destroy();\n                    delete this.renderComponents[delDom.virtualID];\n                } else {\n                    if(delDom.dom) {\n                        delDom.dom.parentElement && delDom.dom.parentElement.removeChild(delDom.dom);\n                        // 每次渲染前都会将事件监听清除，重新挂载新的事件监听, 不需要每次都做判断\n                        // 此操作对渲染功能影响是否需要在做处理，留到后续版本做更新\n                        // todo: Release event listener\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * 自定义组件位置发生变化，需要根据实际dom树移动，不需要删除在重新创建\n     * @param vdom 当前虚拟dom节点\n     * @param vdomParent 当前虚拟dom节点的父节点\n     */\n    private moveComponentPosition(container: HTMLElement,vdom:IVirtualElement, vdomParent: IVirtualElement): void {\n        // 位置发生变化时，只有往后查找渲染的节点，因为只有通过insertBefore这个方法才可以移动节点\n        // 如果是往前查找，找到前一个节点时需要找下一个节点才能调用insertBefore这时候会陷入死循环\n        const vRender = <ElmerRender>this.renderComponents[vdom.virtualID];\n        const nextDom = this.getNextDom(vdom, vdomParent);\n        let nextSlideDom = nextDom.dom;\n        if(nextDom?.tagAttrs?.isComponent || !this.isEmpty(nextDom.virtualID)) {\n            nextSlideDom = (<ElmerRender>this.renderComponents[nextDom.virtualID])?.getFirstDom();\n        }\n        if(nextSlideDom) {\n            const moveMaxIndex = vRender.newDom.children.length;\n            let moveIndex = moveMaxIndex - 1;\n            // 由于移动使用insertBefore方法，所以nextSlideDom是当前component的下一个元素\n            // 所以应该是从最后的元素开始移动\n            while(moveIndex >= 0) {\n                const moveDom = vRender.newDom.children[moveIndex];\n                if(moveDom.status !== \"DELETE\") {\n                    container.insertBefore(moveDom.dom, nextSlideDom);\n                    nextSlideDom = moveDom.dom; // 下一个元素应该是当前元素\n                }\n                moveIndex -= 1;\n            }\n        } else {\n            // 通过diff运算检测出当前元素需要移动，但是处于当前同级dom列表中的最后一个，往后追加即可\n            vRender.newDom.children.map((moveItem:IVirtualElement) => {\n                if(moveItem.status !== \"DELETE\") {\n                    // status为DELETE状态的虚拟dom是没有真实dom节点可以操作的\n                    container.appendChild(moveItem.dom);\n                }\n            });\n        }\n    }\n    private getPrevDomByVirtualNode(vdom:IVirtualElement): HTMLElement|Element|SVGElement|Text|Comment {\n        if(vdom) {\n            if(!this.isEmpty(vdom.virtualID)) {\n                const vRender:ElmerRender = this.renderComponents[vdom.virtualID];\n                if(vRender) {\n                    return vRender.getLastDom();\n                }\n            } else {\n                return vdom.dom;\n            }\n        }\n    }\n}\n","import { StaticCommon as utils } from \"elmer-common\";\nimport { IVirtualElement } from \"elmer-virtual-dom\";\nimport { injectable } from \"../inject/injectable\";\n\n@injectable(\"ElmerRenderAttrs\")\nexport class ElmerRenderAttrs {\n    /**\n     * 渲染dom属性值\n     * @param dom 真实dom节点\n     * @param vdom 虚拟dom节点\n     */\n    render(dom:HTMLElement, vdom:IVirtualElement): void {\n        if(vdom.tagName === \"text\") {\n            dom.textContent = vdom.innerHTML;\n        } else {\n            const updateProps = vdom.status === \"APPEND\" ? vdom.props : vdom.changeAttrs;\n            const isLink = /^(a)$/i.test(dom.tagName);\n            if(updateProps) {\n                Object.keys(updateProps).map((attrKey: string) => {\n                    const attrValue = updateProps[attrKey];\n                    if(/^checked$/i.test(attrKey)) {\n                        dom.setAttribute(attrKey, attrValue ? \"checked\" : null);\n                        (dom as any).checked = attrValue;\n                    } else if(/^show$/i.test(attrKey)) {\n                        dom.style.display = attrValue ? \"block\" : \"none\";\n                    } else if(/^iShow$/.test(attrKey)) {\n                        dom.style.display = attrValue ? \"inline-block\" : \"none\";\n                    } else if(/^href$/i.test(attrKey)) {\n                        if(isLink) {\n                            if(/^\\s*javascript\\s*\\:/i.test(attrValue)) {\n                                throw new Error(\"Script is not allowed in the hyperlink's attribute\");\n                            } else {\n                                dom.setAttribute(attrKey, attrValue);\n                            }\n                        }\n                    } else {\n                        dom.setAttribute(attrKey, attrValue);\n                    }\n                });\n            }\n            if(isLink) {\n                if(utils.isEmpty(vdom.props.href)) {\n                    dom.setAttribute(\"href\", \"javascript:void(0);\");\n                }\n            }\n            if(vdom.deleteAttrs) {\n                for(const attrKey of vdom.deleteAttrs) {\n                    dom.removeAttribute(attrKey);\n                }\n            }\n        }\n    }\n}\n","import { Common } from \"elmer-common\";\nexport type TypeRenderQueueOptions = {\n    state?: any;\n    data?: any;\n    firstRender?: boolean;\n};\ntype TypeRenderQueueAction = {\n    actionId: string;\n    isRended?: boolean;\n    options: TypeRenderQueueOptions;\n    resolve:Function;\n    reject: Function;\n};\n\ntype RenderCallback = (data: TypeRenderQueueOptions) => Promise<any>;\n\ntype TypeRenderQueueSession = {\n    actionList: TypeRenderQueueAction[];\n    actionRuning: boolean;\n    actionRuningIndexs: number[];\n    lastActionIndex: number;\n    onFinish: Function;\n    render: RenderCallback;\n};\n\n/**\n * 队列执行渲染任务\n * 1、当前模块主要功能将一次渲染当做一个任务推送到队列中去执行\n * 2、在第一次渲染还未执行结束时触发第二次或更多次渲染任务，在第一次渲染结束以后，立即执行第二次渲染，此时会将新增的任务数据合并一次执行\n */\nexport class RenderQueue extends Common {\n    static className: string = \"RenderQueue\";\n    private queueList: any = {};\n    startAction(sessionId: string, options: TypeRenderQueueOptions, renderCallback: RenderCallback,finishCallback?: Function): Promise<any> {\n        return new Promise<any>((resolve, reject) => {\n            const actionId = \"queueRenderAction_\" + this.guid();\n            if(!this.queueList[sessionId]) {\n                this.queueList[sessionId] = {\n                    actionList: [],\n                    actionRuning: false,\n                    actionRuningIndexs: [],\n                    lastActionIndex: -1,\n                    render: renderCallback\n                };\n            }\n            this.queueList[sessionId].onFinish = finishCallback;\n            this.queueList[sessionId].actionList.push(<TypeRenderQueueAction>{\n                actionId,\n                isRended: false,\n                options,\n                reject,\n                resolve\n            });\n            this.runActions(sessionId);\n        });\n    }\n    private runActions(sessionId: string): void {\n        const renderSession: TypeRenderQueueSession = this.queueList[sessionId];\n        if(!renderSession.actionRuning) {\n            // 没有正在执行任务，开始检测状态并进入执行阶段\n            // 当有任务正在执行时跳过触发阶段\n            const actionLength = renderSession.actionList.length;\n            if(actionLength > 0) {\n                // has task waiting\n                const updateState = {};\n                const updateData = {};\n                for(let i=actionLength - 1;i>renderSession.lastActionIndex;i--) {\n                    if(!renderSession.actionList[i].isRended) {\n                        // 合并队列中的数据，统一执行一次\n                        // 添加当前队列索引到执行状态的列表中，下一次执行任务忽略执行过的队列\n                        const curAction = renderSession.actionList[i];\n                        this.extend(updateState, curAction.options.state);\n                        this.extend(updateData, curAction.options.data);\n                        renderSession.actionRuningIndexs.push(i);\n                        renderSession.actionList[i].isRended = true;\n                    }\n                }\n                renderSession.lastActionIndex = actionLength - 1;\n                renderSession.actionRuning = true;\n                renderSession.render({\n                    data: updateData,\n                    state: updateState\n                }).then(() => {\n                    // 将当前执行的数据都\n                    this.checkSessionStatus(sessionId, false);\n                }).catch((err) => {\n                    this.checkSessionStatus(sessionId, true, err);\n                });\n            }\n        }\n    }\n    private checkSessionStatus(sessionId: string, error: any, exception?: any): void {\n        const renderSession: TypeRenderQueueSession = this.queueList[sessionId];\n        if(renderSession && renderSession.actionList) {\n            // 当任务队列长度等于已经执行过的索引长度一致时可认为任务已经执行完成\n            const finished = renderSession.actionList.length === renderSession.actionRuningIndexs.length;\n            if(finished) {\n                // 任务结束以后执行回调\n                renderSession.actionRuning = false;\n                for(const action of renderSession.actionList) {\n                    if(error) {\n                        action.reject(exception);\n                    } else {\n                        action.resolve({});\n                    }\n                }\n                // 通知最后一次触发任务时的回调，某些场景不需要每次渲染任务结束都需要执行操作\n                typeof renderSession.onFinish === \"function\" && renderSession.onFinish();\n            } else {\n                // 任务未执行完成，继续下一次任务\n                renderSession.actionRuning = false;\n                this.runActions(sessionId);\n            }\n        }\n    }\n}\n","import { Component } from \"../src/component/Component\";\nimport { declareComponent } from \"../src/component/declareComponent\";\nimport { ElmerDOM } from \"../src/domEvent/ElmerDom\";\nimport { IElmerResizeEvent } from \"../src/events/IElmerEvent\";\nimport { useEffect, useState } from \"../src/hooks\";\nimport { autowired } from \"../src/inject/injectable\";\nimport { PropTypes } from \"../src/propsValidation\";\nimport Button from \"./Button\";\n\ntype TypeDemoAppState = {\n    time: string;\n    index: number;\n    app: any;\n    listData?: any[];\n    demoApp?: string;\n};\ntype TypeDemoAppProps = {\n    title: string;\n    actionRegion: Function;\n}\n\nconst TestApp = (props:any, options) => {\n    const setState1 = useState(\"test1\", '001100');\n    const setState2 = useState(\"test2\", false);\n    props.time = props.time + \"__APP__\";\n    return \"<div><select><option>Hello world_{{state.test1}}</option></select><a href=''>Hello XXS{{state.test2}}</a></div>\";\n}\n\n\n@declareComponent({\n    selector: \"demo-app\",\n    components: {\n        TestApp: TestApp,\n        Button: Button\n    },\n    connect:{\n        mapStateToProps: (state:any, obj:any) => {\n            return {demoApp: obj.getValue(state,\"demo.demoApp\") || \"init App\"};\n        },\n        mapDispatchToProps: (dispatch) => ({\n            actionRegion: (data) => (dispatch(data))\n        }),\n        reducers: [\n            {\n                name: \"demo\",\n                callback: (state, action) => {\n                    switch(action.type) {\n                        case \"DEMO\":\n                            return {\n                                version: \"test\"\n                            };\n                        case \"ChangeRegion\": {\n                            console.log(\"update from redux\");\n                            return {\n                                ...state,\n                                demoApp: action.data\n                            }\n                        }\n                            default:\n                                return {\n                                    demoApp: true,\n                                    demoTitle: \"redux demo\"\n                                };\n                    }\n                }\n            }\n        ]\n    }\n})\nexport default class DemoApp extends Component<TypeDemoAppProps,TypeDemoAppState> {\n    static propType = {\n        title: {\n            rule: PropTypes.string\n        },\n        actionRegion: {\n            rule: PropTypes.object.isRequired\n        }\n    }\n    state = {\n        time: \"\",\n        index: 0,\n        app: \"App\",\n        listData: [],\n        showList: true\n    }\n    @autowired(ElmerDOM)\n    private $: ElmerDOM;\n    $init(): void {\n        for(let i=0;i<5;i++) {\n            this.state.listData.push({\n                title: \"App_\" + i,\n                value: i\n            });\n        }\n    }\n    onClick(): void {\n        this.props.actionRegion({\n            type: \"ChangeRegion\",\n            data: (new Date()).getTime().toString() + \"_by_redux\",\n            index: this.state.index + 1\n        });\n        console.log(\"onEventChange\");\n    }\n    $resize(evt:IElmerResizeEvent): void {\n        console.log(evt.width, evt.height, evt.outWidth, evt.outHeight);\n    }\n    $willReceiveProps(props): void {\n        if(props.demoApp !== this.state.time) {\n            this.setState({\n                time: props.demoApp\n            })\n        }\n    }\n    onCloseAnimation() {\n        const ulDom = this.dom['test'];\n        if(this.state.showList) {\n            this.$.slideOut(ulDom);\n            this.setState({\n                showList: false,\n            });\n        } else {\n            this.$.slideIn(ulDom);\n            this.setState({\n                showList: true\n            });\n        }\n        \n    }\n    $render() {\n        return `<div><button et:click=\"onClick\">OnClickEvent</button><span>my class<b>format {{state.time}}</b> staff, stateIndex: {{state.index}}</span>\n        <div><context/></div>\n        <button et:click='onCloseAnimation'>{{state.showList ? '消失动画' : '显示动画'}}</button>\n        <ul  id='test' style=\"overflow:hidden;\">\n        <li em:for=\"let item in this.state.listData\"><span>{{item.title}}</span></li>\n        </ul>\n        </div>\n        <TestApp time=\"{{state.app}}\"/><Button title=\"{{state.showList ? '消失动画' : '显示动画'}}\" id=\"diffDebugger\" />`;\n    }\n}","import { RenderMiddleware } from \"../middleware/RenderMiddleware\";\nimport { getWikiState, setWikiState, TypeHookStore } from \"./hookUtils\";\n\ntype TypeUseEffectOptions<P,S> = {\n    props: P;\n    state: S\n};\ntype TypeUseEffectFn<P, S> = (eventName: keyof RenderMiddleware, options: TypeUseEffectOptions<P,S>) => Function|undefined|null;\n\nexport const useEffect = <P={},S={}>(callback: TypeUseEffectFn<P,S>): void => {\n    const componentObj = <any>getWikiState(\"_this\");\n    const hookStore = <TypeHookStore>getWikiState(\"hookStore\");\n    const hookIndex = <any>getWikiState(\"useEffectIndex\");\n    if(!hookStore) {\n        throw new Error(\"[useEffect] Something went wrong!!!\");\n    }\n    if(!hookStore.useEffect[hookIndex]) {\n        if(typeof callback !== \"function\") {\n            throw new Error(\"[useEffect] the argument of callback is not a function.\");\n        }\n        hookStore.useEffect[hookIndex] = {\n            callback,\n            destoryCallback: null\n        };\n        if(typeof componentObj.$unMount !== \"function\") {\n            componentObj.$unMount = () => {\n                // tslint:disable-next-line: forin\n                for(const fKey in hookStore.useEffect) {\n                    try {\n                        const fn = hookStore.useEffect[fKey];\n                        typeof fn === \"function\" && fn();\n                    } catch (e) {\n                        // tslint:disable-next-line: no-console\n                        console.error(e);\n                    }\n                }\n            };\n        }\n        componentObj[\"$useEffect\"] = callback;\n    }\n    setWikiState(\"useEffectIndex\", hookIndex + 1);\n};\n","import { getWikiState, setWikiState, TypeHookStore } from \"./hookUtils\";\n\ntype TypeUseStateResult = [any, (state:any) => void, Function];\n\nexport const useState = (stateKey: string, initState?: any):TypeUseStateResult => {\n    const componentObj = <any>getWikiState(\"_this\");\n    const hookStore = <TypeHookStore>getWikiState(\"hookStore\");\n    const useStateIndex = <any>getWikiState(\"useStateIndex\");\n    if(!hookStore) {\n        throw new Error(\"[useState] Something went wrong!!!\");\n    }\n    if(!hookStore.useState[useStateIndex]) {\n        const updateStateHook:any = ((obj:any, store: TypeHookStore, stateIndex: any, stateName: string): Function => {\n            return (newState:any) => {\n                const useStateObj = store.useState[stateIndex];\n                if(JSON.stringify(useStateObj.state) !== JSON.stringify(newState)) {\n                    const updateState = {};\n                    updateState[stateName] = newState;\n                    store.useState[stateIndex].state = newState;\n                    obj.setState(updateState);\n                }\n            };\n        })(componentObj, hookStore, useStateIndex, stateKey);\n        const getState = ((store, index) => {\n            return () => {\n                const useStateObj = store.useState[index];\n                return useStateObj.state;\n            };\n        })(hookStore, useStateIndex);\n        hookStore.useState[useStateIndex] = {\n            state: initState,\n            stateKey,\n            // tslint:disable-next-line: object-literal-sort-keys\n            callback: updateStateHook,\n            getState\n        };\n        if(!componentObj.state) {\n            componentObj.state = {};\n        }\n        componentObj.state[stateKey] = initState;\n        setWikiState(\"useStateIndex\", useStateIndex + 1);\n        return [initState, updateStateHook, getState];\n    } else {\n        setWikiState(\"useStateIndex\", useStateIndex + 1);\n        return [\n            hookStore.useState[useStateIndex].state,\n            hookStore.useState[useStateIndex].callback,\n            hookStore.useState[useStateIndex].getState\n        ];\n    }\n};\n","import { StaticCommon as utils } from \"elmer-common\";\nimport { getWikiState, setWikiState, TypeHookStore } from \"./hookUtils\";\n\ntype TypeUseCallbackHookOptions = {\n    arguments?: any[]; // protect arguments, 设置以后只有当参数有变化时才会执行\n    initValue?: any;\n    name?: string; // 不为空时将callback绑定到Component对象上\n};\n\ntype TypeUseCallback = <T>() => T;\n\nexport const useCallback = (callback: Function, options?: TypeUseCallbackHookOptions): [any, TypeUseCallback] => {\n    const componentObj = <any>getWikiState(\"_this\");\n    const hookStore = <TypeHookStore>getWikiState(\"hookStore\");\n    const hookIndex = <any>getWikiState(\"useCallbackIndex\");\n    if(!hookStore) {\n        throw new Error(\"[useState] Something went wrong!!!\");\n    }\n    if(!hookStore.useCallback[hookIndex]) {\n        const callbackHook:any = ((obj:any, store: TypeHookStore, stateIndex: any, attrName: string, myCallback: Function): Function => {\n            // tslint:disable-next-line: only-arrow-functions\n            const newCallback =  function():any {\n                const hookStoreObj = store.useCallback[stateIndex];\n                const args = hookStoreObj.arguments || [];\n                const newArgs = arguments;\n                if(args && args.length > 0) {\n                    let hasChange = false;\n                    if(newArgs.length !== args.length) {\n                        hasChange = true;\n                    } else {\n                        // tslint:disable-next-line: forin\n                        for(const key in args) {\n                            const arg = args[key];\n                            if(!utils.isEqual(arg, newArgs[key])) {\n                                hasChange = true;\n                                break;\n                            }\n                        }\n                    }\n                    if(hasChange) {\n                        const myResult = myCallback.apply(null, newArgs);\n                        store.useCallback[stateIndex].value = myResult;\n                        store.useCallback[stateIndex].arguments = newArgs;\n                        return myResult;\n                    } else {\n                        return hookStoreObj.value;\n                    }\n                } else {\n                    const myResult = myCallback.apply(null, newArgs);\n                    store.useCallback[stateIndex].value = myResult;\n                    return myResult;\n                }\n            };\n            if(!utils.isEmpty(attrName)) {\n                obj[attrName] = newCallback;\n            }\n            return newCallback;\n        })(componentObj, hookStore, hookIndex, options?.name, callback);\n        hookStore.useCallback[hookIndex] = {\n            arguments: options?.arguments,\n            callback: callbackHook,\n            value: options?.initValue\n        };\n        setWikiState(\"useCallbackIndex\", hookIndex + 1);\n        return [options?.initValue, callbackHook];\n    } else {\n        setWikiState(\"useCallbackIndex\", hookIndex + 1);\n        return [hookStore.useCallback[hookIndex].value, hookStore.useCallback[hookIndex].callback];\n    }\n};\n","import { StaticCommon as utils } from \"elmer-common\";\nimport { getWikiState, setWikiState, TypeHookStore } from \"./hookUtils\";\n\nexport const useComponent = (selector: string, Component: Function): Function => {\n    const renderObj = <any>getWikiState(\"_renderObj\");\n    const hookStore = <TypeHookStore>getWikiState(\"hookStore\");\n    const hookIndex = <any>getWikiState(\"useComponentIndex\");\n    const componentObj = <any>getWikiState(\"_this\");\n    if(!hookStore) {\n        throw new Error(\"[useState] Something went wrong!!!\");\n    }\n    if(utils.isEmpty(selector)) {\n        throw new Error(\"[useComponent] selector can not be an empty string\");\n    }\n    if(!hookStore.useComponent[hookIndex]) {\n        const useComponentCallback = ((vRenderObj: any, obj:any) => {\n            return (NewComponent: Function) => {\n                vRenderObj.userComponents[selector] = NewComponent;\n            };\n        })(renderObj, componentObj);\n        if(!renderObj.userComponents[selector]) {\n            renderObj.userComponents[selector] = Component;\n        }\n        hookStore.useComponent[hookIndex] = useComponentCallback;\n        setWikiState(\"useComponentIndex\", hookIndex + 1);\n        return useComponentCallback;\n    } else {\n        setWikiState(\"useComponentIndex\", hookIndex + 1);\n        return hookStore.useComponent[hookIndex];\n    }\n};\n","import { getWikiState, setWikiState, TypeHookStore } from \"./hookUtils\";\n\n/**\n * 获取节点对象\n * @param id 节点ID\n */\nexport const getNode = (id: string): Function => {\n    const componentObj = <any>getWikiState(\"_this\");\n    const hookStore = <TypeHookStore>getWikiState(\"hookStore\");\n    const hookIndex = <any>getWikiState(\"getNodeIndex\");\n    if(!hookStore) {\n        throw new Error(\"[useState] Something went wrong!!!\");\n    }\n    if(!hookStore.getNode[hookIndex]) {\n        const newGetNode = ((obj: any, nodeId: string):Function => {\n            return ():any => {\n                return obj.dom[nodeId];\n            };\n        })(componentObj, id);\n        hookStore.getNode[hookIndex] = newGetNode;\n        setWikiState(\"getNodeIndex\", hookIndex + 1);\n        return newGetNode();\n    } else {\n        setWikiState(\"getNodeIndex\", hookIndex + 1);\n        return hookStore.getNode[hookIndex]();\n    }\n};\n","import { EnumCheckerTypes ,IDataTypeChecker, IDataTypeCheckerOption } from \"./typeChecker\";\r\nimport { oneEnumValueOfValidator, oneOfValidator, oneValueOfValidator } from \"./validators/dataTypeValidators\";\r\n\r\nfunction onError(msg: string, fn: Function, params:any): void {\r\n    if(fn && typeof fn === \"function\") {\r\n        fn(msg, params);\r\n    } else {\r\n        // tslint:disable-next-line:no-console\r\n        console.error(msg, params);\r\n    }\r\n}\r\n\r\nfunction createParamTypeChecker(checkerType: string, types: Array<Function|IDataTypeChecker>):IDataTypeChecker {\r\n    function factory(value: any, options?: IDataTypeCheckerOption): boolean {\r\n        const cType = (<any>factory).type;\r\n        const exOptions:IDataTypeCheckerOption = options ? options : {\r\n            error: null\r\n        };\r\n        let validate = null;\r\n        switch(cType) {\r\n            case EnumCheckerTypes.oneOf: {\r\n                validate = oneOfValidator;\r\n                break;\r\n            }\r\n            case EnumCheckerTypes.oneValueOf: {\r\n                validate = oneValueOfValidator;\r\n                break;\r\n            }\r\n            case EnumCheckerTypes.oneEnumValueOf: {\r\n                validate = oneEnumValueOfValidator;\r\n                break;\r\n            }\r\n        }\r\n        exOptions.silence = true;\r\n        if(typeof validate === \"function\") {\r\n            if(!validate(value, (<any>factory).checkers, exOptions) && value !== undefined && value !== null) {\r\n                const lType = Object.prototype.toString.call(value);\r\n                const checkTypes = [];\r\n                types.map((tmpChecker:any) => {\r\n                    checkTypes.push(tmpChecker.type);\r\n                });\r\n                const checkTypesStr = checkTypes.join(\",\");\r\n                onError(`参数类型不匹配,定义类型[${cType}(${checkTypesStr})]，传入值类型${lType}。`, (options ? options.error : null), types);\r\n                return false;\r\n            }\r\n        } else {\r\n            onError(cType+\"未定义validate方法。\", (options ? options.error : null), types);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    // tslint:disable-next-line:only-arrow-functions\r\n    (<any>factory).isRequired = function(value: any, options?: IDataTypeCheckerOption): boolean {\r\n        if(value === undefined || value === null || (typeof value === \"string\" && value.length<=0) ) {\r\n            const errMsg = \"属性值不能为undefined或null\";\r\n            options && typeof options.error === \"function\" && options.error(errMsg);\r\n            return false;\r\n        } else {\r\n            return factory(value, options);\r\n        }\r\n    };\r\n    (<any>factory).isRequired.type = checkerType;\r\n    function factoryParamTypeChecker(myCheckerType: string, checkers:Array<Function|IDataTypeChecker>): Function {\r\n        if(!checkers || checkers.length<=0) {\r\n            throw new Error(\"设置错误，至少设置一个数据类型检查规则。\");\r\n        } else {\r\n            (<any>factory).checkers = checkers;\r\n            (<any>factory).type = myCheckerType;\r\n            return factory;\r\n        }\r\n    }\r\n    return <IDataTypeChecker>factoryParamTypeChecker(checkerType, types);\r\n}\r\n\r\nexport const createParamChecker = createParamTypeChecker;\r\n","import { Component } from \"../src/component/Component\";\nimport { declareComponent } from \"../src/component/declareComponent\";\nimport { Loadable } from \"../src/component/Loadable\";\nimport { useEffect, useState, useCallback } from \"../src/hooks\";\n\ntype TypeReduxAppProps = {\n    updateTestApp: Function;\n    testApp: string;\n};\n\ntype TypeReduxAppState = {\n    testApp?: string;\n};\n\nconst AsyncApp = Loadable({\n    loader: () => import(/* webpackChunkName: \"AsyncApp\" */ \"./AsyncApp\")\n})\n\nconst AsyncRouter = Loadable({\n    loader: () => import(/* webpackChunkName: \"AsyncRouter\" */ \"./AsyncRouter\"),\n    loading: () => '<h2>Hellow world</h2>'\n});\n\n@declareComponent({\n    selector: \"ReduxApp\",\n    components: {\n        AsyncApp,\n        AsyncRouter\n    },\n    connect: {\n        mapStateToProps: (state) => {\n            return {\n                ...state.app\n            };\n        },\n        // tslint:disable-next-line: object-literal-sort-keys\n        mapDispatchToProps: (dispatch) => ({\n            updateTestApp: (data) => (dispatch(data))\n        }),\n        reducers: [\n            {\n                name: \"app\",\n                // tslint:disable-next-line: object-literal-sort-keys\n                callback: (state, action) => {\n                    switch(action.type) {\n                        case \"TestApp\": {\n                            return {\n                                ...state,\n                                testApp: action.data\n                            };\n                        }\n                        default: {\n                            return {\n                                testApp: \"Init App\"\n                            };\n                        }\n                    }\n                }\n            }\n        ]\n    }\n})\nexport class ReduxApp extends Component<TypeReduxAppProps, TypeReduxAppState> {\n    constructor(props: TypeReduxAppProps) {\n        super(props);\n        this.state = {\n            testApp: props.testApp\n        };\n    }\n    $willReceiveProps(props: TypeReduxAppProps): void {\n        console.log(\"update---\", props.testApp);\n        this.setState({\n            testApp: props.testApp\n        });\n    }\n    onClick(): void {\n        this.props.updateTestApp({\n            type: \"TestApp\",\n            // tslint:disable-next-line: object-literal-sort-keys\n            data: \"New State - \" + (new Date()).getTime()\n        });\n    }\n    render(): any {\n        return `<div>\n            <span>__Test data is from redux__: {{props.testApp}}</span>\n            <button et:click=\"onClick\">Update Redux</button>\n            <AsyncApp />\n        </div>`;\n    }\n}\n\nexport default (props) => {\n    const [{}, setScore, getScore] = useState(\"score\", 1122);\n    const [{}, setVisible] = useState(\"visible\", false);\n    const [{}, setTitle] = useState('title', props.title);\n    useCallback(() => {\n        setScore(getScore() + 1);\n        setVisible(true);\n    }, {\n        name: \"onClick\"\n    });\n    useEffect<any>((name, {props}) => {\n        setTitle(props.title);\n        return () => {\n            console.log('useEffect unMount', 'haha');\n        };\n    });\n    return `<div>\n        <label>\n            <button et:click='onClick'>\n                <span>Hook TestButton{{state.score}}__{{state.title}}</span>\n                <i show=\"{{state.visible}}\">Visible_Test{{props.title}}</i>\n            </button>\n        </label>\n        <hr/>\n        <eui-redux-app />\n    <div>`;\n}\n","import { StaticCommon as utils } from \"elmer-common\";\nimport { useComponent, useEffect, useState } from \"../hooks\";\ntype TypeLoadableOptions = {\n    loader: Function;\n    loading?: Function;\n    error?: Function;\n    className?: string;\n};\n\nconst defaultLoading = () => {\n    return `<div style=\"display: inline-block;width: 48px;height: 48px;text-align: center; padding: 20px;\" data-type=\"html\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"48px\" height=\"60px\" viewBox=\"0 0 24 30\" style=\"enable-background:new 0 0 50 50\" xml:space=\"preserve\">\n    <rect x=\"0\" y=\"9.22656\" width=\"4\" height=\"12.5469\" fill=\"#FF6700\">\n        <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n        <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n    </rect>\n    <rect x=\"10\" y=\"5.22656\" width=\"4\" height=\"20.5469\" fill=\"#FF6700\">\n        <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n        <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0.15s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n    </rect>\n    <rect x=\"20\" y=\"8.77344\" width=\"4\" height=\"13.4531\" fill=\"#FF6700\">\n        <animate attributeName=\"height\" attributeType=\"XML\" values=\"5;21;5\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n        <animate attributeName=\"y\" attributeType=\"XML\" values=\"13; 5; 13\" begin=\"0.3s\" dur=\"0.6s\" repeatCount=\"indefinite\"></animate>\n    </rect>\n</svg></div>`;\n};\nconst defaultError = ({message, statusCode, showCode}) => {\n    const [{}, setStatusInfo] = useState(\"statusInfo\", {\n        message,\n        showCode,\n        statusCode\n    });\n    useEffect((name, { props }):any => {\n        if(name === \"willReceiveProps\") {\n            setStatusInfo({\n                message: (props as any).message,\n                showCode: (props as any).showCode,\n                statusCode: (props as any).statusCode\n            });\n        }\n    });\n    return \"<label><span>{{state.statusInfo.message}}</span><i>{{state.statusInfo.statusCode}}</i></label>\";\n};\nexport const Loadable = (options: TypeLoadableOptions) => {\n    return () => {\n        const [{}, setLoaded] = useState(\"loaded\", false);\n        const [ appId ] = useState(\"asyncAppId\", \"__AsyncAppId__\" + utils.guid());\n        const [{}, setStatus] = useState(\"loadStatus\", {\n            message: \"Ok\",\n            showError: false,\n            statusCode: \"200\"\n        });\n        const useNewComponent = useComponent(\"AsyncComponent\", options.loading || defaultLoading);\n        useComponent(\"ErrorInfo\", options.error || defaultError);\n        useComponent(\"Loading\", options.loading || defaultLoading);\n        useState(\"className\", options.className);\n        useEffect((name):any => {\n            if(name === \"didMount\") {\n                if(typeof options.loader === \"function\") {\n                    options.loader().then((resp:any) => {\n                        if(resp[\"__esModule\"] && typeof resp.default === \"function\") {\n                            const AsyncComponet= resp.default;\n                            useNewComponent(AsyncComponet);\n                            setStatus({\n                                showError: false\n                            });\n                        } else {\n                            setStatus({\n                                message: \"AsyncComponent module not an function or constructor.\",\n                                showError: true\n                            });\n                        }\n                        setLoaded(true);\n                        // const timeH = setTimeout(() => {\n                        //     setLoaded(true);\n                        //     clearTimeout(timeH);\n                        // }, 2000);\n                    }).catch((err) => {\n                        // tslint:disable-next-line: no-console\n                        console.error(err);\n                        setStatus({\n                            message: \"Load asyncComponent fail: \" + err.message,\n                            showError: true\n                        });\n                        setLoaded(true);\n                    });\n                }\n            }\n        });\n        return `<div>\n            <AsyncComponent if=\"{{state.loaded eq true && state.loadStatus.showError eq false}}\" id=\"{{state.asyncAppId}}\" status=\"{{state.loaded}}\"/>\n            <Loading if=\"{{state.loaded eq false}}\"/>\n            <ErrorInfo if=\"{{state.loadStatus.showError}}\" message=\"{{state.loadStatus.message}}{{state.loaded}}\" statusCode=\"{{state.loadStatus.statusCode}}\"/>\n        </div>`;\n    };\n};\n","import {\r\n    attachReducerToController,\r\n    defineReduxProvider,\r\n    defineStateOperateAction,\r\n    IStoragePlugin,\r\n    IStoragePluginFactory,\r\n    ReduxController,\r\n    TypeReduxSaveStorage\r\n} from \"elmer-redux\";\r\nimport { Component } from \"../../component/Component\";\r\nimport { declareComponent } from \"../../component/declareComponent\";\r\nimport { defineGlobalState, getGlobalState } from \"../../init/globalUtil\";\r\nimport { autoInit, autowired } from \"../../inject\";\r\nimport { IPropCheckRule, PropTypes } from \"../../propsValidation\";\r\n\r\ntype TypeReduxProviderPropsCheckRule = {\r\n    autoSave: IPropCheckRule;\r\n    reducers: IPropCheckRule;\r\n    saveStore: IPropCheckRule;\r\n    defineStorage: IPropCheckRule;\r\n};\r\ntype TypeReduxProviderProps = {\r\n    autoSave: boolean;\r\n    reducers: any;\r\n    saveStore: TypeReduxSaveStorage;\r\n    defineStorage: IStoragePluginFactory;\r\n};\r\n\r\n// transfer getGlobalState and defineGlobalState to reduxController,\r\ndefineStateOperateAction(autoInit(ReduxController), getGlobalState, defineGlobalState);\r\n\r\n@declareComponent({\r\n    selector: \"ReduxProvider\"\r\n})\r\nexport class ReduxProvider extends Component {\r\n    static propType: TypeReduxProviderPropsCheckRule = {\r\n        autoSave: {\r\n            description: \"自动保存到sessionStorage\",\r\n            rule: PropTypes.bool\r\n        },\r\n        defineStorage: {\r\n            description: \"define storage factory\",\r\n            rule: PropTypes.func\r\n        },\r\n        reducers: {\r\n            defaultValue: {},\r\n            description: \"Redux监听方法集合\",\r\n            rule: PropTypes.object.isRequired\r\n        },\r\n        saveStore: {\r\n            defaultValue: \"SessionStorage\",\r\n            description: \"Redux保存方式\",\r\n            rule: PropTypes.oneValueOf([\"SessionStorage\", \"LocalStorage\", \"StoragePlugin\"]).isRequired\r\n        }\r\n    };\r\n    props: TypeReduxProviderProps;\r\n    @autowired(ReduxController)\r\n    private reduxController: ReduxController;\r\n    constructor(props: TypeReduxProviderProps) {\r\n        super(props);\r\n        this.reduxController.reducers = props.reducers;\r\n        this.reduxController.autoSave = props.autoSave;\r\n        switch(props.saveStore) {\r\n            case \"SessionStorage\":\r\n                this.reduxController.saveStore = sessionStorage;\r\n                break;\r\n            case \"LocalStorage\":\r\n                this.reduxController.saveStore = localStorage;\r\n                break;\r\n            case \"StoragePlugin\":\r\n                if(typeof props.defineStorage === \"function\") {\r\n                    this.reduxController.saveStore = <IStoragePlugin>(new props.defineStorage());\r\n                } else {\r\n                    throw new Error(\"The defineStroage attribute can not be null or undefined.\");\r\n                }\r\n                break;\r\n            default:\r\n                this.reduxController.saveStore = sessionStorage;\r\n        }\r\n        // tslint:disable-next-line: no-console\r\n        console.log(\"Init Redux Provider\");\r\n    }\r\n    $init(): void {\r\n        defineReduxProvider(getGlobalState, defineGlobalState);\r\n        attachReducerToController(this.reduxController);\r\n        this.initDefaultState();\r\n    }\r\n    initDefaultState(): void {\r\n        let myReducer = this.props.reducers || {};\r\n        // restore the redux state from dataStorage if autoSave equal true;\r\n        if(this.reduxController.autoSave) {\r\n            let stateDataStr = this.reduxController.saveStore.getItem(this.reduxController.saveDataKey);\r\n            if(!this.isEmpty(stateDataStr)) {\r\n                this.reduxController.stateData = JSON.parse(stateDataStr);\r\n                stateDataStr = null;\r\n            }\r\n        }\r\n        this.initState(myReducer, this.reduxController.stateData, null);\r\n        myReducer = null;\r\n        this.reduxController.reducers = null; // 在初始化时已经做扁平化处理，保存的节点不需要;\r\n        delete this.reduxController.reducers;\r\n    }\r\n    render(): string {\r\n        return \"<context />\";\r\n    }\r\n    private initState(reducer: any, stateData: any, nodeKey: string): any {\r\n        if (this.isFunction(reducer)) {\r\n            const initState = reducer(undefined, {\r\n                type: \"INIT_REDUCER_STATE\"\r\n            });\r\n            const nodeKeyValue = nodeKey.replace(/^\\./, \"\");\r\n            delete this.reduxController.reducersData[nodeKeyValue];\r\n            Object.defineProperty(this.reduxController.reducersData, nodeKeyValue, {\r\n                configurable: true,\r\n                enumerable: true,\r\n                get: () => {\r\n                    return reducer;\r\n                },\r\n                set: () => {\r\n                    // tslint:disable-next-line:no-console\r\n                    console.error(`不允许直接修改Redux数据。[${nodeKeyValue}]`, nodeKey);\r\n                }\r\n            });\r\n            if(undefined === initState || null === initState) {\r\n                // tslint:disable-next-line: no-console\r\n                console.error(\"No init state return from reducer: \" + nodeKeyValue);\r\n            } else {\r\n                this.defineStateValue(initState);\r\n                return initState;\r\n            }\r\n        } else {\r\n            Object.keys(reducer).map((tmpKey: string) => {\r\n                if(!stateData[tmpKey]) {\r\n                    stateData[tmpKey] = {};\r\n                }\r\n                const myData = this.initState(\r\n                    reducer[tmpKey],\r\n                    stateData[tmpKey],\r\n                    (!this.isEmpty(nodeKey) ? [nodeKey, tmpKey].join(\".\") : tmpKey)\r\n                );\r\n                if(myData) {\r\n                    this.defineReadOnlyProperty(stateData, tmpKey, myData);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    private defineStateValue(stateValue: any): void {\r\n        if(this.isObject(stateValue)) {\r\n            Object.keys(stateValue).map((stateKey: any) => {\r\n                ((propsKey: any, propsValue: any) => {\r\n                    if(this.isObject(propsValue)) {\r\n                        this.defineStateValue(propsValue);\r\n                    }\r\n                    Object.defineProperty(stateValue, propsKey, {\r\n                        configurable: true,\r\n                        enumerable: true,\r\n                        get: () => {\r\n                            return propsValue;\r\n                        },\r\n                        set: () => {\r\n                            // tslint:disable-next-line:no-console\r\n                            console.error(`不允许直接修改Redux数据。${stateKey}`, stateValue);\r\n                        }\r\n                    });\r\n                })(stateKey, stateValue[stateKey]);\r\n            });\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":""}